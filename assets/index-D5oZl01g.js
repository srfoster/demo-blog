function Jb(l,u){for(var i=0;i<u.length;i++){const d=u[i];if(typeof d!="string"&&!Array.isArray(d)){for(const p in d)if(p!=="default"&&!(p in l)){const m=Object.getOwnPropertyDescriptor(d,p);m&&Object.defineProperty(l,p,m.get?m:{enumerable:!0,get:()=>d[p]})}}}return Object.freeze(Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}))}(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))d(p);new MutationObserver(p=>{for(const m of p)if(m.type==="childList")for(const b of m.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&d(b)}).observe(document,{childList:!0,subtree:!0});function i(p){const m={};return p.integrity&&(m.integrity=p.integrity),p.referrerPolicy&&(m.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?m.credentials="include":p.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function d(p){if(p.ep)return;p.ep=!0;const m=i(p);fetch(p.href,m)}})();var Q_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Y$(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var p$={exports:{}},dp={},g$={exports:{}},Ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z_;function qb(){if(Z_)return Ze;Z_=1;var l=Symbol.for("react.element"),u=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),b=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),L=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),D=Symbol.iterator;function R(H){return H===null||typeof H!="object"?null:(H=D&&H[D]||H["@@iterator"],typeof H=="function"?H:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,k={};function K(H,se,We){this.props=H,this.context=se,this.refs=k,this.updater=We||V}K.prototype.isReactComponent={},K.prototype.setState=function(H,se){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,se,"setState")},K.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function te(){}te.prototype=K.prototype;function ue(H,se,We){this.props=H,this.context=se,this.refs=k,this.updater=We||V}var he=ue.prototype=new te;he.constructor=ue,B(he,K.prototype),he.isPureReactComponent=!0;var pe=Array.isArray,ve=Object.prototype.hasOwnProperty,be={current:null},$e={key:!0,ref:!0,__self:!0,__source:!0};function ce(H,se,We){var Pe,je={},Be=null,we=null;if(se!=null)for(Pe in se.ref!==void 0&&(we=se.ref),se.key!==void 0&&(Be=""+se.key),se)ve.call(se,Pe)&&!$e.hasOwnProperty(Pe)&&(je[Pe]=se[Pe]);var Ke=arguments.length-2;if(Ke===1)je.children=We;else if(1<Ke){for(var qe=Array(Ke),kt=0;kt<Ke;kt++)qe[kt]=arguments[kt+2];je.children=qe}if(H&&H.defaultProps)for(Pe in Ke=H.defaultProps,Ke)je[Pe]===void 0&&(je[Pe]=Ke[Pe]);return{$$typeof:l,type:H,key:Be,ref:we,props:je,_owner:be.current}}function ze(H,se){return{$$typeof:l,type:H.type,key:se,ref:H.ref,props:H.props,_owner:H._owner}}function C(H){return typeof H=="object"&&H!==null&&H.$$typeof===l}function me(H){var se={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(We){return se[We]})}var Ce=/\/+/g;function Me(H,se){return typeof H=="object"&&H!==null&&H.key!=null?me(""+H.key):se.toString(36)}function Re(H,se,We,Pe,je){var Be=typeof H;(Be==="undefined"||Be==="boolean")&&(H=null);var we=!1;if(H===null)we=!0;else switch(Be){case"string":case"number":we=!0;break;case"object":switch(H.$$typeof){case l:case u:we=!0}}if(we)return we=H,je=je(we),H=Pe===""?"."+Me(we,0):Pe,pe(je)?(We="",H!=null&&(We=H.replace(Ce,"$&/")+"/"),Re(je,se,We,"",function(kt){return kt})):je!=null&&(C(je)&&(je=ze(je,We+(!je.key||we&&we.key===je.key?"":(""+je.key).replace(Ce,"$&/")+"/")+H)),se.push(je)),1;if(we=0,Pe=Pe===""?".":Pe+":",pe(H))for(var Ke=0;Ke<H.length;Ke++){Be=H[Ke];var qe=Pe+Me(Be,Ke);we+=Re(Be,se,We,qe,je)}else if(qe=R(H),typeof qe=="function")for(H=qe.call(H),Ke=0;!(Be=H.next()).done;)Be=Be.value,qe=Pe+Me(Be,Ke++),we+=Re(Be,se,We,qe,je);else if(Be==="object")throw se=String(H),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.");return we}function Ge(H,se,We){if(H==null)return H;var Pe=[],je=0;return Re(H,Pe,"","",function(Be){return se.call(We,Be,je++)}),Pe}function Xe(H){if(H._status===-1){var se=H._result;se=se(),se.then(function(We){(H._status===0||H._status===-1)&&(H._status=1,H._result=We)},function(We){(H._status===0||H._status===-1)&&(H._status=2,H._result=We)}),H._status===-1&&(H._status=0,H._result=se)}if(H._status===1)return H._result.default;throw H._result}var Ye={current:null},X={transition:null},xe={ReactCurrentDispatcher:Ye,ReactCurrentBatchConfig:X,ReactCurrentOwner:be};function Ee(){throw Error("act(...) is not supported in production builds of React.")}return Ze.Children={map:Ge,forEach:function(H,se,We){Ge(H,function(){se.apply(this,arguments)},We)},count:function(H){var se=0;return Ge(H,function(){se++}),se},toArray:function(H){return Ge(H,function(se){return se})||[]},only:function(H){if(!C(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},Ze.Component=K,Ze.Fragment=i,Ze.Profiler=p,Ze.PureComponent=ue,Ze.StrictMode=d,Ze.Suspense=S,Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xe,Ze.act=Ee,Ze.cloneElement=function(H,se,We){if(H==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+H+".");var Pe=B({},H.props),je=H.key,Be=H.ref,we=H._owner;if(se!=null){if(se.ref!==void 0&&(Be=se.ref,we=be.current),se.key!==void 0&&(je=""+se.key),H.type&&H.type.defaultProps)var Ke=H.type.defaultProps;for(qe in se)ve.call(se,qe)&&!$e.hasOwnProperty(qe)&&(Pe[qe]=se[qe]===void 0&&Ke!==void 0?Ke[qe]:se[qe])}var qe=arguments.length-2;if(qe===1)Pe.children=We;else if(1<qe){Ke=Array(qe);for(var kt=0;kt<qe;kt++)Ke[kt]=arguments[kt+2];Pe.children=Ke}return{$$typeof:l,type:H.type,key:je,ref:Be,props:Pe,_owner:we}},Ze.createContext=function(H){return H={$$typeof:b,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},H.Provider={$$typeof:m,_context:H},H.Consumer=H},Ze.createElement=ce,Ze.createFactory=function(H){var se=ce.bind(null,H);return se.type=H,se},Ze.createRef=function(){return{current:null}},Ze.forwardRef=function(H){return{$$typeof:y,render:H}},Ze.isValidElement=C,Ze.lazy=function(H){return{$$typeof:U,_payload:{_status:-1,_result:H},_init:Xe}},Ze.memo=function(H,se){return{$$typeof:L,type:H,compare:se===void 0?null:se}},Ze.startTransition=function(H){var se=X.transition;X.transition={};try{H()}finally{X.transition=se}},Ze.unstable_act=Ee,Ze.useCallback=function(H,se){return Ye.current.useCallback(H,se)},Ze.useContext=function(H){return Ye.current.useContext(H)},Ze.useDebugValue=function(){},Ze.useDeferredValue=function(H){return Ye.current.useDeferredValue(H)},Ze.useEffect=function(H,se){return Ye.current.useEffect(H,se)},Ze.useId=function(){return Ye.current.useId()},Ze.useImperativeHandle=function(H,se,We){return Ye.current.useImperativeHandle(H,se,We)},Ze.useInsertionEffect=function(H,se){return Ye.current.useInsertionEffect(H,se)},Ze.useLayoutEffect=function(H,se){return Ye.current.useLayoutEffect(H,se)},Ze.useMemo=function(H,se){return Ye.current.useMemo(H,se)},Ze.useReducer=function(H,se,We){return Ye.current.useReducer(H,se,We)},Ze.useRef=function(H){return Ye.current.useRef(H)},Ze.useState=function(H){return Ye.current.useState(H)},Ze.useSyncExternalStore=function(H,se,We){return Ye.current.useSyncExternalStore(H,se,We)},Ze.useTransition=function(){return Ye.current.useTransition()},Ze.version="18.3.1",Ze}var eT;function J$(){return eT||(eT=1,g$.exports=qb()),g$.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tT;function Qb(){if(tT)return dp;tT=1;var l=J$(),u=Symbol.for("react.element"),i=Symbol.for("react.fragment"),d=Object.prototype.hasOwnProperty,p=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,m={key:!0,ref:!0,__self:!0,__source:!0};function b(y,S,L){var U,D={},R=null,V=null;L!==void 0&&(R=""+L),S.key!==void 0&&(R=""+S.key),S.ref!==void 0&&(V=S.ref);for(U in S)d.call(S,U)&&!m.hasOwnProperty(U)&&(D[U]=S[U]);if(y&&y.defaultProps)for(U in S=y.defaultProps,S)D[U]===void 0&&(D[U]=S[U]);return{$$typeof:u,type:y,key:R,ref:V,props:D,_owner:p.current}}return dp.Fragment=i,dp.jsx=b,dp.jsxs=b,dp}var nT;function Zb(){return nT||(nT=1,p$.exports=Qb()),p$.exports}var F=Zb(),le=J$();const Dt=Y$(le),rT=Jb({__proto__:null,default:Dt},[le]);var Ag={},f$={exports:{}},xr={},$$={exports:{}},m$={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sT;function ey(){return sT||(sT=1,function(l){function u(X,xe){var Ee=X.length;X.push(xe);e:for(;0<Ee;){var H=Ee-1>>>1,se=X[H];if(0<p(se,xe))X[H]=xe,X[Ee]=se,Ee=H;else break e}}function i(X){return X.length===0?null:X[0]}function d(X){if(X.length===0)return null;var xe=X[0],Ee=X.pop();if(Ee!==xe){X[0]=Ee;e:for(var H=0,se=X.length,We=se>>>1;H<We;){var Pe=2*(H+1)-1,je=X[Pe],Be=Pe+1,we=X[Be];if(0>p(je,Ee))Be<se&&0>p(we,je)?(X[H]=we,X[Be]=Ee,H=Be):(X[H]=je,X[Pe]=Ee,H=Pe);else if(Be<se&&0>p(we,Ee))X[H]=we,X[Be]=Ee,H=Be;else break e}}return xe}function p(X,xe){var Ee=X.sortIndex-xe.sortIndex;return Ee!==0?Ee:X.id-xe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var m=performance;l.unstable_now=function(){return m.now()}}else{var b=Date,y=b.now();l.unstable_now=function(){return b.now()-y}}var S=[],L=[],U=1,D=null,R=3,V=!1,B=!1,k=!1,K=typeof setTimeout=="function"?setTimeout:null,te=typeof clearTimeout=="function"?clearTimeout:null,ue=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function he(X){for(var xe=i(L);xe!==null;){if(xe.callback===null)d(L);else if(xe.startTime<=X)d(L),xe.sortIndex=xe.expirationTime,u(S,xe);else break;xe=i(L)}}function pe(X){if(k=!1,he(X),!B)if(i(S)!==null)B=!0,Xe(ve);else{var xe=i(L);xe!==null&&Ye(pe,xe.startTime-X)}}function ve(X,xe){B=!1,k&&(k=!1,te(ce),ce=-1),V=!0;var Ee=R;try{for(he(xe),D=i(S);D!==null&&(!(D.expirationTime>xe)||X&&!me());){var H=D.callback;if(typeof H=="function"){D.callback=null,R=D.priorityLevel;var se=H(D.expirationTime<=xe);xe=l.unstable_now(),typeof se=="function"?D.callback=se:D===i(S)&&d(S),he(xe)}else d(S);D=i(S)}if(D!==null)var We=!0;else{var Pe=i(L);Pe!==null&&Ye(pe,Pe.startTime-xe),We=!1}return We}finally{D=null,R=Ee,V=!1}}var be=!1,$e=null,ce=-1,ze=5,C=-1;function me(){return!(l.unstable_now()-C<ze)}function Ce(){if($e!==null){var X=l.unstable_now();C=X;var xe=!0;try{xe=$e(!0,X)}finally{xe?Me():(be=!1,$e=null)}}else be=!1}var Me;if(typeof ue=="function")Me=function(){ue(Ce)};else if(typeof MessageChannel<"u"){var Re=new MessageChannel,Ge=Re.port2;Re.port1.onmessage=Ce,Me=function(){Ge.postMessage(null)}}else Me=function(){K(Ce,0)};function Xe(X){$e=X,be||(be=!0,Me())}function Ye(X,xe){ce=K(function(){X(l.unstable_now())},xe)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(X){X.callback=null},l.unstable_continueExecution=function(){B||V||(B=!0,Xe(ve))},l.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ze=0<X?Math.floor(1e3/X):5},l.unstable_getCurrentPriorityLevel=function(){return R},l.unstable_getFirstCallbackNode=function(){return i(S)},l.unstable_next=function(X){switch(R){case 1:case 2:case 3:var xe=3;break;default:xe=R}var Ee=R;R=xe;try{return X()}finally{R=Ee}},l.unstable_pauseExecution=function(){},l.unstable_requestPaint=function(){},l.unstable_runWithPriority=function(X,xe){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var Ee=R;R=X;try{return xe()}finally{R=Ee}},l.unstable_scheduleCallback=function(X,xe,Ee){var H=l.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?H+Ee:H):Ee=H,X){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=Ee+se,X={id:U++,callback:xe,priorityLevel:X,startTime:Ee,expirationTime:se,sortIndex:-1},Ee>H?(X.sortIndex=Ee,u(L,X),i(S)===null&&X===i(L)&&(k?(te(ce),ce=-1):k=!0,Ye(pe,Ee-H))):(X.sortIndex=se,u(S,X),B||V||(B=!0,Xe(ve))),X},l.unstable_shouldYield=me,l.unstable_wrapCallback=function(X){var xe=R;return function(){var Ee=R;R=xe;try{return X.apply(this,arguments)}finally{R=Ee}}}}(m$)),m$}var iT;function ty(){return iT||(iT=1,$$.exports=ey()),$$.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oT;function ny(){if(oT)return xr;oT=1;var l=J$(),u=ty();function i(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,c=1;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var d=new Set,p={};function m(r,s){b(r,s),b(r+"Capture",s)}function b(r,s){for(p[r]=s,r=0;r<s.length;r++)d.add(s[r])}var y=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),S=Object.prototype.hasOwnProperty,L=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,U={},D={};function R(r){return S.call(D,r)?!0:S.call(U,r)?!1:L.test(r)?D[r]=!0:(U[r]=!0,!1)}function V(r,s,c,h){if(c!==null&&c.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:c!==null?!c.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function B(r,s,c,h){if(s===null||typeof s>"u"||V(r,s,c,h))return!0;if(h)return!1;if(c!==null)switch(c.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function k(r,s,c,h,g,$,T){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=g,this.mustUseProperty=c,this.propertyName=r,this.type=s,this.sanitizeURL=$,this.removeEmptyString=T}var K={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){K[r]=new k(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];K[s]=new k(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){K[r]=new k(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){K[r]=new k(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){K[r]=new k(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){K[r]=new k(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){K[r]=new k(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){K[r]=new k(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){K[r]=new k(r,5,!1,r.toLowerCase(),null,!1,!1)});var te=/[\-:]([a-z])/g;function ue(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(te,ue);K[s]=new k(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(te,ue);K[s]=new k(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(te,ue);K[s]=new k(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){K[r]=new k(r,1,!1,r.toLowerCase(),null,!1,!1)}),K.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){K[r]=new k(r,1,!1,r.toLowerCase(),null,!0,!0)});function he(r,s,c,h){var g=K.hasOwnProperty(s)?K[s]:null;(g!==null?g.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(B(s,c,g,h)&&(c=null),h||g===null?R(s)&&(c===null?r.removeAttribute(s):r.setAttribute(s,""+c)):g.mustUseProperty?r[g.propertyName]=c===null?g.type===3?!1:"":c:(s=g.attributeName,h=g.attributeNamespace,c===null?r.removeAttribute(s):(g=g.type,c=g===3||g===4&&c===!0?"":""+c,h?r.setAttributeNS(h,s,c):r.setAttribute(s,c))))}var pe=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ve=Symbol.for("react.element"),be=Symbol.for("react.portal"),$e=Symbol.for("react.fragment"),ce=Symbol.for("react.strict_mode"),ze=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),me=Symbol.for("react.context"),Ce=Symbol.for("react.forward_ref"),Me=Symbol.for("react.suspense"),Re=Symbol.for("react.suspense_list"),Ge=Symbol.for("react.memo"),Xe=Symbol.for("react.lazy"),Ye=Symbol.for("react.offscreen"),X=Symbol.iterator;function xe(r){return r===null||typeof r!="object"?null:(r=X&&r[X]||r["@@iterator"],typeof r=="function"?r:null)}var Ee=Object.assign,H;function se(r){if(H===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);H=s&&s[1]||""}return`
`+H+r}var We=!1;function Pe(r,s){if(!r||We)return"";We=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(j){var h=j}Reflect.construct(r,[],s)}else{try{s.call()}catch(j){h=j}r.call(s.prototype)}else{try{throw Error()}catch(j){h=j}r()}}catch(j){if(j&&h&&typeof j.stack=="string"){for(var g=j.stack.split(`
`),$=h.stack.split(`
`),T=g.length-1,I=$.length-1;1<=T&&0<=I&&g[T]!==$[I];)I--;for(;1<=T&&0<=I;T--,I--)if(g[T]!==$[I]){if(T!==1||I!==1)do if(T--,I--,0>I||g[T]!==$[I]){var A=`
`+g[T].replace(" at new "," at ");return r.displayName&&A.includes("<anonymous>")&&(A=A.replace("<anonymous>",r.displayName)),A}while(1<=T&&0<=I);break}}}finally{We=!1,Error.prepareStackTrace=c}return(r=r?r.displayName||r.name:"")?se(r):""}function je(r){switch(r.tag){case 5:return se(r.type);case 16:return se("Lazy");case 13:return se("Suspense");case 19:return se("SuspenseList");case 0:case 2:case 15:return r=Pe(r.type,!1),r;case 11:return r=Pe(r.type.render,!1),r;case 1:return r=Pe(r.type,!0),r;default:return""}}function Be(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case $e:return"Fragment";case be:return"Portal";case ze:return"Profiler";case ce:return"StrictMode";case Me:return"Suspense";case Re:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case me:return(r.displayName||"Context")+".Consumer";case C:return(r._context.displayName||"Context")+".Provider";case Ce:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Ge:return s=r.displayName||null,s!==null?s:Be(r.type)||"Memo";case Xe:s=r._payload,r=r._init;try{return Be(r(s))}catch{}}return null}function we(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Be(s);case 8:return s===ce?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Ke(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function qe(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function kt(r){var s=qe(r)?"checked":"value",c=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),h=""+r[s];if(!r.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var g=c.get,$=c.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return g.call(this)},set:function(T){h=""+T,$.call(this,T)}}),Object.defineProperty(r,s,{enumerable:c.enumerable}),{getValue:function(){return h},setValue:function(T){h=""+T},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Wt(r){r._valueTracker||(r._valueTracker=kt(r))}function ln(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var c=s.getValue(),h="";return r&&(h=qe(r)?r.checked?"true":"false":r.value),r=h,r!==c?(s.setValue(r),!0):!1}function Yn(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Gs(r,s){var c=s.checked;return Ee({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??r._wrapperState.initialChecked})}function En(r,s){var c=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;c=Ke(s.value!=null?s.value:c),r._wrapperState={initialChecked:h,initialValue:c,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function zt(r,s){s=s.checked,s!=null&&he(r,"checked",s,!1)}function Br(r,s){zt(r,s);var c=Ke(s.value),h=s.type;if(c!=null)h==="number"?(c===0&&r.value===""||r.value!=c)&&(r.value=""+c):r.value!==""+c&&(r.value=""+c);else if(h==="submit"||h==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?Vs(r,s.type,c):s.hasOwnProperty("defaultValue")&&Vs(r,s.type,Ke(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function ir(r,s,c){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,c||s===r.value||(r.value=s),r.defaultValue=s}c=r.name,c!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,c!==""&&(r.name=c)}function Vs(r,s,c){(s!=="number"||Yn(r.ownerDocument)!==r)&&(c==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+c&&(r.defaultValue=""+c))}var Le=Array.isArray;function nt(r,s,c,h){if(r=r.options,s){s={};for(var g=0;g<c.length;g++)s["$"+c[g]]=!0;for(c=0;c<r.length;c++)g=s.hasOwnProperty("$"+r[c].value),r[c].selected!==g&&(r[c].selected=g),g&&h&&(r[c].defaultSelected=!0)}else{for(c=""+Ke(c),s=null,g=0;g<r.length;g++){if(r[g].value===c){r[g].selected=!0,h&&(r[g].defaultSelected=!0);return}s!==null||r[g].disabled||(s=r[g])}s!==null&&(s.selected=!0)}}function et(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(i(91));return Ee({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Fr(r,s){var c=s.value;if(c==null){if(c=s.children,s=s.defaultValue,c!=null){if(s!=null)throw Error(i(92));if(Le(c)){if(1<c.length)throw Error(i(93));c=c[0]}s=c}s==null&&(s=""),c=s}r._wrapperState={initialValue:Ke(c)}}function bn(r,s){var c=Ke(s.value),h=Ke(s.defaultValue);c!=null&&(c=""+c,c!==r.value&&(r.value=c),s.defaultValue==null&&r.defaultValue!==c&&(r.defaultValue=c)),h!=null&&(r.defaultValue=""+h)}function dn(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function br(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bt(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?br(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Rn,fi=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,c,h,g){MSApp.execUnsafeLocalFunction(function(){return r(s,c,h,g)})}:r}(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(Rn=Rn||document.createElement("div"),Rn.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Rn.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function J(r,s){if(s){var c=r.firstChild;if(c&&c===r.lastChild&&c.nodeType===3){c.nodeValue=s;return}}r.textContent=s}var ke={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_=["Webkit","ms","Moz","O"];Object.keys(ke).forEach(function(r){_.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),ke[s]=ke[r]})});function v(r,s,c){return s==null||typeof s=="boolean"||s===""?"":c||typeof s!="number"||s===0||ke.hasOwnProperty(r)&&ke[r]?(""+s).trim():s+"px"}function N(r,s){r=r.style;for(var c in s)if(s.hasOwnProperty(c)){var h=c.indexOf("--")===0,g=v(c,s[c],h);c==="float"&&(c="cssFloat"),h?r.setProperty(c,g):r[c]=g}}var x=Ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fe(r,s){if(s){if(x[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(i(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(i(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(i(61))}if(s.style!=null&&typeof s.style!="object")throw Error(i(62))}}function ht(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ln=null;function Ur(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Ws=null,yr=null,Hr=null;function eo(r){if(r=dr(r)){if(typeof Ws!="function")throw Error(i(280));var s=r.stateNode;s&&(s=Iu(s),Ws(r.stateNode,r.type,s))}}function $i(r){yr?Hr?Hr.push(r):Hr=[r]:yr=r}function to(){if(yr){var r=yr,s=Hr;if(Hr=yr=null,eo(r),s)for(r=0;r<s.length;r++)eo(s[r])}}function nl(r,s){return r(s)}function An(){}var Jn=!1;function rl(r,s,c){if(Jn)return r(s,c);Jn=!0;try{return nl(r,s,c)}finally{Jn=!1,(yr!==null||Hr!==null)&&(An(),to())}}function zs(r,s){var c=r.stateNode;if(c===null)return null;var h=Iu(c);if(h===null)return null;c=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(c&&typeof c!="function")throw Error(i(231,s,typeof c));return c}var sl=!1;if(y)try{var js={};Object.defineProperty(js,"passive",{get:function(){sl=!0}}),window.addEventListener("test",js,js),window.removeEventListener("test",js,js)}catch{sl=!1}function ut(r,s,c,h,g,$,T,I,A){var j=Array.prototype.slice.call(arguments,3);try{s.apply(c,j)}catch(ie){this.onError(ie)}}var lt=!1,un=null,Mt=!1,or=null,qn={onError:function(r){lt=!0,un=r}};function vc(r,s,c,h,g,$,T,I,A){lt=!1,un=null,ut.apply(qn,arguments)}function il(r,s,c,h,g,$,T,I,A){if(vc.apply(this,arguments),lt){if(lt){var j=un;lt=!1,un=null}else throw Error(i(198));Mt||(Mt=!0,or=j)}}function mi(r){var s=r,c=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,s.flags&4098&&(c=s.return),r=s.return;while(r)}return s.tag===3?c:null}function Ql(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function hd(r){if(mi(r)!==r)throw Error(i(188))}function Zl(r){var s=r.alternate;if(!s){if(s=mi(r),s===null)throw Error(i(188));return s!==r?null:r}for(var c=r,h=s;;){var g=c.return;if(g===null)break;var $=g.alternate;if($===null){if(h=g.return,h!==null){c=h;continue}break}if(g.child===$.child){for($=g.child;$;){if($===c)return hd(g),r;if($===h)return hd(g),s;$=$.sibling}throw Error(i(188))}if(c.return!==h.return)c=g,h=$;else{for(var T=!1,I=g.child;I;){if(I===c){T=!0,c=g,h=$;break}if(I===h){T=!0,h=g,c=$;break}I=I.sibling}if(!T){for(I=$.child;I;){if(I===c){T=!0,c=$,h=g;break}if(I===h){T=!0,h=$,c=g;break}I=I.sibling}if(!T)throw Error(i(189))}}if(c.alternate!==h)throw Error(i(190))}if(c.tag!==3)throw Error(i(188));return c.stateNode.current===c?r:s}function eu(r){return r=Zl(r),r!==null?pd(r):null}function pd(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=pd(r);if(s!==null)return s;r=r.sibling}return null}var tu=u.unstable_scheduleCallback,gd=u.unstable_cancelCallback,Sc=u.unstable_shouldYield,fd=u.unstable_requestPaint,Ft=u.unstable_now,Cc=u.unstable_getCurrentPriorityLevel,ol=u.unstable_ImmediatePriority,nu=u.unstable_UserBlockingPriority,_i=u.unstable_NormalPriority,Mp=u.unstable_LowPriority,no=u.unstable_IdlePriority,Ti=null,lr=null;function Np(r){if(lr&&typeof lr.onCommitFiberRoot=="function")try{lr.onCommitFiberRoot(Ti,r,void 0,(r.current.flags&128)===128)}catch{}}var vr=Math.clz32?Math.clz32:hn,xp=Math.log,Ei=Math.LN2;function hn(r){return r>>>=0,r===0?32:31-(xp(r)/Ei|0)|0}var bi=64,ll=4194304;function Bn(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Sr(r,s){var c=r.pendingLanes;if(c===0)return 0;var h=0,g=r.suspendedLanes,$=r.pingedLanes,T=c&268435455;if(T!==0){var I=T&~g;I!==0?h=Bn(I):($&=T,$!==0&&(h=Bn($)))}else T=c&~g,T!==0?h=Bn(T):$!==0&&(h=Bn($));if(h===0)return 0;if(s!==0&&s!==h&&!(s&g)&&(g=h&-h,$=s&-s,g>=$||g===16&&($&4194240)!==0))return s;if(h&4&&(h|=c&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=h;0<s;)c=31-vr(s),g=1<<c,h|=r[c],s&=~g;return h}function Pp(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $d(r,s){for(var c=r.suspendedLanes,h=r.pingedLanes,g=r.expirationTimes,$=r.pendingLanes;0<$;){var T=31-vr($),I=1<<T,A=g[T];A===-1?(!(I&c)||I&h)&&(g[T]=Pp(I,s)):A<=s&&(r.expiredLanes|=I),$&=~I}}function ul(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Ic(){var r=bi;return bi<<=1,!(bi&4194240)&&(bi=64),r}function kc(r){for(var s=[],c=0;31>c;c++)s.push(r);return s}function ro(r,s,c){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-vr(s),r[s]=c}function ru(r,s){var c=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var h=r.eventTimes;for(r=r.expirationTimes;0<c;){var g=31-vr(c),$=1<<g;s[g]=0,h[g]=-1,r[g]=-1,c&=~$}}function wc(r,s){var c=r.entangledLanes|=s;for(r=r.entanglements;c;){var h=31-vr(c),g=1<<h;g&s|r[h]&s&&(r[h]|=s),c&=~g}}var ot=0;function md(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var _d,cl,Td,so,Ed,su=!1,io=[],as=null,ds=null,Xs=null,yi=new Map,hs=new Map,Gr=[],Bp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Oc(r,s){switch(r){case"focusin":case"focusout":as=null;break;case"dragenter":case"dragleave":ds=null;break;case"mouseover":case"mouseout":Xs=null;break;case"pointerover":case"pointerout":yi.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":hs.delete(s.pointerId)}}function oo(r,s,c,h,g,$){return r===null||r.nativeEvent!==$?(r={blockedOn:s,domEventName:c,eventSystemFlags:h,nativeEvent:$,targetContainers:[g]},s!==null&&(s=dr(s),s!==null&&cl(s)),r):(r.eventSystemFlags|=h,s=r.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),r)}function Fp(r,s,c,h,g){switch(s){case"focusin":return as=oo(as,r,s,c,h,g),!0;case"dragenter":return ds=oo(ds,r,s,c,h,g),!0;case"mouseover":return Xs=oo(Xs,r,s,c,h,g),!0;case"pointerover":var $=g.pointerId;return yi.set($,oo(yi.get($)||null,r,s,c,h,g)),!0;case"gotpointercapture":return $=g.pointerId,hs.set($,oo(hs.get($)||null,r,s,c,h,g)),!0}return!1}function bd(r){var s=ar(r.target);if(s!==null){var c=mi(s);if(c!==null){if(s=c.tag,s===13){if(s=Ql(c),s!==null){r.blockedOn=s,Ed(r.priority,function(){Td(c)});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){r.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}r.blockedOn=null}function ps(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var c=uu(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(c===null){c=r.nativeEvent;var h=new c.constructor(c.type,c);Ln=h,c.target.dispatchEvent(h),Ln=null}else return s=dr(c),s!==null&&cl(s),r.blockedOn=c,!1;s.shift()}return!0}function yd(r,s,c){ps(r)&&c.delete(s)}function iu(){su=!1,as!==null&&ps(as)&&(as=null),ds!==null&&ps(ds)&&(ds=null),Xs!==null&&ps(Xs)&&(Xs=null),yi.forEach(yd),hs.forEach(yd)}function yn(r,s){r.blockedOn===s&&(r.blockedOn=null,su||(su=!0,u.unstable_scheduleCallback(u.unstable_NormalPriority,iu)))}function al(r){function s(g){return yn(g,r)}if(0<io.length){yn(io[0],r);for(var c=1;c<io.length;c++){var h=io[c];h.blockedOn===r&&(h.blockedOn=null)}}for(as!==null&&yn(as,r),ds!==null&&yn(ds,r),Xs!==null&&yn(Xs,r),yi.forEach(s),hs.forEach(s),c=0;c<Gr.length;c++)h=Gr[c],h.blockedOn===r&&(h.blockedOn=null);for(;0<Gr.length&&(c=Gr[0],c.blockedOn===null);)bd(c),c.blockedOn===null&&Gr.shift()}var lo=pe.ReactCurrentBatchConfig,ou=!0;function Up(r,s,c,h){var g=ot,$=lo.transition;lo.transition=null;try{ot=1,Rc(r,s,c,h)}finally{ot=g,lo.transition=$}}function Hp(r,s,c,h){var g=ot,$=lo.transition;lo.transition=null;try{ot=4,Rc(r,s,c,h)}finally{ot=g,lo.transition=$}}function Rc(r,s,c,h){if(ou){var g=uu(r,s,c,h);if(g===null)qc(r,s,h,lu,c),Oc(r,h);else if(Fp(g,r,s,c,h))h.stopPropagation();else if(Oc(r,h),s&4&&-1<Bp.indexOf(r)){for(;g!==null;){var $=dr(g);if($!==null&&_d($),$=uu(r,s,c,h),$===null&&qc(r,s,h,lu,c),$===g)break;g=$}g!==null&&h.stopPropagation()}else qc(r,s,h,null,c)}}var lu=null;function uu(r,s,c,h){if(lu=null,r=Ur(h),r=ar(r),r!==null)if(s=mi(r),s===null)r=null;else if(c=s.tag,c===13){if(r=Ql(s),r!==null)return r;r=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return lu=r,null}function gs(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Cc()){case ol:return 1;case nu:return 4;case _i:case Mp:return 16;case no:return 536870912;default:return 16}default:return 16}}var ur=null,cu=null,au=null;function vd(){if(au)return au;var r,s=cu,c=s.length,h,g="value"in ur?ur.value:ur.textContent,$=g.length;for(r=0;r<c&&s[r]===g[r];r++);var T=c-r;for(h=1;h<=T&&s[c-h]===g[$-h];h++);return au=g.slice(r,1<h?1-h:void 0)}function du(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function hu(){return!0}function Sd(){return!1}function Qn(r){function s(c,h,g,$,T){this._reactName=c,this._targetInst=g,this.type=h,this.nativeEvent=$,this.target=T,this.currentTarget=null;for(var I in r)r.hasOwnProperty(I)&&(c=r[I],this[I]=c?c($):$[I]);return this.isDefaultPrevented=($.defaultPrevented!=null?$.defaultPrevented:$.returnValue===!1)?hu:Sd,this.isPropagationStopped=Sd,this}return Ee(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=hu)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=hu)},persist:function(){},isPersistent:hu}),s}var uo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lc=Qn(uo),dl=Ee({},uo,{view:0,detail:0}),Cd=Qn(dl),Ac,vi,Si,pu=Ee({},dl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nc,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Si&&(Si&&r.type==="mousemove"?(Ac=r.screenX-Si.screenX,vi=r.screenY-Si.screenY):vi=Ac=0,Si=r),Ac)},movementY:function(r){return"movementY"in r?r.movementY:vi}}),co=Qn(pu),Id=Ee({},pu,{dataTransfer:0}),kd=Qn(Id),wd=Ee({},dl,{relatedTarget:0}),hl=Qn(wd),Dc=Ee({},uo,{animationName:0,elapsedTime:0,pseudoElement:0}),Od=Qn(Dc),Gp=Ee({},uo,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Rd=Qn(Gp),Ld=Ee({},uo,{data:0}),Mc=Qn(Ld),Ad={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Dd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Md={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nd(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=Md[r])?!!s[r]:!1}function Nc(){return Nd}var gu=Ee({},dl,{key:function(r){if(r.key){var s=Ad[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=du(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Dd[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nc,charCode:function(r){return r.type==="keypress"?du(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?du(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),xd=Qn(gu),xc=Ee({},pu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fu=Qn(xc),fs=Ee({},dl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nc}),Pd=Qn(fs),Bd=Ee({},uo,{propertyName:0,elapsedTime:0,pseudoElement:0}),$u=Qn(Bd),Fd=Ee({},pu,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Ud=Qn(Fd),Vp=[9,13,27,32],pl=y&&"CompositionEvent"in window,ao=null;y&&"documentMode"in document&&(ao=document.documentMode);var Wp=y&&"TextEvent"in window&&!ao,Hd=y&&(!pl||ao&&8<ao&&11>=ao),Gd=" ",Vd=!1;function Wd(r,s){switch(r){case"keyup":return Vp.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ho(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ci=!1;function zd(r,s){switch(r){case"compositionend":return ho(s);case"keypress":return s.which!==32?null:(Vd=!0,Gd);case"textInput":return r=s.data,r===Gd&&Vd?null:r;default:return null}}function gl(r,s){if(Ci)return r==="compositionend"||!pl&&Wd(r,s)?(r=vd(),au=cu=ur=null,Ci=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Hd&&s.locale!=="ko"?null:s.data;default:return null}}var Pc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jd(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!Pc[r.type]:s==="textarea"}function Xd(r,s,c,h){$i(h),s=Tl(s,"onChange"),0<s.length&&(c=new Lc("onChange","change",null,c,h),r.push({event:c,listeners:s}))}var po=null,go=null;function Ks(r){Su(r,0)}function fl(r){var s=Un(r);if(ln(s))return r}function Kd(r,s){if(r==="change")return s}var Yd=!1;if(y){var Bc;if(y){var Fc="oninput"in document;if(!Fc){var Jd=document.createElement("div");Jd.setAttribute("oninput","return;"),Fc=typeof Jd.oninput=="function"}Bc=Fc}else Bc=!1;Yd=Bc&&(!document.documentMode||9<document.documentMode)}function Uc(){po&&(po.detachEvent("onpropertychange",qd),go=po=null)}function qd(r){if(r.propertyName==="value"&&fl(go)){var s=[];Xd(s,go,r,Ur(r)),rl(Ks,s)}}function Qd(r,s,c){r==="focusin"?(Uc(),po=s,go=c,po.attachEvent("onpropertychange",qd)):r==="focusout"&&Uc()}function zp(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return fl(go)}function fo(r,s){if(r==="click")return fl(s)}function mu(r,s){if(r==="input"||r==="change")return fl(s)}function Hc(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Zn=typeof Object.is=="function"?Object.is:Hc;function Vr(r,s){if(Zn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var c=Object.keys(r),h=Object.keys(s);if(c.length!==h.length)return!1;for(h=0;h<c.length;h++){var g=c[h];if(!S.call(s,g)||!Zn(r[g],s[g]))return!1}return!0}function Gc(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function _u(r,s){var c=Gc(r);r=0;for(var h;c;){if(c.nodeType===3){if(h=r+c.textContent.length,r<=s&&h>=s)return{node:c,offset:s-r};r=h}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Gc(c)}}function Vc(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Vc(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Ut(){for(var r=window,s=Yn();s instanceof r.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)r=s.contentWindow;else break;s=Yn(r.document)}return s}function Wc(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function $l(r){var s=Ut(),c=r.focusedElem,h=r.selectionRange;if(s!==c&&c&&c.ownerDocument&&Vc(c.ownerDocument.documentElement,c)){if(h!==null&&Wc(c)){if(s=h.start,r=h.end,r===void 0&&(r=s),"selectionStart"in c)c.selectionStart=s,c.selectionEnd=Math.min(r,c.value.length);else if(r=(s=c.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var g=c.textContent.length,$=Math.min(h.start,g);h=h.end===void 0?$:Math.min(h.end,g),!r.extend&&$>h&&(g=h,h=$,$=g),g=_u(c,$);var T=_u(c,h);g&&T&&(r.rangeCount!==1||r.anchorNode!==g.node||r.anchorOffset!==g.offset||r.focusNode!==T.node||r.focusOffset!==T.offset)&&(s=s.createRange(),s.setStart(g.node,g.offset),r.removeAllRanges(),$>h?(r.addRange(s),r.extend(T.node,T.offset)):(s.setEnd(T.node,T.offset),r.addRange(s)))}}for(s=[],r=c;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<s.length;c++)r=s[c],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var $o=y&&"documentMode"in document&&11>=document.documentMode,mo=null,Tu=null,Ii=null,ki=!1;function zc(r,s,c){var h=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;ki||mo==null||mo!==Yn(h)||(h=mo,"selectionStart"in h&&Wc(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Ii&&Vr(Ii,h)||(Ii=h,h=Tl(Tu,"onSelect"),0<h.length&&(s=new Lc("onSelect","select",null,s,c),r.push({event:s,listeners:h}),s.target=mo)))}function $s(r,s){var c={};return c[r.toLowerCase()]=s.toLowerCase(),c["Webkit"+r]="webkit"+s,c["Moz"+r]="moz"+s,c}var ms={animationend:$s("Animation","AnimationEnd"),animationiteration:$s("Animation","AnimationIteration"),animationstart:$s("Animation","AnimationStart"),transitionend:$s("Transition","TransitionEnd")},Eu={},jc={};y&&(jc=document.createElement("div").style,"AnimationEvent"in window||(delete ms.animationend.animation,delete ms.animationiteration.animation,delete ms.animationstart.animation),"TransitionEvent"in window||delete ms.transitionend.transition);function bu(r){if(Eu[r])return Eu[r];if(!ms[r])return r;var s=ms[r],c;for(c in s)if(s.hasOwnProperty(c)&&c in jc)return Eu[r]=s[c];return r}var Zd=bu("animationend"),eh=bu("animationiteration"),Xc=bu("animationstart"),th=bu("transitionend"),Kc=new Map,ml="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ys(r,s){Kc.set(r,s),m(s,[r])}for(var Yc=0;Yc<ml.length;Yc++){var Jc=ml[Yc],jp=Jc.toLowerCase(),yu=Jc[0].toUpperCase()+Jc.slice(1);Ys(jp,"on"+yu)}Ys(Zd,"onAnimationEnd"),Ys(eh,"onAnimationIteration"),Ys(Xc,"onAnimationStart"),Ys("dblclick","onDoubleClick"),Ys("focusin","onFocus"),Ys("focusout","onBlur"),Ys(th,"onTransitionEnd"),b("onMouseEnter",["mouseout","mouseover"]),b("onMouseLeave",["mouseout","mouseover"]),b("onPointerEnter",["pointerout","pointerover"]),b("onPointerLeave",["pointerout","pointerover"]),m("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),m("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),m("onBeforeInput",["compositionend","keypress","textInput","paste"]),m("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),m("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),m("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _o="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nh=new Set("cancel close invalid load scroll toggle".split(" ").concat(_o));function vu(r,s,c){var h=r.type||"unknown-event";r.currentTarget=c,il(h,s,void 0,r),r.currentTarget=null}function Su(r,s){s=(s&4)!==0;for(var c=0;c<r.length;c++){var h=r[c],g=h.event;h=h.listeners;e:{var $=void 0;if(s)for(var T=h.length-1;0<=T;T--){var I=h[T],A=I.instance,j=I.currentTarget;if(I=I.listener,A!==$&&g.isPropagationStopped())break e;vu(g,I,j),$=A}else for(T=0;T<h.length;T++){if(I=h[T],A=I.instance,j=I.currentTarget,I=I.listener,A!==$&&g.isPropagationStopped())break e;vu(g,I,j),$=A}}}if(Mt)throw r=or,Mt=!1,or=null,r}function bt(r,s){var c=s[Cu];c===void 0&&(c=s[Cu]=new Set);var h=r+"__bubble";c.has(h)||(rh(s,r,2,!1),c.add(h))}function To(r,s,c){var h=0;s&&(h|=4),rh(c,r,h,s)}var _l="_reactListening"+Math.random().toString(36).slice(2);function Js(r){if(!r[_l]){r[_l]=!0,d.forEach(function(c){c!=="selectionchange"&&(nh.has(c)||To(c,!1,r),To(c,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[_l]||(s[_l]=!0,To("selectionchange",!1,s))}}function rh(r,s,c,h){switch(gs(s)){case 1:var g=Up;break;case 4:g=Hp;break;default:g=Rc}c=g.bind(null,s,c,r),g=void 0,!sl||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),h?g!==void 0?r.addEventListener(s,c,{capture:!0,passive:g}):r.addEventListener(s,c,!0):g!==void 0?r.addEventListener(s,c,{passive:g}):r.addEventListener(s,c,!1)}function qc(r,s,c,h,g){var $=h;if(!(s&1)&&!(s&2)&&h!==null)e:for(;;){if(h===null)return;var T=h.tag;if(T===3||T===4){var I=h.stateNode.containerInfo;if(I===g||I.nodeType===8&&I.parentNode===g)break;if(T===4)for(T=h.return;T!==null;){var A=T.tag;if((A===3||A===4)&&(A=T.stateNode.containerInfo,A===g||A.nodeType===8&&A.parentNode===g))return;T=T.return}for(;I!==null;){if(T=ar(I),T===null)return;if(A=T.tag,A===5||A===6){h=$=T;continue e}I=I.parentNode}}h=h.return}rl(function(){var j=$,ie=Ur(c),de=[];e:{var re=Kc.get(r);if(re!==void 0){var Te=Lc,Oe=r;switch(r){case"keypress":if(du(c)===0)break e;case"keydown":case"keyup":Te=xd;break;case"focusin":Oe="focus",Te=hl;break;case"focusout":Oe="blur",Te=hl;break;case"beforeblur":case"afterblur":Te=hl;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Te=co;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Te=kd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Te=Pd;break;case Zd:case eh:case Xc:Te=Od;break;case th:Te=$u;break;case"scroll":Te=Cd;break;case"wheel":Te=Ud;break;case"copy":case"cut":case"paste":Te=Rd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Te=fu}var De=(s&4)!==0,Pt=!De&&r==="scroll",G=De?re!==null?re+"Capture":null:re;De=[];for(var O=j,W;O!==null;){W=O;var ge=W.stateNode;if(W.tag===5&&ge!==null&&(W=ge,G!==null&&(ge=zs(O,G),ge!=null&&De.push(Cr(O,ge,W)))),Pt)break;O=O.return}0<De.length&&(re=new Te(re,Oe,null,c,ie),de.push({event:re,listeners:De}))}}if(!(s&7)){e:{if(re=r==="mouseover"||r==="pointerover",Te=r==="mouseout"||r==="pointerout",re&&c!==Ln&&(Oe=c.relatedTarget||c.fromElement)&&(ar(Oe)||Oe[Ir]))break e;if((Te||re)&&(re=ie.window===ie?ie:(re=ie.ownerDocument)?re.defaultView||re.parentWindow:window,Te?(Oe=c.relatedTarget||c.toElement,Te=j,Oe=Oe?ar(Oe):null,Oe!==null&&(Pt=mi(Oe),Oe!==Pt||Oe.tag!==5&&Oe.tag!==6)&&(Oe=null)):(Te=null,Oe=j),Te!==Oe)){if(De=co,ge="onMouseLeave",G="onMouseEnter",O="mouse",(r==="pointerout"||r==="pointerover")&&(De=fu,ge="onPointerLeave",G="onPointerEnter",O="pointer"),Pt=Te==null?re:Un(Te),W=Oe==null?re:Un(Oe),re=new De(ge,O+"leave",Te,c,ie),re.target=Pt,re.relatedTarget=W,ge=null,ar(ie)===j&&(De=new De(G,O+"enter",Oe,c,ie),De.target=W,De.relatedTarget=Pt,ge=De),Pt=ge,Te&&Oe)t:{for(De=Te,G=Oe,O=0,W=De;W;W=Fn(W))O++;for(W=0,ge=G;ge;ge=Fn(ge))W++;for(;0<O-W;)De=Fn(De),O--;for(;0<W-O;)G=Fn(G),W--;for(;O--;){if(De===G||G!==null&&De===G.alternate)break t;De=Fn(De),G=Fn(G)}De=null}else De=null;Te!==null&&sh(de,re,Te,De,!1),Oe!==null&&Pt!==null&&sh(de,Pt,Oe,De,!0)}}e:{if(re=j?Un(j):window,Te=re.nodeName&&re.nodeName.toLowerCase(),Te==="select"||Te==="input"&&re.type==="file")var Ne=Kd;else if(jd(re))if(Yd)Ne=mu;else{Ne=zp;var Ue=Qd}else(Te=re.nodeName)&&Te.toLowerCase()==="input"&&(re.type==="checkbox"||re.type==="radio")&&(Ne=fo);if(Ne&&(Ne=Ne(r,j))){Xd(de,Ne,c,ie);break e}Ue&&Ue(r,re,j),r==="focusout"&&(Ue=re._wrapperState)&&Ue.controlled&&re.type==="number"&&Vs(re,"number",re.value)}switch(Ue=j?Un(j):window,r){case"focusin":(jd(Ue)||Ue.contentEditable==="true")&&(mo=Ue,Tu=j,Ii=null);break;case"focusout":Ii=Tu=mo=null;break;case"mousedown":ki=!0;break;case"contextmenu":case"mouseup":case"dragend":ki=!1,zc(de,c,ie);break;case"selectionchange":if($o)break;case"keydown":case"keyup":zc(de,c,ie)}var He;if(pl)e:{switch(r){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else Ci?Wd(r,c)&&(Ve="onCompositionEnd"):r==="keydown"&&c.keyCode===229&&(Ve="onCompositionStart");Ve&&(Hd&&c.locale!=="ko"&&(Ci||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&Ci&&(He=vd()):(ur=ie,cu="value"in ur?ur.value:ur.textContent,Ci=!0)),Ue=Tl(j,Ve),0<Ue.length&&(Ve=new Mc(Ve,r,null,c,ie),de.push({event:Ve,listeners:Ue}),He?Ve.data=He:(He=ho(c),He!==null&&(Ve.data=He)))),(He=Wp?zd(r,c):gl(r,c))&&(j=Tl(j,"onBeforeInput"),0<j.length&&(ie=new Mc("onBeforeInput","beforeinput",null,c,ie),de.push({event:ie,listeners:j}),ie.data=He))}Su(de,s)})}function Cr(r,s,c){return{instance:r,listener:s,currentTarget:c}}function Tl(r,s){for(var c=s+"Capture",h=[];r!==null;){var g=r,$=g.stateNode;g.tag===5&&$!==null&&(g=$,$=zs(r,c),$!=null&&h.unshift(Cr(r,$,g)),$=zs(r,s),$!=null&&h.push(Cr(r,$,g))),r=r.return}return h}function Fn(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function sh(r,s,c,h,g){for(var $=s._reactName,T=[];c!==null&&c!==h;){var I=c,A=I.alternate,j=I.stateNode;if(A!==null&&A===h)break;I.tag===5&&j!==null&&(I=j,g?(A=zs(c,$),A!=null&&T.unshift(Cr(c,A,I))):g||(A=zs(c,$),A!=null&&T.push(Cr(c,A,I)))),c=c.return}T.length!==0&&r.push({event:s,listeners:T})}var Xp=/\r\n?/g,ih=/\u0000|\uFFFD/g;function oh(r){return(typeof r=="string"?r:""+r).replace(Xp,`
`).replace(ih,"")}function _s(r,s,c){if(s=oh(s),oh(r)!==s&&c)throw Error(i(425))}function El(){}var Qc=null,Zc=null;function ea(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var ta=typeof setTimeout=="function"?setTimeout:void 0,Kp=typeof clearTimeout=="function"?clearTimeout:void 0,na=typeof Promise=="function"?Promise:void 0,Yp=typeof queueMicrotask=="function"?queueMicrotask:typeof na<"u"?function(r){return na.resolve(null).then(r).catch(Jp)}:ta;function Jp(r){setTimeout(function(){throw r})}function bl(r,s){var c=s,h=0;do{var g=c.nextSibling;if(r.removeChild(c),g&&g.nodeType===8)if(c=g.data,c==="/$"){if(h===0){r.removeChild(g),al(s);return}h--}else c!=="$"&&c!=="$?"&&c!=="$!"||h++;c=g}while(c);al(s)}function qs(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function lh(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var c=r.data;if(c==="$"||c==="$!"||c==="$?"){if(s===0)return r;s--}else c==="/$"&&s++}r=r.previousSibling}return null}var wi=Math.random().toString(36).slice(2),cr="__reactFiber$"+wi,Eo="__reactProps$"+wi,Ir="__reactContainer$"+wi,Cu="__reactEvents$"+wi,uh="__reactListeners$"+wi,yl="__reactHandles$"+wi;function ar(r){var s=r[cr];if(s)return s;for(var c=r.parentNode;c;){if(s=c[Ir]||c[cr]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(r=lh(r);r!==null;){if(c=r[cr])return c;r=lh(r)}return s}r=c,c=r.parentNode}return null}function dr(r){return r=r[cr]||r[Ir],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Un(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(i(33))}function Iu(r){return r[Eo]||null}var ra=[],bo=-1;function Ts(r){return{current:r}}function $t(r){0>bo||(r.current=ra[bo],ra[bo]=null,bo--)}function _t(r,s){bo++,ra[bo]=r.current,r.current=s}var Qs={},vn=Ts(Qs),Dn=Ts(!1),Es=Qs;function Oi(r,s){var c=r.type.contextTypes;if(!c)return Qs;var h=r.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var g={},$;for($ in c)g[$]=s[$];return h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=g),g}function Sn(r){return r=r.childContextTypes,r!=null}function ku(){$t(Dn),$t(vn)}function ch(r,s,c){if(vn.current!==Qs)throw Error(i(168));_t(vn,s),_t(Dn,c)}function ah(r,s,c){var h=r.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return c;h=h.getChildContext();for(var g in h)if(!(g in s))throw Error(i(108,we(r)||"Unknown",g));return Ee({},c,h)}function wu(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Qs,Es=vn.current,_t(vn,r),_t(Dn,Dn.current),!0}function Ae(r,s,c){var h=r.stateNode;if(!h)throw Error(i(169));c?(r=ah(r,s,Es),h.__reactInternalMemoizedMergedChildContext=r,$t(Dn),$t(vn),_t(vn,r)):$t(Dn),_t(Dn,c)}var jt=null,Xt=!1,mt=!1;function Wr(r){jt===null?jt=[r]:jt.push(r)}function vl(r){Xt=!0,Wr(r)}function _e(){if(!mt&&jt!==null){mt=!0;var r=0,s=ot;try{var c=jt;for(ot=1;r<c.length;r++){var h=c[r];do h=h(!0);while(h!==null)}jt=null,Xt=!1}catch(g){throw jt!==null&&(jt=jt.slice(r+1)),tu(ol,_e),g}finally{ot=s,mt=!1}}return null}var Tt=[],Ri=0,Ou=null,zr=0,Hn=[],Gn=0,Zs=null,bs=1,jr="";function ys(r,s){Tt[Ri++]=zr,Tt[Ri++]=Ou,Ou=r,zr=s}function sa(r,s,c){Hn[Gn++]=bs,Hn[Gn++]=jr,Hn[Gn++]=Zs,Zs=r;var h=bs;r=jr;var g=32-vr(h)-1;h&=~(1<<g),c+=1;var $=32-vr(s)+g;if(30<$){var T=g-g%5;$=(h&(1<<T)-1).toString(32),h>>=T,g-=T,bs=1<<32-vr(s)+g|c<<g|h,jr=$+r}else bs=1<<$|c<<g|h,jr=r}function Ru(r){r.return!==null&&(ys(r,1),sa(r,1,0))}function ia(r){for(;r===Ou;)Ou=Tt[--Ri],Tt[Ri]=null,zr=Tt[--Ri],Tt[Ri]=null;for(;r===Zs;)Zs=Hn[--Gn],Hn[Gn]=null,jr=Hn[--Gn],Hn[Gn]=null,bs=Hn[--Gn],Hn[Gn]=null}var Vn=null,er=null,Et=!1,kr=null;function dh(r,s){var c=wn(5,null,null,0);c.elementType="DELETED",c.stateNode=s,c.return=r,s=r.deletions,s===null?(r.deletions=[c],r.flags|=16):s.push(c)}function hh(r,s){switch(r.tag){case 5:var c=r.type;return s=s.nodeType!==1||c.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,Vn=r,er=qs(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,Vn=r,er=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(c=Zs!==null?{id:bs,overflow:jr}:null,r.memoizedState={dehydrated:s,treeContext:c,retryLane:1073741824},c=wn(18,null,null,0),c.stateNode=s,c.return=r,r.child=c,Vn=r,er=null,!0):!1;default:return!1}}function oa(r){return(r.mode&1)!==0&&(r.flags&128)===0}function la(r){if(Et){var s=er;if(s){var c=s;if(!hh(r,s)){if(oa(r))throw Error(i(418));s=qs(c.nextSibling);var h=Vn;s&&hh(r,s)?dh(h,c):(r.flags=r.flags&-4097|2,Et=!1,Vn=r)}}else{if(oa(r))throw Error(i(418));r.flags=r.flags&-4097|2,Et=!1,Vn=r}}}function ua(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Vn=r}function Lu(r){if(r!==Vn)return!1;if(!Et)return ua(r),Et=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!ea(r.type,r.memoizedProps)),s&&(s=er)){if(oa(r))throw Sl(),Error(i(418));for(;s;)dh(r,s),s=qs(s.nextSibling)}if(ua(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var c=r.data;if(c==="/$"){if(s===0){er=qs(r.nextSibling);break e}s--}else c!=="$"&&c!=="$!"&&c!=="$?"||s++}r=r.nextSibling}er=null}}else er=Vn?qs(r.stateNode.nextSibling):null;return!0}function Sl(){for(var r=er;r;)r=qs(r.nextSibling)}function vs(){er=Vn=null,Et=!1}function ca(r){kr===null?kr=[r]:kr.push(r)}var ph=pe.ReactCurrentBatchConfig;function yo(r,s,c){if(r=c.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(i(309));var h=c.stateNode}if(!h)throw Error(i(147,r));var g=h,$=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===$?s.ref:(s=function(T){var I=g.refs;T===null?delete I[$]:I[$]=T},s._stringRef=$,s)}if(typeof r!="string")throw Error(i(284));if(!c._owner)throw Error(i(290,r))}return r}function Cl(r,s){throw r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function aa(r){var s=r._init;return s(r._payload)}function Au(r){function s(G,O){if(r){var W=G.deletions;W===null?(G.deletions=[O],G.flags|=16):W.push(O)}}function c(G,O){if(!r)return null;for(;O!==null;)s(G,O),O=O.sibling;return null}function h(G,O){for(G=new Map;O!==null;)O.key!==null?G.set(O.key,O):G.set(O.index,O),O=O.sibling;return G}function g(G,O){return G=_r(G,O),G.index=0,G.sibling=null,G}function $(G,O,W){return G.index=W,r?(W=G.alternate,W!==null?(W=W.index,W<O?(G.flags|=2,O):W):(G.flags|=2,O)):(G.flags|=1048576,O)}function T(G){return r&&G.alternate===null&&(G.flags|=2),G}function I(G,O,W,ge){return O===null||O.tag!==6?(O=Ua(W,G.mode,ge),O.return=G,O):(O=g(O,W),O.return=G,O)}function A(G,O,W,ge){var Ne=W.type;return Ne===$e?ie(G,O,W.props.children,ge,W.key):O!==null&&(O.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===Xe&&aa(Ne)===O.type)?(ge=g(O,W.props),ge.ref=yo(G,O,W),ge.return=G,ge):(ge=As(W.type,W.key,W.props,null,G.mode,ge),ge.ref=yo(G,O,W),ge.return=G,ge)}function j(G,O,W,ge){return O===null||O.tag!==4||O.stateNode.containerInfo!==W.containerInfo||O.stateNode.implementation!==W.implementation?(O=cc(W,G.mode,ge),O.return=G,O):(O=g(O,W.children||[]),O.return=G,O)}function ie(G,O,W,ge,Ne){return O===null||O.tag!==7?(O=ui(W,G.mode,ge,Ne),O.return=G,O):(O=g(O,W),O.return=G,O)}function de(G,O,W){if(typeof O=="string"&&O!==""||typeof O=="number")return O=Ua(""+O,G.mode,W),O.return=G,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case ve:return W=As(O.type,O.key,O.props,null,G.mode,W),W.ref=yo(G,null,O),W.return=G,W;case be:return O=cc(O,G.mode,W),O.return=G,O;case Xe:var ge=O._init;return de(G,ge(O._payload),W)}if(Le(O)||xe(O))return O=ui(O,G.mode,W,null),O.return=G,O;Cl(G,O)}return null}function re(G,O,W,ge){var Ne=O!==null?O.key:null;if(typeof W=="string"&&W!==""||typeof W=="number")return Ne!==null?null:I(G,O,""+W,ge);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case ve:return W.key===Ne?A(G,O,W,ge):null;case be:return W.key===Ne?j(G,O,W,ge):null;case Xe:return Ne=W._init,re(G,O,Ne(W._payload),ge)}if(Le(W)||xe(W))return Ne!==null?null:ie(G,O,W,ge,null);Cl(G,W)}return null}function Te(G,O,W,ge,Ne){if(typeof ge=="string"&&ge!==""||typeof ge=="number")return G=G.get(W)||null,I(O,G,""+ge,Ne);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case ve:return G=G.get(ge.key===null?W:ge.key)||null,A(O,G,ge,Ne);case be:return G=G.get(ge.key===null?W:ge.key)||null,j(O,G,ge,Ne);case Xe:var Ue=ge._init;return Te(G,O,W,Ue(ge._payload),Ne)}if(Le(ge)||xe(ge))return G=G.get(W)||null,ie(O,G,ge,Ne,null);Cl(O,ge)}return null}function Oe(G,O,W,ge){for(var Ne=null,Ue=null,He=O,Ve=O=0,en=null;He!==null&&Ve<W.length;Ve++){He.index>Ve?(en=He,He=null):en=He.sibling;var tt=re(G,He,W[Ve],ge);if(tt===null){He===null&&(He=en);break}r&&He&&tt.alternate===null&&s(G,He),O=$(tt,O,Ve),Ue===null?Ne=tt:Ue.sibling=tt,Ue=tt,He=en}if(Ve===W.length)return c(G,He),Et&&ys(G,Ve),Ne;if(He===null){for(;Ve<W.length;Ve++)He=de(G,W[Ve],ge),He!==null&&(O=$(He,O,Ve),Ue===null?Ne=He:Ue.sibling=He,Ue=He);return Et&&ys(G,Ve),Ne}for(He=h(G,He);Ve<W.length;Ve++)en=Te(He,G,Ve,W[Ve],ge),en!==null&&(r&&en.alternate!==null&&He.delete(en.key===null?Ve:en.key),O=$(en,O,Ve),Ue===null?Ne=en:Ue.sibling=en,Ue=en);return r&&He.forEach(function(Vt){return s(G,Vt)}),Et&&ys(G,Ve),Ne}function De(G,O,W,ge){var Ne=xe(W);if(typeof Ne!="function")throw Error(i(150));if(W=Ne.call(W),W==null)throw Error(i(151));for(var Ue=Ne=null,He=O,Ve=O=0,en=null,tt=W.next();He!==null&&!tt.done;Ve++,tt=W.next()){He.index>Ve?(en=He,He=null):en=He.sibling;var Vt=re(G,He,tt.value,ge);if(Vt===null){He===null&&(He=en);break}r&&He&&Vt.alternate===null&&s(G,He),O=$(Vt,O,Ve),Ue===null?Ne=Vt:Ue.sibling=Vt,Ue=Vt,He=en}if(tt.done)return c(G,He),Et&&ys(G,Ve),Ne;if(He===null){for(;!tt.done;Ve++,tt=W.next())tt=de(G,tt.value,ge),tt!==null&&(O=$(tt,O,Ve),Ue===null?Ne=tt:Ue.sibling=tt,Ue=tt);return Et&&ys(G,Ve),Ne}for(He=h(G,He);!tt.done;Ve++,tt=W.next())tt=Te(He,G,Ve,tt.value,ge),tt!==null&&(r&&tt.alternate!==null&&He.delete(tt.key===null?Ve:tt.key),O=$(tt,O,Ve),Ue===null?Ne=tt:Ue.sibling=tt,Ue=tt);return r&&He.forEach(function(Yh){return s(G,Yh)}),Et&&ys(G,Ve),Ne}function Pt(G,O,W,ge){if(typeof W=="object"&&W!==null&&W.type===$e&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case ve:e:{for(var Ne=W.key,Ue=O;Ue!==null;){if(Ue.key===Ne){if(Ne=W.type,Ne===$e){if(Ue.tag===7){c(G,Ue.sibling),O=g(Ue,W.props.children),O.return=G,G=O;break e}}else if(Ue.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===Xe&&aa(Ne)===Ue.type){c(G,Ue.sibling),O=g(Ue,W.props),O.ref=yo(G,Ue,W),O.return=G,G=O;break e}c(G,Ue);break}else s(G,Ue);Ue=Ue.sibling}W.type===$e?(O=ui(W.props.children,G.mode,ge,W.key),O.return=G,G=O):(ge=As(W.type,W.key,W.props,null,G.mode,ge),ge.ref=yo(G,O,W),ge.return=G,G=ge)}return T(G);case be:e:{for(Ue=W.key;O!==null;){if(O.key===Ue)if(O.tag===4&&O.stateNode.containerInfo===W.containerInfo&&O.stateNode.implementation===W.implementation){c(G,O.sibling),O=g(O,W.children||[]),O.return=G,G=O;break e}else{c(G,O);break}else s(G,O);O=O.sibling}O=cc(W,G.mode,ge),O.return=G,G=O}return T(G);case Xe:return Ue=W._init,Pt(G,O,Ue(W._payload),ge)}if(Le(W))return Oe(G,O,W,ge);if(xe(W))return De(G,O,W,ge);Cl(G,W)}return typeof W=="string"&&W!==""||typeof W=="number"?(W=""+W,O!==null&&O.tag===6?(c(G,O.sibling),O=g(O,W),O.return=G,G=O):(c(G,O),O=Ua(W,G.mode,ge),O.return=G,G=O),T(G)):c(G,O)}return Pt}var Li=Au(!0),gh=Au(!1),Du=Ts(null),Mu=null,Xr=null,Nu=null;function da(){Nu=Xr=Mu=null}function Il(r){var s=Du.current;$t(Du),r._currentValue=s}function tr(r,s,c){for(;r!==null;){var h=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),r===c)break;r=r.return}}function vo(r,s){Mu=r,Nu=Xr=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&s&&(Cn=!0),r.firstContext=null)}function cn(r){var s=r._currentValue;if(Nu!==r)if(r={context:r,memoizedValue:s,next:null},Xr===null){if(Mu===null)throw Error(i(308));Xr=r,Mu.dependencies={lanes:0,firstContext:r}}else Xr=Xr.next=r;return s}var ei=null;function ha(r){ei===null?ei=[r]:ei.push(r)}function kl(r,s,c,h){var g=s.interleaved;return g===null?(c.next=c,ha(s)):(c.next=g.next,g.next=c),s.interleaved=c,Kr(r,h)}function Kr(r,s){r.lanes|=s;var c=r.alternate;for(c!==null&&(c.lanes|=s),c=r,r=r.return;r!==null;)r.childLanes|=s,c=r.alternate,c!==null&&(c.childLanes|=s),c=r,r=r.return;return c.tag===3?c.stateNode:null}var Ss=!1;function xu(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pa(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Yr(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function Cs(r,s,c){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,rt&2){var g=h.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),h.pending=s,Kr(r,c)}return g=h.interleaved,g===null?(s.next=s,ha(h)):(s.next=g.next,g.next=s),h.interleaved=s,Kr(r,c)}function wl(r,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194240)!==0)){var h=s.lanes;h&=r.pendingLanes,c|=h,s.lanes=c,wc(r,c)}}function ga(r,s){var c=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,c===h)){var g=null,$=null;if(c=c.firstBaseUpdate,c!==null){do{var T={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};$===null?g=$=T:$=$.next=T,c=c.next}while(c!==null);$===null?g=$=s:$=$.next=s}else g=$=s;c={baseState:h.baseState,firstBaseUpdate:g,lastBaseUpdate:$,shared:h.shared,effects:h.effects},r.updateQueue=c;return}r=c.lastBaseUpdate,r===null?c.firstBaseUpdate=s:r.next=s,c.lastBaseUpdate=s}function Ol(r,s,c,h){var g=r.updateQueue;Ss=!1;var $=g.firstBaseUpdate,T=g.lastBaseUpdate,I=g.shared.pending;if(I!==null){g.shared.pending=null;var A=I,j=A.next;A.next=null,T===null?$=j:T.next=j,T=A;var ie=r.alternate;ie!==null&&(ie=ie.updateQueue,I=ie.lastBaseUpdate,I!==T&&(I===null?ie.firstBaseUpdate=j:I.next=j,ie.lastBaseUpdate=A))}if($!==null){var de=g.baseState;T=0,ie=j=A=null,I=$;do{var re=I.lane,Te=I.eventTime;if((h&re)===re){ie!==null&&(ie=ie.next={eventTime:Te,lane:0,tag:I.tag,payload:I.payload,callback:I.callback,next:null});e:{var Oe=r,De=I;switch(re=s,Te=c,De.tag){case 1:if(Oe=De.payload,typeof Oe=="function"){de=Oe.call(Te,de,re);break e}de=Oe;break e;case 3:Oe.flags=Oe.flags&-65537|128;case 0:if(Oe=De.payload,re=typeof Oe=="function"?Oe.call(Te,de,re):Oe,re==null)break e;de=Ee({},de,re);break e;case 2:Ss=!0}}I.callback!==null&&I.lane!==0&&(r.flags|=64,re=g.effects,re===null?g.effects=[I]:re.push(I))}else Te={eventTime:Te,lane:re,tag:I.tag,payload:I.payload,callback:I.callback,next:null},ie===null?(j=ie=Te,A=de):ie=ie.next=Te,T|=re;if(I=I.next,I===null){if(I=g.shared.pending,I===null)break;re=I,I=re.next,re.next=null,g.lastBaseUpdate=re,g.shared.pending=null}}while(!0);if(ie===null&&(A=de),g.baseState=A,g.firstBaseUpdate=j,g.lastBaseUpdate=ie,s=g.shared.interleaved,s!==null){g=s;do T|=g.lane,g=g.next;while(g!==s)}else $===null&&(g.shared.lanes=0);Po|=T,r.lanes=T,r.memoizedState=de}}function fa(r,s,c){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var h=r[s],g=h.callback;if(g!==null){if(h.callback=null,h=c,typeof g!="function")throw Error(i(191,g));g.call(h)}}}var Rl={},Jr=Ts(Rl),Ll=Ts(Rl),Al=Ts(Rl);function Ai(r){if(r===Rl)throw Error(i(174));return r}function $a(r,s){switch(_t(Al,s),_t(Ll,r),_t(Jr,Rl),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Bt(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=Bt(s,r)}$t(Jr),_t(Jr,s)}function ti(){$t(Jr),$t(Ll),$t(Al)}function fh(r){Ai(Al.current);var s=Ai(Jr.current),c=Bt(s,r.type);s!==c&&(_t(Ll,r),_t(Jr,c))}function ma(r){Ll.current===r&&($t(Jr),$t(Ll))}var wt=Ts(0);function Dl(r){for(var s=r;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Pu=[];function Bu(){for(var r=0;r<Pu.length;r++)Pu[r]._workInProgressVersionPrimary=null;Pu.length=0}var Ml=pe.ReactCurrentDispatcher,Fu=pe.ReactCurrentBatchConfig,ni=0,yt=null,Ht=null,tn=null,Uu=!1,So=!1,Co=0,$h=0;function pn(){throw Error(i(321))}function Hu(r,s){if(s===null)return!1;for(var c=0;c<s.length&&c<r.length;c++)if(!Zn(r[c],s[c]))return!1;return!0}function Gu(r,s,c,h,g,$){if(ni=$,yt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Ml.current=r===null||r.memoizedState===null?Zp:wo,r=c(h,g),So){$=0;do{if(So=!1,Co=0,25<=$)throw Error(i(301));$+=1,tn=Ht=null,s.updateQueue=null,Ml.current=eg,r=c(h,g)}while(So)}if(Ml.current=Di,s=Ht!==null&&Ht.next!==null,ni=0,tn=Ht=yt=null,Uu=!1,s)throw Error(i(300));return r}function Vu(){var r=Co!==0;return Co=0,r}function wr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?yt.memoizedState=tn=r:tn=tn.next=r,tn}function nr(){if(Ht===null){var r=yt.alternate;r=r!==null?r.memoizedState:null}else r=Ht.next;var s=tn===null?yt.memoizedState:tn.next;if(s!==null)tn=s,Ht=r;else{if(r===null)throw Error(i(310));Ht=r,r={memoizedState:Ht.memoizedState,baseState:Ht.baseState,baseQueue:Ht.baseQueue,queue:Ht.queue,next:null},tn===null?yt.memoizedState=tn=r:tn=tn.next=r}return tn}function Io(r,s){return typeof s=="function"?s(r):s}function _a(r){var s=nr(),c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=r;var h=Ht,g=h.baseQueue,$=c.pending;if($!==null){if(g!==null){var T=g.next;g.next=$.next,$.next=T}h.baseQueue=g=$,c.pending=null}if(g!==null){$=g.next,h=h.baseState;var I=T=null,A=null,j=$;do{var ie=j.lane;if((ni&ie)===ie)A!==null&&(A=A.next={lane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),h=j.hasEagerState?j.eagerState:r(h,j.action);else{var de={lane:ie,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null};A===null?(I=A=de,T=h):A=A.next=de,yt.lanes|=ie,Po|=ie}j=j.next}while(j!==null&&j!==$);A===null?T=h:A.next=I,Zn(h,s.memoizedState)||(Cn=!0),s.memoizedState=h,s.baseState=T,s.baseQueue=A,c.lastRenderedState=h}if(r=c.interleaved,r!==null){g=r;do $=g.lane,yt.lanes|=$,Po|=$,g=g.next;while(g!==r)}else g===null&&(c.lanes=0);return[s.memoizedState,c.dispatch]}function Ta(r){var s=nr(),c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=r;var h=c.dispatch,g=c.pending,$=s.memoizedState;if(g!==null){c.pending=null;var T=g=g.next;do $=r($,T.action),T=T.next;while(T!==g);Zn($,s.memoizedState)||(Cn=!0),s.memoizedState=$,s.baseQueue===null&&(s.baseState=$),c.lastRenderedState=$}return[$,h]}function mh(){}function Ea(r,s){var c=yt,h=nr(),g=s(),$=!Zn(h.memoizedState,g);if($&&(h.memoizedState=g,Cn=!0),h=h.queue,qr(Eh.bind(null,c,h,r),[r]),h.getSnapshot!==s||$||tn!==null&&tn.memoizedState.tag&1){if(c.flags|=2048,Or(9,Th.bind(null,c,h,g,s),void 0,null),$n===null)throw Error(i(349));ni&30||_h(c,s,g)}return g}function _h(r,s,c){r.flags|=16384,r={getSnapshot:s,value:c},s=yt.updateQueue,s===null?(s={lastEffect:null,stores:null},yt.updateQueue=s,s.stores=[r]):(c=s.stores,c===null?s.stores=[r]:c.push(r))}function Th(r,s,c,h){s.value=c,s.getSnapshot=h,bh(s)&&yh(r)}function Eh(r,s,c){return c(function(){bh(s)&&yh(r)})}function bh(r){var s=r.getSnapshot;r=r.value;try{var c=s();return!Zn(r,c)}catch{return!0}}function yh(r){var s=Kr(r,1);s!==null&&Lr(s,r,1,-1)}function ee(r){var s=wr();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:r},s.queue=r,r=r.dispatch=Oh.bind(null,yt,r),[s.memoizedState,r]}function Or(r,s,c,h){return r={tag:r,create:s,destroy:c,deps:h,next:null},s=yt.updateQueue,s===null?(s={lastEffect:null,stores:null},yt.updateQueue=s,s.lastEffect=r.next=r):(c=s.lastEffect,c===null?s.lastEffect=r.next=r:(h=c.next,c.next=r,r.next=h,s.lastEffect=r)),r}function qp(){return nr().memoizedState}function ko(r,s,c,h){var g=wr();yt.flags|=r,g.memoizedState=Or(1|s,c,void 0,h===void 0?null:h)}function hr(r,s,c,h){var g=nr();h=h===void 0?null:h;var $=void 0;if(Ht!==null){var T=Ht.memoizedState;if($=T.destroy,h!==null&&Hu(h,T.deps)){g.memoizedState=Or(s,c,$,h);return}}yt.flags|=r,g.memoizedState=Or(1|s,c,$,h)}function ne(r,s){return ko(8390656,8,r,s)}function qr(r,s){return hr(2048,8,r,s)}function Wn(r,s){return hr(4,2,r,s)}function z(r,s){return hr(4,4,r,s)}function vh(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function Sh(r,s,c){return c=c!=null?c.concat([r]):null,hr(4,4,vh.bind(null,s,r),c)}function ba(){}function Ch(r,s){var c=nr();s=s===void 0?null:s;var h=c.memoizedState;return h!==null&&s!==null&&Hu(s,h[1])?h[0]:(c.memoizedState=[r,s],r)}function Ih(r,s){var c=nr();s=s===void 0?null:s;var h=c.memoizedState;return h!==null&&s!==null&&Hu(s,h[1])?h[0]:(r=r(),c.memoizedState=[r,s],r)}function Qp(r,s,c){return ni&21?(Zn(c,s)||(c=Ic(),yt.lanes|=c,Po|=c,r.baseState=!0),s):(r.baseState&&(r.baseState=!1,Cn=!0),r.memoizedState=c)}function kh(r,s){var c=ot;ot=c!==0&&4>c?c:4,r(!0);var h=Fu.transition;Fu.transition={};try{r(!1),s()}finally{ot=c,Fu.transition=h}}function wh(){return nr().memoizedState}function Wu(r,s,c){var h=oi(r);if(c={lane:h,action:c,hasEagerState:!1,eagerState:null,next:null},ya(r))Is(s,c);else if(c=kl(r,s,c,h),c!==null){var g=xn();Lr(c,r,h,g),Rh(c,s,h)}}function Oh(r,s,c){var h=oi(r),g={lane:h,action:c,hasEagerState:!1,eagerState:null,next:null};if(ya(r))Is(s,g);else{var $=r.alternate;if(r.lanes===0&&($===null||$.lanes===0)&&($=s.lastRenderedReducer,$!==null))try{var T=s.lastRenderedState,I=$(T,c);if(g.hasEagerState=!0,g.eagerState=I,Zn(I,T)){var A=s.interleaved;A===null?(g.next=g,ha(s)):(g.next=A.next,A.next=g),s.interleaved=g;return}}catch{}finally{}c=kl(r,s,g,h),c!==null&&(g=xn(),Lr(c,r,h,g),Rh(c,s,h))}}function ya(r){var s=r.alternate;return r===yt||s!==null&&s===yt}function Is(r,s){So=Uu=!0;var c=r.pending;c===null?s.next=s:(s.next=c.next,c.next=s),r.pending=s}function Rh(r,s,c){if(c&4194240){var h=s.lanes;h&=r.pendingLanes,c|=h,s.lanes=c,wc(r,c)}}var Di={readContext:cn,useCallback:pn,useContext:pn,useEffect:pn,useImperativeHandle:pn,useInsertionEffect:pn,useLayoutEffect:pn,useMemo:pn,useReducer:pn,useRef:pn,useState:pn,useDebugValue:pn,useDeferredValue:pn,useTransition:pn,useMutableSource:pn,useSyncExternalStore:pn,useId:pn,unstable_isNewReconciler:!1},Zp={readContext:cn,useCallback:function(r,s){return wr().memoizedState=[r,s===void 0?null:s],r},useContext:cn,useEffect:ne,useImperativeHandle:function(r,s,c){return c=c!=null?c.concat([r]):null,ko(4194308,4,vh.bind(null,s,r),c)},useLayoutEffect:function(r,s){return ko(4194308,4,r,s)},useInsertionEffect:function(r,s){return ko(4,2,r,s)},useMemo:function(r,s){var c=wr();return s=s===void 0?null:s,r=r(),c.memoizedState=[r,s],r},useReducer:function(r,s,c){var h=wr();return s=c!==void 0?c(s):s,h.memoizedState=h.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},h.queue=r,r=r.dispatch=Wu.bind(null,yt,r),[h.memoizedState,r]},useRef:function(r){var s=wr();return r={current:r},s.memoizedState=r},useState:ee,useDebugValue:ba,useDeferredValue:function(r){return wr().memoizedState=r},useTransition:function(){var r=ee(!1),s=r[0];return r=kh.bind(null,r[1]),wr().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,c){var h=yt,g=wr();if(Et){if(c===void 0)throw Error(i(407));c=c()}else{if(c=s(),$n===null)throw Error(i(349));ni&30||_h(h,s,c)}g.memoizedState=c;var $={value:c,getSnapshot:s};return g.queue=$,ne(Eh.bind(null,h,$,r),[r]),h.flags|=2048,Or(9,Th.bind(null,h,$,c,s),void 0,null),c},useId:function(){var r=wr(),s=$n.identifierPrefix;if(Et){var c=jr,h=bs;c=(h&~(1<<32-vr(h)-1)).toString(32)+c,s=":"+s+"R"+c,c=Co++,0<c&&(s+="H"+c.toString(32)),s+=":"}else c=$h++,s=":"+s+"r"+c.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},wo={readContext:cn,useCallback:Ch,useContext:cn,useEffect:qr,useImperativeHandle:Sh,useInsertionEffect:Wn,useLayoutEffect:z,useMemo:Ih,useReducer:_a,useRef:qp,useState:function(){return _a(Io)},useDebugValue:ba,useDeferredValue:function(r){var s=nr();return Qp(s,Ht.memoizedState,r)},useTransition:function(){var r=_a(Io)[0],s=nr().memoizedState;return[r,s]},useMutableSource:mh,useSyncExternalStore:Ea,useId:wh,unstable_isNewReconciler:!1},eg={readContext:cn,useCallback:Ch,useContext:cn,useEffect:qr,useImperativeHandle:Sh,useInsertionEffect:Wn,useLayoutEffect:z,useMemo:Ih,useReducer:Ta,useRef:qp,useState:function(){return Ta(Io)},useDebugValue:ba,useDeferredValue:function(r){var s=nr();return Ht===null?s.memoizedState=r:Qp(s,Ht.memoizedState,r)},useTransition:function(){var r=Ta(Io)[0],s=nr().memoizedState;return[r,s]},useMutableSource:mh,useSyncExternalStore:Ea,useId:wh,unstable_isNewReconciler:!1};function zn(r,s){if(r&&r.defaultProps){s=Ee({},s),r=r.defaultProps;for(var c in r)s[c]===void 0&&(s[c]=r[c]);return s}return s}function va(r,s,c,h){s=r.memoizedState,c=c(h,s),c=c==null?s:Ee({},s,c),r.memoizedState=c,r.lanes===0&&(r.updateQueue.baseState=c)}var nn={isMounted:function(r){return(r=r._reactInternals)?mi(r)===r:!1},enqueueSetState:function(r,s,c){r=r._reactInternals;var h=xn(),g=oi(r),$=Yr(h,g);$.payload=s,c!=null&&($.callback=c),s=Cs(r,$,g),s!==null&&(Lr(s,r,g,h),wl(s,r,g))},enqueueReplaceState:function(r,s,c){r=r._reactInternals;var h=xn(),g=oi(r),$=Yr(h,g);$.tag=1,$.payload=s,c!=null&&($.callback=c),s=Cs(r,$,g),s!==null&&(Lr(s,r,g,h),wl(s,r,g))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var c=xn(),h=oi(r),g=Yr(c,h);g.tag=2,s!=null&&(g.callback=s),s=Cs(r,g,h),s!==null&&(Lr(s,r,h,c),wl(s,r,h))}};function Oo(r,s,c,h,g,$,T){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,$,T):s.prototype&&s.prototype.isPureReactComponent?!Vr(c,h)||!Vr(g,$):!0}function Rr(r,s,c){var h=!1,g=Qs,$=s.contextType;return typeof $=="object"&&$!==null?$=cn($):(g=Sn(s)?Es:vn.current,h=s.contextTypes,$=(h=h!=null)?Oi(r,g):Qs),s=new s(c,$),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=nn,r.stateNode=s,s._reactInternals=r,h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=g,r.__reactInternalMemoizedMaskedChildContext=$),s}function Sa(r,s,c,h){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,h),s.state!==r&&nn.enqueueReplaceState(s,s.state,null)}function zu(r,s,c,h){var g=r.stateNode;g.props=c,g.state=r.memoizedState,g.refs={},xu(r);var $=s.contextType;typeof $=="object"&&$!==null?g.context=cn($):($=Sn(s)?Es:vn.current,g.context=Oi(r,$)),g.state=r.memoizedState,$=s.getDerivedStateFromProps,typeof $=="function"&&(va(r,s,$,c),g.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(s=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),s!==g.state&&nn.enqueueReplaceState(g,g.state,null),Ol(r,c,g,h),g.state=r.memoizedState),typeof g.componentDidMount=="function"&&(r.flags|=4194308)}function Nl(r,s){try{var c="",h=s;do c+=je(h),h=h.return;while(h);var g=c}catch($){g=`
Error generating stack: `+$.message+`
`+$.stack}return{value:r,source:s,stack:g,digest:null}}function Ca(r,s,c){return{value:r,source:null,stack:c??null,digest:s??null}}function xl(r,s){try{console.error(s.value)}catch(c){setTimeout(function(){throw c})}}var Ro=typeof WeakMap=="function"?WeakMap:Map;function ju(r,s,c){c=Yr(-1,c),c.tag=3,c.payload={element:null};var h=s.value;return c.callback=function(){Bo||(Bo=!0,kn=h),xl(r,s)},c}function Mi(r,s,c){c=Yr(-1,c),c.tag=3;var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var g=s.value;c.payload=function(){return h(g)},c.callback=function(){xl(r,s)}}var $=r.stateNode;return $!==null&&typeof $.componentDidCatch=="function"&&(c.callback=function(){xl(r,s),typeof h!="function"&&(Bi===null?Bi=new Set([this]):Bi.add(this));var T=s.stack;this.componentDidCatch(s.value,{componentStack:T!==null?T:""})}),c}function Ia(r,s,c){var h=r.pingCache;if(h===null){h=r.pingCache=new Ro;var g=new Set;h.set(s,g)}else g=h.get(s),g===void 0&&(g=new Set,h.set(s,g));g.has(c)||(g.add(c),r=Ba.bind(null,r,s,c),s.then(r,r))}function Lh(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function Ah(r,s,c,h,g){return r.mode&1?(r.flags|=65536,r.lanes=g,r):(r===s?r.flags|=65536:(r.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(s=Yr(-1,1),s.tag=2,Cs(c,s,1))),c.lanes|=1),r)}var tg=pe.ReactCurrentOwner,Cn=!1;function gn(r,s,c,h){s.child=r===null?gh(s,null,c,h):Li(s,r.child,c,h)}function ka(r,s,c,h,g){c=c.render;var $=s.ref;return vo(s,g),h=Gu(r,s,c,h,$,g),c=Vu(),r!==null&&!Cn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~g,Zr(r,s,g)):(Et&&c&&Ru(s),s.flags|=1,gn(r,s,h,g),s.child)}function Dh(r,s,c,h,g){if(r===null){var $=c.type;return typeof $=="function"&&!Gi($)&&$.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(s.tag=15,s.type=$,Mh(r,s,$,h,g)):(r=As(c.type,null,h,s,s.mode,g),r.ref=s.ref,r.return=s,s.child=r)}if($=r.child,!(r.lanes&g)){var T=$.memoizedProps;if(c=c.compare,c=c!==null?c:Vr,c(T,h)&&r.ref===s.ref)return Zr(r,s,g)}return s.flags|=1,r=_r($,h),r.ref=s.ref,r.return=s,s.child=r}function Mh(r,s,c,h,g){if(r!==null){var $=r.memoizedProps;if(Vr($,h)&&r.ref===s.ref)if(Cn=!1,s.pendingProps=h=$,(r.lanes&g)!==0)r.flags&131072&&(Cn=!0);else return s.lanes=r.lanes,Zr(r,s,g)}return wa(r,s,c,h,g)}function Nh(r,s,c){var h=s.pendingProps,g=h.children,$=r!==null?r.memoizedState:null;if(h.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},_t(xi,Nn),Nn|=c;else{if(!(c&1073741824))return r=$!==null?$.baseLanes|c:c,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,_t(xi,Nn),Nn|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=$!==null?$.baseLanes:c,_t(xi,Nn),Nn|=h}else $!==null?(h=$.baseLanes|c,s.memoizedState=null):h=c,_t(xi,Nn),Nn|=h;return gn(r,s,g,c),s.child}function ng(r,s){var c=s.ref;(r===null&&c!==null||r!==null&&r.ref!==c)&&(s.flags|=512,s.flags|=2097152)}function wa(r,s,c,h,g){var $=Sn(c)?Es:vn.current;return $=Oi(s,$),vo(s,g),c=Gu(r,s,c,h,$,g),h=Vu(),r!==null&&!Cn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~g,Zr(r,s,g)):(Et&&h&&Ru(s),s.flags|=1,gn(r,s,c,g),s.child)}function xh(r,s,c,h,g){if(Sn(c)){var $=!0;wu(s)}else $=!1;if(vo(s,g),s.stateNode===null)Pl(r,s),Rr(s,c,h),zu(s,c,h,g),h=!0;else if(r===null){var T=s.stateNode,I=s.memoizedProps;T.props=I;var A=T.context,j=c.contextType;typeof j=="object"&&j!==null?j=cn(j):(j=Sn(c)?Es:vn.current,j=Oi(s,j));var ie=c.getDerivedStateFromProps,de=typeof ie=="function"||typeof T.getSnapshotBeforeUpdate=="function";de||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(I!==h||A!==j)&&Sa(s,T,h,j),Ss=!1;var re=s.memoizedState;T.state=re,Ol(s,h,T,g),A=s.memoizedState,I!==h||re!==A||Dn.current||Ss?(typeof ie=="function"&&(va(s,c,ie,h),A=s.memoizedState),(I=Ss||Oo(s,c,I,h,re,A,j))?(de||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(s.flags|=4194308)):(typeof T.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=A),T.props=h,T.state=A,T.context=j,h=I):(typeof T.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{T=s.stateNode,pa(r,s),I=s.memoizedProps,j=s.type===s.elementType?I:zn(s.type,I),T.props=j,de=s.pendingProps,re=T.context,A=c.contextType,typeof A=="object"&&A!==null?A=cn(A):(A=Sn(c)?Es:vn.current,A=Oi(s,A));var Te=c.getDerivedStateFromProps;(ie=typeof Te=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(I!==de||re!==A)&&Sa(s,T,h,A),Ss=!1,re=s.memoizedState,T.state=re,Ol(s,h,T,g);var Oe=s.memoizedState;I!==de||re!==Oe||Dn.current||Ss?(typeof Te=="function"&&(va(s,c,Te,h),Oe=s.memoizedState),(j=Ss||Oo(s,c,j,h,re,Oe,A)||!1)?(ie||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(h,Oe,A),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(h,Oe,A)),typeof T.componentDidUpdate=="function"&&(s.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof T.componentDidUpdate!="function"||I===r.memoizedProps&&re===r.memoizedState||(s.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||I===r.memoizedProps&&re===r.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=Oe),T.props=h,T.state=Oe,T.context=A,h=j):(typeof T.componentDidUpdate!="function"||I===r.memoizedProps&&re===r.memoizedState||(s.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||I===r.memoizedProps&&re===r.memoizedState||(s.flags|=1024),h=!1)}return Xu(r,s,c,h,$,g)}function Xu(r,s,c,h,g,$){ng(r,s);var T=(s.flags&128)!==0;if(!h&&!T)return g&&Ae(s,c,!1),Zr(r,s,$);h=s.stateNode,tg.current=s;var I=T&&typeof c.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,r!==null&&T?(s.child=Li(s,r.child,null,$),s.child=Li(s,null,I,$)):gn(r,s,I,$),s.memoizedState=h.state,g&&Ae(s,c,!0),s.child}function Ku(r){var s=r.stateNode;s.pendingContext?ch(r,s.pendingContext,s.pendingContext!==s.context):s.context&&ch(r,s.context,!1),$a(r,s.containerInfo)}function Ph(r,s,c,h,g){return vs(),ca(g),s.flags|=256,gn(r,s,c,h),s.child}var Yu={dehydrated:null,treeContext:null,retryLane:0};function Oa(r){return{baseLanes:r,cachePool:null,transitions:null}}function rg(r,s,c){var h=s.pendingProps,g=wt.current,$=!1,T=(s.flags&128)!==0,I;if((I=T)||(I=r!==null&&r.memoizedState===null?!1:(g&2)!==0),I?($=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(g|=1),_t(wt,g&1),r===null)return la(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(s.mode&1?r.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(T=h.children,r=h.fallback,$?(h=s.mode,$=s.child,T={mode:"hidden",children:T},!(h&1)&&$!==null?($.childLanes=0,$.pendingProps=T):$=rs(T,h,0,null),r=ui(r,h,c,null),$.return=s,r.return=s,$.sibling=r,s.child=$,s.child.memoizedState=Oa(c),s.memoizedState=Yu,r):Ra(s,T));if(g=r.memoizedState,g!==null&&(I=g.dehydrated,I!==null))return ri(r,s,T,h,I,g,c);if($){$=h.fallback,T=s.mode,g=r.child,I=g.sibling;var A={mode:"hidden",children:h.children};return!(T&1)&&s.child!==g?(h=s.child,h.childLanes=0,h.pendingProps=A,s.deletions=null):(h=_r(g,A),h.subtreeFlags=g.subtreeFlags&14680064),I!==null?$=_r(I,$):($=ui($,T,c,null),$.flags|=2),$.return=s,h.return=s,h.sibling=$,s.child=h,h=$,$=s.child,T=r.child.memoizedState,T=T===null?Oa(c):{baseLanes:T.baseLanes|c,cachePool:null,transitions:T.transitions},$.memoizedState=T,$.childLanes=r.childLanes&~c,s.memoizedState=Yu,h}return $=r.child,r=$.sibling,h=_r($,{mode:"visible",children:h.children}),!(s.mode&1)&&(h.lanes=c),h.return=s,h.sibling=null,r!==null&&(c=s.deletions,c===null?(s.deletions=[r],s.flags|=16):c.push(r)),s.child=h,s.memoizedState=null,h}function Ra(r,s){return s=rs({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function Ju(r,s,c,h){return h!==null&&ca(h),Li(s,r.child,null,c),r=Ra(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function ri(r,s,c,h,g,$,T){if(c)return s.flags&256?(s.flags&=-257,h=Ca(Error(i(422))),Ju(r,s,T,h)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):($=h.fallback,g=s.mode,h=rs({mode:"visible",children:h.children},g,0,null),$=ui($,g,T,null),$.flags|=2,h.return=s,$.return=s,h.sibling=$,s.child=h,s.mode&1&&Li(s,r.child,null,T),s.child.memoizedState=Oa(T),s.memoizedState=Yu,$);if(!(s.mode&1))return Ju(r,s,T,null);if(g.data==="$!"){if(h=g.nextSibling&&g.nextSibling.dataset,h)var I=h.dgst;return h=I,$=Error(i(419)),h=Ca($,h,void 0),Ju(r,s,T,h)}if(I=(T&r.childLanes)!==0,Cn||I){if(h=$n,h!==null){switch(T&-T){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=g&(h.suspendedLanes|T)?0:g,g!==0&&g!==$.retryLane&&($.retryLane=g,Kr(r,g),Lr(h,r,g,-1))}return Go(),h=Ca(Error(i(421))),Ju(r,s,T,h)}return g.data==="$?"?(s.flags|=128,s.child=r.child,s=ug.bind(null,r),g._reactRetry=s,null):(r=$.treeContext,er=qs(g.nextSibling),Vn=s,Et=!0,kr=null,r!==null&&(Hn[Gn++]=bs,Hn[Gn++]=jr,Hn[Gn++]=Zs,bs=r.id,jr=r.overflow,Zs=s),s=Ra(s,h.children),s.flags|=4096,s)}function Bh(r,s,c){r.lanes|=s;var h=r.alternate;h!==null&&(h.lanes|=s),tr(r.return,s,c)}function Qr(r,s,c,h,g){var $=r.memoizedState;$===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:c,tailMode:g}:($.isBackwards=s,$.rendering=null,$.renderingStartTime=0,$.last=h,$.tail=c,$.tailMode=g)}function vt(r,s,c){var h=s.pendingProps,g=h.revealOrder,$=h.tail;if(gn(r,s,h.children,c),h=wt.current,h&2)h=h&1|2,s.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Bh(r,c,s);else if(r.tag===19)Bh(r,c,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}h&=1}if(_t(wt,h),!(s.mode&1))s.memoizedState=null;else switch(g){case"forwards":for(c=s.child,g=null;c!==null;)r=c.alternate,r!==null&&Dl(r)===null&&(g=c),c=c.sibling;c=g,c===null?(g=s.child,s.child=null):(g=c.sibling,c.sibling=null),Qr(s,!1,g,c,$);break;case"backwards":for(c=null,g=s.child,s.child=null;g!==null;){if(r=g.alternate,r!==null&&Dl(r)===null){s.child=g;break}r=g.sibling,g.sibling=c,c=g,g=r}Qr(s,!0,c,null,$);break;case"together":Qr(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Pl(r,s){!(s.mode&1)&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function Zr(r,s,c){if(r!==null&&(s.dependencies=r.dependencies),Po|=s.lanes,!(c&s.childLanes))return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,c=_r(r,r.pendingProps),s.child=c,c.return=s;r.sibling!==null;)r=r.sibling,c=c.sibling=_r(r,r.pendingProps),c.return=s;c.sibling=null}return s.child}function Fh(r,s,c){switch(s.tag){case 3:Ku(s),vs();break;case 5:fh(s);break;case 1:Sn(s.type)&&wu(s);break;case 4:$a(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,g=s.memoizedProps.value;_t(Du,h._currentValue),h._currentValue=g;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(_t(wt,wt.current&1),s.flags|=128,null):c&s.child.childLanes?rg(r,s,c):(_t(wt,wt.current&1),r=Zr(r,s,c),r!==null?r.sibling:null);_t(wt,wt.current&1);break;case 19:if(h=(c&s.childLanes)!==0,r.flags&128){if(h)return vt(r,s,c);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),_t(wt,wt.current),h)break;return null;case 22:case 23:return s.lanes=0,Nh(r,s,c)}return Zr(r,s,c)}var ae,Lo,es,rr;ae=function(r,s){for(var c=s.child;c!==null;){if(c.tag===5||c.tag===6)r.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===s)break;for(;c.sibling===null;){if(c.return===null||c.return===s)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Lo=function(){},es=function(r,s,c,h){var g=r.memoizedProps;if(g!==h){r=s.stateNode,Ai(Jr.current);var $=null;switch(c){case"input":g=Gs(r,g),h=Gs(r,h),$=[];break;case"select":g=Ee({},g,{value:void 0}),h=Ee({},h,{value:void 0}),$=[];break;case"textarea":g=et(r,g),h=et(r,h),$=[];break;default:typeof g.onClick!="function"&&typeof h.onClick=="function"&&(r.onclick=El)}fe(c,h);var T;c=null;for(j in g)if(!h.hasOwnProperty(j)&&g.hasOwnProperty(j)&&g[j]!=null)if(j==="style"){var I=g[j];for(T in I)I.hasOwnProperty(T)&&(c||(c={}),c[T]="")}else j!=="dangerouslySetInnerHTML"&&j!=="children"&&j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(p.hasOwnProperty(j)?$||($=[]):($=$||[]).push(j,null));for(j in h){var A=h[j];if(I=g!=null?g[j]:void 0,h.hasOwnProperty(j)&&A!==I&&(A!=null||I!=null))if(j==="style")if(I){for(T in I)!I.hasOwnProperty(T)||A&&A.hasOwnProperty(T)||(c||(c={}),c[T]="");for(T in A)A.hasOwnProperty(T)&&I[T]!==A[T]&&(c||(c={}),c[T]=A[T])}else c||($||($=[]),$.push(j,c)),c=A;else j==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,I=I?I.__html:void 0,A!=null&&I!==A&&($=$||[]).push(j,A)):j==="children"?typeof A!="string"&&typeof A!="number"||($=$||[]).push(j,""+A):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&(p.hasOwnProperty(j)?(A!=null&&j==="onScroll"&&bt("scroll",r),$||I===A||($=[])):($=$||[]).push(j,A))}c&&($=$||[]).push("style",c);var j=$;(s.updateQueue=j)&&(s.flags|=4)}},rr=function(r,s,c,h){c!==h&&(s.flags|=4)};function pr(r,s){if(!Et)switch(r.tailMode){case"hidden":s=r.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?r.tail=null:c.sibling=null;break;case"collapsed":c=r.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function St(r){var s=r.alternate!==null&&r.alternate.child===r.child,c=0,h=0;if(s)for(var g=r.child;g!==null;)c|=g.lanes|g.childLanes,h|=g.subtreeFlags&14680064,h|=g.flags&14680064,g.return=r,g=g.sibling;else for(g=r.child;g!==null;)c|=g.lanes|g.childLanes,h|=g.subtreeFlags,h|=g.flags,g.return=r,g=g.sibling;return r.subtreeFlags|=h,r.childLanes=c,s}function Uh(r,s,c){var h=s.pendingProps;switch(ia(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(s),null;case 1:return Sn(s.type)&&ku(),St(s),null;case 3:return h=s.stateNode,ti(),$t(Dn),$t(vn),Bu(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(r===null||r.child===null)&&(Lu(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,kr!==null&&(xa(kr),kr=null))),Lo(r,s),St(s),null;case 5:ma(s);var g=Ai(Al.current);if(c=s.type,r!==null&&s.stateNode!=null)es(r,s,c,h,g),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(i(166));return St(s),null}if(r=Ai(Jr.current),Lu(s)){h=s.stateNode,c=s.type;var $=s.memoizedProps;switch(h[cr]=s,h[Eo]=$,r=(s.mode&1)!==0,c){case"dialog":bt("cancel",h),bt("close",h);break;case"iframe":case"object":case"embed":bt("load",h);break;case"video":case"audio":for(g=0;g<_o.length;g++)bt(_o[g],h);break;case"source":bt("error",h);break;case"img":case"image":case"link":bt("error",h),bt("load",h);break;case"details":bt("toggle",h);break;case"input":En(h,$),bt("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!$.multiple},bt("invalid",h);break;case"textarea":Fr(h,$),bt("invalid",h)}fe(c,$),g=null;for(var T in $)if($.hasOwnProperty(T)){var I=$[T];T==="children"?typeof I=="string"?h.textContent!==I&&($.suppressHydrationWarning!==!0&&_s(h.textContent,I,r),g=["children",I]):typeof I=="number"&&h.textContent!==""+I&&($.suppressHydrationWarning!==!0&&_s(h.textContent,I,r),g=["children",""+I]):p.hasOwnProperty(T)&&I!=null&&T==="onScroll"&&bt("scroll",h)}switch(c){case"input":Wt(h),ir(h,$,!0);break;case"textarea":Wt(h),dn(h);break;case"select":case"option":break;default:typeof $.onClick=="function"&&(h.onclick=El)}h=g,s.updateQueue=h,h!==null&&(s.flags|=4)}else{T=g.nodeType===9?g:g.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=br(c)),r==="http://www.w3.org/1999/xhtml"?c==="script"?(r=T.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof h.is=="string"?r=T.createElement(c,{is:h.is}):(r=T.createElement(c),c==="select"&&(T=r,h.multiple?T.multiple=!0:h.size&&(T.size=h.size))):r=T.createElementNS(r,c),r[cr]=s,r[Eo]=h,ae(r,s,!1,!1),s.stateNode=r;e:{switch(T=ht(c,h),c){case"dialog":bt("cancel",r),bt("close",r),g=h;break;case"iframe":case"object":case"embed":bt("load",r),g=h;break;case"video":case"audio":for(g=0;g<_o.length;g++)bt(_o[g],r);g=h;break;case"source":bt("error",r),g=h;break;case"img":case"image":case"link":bt("error",r),bt("load",r),g=h;break;case"details":bt("toggle",r),g=h;break;case"input":En(r,h),g=Gs(r,h),bt("invalid",r);break;case"option":g=h;break;case"select":r._wrapperState={wasMultiple:!!h.multiple},g=Ee({},h,{value:void 0}),bt("invalid",r);break;case"textarea":Fr(r,h),g=et(r,h),bt("invalid",r);break;default:g=h}fe(c,g),I=g;for($ in I)if(I.hasOwnProperty($)){var A=I[$];$==="style"?N(r,A):$==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,A!=null&&fi(r,A)):$==="children"?typeof A=="string"?(c!=="textarea"||A!=="")&&J(r,A):typeof A=="number"&&J(r,""+A):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(p.hasOwnProperty($)?A!=null&&$==="onScroll"&&bt("scroll",r):A!=null&&he(r,$,A,T))}switch(c){case"input":Wt(r),ir(r,h,!1);break;case"textarea":Wt(r),dn(r);break;case"option":h.value!=null&&r.setAttribute("value",""+Ke(h.value));break;case"select":r.multiple=!!h.multiple,$=h.value,$!=null?nt(r,!!h.multiple,$,!1):h.defaultValue!=null&&nt(r,!!h.multiple,h.defaultValue,!0);break;default:typeof g.onClick=="function"&&(r.onclick=El)}switch(c){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return St(s),null;case 6:if(r&&s.stateNode!=null)rr(r,s,r.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(i(166));if(c=Ai(Al.current),Ai(Jr.current),Lu(s)){if(h=s.stateNode,c=s.memoizedProps,h[cr]=s,($=h.nodeValue!==c)&&(r=Vn,r!==null))switch(r.tag){case 3:_s(h.nodeValue,c,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&_s(h.nodeValue,c,(r.mode&1)!==0)}$&&(s.flags|=4)}else h=(c.nodeType===9?c:c.ownerDocument).createTextNode(h),h[cr]=s,s.stateNode=h}return St(s),null;case 13:if($t(wt),h=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Et&&er!==null&&s.mode&1&&!(s.flags&128))Sl(),vs(),s.flags|=98560,$=!1;else if($=Lu(s),h!==null&&h.dehydrated!==null){if(r===null){if(!$)throw Error(i(318));if($=s.memoizedState,$=$!==null?$.dehydrated:null,!$)throw Error(i(317));$[cr]=s}else vs(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;St(s),$=!1}else kr!==null&&(xa(kr),kr=null),$=!0;if(!$)return s.flags&65536?s:null}return s.flags&128?(s.lanes=c,s):(h=h!==null,h!==(r!==null&&r.memoizedState!==null)&&h&&(s.child.flags|=8192,s.mode&1&&(r===null||wt.current&1?Yt===0&&(Yt=3):Go())),s.updateQueue!==null&&(s.flags|=4),St(s),null);case 4:return ti(),Lo(r,s),r===null&&Js(s.stateNode.containerInfo),St(s),null;case 10:return Il(s.type._context),St(s),null;case 17:return Sn(s.type)&&ku(),St(s),null;case 19:if($t(wt),$=s.memoizedState,$===null)return St(s),null;if(h=(s.flags&128)!==0,T=$.rendering,T===null)if(h)pr($,!1);else{if(Yt!==0||r!==null&&r.flags&128)for(r=s.child;r!==null;){if(T=Dl(r),T!==null){for(s.flags|=128,pr($,!1),h=T.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=c,c=s.child;c!==null;)$=c,r=h,$.flags&=14680066,T=$.alternate,T===null?($.childLanes=0,$.lanes=r,$.child=null,$.subtreeFlags=0,$.memoizedProps=null,$.memoizedState=null,$.updateQueue=null,$.dependencies=null,$.stateNode=null):($.childLanes=T.childLanes,$.lanes=T.lanes,$.child=T.child,$.subtreeFlags=0,$.deletions=null,$.memoizedProps=T.memoizedProps,$.memoizedState=T.memoizedState,$.updateQueue=T.updateQueue,$.type=T.type,r=T.dependencies,$.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),c=c.sibling;return _t(wt,wt.current&1|2),s.child}r=r.sibling}$.tail!==null&&Ft()>Pi&&(s.flags|=128,h=!0,pr($,!1),s.lanes=4194304)}else{if(!h)if(r=Dl(T),r!==null){if(s.flags|=128,h=!0,c=r.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),pr($,!0),$.tail===null&&$.tailMode==="hidden"&&!T.alternate&&!Et)return St(s),null}else 2*Ft()-$.renderingStartTime>Pi&&c!==1073741824&&(s.flags|=128,h=!0,pr($,!1),s.lanes=4194304);$.isBackwards?(T.sibling=s.child,s.child=T):(c=$.last,c!==null?c.sibling=T:s.child=T,$.last=T)}return $.tail!==null?(s=$.tail,$.rendering=s,$.tail=s.sibling,$.renderingStartTime=Ft(),s.sibling=null,c=wt.current,_t(wt,h?c&1|2:c&1),s):(St(s),null);case 22:case 23:return Pa(),h=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==h&&(s.flags|=8192),h&&s.mode&1?Nn&1073741824&&(St(s),s.subtreeFlags&6&&(s.flags|=8192)):St(s),null;case 24:return null;case 25:return null}throw Error(i(156,s.tag))}function La(r,s){switch(ia(s),s.tag){case 1:return Sn(s.type)&&ku(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return ti(),$t(Dn),$t(vn),Bu(),r=s.flags,r&65536&&!(r&128)?(s.flags=r&-65537|128,s):null;case 5:return ma(s),null;case 13:if($t(wt),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));vs()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return $t(wt),null;case 4:return ti(),null;case 10:return Il(s.type._context),null;case 22:case 23:return Pa(),null;case 24:return null;default:return null}}var Zt=!1,P=!1,ct=typeof WeakSet=="function"?WeakSet:Set,oe=null;function Ao(r,s){var c=r.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(h){Ot(r,s,h)}else c.current=null}function ks(r,s,c){try{c()}catch(h){Ot(r,s,h)}}var Hh=!1;function sg(r,s){if(Qc=ou,r=Ut(),Wc(r)){if("selectionStart"in r)var c={start:r.selectionStart,end:r.selectionEnd};else e:{c=(c=r.ownerDocument)&&c.defaultView||window;var h=c.getSelection&&c.getSelection();if(h&&h.rangeCount!==0){c=h.anchorNode;var g=h.anchorOffset,$=h.focusNode;h=h.focusOffset;try{c.nodeType,$.nodeType}catch{c=null;break e}var T=0,I=-1,A=-1,j=0,ie=0,de=r,re=null;t:for(;;){for(var Te;de!==c||g!==0&&de.nodeType!==3||(I=T+g),de!==$||h!==0&&de.nodeType!==3||(A=T+h),de.nodeType===3&&(T+=de.nodeValue.length),(Te=de.firstChild)!==null;)re=de,de=Te;for(;;){if(de===r)break t;if(re===c&&++j===g&&(I=T),re===$&&++ie===h&&(A=T),(Te=de.nextSibling)!==null)break;de=re,re=de.parentNode}de=Te}c=I===-1||A===-1?null:{start:I,end:A}}else c=null}c=c||{start:0,end:0}}else c=null;for(Zc={focusedElem:r,selectionRange:c},ou=!1,oe=s;oe!==null;)if(s=oe,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,oe=r;else for(;oe!==null;){s=oe;try{var Oe=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(Oe!==null){var De=Oe.memoizedProps,Pt=Oe.memoizedState,G=s.stateNode,O=G.getSnapshotBeforeUpdate(s.elementType===s.type?De:zn(s.type,De),Pt);G.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var W=s.stateNode.containerInfo;W.nodeType===1?W.textContent="":W.nodeType===9&&W.documentElement&&W.removeChild(W.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(ge){Ot(s,s.return,ge)}if(r=s.sibling,r!==null){r.return=s.return,oe=r;break}oe=s.return}return Oe=Hh,Hh=!1,Oe}function qu(r,s,c){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var g=h=h.next;do{if((g.tag&r)===r){var $=g.destroy;g.destroy=void 0,$!==void 0&&ks(s,c,$)}g=g.next}while(g!==h)}}function ws(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var c=s=s.next;do{if((c.tag&r)===r){var h=c.create;c.destroy=h()}c=c.next}while(c!==s)}}function Nt(r){var s=r.ref;if(s!==null){var c=r.stateNode;switch(r.tag){case 5:r=c;break;default:r=c}typeof s=="function"?s(r):s.current=r}}function Qu(r){var s=r.alternate;s!==null&&(r.alternate=null,Qu(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[cr],delete s[Eo],delete s[Cu],delete s[uh],delete s[yl])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Aa(r){return r.tag===5||r.tag===3||r.tag===4}function Zu(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Aa(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Do(r,s,c){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?c.nodeType===8?c.parentNode.insertBefore(r,s):c.insertBefore(r,s):(c.nodeType===8?(s=c.parentNode,s.insertBefore(r,c)):(s=c,s.appendChild(r)),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=El));else if(h!==4&&(r=r.child,r!==null))for(Do(r,s,c),r=r.sibling;r!==null;)Do(r,s,c),r=r.sibling}function Mo(r,s,c){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?c.insertBefore(r,s):c.appendChild(r);else if(h!==4&&(r=r.child,r!==null))for(Mo(r,s,c),r=r.sibling;r!==null;)Mo(r,s,c),r=r.sibling}var fn=null,ts=!1;function gr(r,s,c){for(c=c.child;c!==null;)Da(r,s,c),c=c.sibling}function Da(r,s,c){if(lr&&typeof lr.onCommitFiberUnmount=="function")try{lr.onCommitFiberUnmount(Ti,c)}catch{}switch(c.tag){case 5:P||Ao(c,s);case 6:var h=fn,g=ts;fn=null,gr(r,s,c),fn=h,ts=g,fn!==null&&(ts?(r=fn,c=c.stateNode,r.nodeType===8?r.parentNode.removeChild(c):r.removeChild(c)):fn.removeChild(c.stateNode));break;case 18:fn!==null&&(ts?(r=fn,c=c.stateNode,r.nodeType===8?bl(r.parentNode,c):r.nodeType===1&&bl(r,c),al(r)):bl(fn,c.stateNode));break;case 4:h=fn,g=ts,fn=c.stateNode.containerInfo,ts=!0,gr(r,s,c),fn=h,ts=g;break;case 0:case 11:case 14:case 15:if(!P&&(h=c.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){g=h=h.next;do{var $=g,T=$.destroy;$=$.tag,T!==void 0&&($&2||$&4)&&ks(c,s,T),g=g.next}while(g!==h)}gr(r,s,c);break;case 1:if(!P&&(Ao(c,s),h=c.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=c.memoizedProps,h.state=c.memoizedState,h.componentWillUnmount()}catch(I){Ot(c,s,I)}gr(r,s,c);break;case 21:gr(r,s,c);break;case 22:c.mode&1?(P=(h=P)||c.memoizedState!==null,gr(r,s,c),P=h):gr(r,s,c);break;default:gr(r,s,c)}}function Gh(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var c=r.stateNode;c===null&&(c=r.stateNode=new ct),s.forEach(function(h){var g=Xh.bind(null,r,h);c.has(h)||(c.add(h),h.then(g,g))})}}function Fe(r,s){var c=s.deletions;if(c!==null)for(var h=0;h<c.length;h++){var g=c[h];try{var $=r,T=s,I=T;e:for(;I!==null;){switch(I.tag){case 5:fn=I.stateNode,ts=!1;break e;case 3:fn=I.stateNode.containerInfo,ts=!0;break e;case 4:fn=I.stateNode.containerInfo,ts=!0;break e}I=I.return}if(fn===null)throw Error(i(160));Da($,T,g),fn=null,ts=!1;var A=g.alternate;A!==null&&(A.return=null),g.return=null}catch(j){Ot(g,s,j)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Vh(s,r),s=s.sibling}function Vh(r,s){var c=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Fe(s,r),In(r),h&4){try{qu(3,r,r.return),ws(3,r)}catch(De){Ot(r,r.return,De)}try{qu(5,r,r.return)}catch(De){Ot(r,r.return,De)}}break;case 1:Fe(s,r),In(r),h&512&&c!==null&&Ao(c,c.return);break;case 5:if(Fe(s,r),In(r),h&512&&c!==null&&Ao(c,c.return),r.flags&32){var g=r.stateNode;try{J(g,"")}catch(De){Ot(r,r.return,De)}}if(h&4&&(g=r.stateNode,g!=null)){var $=r.memoizedProps,T=c!==null?c.memoizedProps:$,I=r.type,A=r.updateQueue;if(r.updateQueue=null,A!==null)try{I==="input"&&$.type==="radio"&&$.name!=null&&zt(g,$),ht(I,T);var j=ht(I,$);for(T=0;T<A.length;T+=2){var ie=A[T],de=A[T+1];ie==="style"?N(g,de):ie==="dangerouslySetInnerHTML"?fi(g,de):ie==="children"?J(g,de):he(g,ie,de,j)}switch(I){case"input":Br(g,$);break;case"textarea":bn(g,$);break;case"select":var re=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!$.multiple;var Te=$.value;Te!=null?nt(g,!!$.multiple,Te,!1):re!==!!$.multiple&&($.defaultValue!=null?nt(g,!!$.multiple,$.defaultValue,!0):nt(g,!!$.multiple,$.multiple?[]:"",!1))}g[Eo]=$}catch(De){Ot(r,r.return,De)}}break;case 6:if(Fe(s,r),In(r),h&4){if(r.stateNode===null)throw Error(i(162));g=r.stateNode,$=r.memoizedProps;try{g.nodeValue=$}catch(De){Ot(r,r.return,De)}}break;case 3:if(Fe(s,r),In(r),h&4&&c!==null&&c.memoizedState.isDehydrated)try{al(s.containerInfo)}catch(De){Ot(r,r.return,De)}break;case 4:Fe(s,r),In(r);break;case 13:Fe(s,r),In(r),g=r.child,g.flags&8192&&($=g.memoizedState!==null,g.stateNode.isHidden=$,!$||g.alternate!==null&&g.alternate.memoizedState!==null||(tc=Ft())),h&4&&Gh(r);break;case 22:if(ie=c!==null&&c.memoizedState!==null,r.mode&1?(P=(j=P)||ie,Fe(s,r),P=j):Fe(s,r),In(r),h&8192){if(j=r.memoizedState!==null,(r.stateNode.isHidden=j)&&!ie&&r.mode&1)for(oe=r,ie=r.child;ie!==null;){for(de=oe=ie;oe!==null;){switch(re=oe,Te=re.child,re.tag){case 0:case 11:case 14:case 15:qu(4,re,re.return);break;case 1:Ao(re,re.return);var Oe=re.stateNode;if(typeof Oe.componentWillUnmount=="function"){h=re,c=re.return;try{s=h,Oe.props=s.memoizedProps,Oe.state=s.memoizedState,Oe.componentWillUnmount()}catch(De){Ot(h,c,De)}}break;case 5:Ao(re,re.return);break;case 22:if(re.memoizedState!==null){Ni(de);continue}}Te!==null?(Te.return=re,oe=Te):Ni(de)}ie=ie.sibling}e:for(ie=null,de=r;;){if(de.tag===5){if(ie===null){ie=de;try{g=de.stateNode,j?($=g.style,typeof $.setProperty=="function"?$.setProperty("display","none","important"):$.display="none"):(I=de.stateNode,A=de.memoizedProps.style,T=A!=null&&A.hasOwnProperty("display")?A.display:null,I.style.display=v("display",T))}catch(De){Ot(r,r.return,De)}}}else if(de.tag===6){if(ie===null)try{de.stateNode.nodeValue=j?"":de.memoizedProps}catch(De){Ot(r,r.return,De)}}else if((de.tag!==22&&de.tag!==23||de.memoizedState===null||de===r)&&de.child!==null){de.child.return=de,de=de.child;continue}if(de===r)break e;for(;de.sibling===null;){if(de.return===null||de.return===r)break e;ie===de&&(ie=null),de=de.return}ie===de&&(ie=null),de.sibling.return=de.return,de=de.sibling}}break;case 19:Fe(s,r),In(r),h&4&&Gh(r);break;case 21:break;default:Fe(s,r),In(r)}}function In(r){var s=r.flags;if(s&2){try{e:{for(var c=r.return;c!==null;){if(Aa(c)){var h=c;break e}c=c.return}throw Error(i(160))}switch(h.tag){case 5:var g=h.stateNode;h.flags&32&&(J(g,""),h.flags&=-33);var $=Zu(r);Mo(r,$,g);break;case 3:case 4:var T=h.stateNode.containerInfo,I=Zu(r);Do(r,I,T);break;default:throw Error(i(161))}}catch(A){Ot(r,r.return,A)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function si(r,s,c){oe=r,No(r)}function No(r,s,c){for(var h=(r.mode&1)!==0;oe!==null;){var g=oe,$=g.child;if(g.tag===22&&h){var T=g.memoizedState!==null||Zt;if(!T){var I=g.alternate,A=I!==null&&I.memoizedState!==null||P;I=Zt;var j=P;if(Zt=T,(P=A)&&!j)for(oe=g;oe!==null;)T=oe,A=T.child,T.tag===22&&T.memoizedState!==null?Mn(g):A!==null?(A.return=T,oe=A):Mn(g);for(;$!==null;)oe=$,No($),$=$.sibling;oe=g,Zt=I,P=j}ii(r)}else g.subtreeFlags&8772&&$!==null?($.return=g,oe=$):ii(r)}}function ii(r){for(;oe!==null;){var s=oe;if(s.flags&8772){var c=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:P||ws(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!P)if(c===null)h.componentDidMount();else{var g=s.elementType===s.type?c.memoizedProps:zn(s.type,c.memoizedProps);h.componentDidUpdate(g,c.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var $=s.updateQueue;$!==null&&fa(s,$,h);break;case 3:var T=s.updateQueue;if(T!==null){if(c=null,s.child!==null)switch(s.child.tag){case 5:c=s.child.stateNode;break;case 1:c=s.child.stateNode}fa(s,T,c)}break;case 5:var I=s.stateNode;if(c===null&&s.flags&4){c=I;var A=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":A.autoFocus&&c.focus();break;case"img":A.src&&(c.src=A.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var j=s.alternate;if(j!==null){var ie=j.memoizedState;if(ie!==null){var de=ie.dehydrated;de!==null&&al(de)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}P||s.flags&512&&Nt(s)}catch(re){Ot(s,s.return,re)}}if(s===r){oe=null;break}if(c=s.sibling,c!==null){c.return=s.return,oe=c;break}oe=s.return}}function Ni(r){for(;oe!==null;){var s=oe;if(s===r){oe=null;break}var c=s.sibling;if(c!==null){c.return=s.return,oe=c;break}oe=s.return}}function Mn(r){for(;oe!==null;){var s=oe;try{switch(s.tag){case 0:case 11:case 15:var c=s.return;try{ws(4,s)}catch(A){Ot(s,c,A)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var g=s.return;try{h.componentDidMount()}catch(A){Ot(s,g,A)}}var $=s.return;try{Nt(s)}catch(A){Ot(s,$,A)}break;case 5:var T=s.return;try{Nt(s)}catch(A){Ot(s,T,A)}}}catch(A){Ot(s,s.return,A)}if(s===r){oe=null;break}var I=s.sibling;if(I!==null){I.return=s.return,oe=I;break}oe=s.return}}var ig=Math.ceil,ec=pe.ReactCurrentDispatcher,Ma=pe.ReactCurrentOwner,fr=pe.ReactCurrentBatchConfig,rt=0,$n=null,Kt=null,mn=0,Nn=0,xi=Ts(0),Yt=0,xo=null,Po=0,Na=0,$r=0,Gt=null,_n=null,tc=0,Pi=1/0,mr=null,Bo=!1,kn=null,Bi=null,Fo=!1,Os=null,Bl=0,Rs=0,nc=null,rc=-1,Uo=0;function xn(){return rt&6?Ft():rc!==-1?rc:rc=Ft()}function oi(r){return r.mode&1?rt&2&&mn!==0?mn&-mn:ph.transition!==null?(Uo===0&&(Uo=Ic()),Uo):(r=ot,r!==0||(r=window.event,r=r===void 0?16:gs(r.type)),r):1}function Lr(r,s,c,h){if(50<Rs)throw Rs=0,nc=null,Error(i(185));ro(r,c,h),(!(rt&2)||r!==$n)&&(r===$n&&(!(rt&2)&&(Na|=c),Yt===4&&Ls(r,mn)),jn(r,h),c===1&&rt===0&&!(s.mode&1)&&(Pi=Ft()+500,Xt&&_e()))}function jn(r,s){var c=r.callbackNode;$d(r,s);var h=Sr(r,r===$n?mn:0);if(h===0)c!==null&&gd(c),r.callbackNode=null,r.callbackPriority=0;else if(s=h&-h,r.callbackPriority!==s){if(c!=null&&gd(c),s===1)r.tag===0?vl(Fl.bind(null,r)):Wr(Fl.bind(null,r)),Yp(function(){!(rt&6)&&_e()}),c=null;else{switch(md(h)){case 1:c=ol;break;case 4:c=nu;break;case 16:c=_i;break;case 536870912:c=no;break;default:c=_i}c=Fa(c,Fi.bind(null,r))}r.callbackPriority=s,r.callbackNode=c}}function Fi(r,s){if(rc=-1,Uo=0,rt&6)throw Error(i(327));var c=r.callbackNode;if(Ar()&&r.callbackNode!==c)return null;var h=Sr(r,r===$n?mn:0);if(h===0)return null;if(h&30||h&r.expiredLanes||s)s=lc(r,h);else{s=h;var g=rt;rt|=2;var $=Wh();($n!==r||mn!==s)&&(mr=null,Pi=Ft()+500,Jt(r,s));do try{lg();break}catch(I){Ho(r,I)}while(!0);da(),ec.current=$,rt=g,Kt!==null?s=0:($n=null,mn=0,s=Yt)}if(s!==0){if(s===2&&(g=ul(r),g!==0&&(h=g,s=sc(r,g))),s===1)throw c=xo,Jt(r,0),Ls(r,h),jn(r,Ft()),c;if(s===6)Ls(r,h);else{if(g=r.current.alternate,!(h&30)&&!ic(g)&&(s=lc(r,h),s===2&&($=ul(r),$!==0&&(h=$,s=sc(r,$))),s===1))throw c=xo,Jt(r,0),Ls(r,h),jn(r,Ft()),c;switch(r.finishedWork=g,r.finishedLanes=h,s){case 0:case 1:throw Error(i(345));case 2:ns(r,_n,mr);break;case 3:if(Ls(r,h),(h&130023424)===h&&(s=tc+500-Ft(),10<s)){if(Sr(r,0)!==0)break;if(g=r.suspendedLanes,(g&h)!==h){xn(),r.pingedLanes|=r.suspendedLanes&g;break}r.timeoutHandle=ta(ns.bind(null,r,_n,mr),s);break}ns(r,_n,mr);break;case 4:if(Ls(r,h),(h&4194240)===h)break;for(s=r.eventTimes,g=-1;0<h;){var T=31-vr(h);$=1<<T,T=s[T],T>g&&(g=T),h&=~$}if(h=g,h=Ft()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*ig(h/1960))-h,10<h){r.timeoutHandle=ta(ns.bind(null,r,_n,mr),h);break}ns(r,_n,mr);break;case 5:ns(r,_n,mr);break;default:throw Error(i(329))}}}return jn(r,Ft()),r.callbackNode===c?Fi.bind(null,r):null}function sc(r,s){var c=Gt;return r.current.memoizedState.isDehydrated&&(Jt(r,s).flags|=256),r=lc(r,s),r!==2&&(s=_n,_n=c,s!==null&&xa(s)),r}function xa(r){_n===null?_n=r:_n.push.apply(_n,r)}function ic(r){for(var s=r;;){if(s.flags&16384){var c=s.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var h=0;h<c.length;h++){var g=c[h],$=g.getSnapshot;g=g.value;try{if(!Zn($(),g))return!1}catch{return!1}}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ls(r,s){for(s&=~$r,s&=~Na,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var c=31-vr(s),h=1<<c;r[c]=-1,s&=~h}}function Fl(r){if(rt&6)throw Error(i(327));Ar();var s=Sr(r,0);if(!(s&1))return jn(r,Ft()),null;var c=lc(r,s);if(r.tag!==0&&c===2){var h=ul(r);h!==0&&(s=h,c=sc(r,h))}if(c===1)throw c=xo,Jt(r,0),Ls(r,s),jn(r,Ft()),c;if(c===6)throw Error(i(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,ns(r,_n,mr),jn(r,Ft()),null}function oc(r,s){var c=rt;rt|=1;try{return r(s)}finally{rt=c,rt===0&&(Pi=Ft()+500,Xt&&_e())}}function li(r){Os!==null&&Os.tag===0&&!(rt&6)&&Ar();var s=rt;rt|=1;var c=fr.transition,h=ot;try{if(fr.transition=null,ot=1,r)return r()}finally{ot=h,fr.transition=c,rt=s,!(rt&6)&&_e()}}function Pa(){Nn=xi.current,$t(xi)}function Jt(r,s){r.finishedWork=null,r.finishedLanes=0;var c=r.timeoutHandle;if(c!==-1&&(r.timeoutHandle=-1,Kp(c)),Kt!==null)for(c=Kt.return;c!==null;){var h=c;switch(ia(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&ku();break;case 3:ti(),$t(Dn),$t(vn),Bu();break;case 5:ma(h);break;case 4:ti();break;case 13:$t(wt);break;case 19:$t(wt);break;case 10:Il(h.type._context);break;case 22:case 23:Pa()}c=c.return}if($n=r,Kt=r=_r(r.current,null),mn=Nn=s,Yt=0,xo=null,$r=Na=Po=0,_n=Gt=null,ei!==null){for(s=0;s<ei.length;s++)if(c=ei[s],h=c.interleaved,h!==null){c.interleaved=null;var g=h.next,$=c.pending;if($!==null){var T=$.next;$.next=g,h.next=T}c.pending=h}ei=null}return r}function Ho(r,s){do{var c=Kt;try{if(da(),Ml.current=Di,Uu){for(var h=yt.memoizedState;h!==null;){var g=h.queue;g!==null&&(g.pending=null),h=h.next}Uu=!1}if(ni=0,tn=Ht=yt=null,So=!1,Co=0,Ma.current=null,c===null||c.return===null){Yt=1,xo=s,Kt=null;break}e:{var $=r,T=c.return,I=c,A=s;if(s=mn,I.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){var j=A,ie=I,de=ie.tag;if(!(ie.mode&1)&&(de===0||de===11||de===15)){var re=ie.alternate;re?(ie.updateQueue=re.updateQueue,ie.memoizedState=re.memoizedState,ie.lanes=re.lanes):(ie.updateQueue=null,ie.memoizedState=null)}var Te=Lh(T);if(Te!==null){Te.flags&=-257,Ah(Te,T,I,$,s),Te.mode&1&&Ia($,j,s),s=Te,A=j;var Oe=s.updateQueue;if(Oe===null){var De=new Set;De.add(A),s.updateQueue=De}else Oe.add(A);break e}else{if(!(s&1)){Ia($,j,s),Go();break e}A=Error(i(426))}}else if(Et&&I.mode&1){var Pt=Lh(T);if(Pt!==null){!(Pt.flags&65536)&&(Pt.flags|=256),Ah(Pt,T,I,$,s),ca(Nl(A,I));break e}}$=A=Nl(A,I),Yt!==4&&(Yt=2),Gt===null?Gt=[$]:Gt.push($),$=T;do{switch($.tag){case 3:$.flags|=65536,s&=-s,$.lanes|=s;var G=ju($,A,s);ga($,G);break e;case 1:I=A;var O=$.type,W=$.stateNode;if(!($.flags&128)&&(typeof O.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&(Bi===null||!Bi.has(W)))){$.flags|=65536,s&=-s,$.lanes|=s;var ge=Mi($,I,s);ga($,ge);break e}}$=$.return}while($!==null)}zh(c)}catch(Ne){s=Ne,Kt===c&&c!==null&&(Kt=c=c.return);continue}break}while(!0)}function Wh(){var r=ec.current;return ec.current=Di,r===null?Di:r}function Go(){(Yt===0||Yt===3||Yt===2)&&(Yt=4),$n===null||!(Po&268435455)&&!(Na&268435455)||Ls($n,mn)}function lc(r,s){var c=rt;rt|=2;var h=Wh();($n!==r||mn!==s)&&(mr=null,Jt(r,s));do try{og();break}catch(g){Ho(r,g)}while(!0);if(da(),rt=c,ec.current=h,Kt!==null)throw Error(i(261));return $n=null,mn=0,Yt}function og(){for(;Kt!==null;)Ui(Kt)}function lg(){for(;Kt!==null&&!Sc();)Ui(Kt)}function Ui(r){var s=uc(r.alternate,r,Nn);r.memoizedProps=r.pendingProps,s===null?zh(r):Kt=s,Ma.current=null}function zh(r){var s=r;do{var c=s.alternate;if(r=s.return,s.flags&32768){if(c=La(c,s),c!==null){c.flags&=32767,Kt=c;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Yt=6,Kt=null;return}}else if(c=Uh(c,s,Nn),c!==null){Kt=c;return}if(s=s.sibling,s!==null){Kt=s;return}Kt=s=r}while(s!==null);Yt===0&&(Yt=5)}function ns(r,s,c){var h=ot,g=fr.transition;try{fr.transition=null,ot=1,rn(r,s,c,h)}finally{fr.transition=g,ot=h}return null}function rn(r,s,c,h){do Ar();while(Os!==null);if(rt&6)throw Error(i(327));c=r.finishedWork;var g=r.finishedLanes;if(c===null)return null;if(r.finishedWork=null,r.finishedLanes=0,c===r.current)throw Error(i(177));r.callbackNode=null,r.callbackPriority=0;var $=c.lanes|c.childLanes;if(ru(r,$),r===$n&&(Kt=$n=null,mn=0),!(c.subtreeFlags&2064)&&!(c.flags&2064)||Fo||(Fo=!0,Fa(_i,function(){return Ar(),null})),$=(c.flags&15990)!==0,c.subtreeFlags&15990||$){$=fr.transition,fr.transition=null;var T=ot;ot=1;var I=rt;rt|=4,Ma.current=null,sg(r,c),Vh(c,r),$l(Zc),ou=!!Qc,Zc=Qc=null,r.current=c,si(c),fd(),rt=I,ot=T,fr.transition=$}else r.current=c;if(Fo&&(Fo=!1,Os=r,Bl=g),$=r.pendingLanes,$===0&&(Bi=null),Np(c.stateNode),jn(r,Ft()),s!==null)for(h=r.onRecoverableError,c=0;c<s.length;c++)g=s[c],h(g.value,{componentStack:g.stack,digest:g.digest});if(Bo)throw Bo=!1,r=kn,kn=null,r;return Bl&1&&r.tag!==0&&Ar(),$=r.pendingLanes,$&1?r===nc?Rs++:(Rs=0,nc=r):Rs=0,_e(),null}function Ar(){if(Os!==null){var r=md(Bl),s=fr.transition,c=ot;try{if(fr.transition=null,ot=16>r?16:r,Os===null)var h=!1;else{if(r=Os,Os=null,Bl=0,rt&6)throw Error(i(331));var g=rt;for(rt|=4,oe=r.current;oe!==null;){var $=oe,T=$.child;if(oe.flags&16){var I=$.deletions;if(I!==null){for(var A=0;A<I.length;A++){var j=I[A];for(oe=j;oe!==null;){var ie=oe;switch(ie.tag){case 0:case 11:case 15:qu(8,ie,$)}var de=ie.child;if(de!==null)de.return=ie,oe=de;else for(;oe!==null;){ie=oe;var re=ie.sibling,Te=ie.return;if(Qu(ie),ie===j){oe=null;break}if(re!==null){re.return=Te,oe=re;break}oe=Te}}}var Oe=$.alternate;if(Oe!==null){var De=Oe.child;if(De!==null){Oe.child=null;do{var Pt=De.sibling;De.sibling=null,De=Pt}while(De!==null)}}oe=$}}if($.subtreeFlags&2064&&T!==null)T.return=$,oe=T;else e:for(;oe!==null;){if($=oe,$.flags&2048)switch($.tag){case 0:case 11:case 15:qu(9,$,$.return)}var G=$.sibling;if(G!==null){G.return=$.return,oe=G;break e}oe=$.return}}var O=r.current;for(oe=O;oe!==null;){T=oe;var W=T.child;if(T.subtreeFlags&2064&&W!==null)W.return=T,oe=W;else e:for(T=O;oe!==null;){if(I=oe,I.flags&2048)try{switch(I.tag){case 0:case 11:case 15:ws(9,I)}}catch(Ne){Ot(I,I.return,Ne)}if(I===T){oe=null;break e}var ge=I.sibling;if(ge!==null){ge.return=I.return,oe=ge;break e}oe=I.return}}if(rt=g,_e(),lr&&typeof lr.onPostCommitFiberRoot=="function")try{lr.onPostCommitFiberRoot(Ti,r)}catch{}h=!0}return h}finally{ot=c,fr.transition=s}}return!1}function Hi(r,s,c){s=Nl(c,s),s=ju(r,s,1),r=Cs(r,s,1),s=xn(),r!==null&&(ro(r,1,s),jn(r,s))}function Ot(r,s,c){if(r.tag===3)Hi(r,r,c);else for(;s!==null;){if(s.tag===3){Hi(s,r,c);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Bi===null||!Bi.has(h))){r=Nl(c,r),r=Mi(s,r,1),s=Cs(s,r,1),r=xn(),s!==null&&(ro(s,1,r),jn(s,r));break}}s=s.return}}function Ba(r,s,c){var h=r.pingCache;h!==null&&h.delete(s),s=xn(),r.pingedLanes|=r.suspendedLanes&c,$n===r&&(mn&c)===c&&(Yt===4||Yt===3&&(mn&130023424)===mn&&500>Ft()-tc?Jt(r,0):$r|=c),jn(r,s)}function jh(r,s){s===0&&(r.mode&1?(s=ll,ll<<=1,!(ll&130023424)&&(ll=4194304)):s=1);var c=xn();r=Kr(r,s),r!==null&&(ro(r,s,c),jn(r,c))}function ug(r){var s=r.memoizedState,c=0;s!==null&&(c=s.retryLane),jh(r,c)}function Xh(r,s){var c=0;switch(r.tag){case 13:var h=r.stateNode,g=r.memoizedState;g!==null&&(c=g.retryLane);break;case 19:h=r.stateNode;break;default:throw Error(i(314))}h!==null&&h.delete(s),jh(r,c)}var uc;uc=function(r,s,c){if(r!==null)if(r.memoizedProps!==s.pendingProps||Dn.current)Cn=!0;else{if(!(r.lanes&c)&&!(s.flags&128))return Cn=!1,Fh(r,s,c);Cn=!!(r.flags&131072)}else Cn=!1,Et&&s.flags&1048576&&sa(s,zr,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;Pl(r,s),r=s.pendingProps;var g=Oi(s,vn.current);vo(s,c),g=Gu(null,s,h,r,g,c);var $=Vu();return s.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Sn(h)?($=!0,wu(s)):$=!1,s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,xu(s),g.updater=nn,s.stateNode=g,g._reactInternals=s,zu(s,h,r,c),s=Xu(null,s,h,!0,$,c)):(s.tag=0,Et&&$&&Ru(s),gn(null,s,g,c),s=s.child),s;case 16:h=s.elementType;e:{switch(Pl(r,s),r=s.pendingProps,g=h._init,h=g(h._payload),s.type=h,g=s.tag=st(h),r=zn(h,r),g){case 0:s=wa(null,s,h,r,c);break e;case 1:s=xh(null,s,h,r,c);break e;case 11:s=ka(null,s,h,r,c);break e;case 14:s=Dh(null,s,h,zn(h.type,r),c);break e}throw Error(i(306,h,""))}return s;case 0:return h=s.type,g=s.pendingProps,g=s.elementType===h?g:zn(h,g),wa(r,s,h,g,c);case 1:return h=s.type,g=s.pendingProps,g=s.elementType===h?g:zn(h,g),xh(r,s,h,g,c);case 3:e:{if(Ku(s),r===null)throw Error(i(387));h=s.pendingProps,$=s.memoizedState,g=$.element,pa(r,s),Ol(s,h,null,c);var T=s.memoizedState;if(h=T.element,$.isDehydrated)if($={element:h,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},s.updateQueue.baseState=$,s.memoizedState=$,s.flags&256){g=Nl(Error(i(423)),s),s=Ph(r,s,h,c,g);break e}else if(h!==g){g=Nl(Error(i(424)),s),s=Ph(r,s,h,c,g);break e}else for(er=qs(s.stateNode.containerInfo.firstChild),Vn=s,Et=!0,kr=null,c=gh(s,null,h,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(vs(),h===g){s=Zr(r,s,c);break e}gn(r,s,h,c)}s=s.child}return s;case 5:return fh(s),r===null&&la(s),h=s.type,g=s.pendingProps,$=r!==null?r.memoizedProps:null,T=g.children,ea(h,g)?T=null:$!==null&&ea(h,$)&&(s.flags|=32),ng(r,s),gn(r,s,T,c),s.child;case 6:return r===null&&la(s),null;case 13:return rg(r,s,c);case 4:return $a(s,s.stateNode.containerInfo),h=s.pendingProps,r===null?s.child=Li(s,null,h,c):gn(r,s,h,c),s.child;case 11:return h=s.type,g=s.pendingProps,g=s.elementType===h?g:zn(h,g),ka(r,s,h,g,c);case 7:return gn(r,s,s.pendingProps,c),s.child;case 8:return gn(r,s,s.pendingProps.children,c),s.child;case 12:return gn(r,s,s.pendingProps.children,c),s.child;case 10:e:{if(h=s.type._context,g=s.pendingProps,$=s.memoizedProps,T=g.value,_t(Du,h._currentValue),h._currentValue=T,$!==null)if(Zn($.value,T)){if($.children===g.children&&!Dn.current){s=Zr(r,s,c);break e}}else for($=s.child,$!==null&&($.return=s);$!==null;){var I=$.dependencies;if(I!==null){T=$.child;for(var A=I.firstContext;A!==null;){if(A.context===h){if($.tag===1){A=Yr(-1,c&-c),A.tag=2;var j=$.updateQueue;if(j!==null){j=j.shared;var ie=j.pending;ie===null?A.next=A:(A.next=ie.next,ie.next=A),j.pending=A}}$.lanes|=c,A=$.alternate,A!==null&&(A.lanes|=c),tr($.return,c,s),I.lanes|=c;break}A=A.next}}else if($.tag===10)T=$.type===s.type?null:$.child;else if($.tag===18){if(T=$.return,T===null)throw Error(i(341));T.lanes|=c,I=T.alternate,I!==null&&(I.lanes|=c),tr(T,c,s),T=$.sibling}else T=$.child;if(T!==null)T.return=$;else for(T=$;T!==null;){if(T===s){T=null;break}if($=T.sibling,$!==null){$.return=T.return,T=$;break}T=T.return}$=T}gn(r,s,g.children,c),s=s.child}return s;case 9:return g=s.type,h=s.pendingProps.children,vo(s,c),g=cn(g),h=h(g),s.flags|=1,gn(r,s,h,c),s.child;case 14:return h=s.type,g=zn(h,s.pendingProps),g=zn(h.type,g),Dh(r,s,h,g,c);case 15:return Mh(r,s,s.type,s.pendingProps,c);case 17:return h=s.type,g=s.pendingProps,g=s.elementType===h?g:zn(h,g),Pl(r,s),s.tag=1,Sn(h)?(r=!0,wu(s)):r=!1,vo(s,c),Rr(s,h,g),zu(s,h,g,c),Xu(null,s,h,!0,r,c);case 19:return vt(r,s,c);case 22:return Nh(r,s,c)}throw Error(i(156,s.tag))};function Fa(r,s){return tu(r,s)}function Vo(r,s,c,h){this.tag=r,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(r,s,c,h){return new Vo(r,s,c,h)}function Gi(r){return r=r.prototype,!(!r||!r.isReactComponent)}function st(r){if(typeof r=="function")return Gi(r)?1:0;if(r!=null){if(r=r.$$typeof,r===Ce)return 11;if(r===Ge)return 14}return 2}function _r(r,s){var c=r.alternate;return c===null?(c=wn(r.tag,s,r.key,r.mode),c.elementType=r.elementType,c.type=r.type,c.stateNode=r.stateNode,c.alternate=r,r.alternate=c):(c.pendingProps=s,c.type=r.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=r.flags&14680064,c.childLanes=r.childLanes,c.lanes=r.lanes,c.child=r.child,c.memoizedProps=r.memoizedProps,c.memoizedState=r.memoizedState,c.updateQueue=r.updateQueue,s=r.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=r.sibling,c.index=r.index,c.ref=r.ref,c}function As(r,s,c,h,g,$){var T=2;if(h=r,typeof r=="function")Gi(r)&&(T=1);else if(typeof r=="string")T=5;else e:switch(r){case $e:return ui(c.children,g,$,s);case ce:T=8,g|=8;break;case ze:return r=wn(12,c,s,g|2),r.elementType=ze,r.lanes=$,r;case Me:return r=wn(13,c,s,g),r.elementType=Me,r.lanes=$,r;case Re:return r=wn(19,c,s,g),r.elementType=Re,r.lanes=$,r;case Ye:return rs(c,g,$,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case C:T=10;break e;case me:T=9;break e;case Ce:T=11;break e;case Ge:T=14;break e;case Xe:T=16,h=null;break e}throw Error(i(130,r==null?r:typeof r,""))}return s=wn(T,c,s,g),s.elementType=r,s.type=h,s.lanes=$,s}function ui(r,s,c,h){return r=wn(7,r,h,s),r.lanes=c,r}function rs(r,s,c,h){return r=wn(22,r,h,s),r.elementType=Ye,r.lanes=c,r.stateNode={isHidden:!1},r}function Ua(r,s,c){return r=wn(6,r,null,s),r.lanes=c,r}function cc(r,s,c){return s=wn(4,r.children!==null?r.children:[],r.key,s),s.lanes=c,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function Pn(r,s,c,h,g){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kc(0),this.expirationTimes=kc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kc(0),this.identifierPrefix=h,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function Wo(r,s,c,h,g,$,T,I,A){return r=new Pn(r,s,c,I,A),s===1?(s=1,$===!0&&(s|=8)):s=0,$=wn(3,null,null,s),r.current=$,$.stateNode=r,$.memoizedState={element:h,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},xu($),r}function Ul(r,s,c){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:be,key:h==null?null:""+h,children:r,containerInfo:s,implementation:c}}function ac(r){if(!r)return Qs;r=r._reactInternals;e:{if(mi(r)!==r||r.tag!==1)throw Error(i(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Sn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(i(171))}if(r.tag===1){var c=r.type;if(Sn(c))return ah(r,c,s)}return s}function Hl(r,s,c,h,g,$,T,I,A){return r=Wo(c,h,!0,r,g,$,T,I,A),r.context=ac(null),c=r.current,h=xn(),g=oi(c),$=Yr(h,g),$.callback=s??null,Cs(c,$,g),r.current.lanes=g,ro(r,g,h),jn(r,h),r}function ci(r,s,c,h){var g=s.current,$=xn(),T=oi(g);return c=ac(c),s.context===null?s.context=c:s.pendingContext=c,s=Yr($,T),s.payload={element:r},h=h===void 0?null:h,h!==null&&(s.callback=h),r=Cs(g,s,T),r!==null&&(Lr(r,g,T,$),wl(r,g,T)),T}function dc(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Kh(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var c=r.retryLane;r.retryLane=c!==0&&c<s?c:s}}function ai(r,s){Kh(r,s),(r=r.alternate)&&Kh(r,s)}var Ha=typeof reportError=="function"?reportError:function(r){console.error(r)};function hc(r){this._internalRoot=r}Xn.prototype.render=hc.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));ci(r,s,null,null)},Xn.prototype.unmount=hc.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;li(function(){ci(null,r,null,null)}),s[Ir]=null}};function Xn(r){this._internalRoot=r}Xn.prototype.unstable_scheduleHydration=function(r){if(r){var s=so();r={blockedOn:null,target:r,priority:s};for(var c=0;c<Gr.length&&s!==0&&s<Gr[c].priority;c++);Gr.splice(c,0,r),c===0&&bd(r)}};function zo(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Gl(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Ga(){}function cg(r,s,c,h,g){if(g){if(typeof h=="function"){var $=h;h=function(){var j=dc(T);$.call(j)}}var T=Hl(s,h,r,0,null,!1,!1,"",Ga);return r._reactRootContainer=T,r[Ir]=T.current,Js(r.nodeType===8?r.parentNode:r),li(),T}for(;g=r.lastChild;)r.removeChild(g);if(typeof h=="function"){var I=h;h=function(){var j=dc(A);I.call(j)}}var A=Wo(r,0,!1,null,null,!1,!1,"",Ga);return r._reactRootContainer=A,r[Ir]=A.current,Js(r.nodeType===8?r.parentNode:r),li(function(){ci(s,A,c,h)}),A}function pc(r,s,c,h,g){var $=c._reactRootContainer;if($){var T=$;if(typeof g=="function"){var I=g;g=function(){var A=dc(T);I.call(A)}}ci(s,T,r,g)}else T=cg(c,s,r,g,h);return dc(T)}_d=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var c=Bn(s.pendingLanes);c!==0&&(wc(s,c|1),jn(s,Ft()),!(rt&6)&&(Pi=Ft()+500,_e()))}break;case 13:li(function(){var h=Kr(r,1);if(h!==null){var g=xn();Lr(h,r,1,g)}}),ai(r,1)}},cl=function(r){if(r.tag===13){var s=Kr(r,134217728);if(s!==null){var c=xn();Lr(s,r,134217728,c)}ai(r,134217728)}},Td=function(r){if(r.tag===13){var s=oi(r),c=Kr(r,s);if(c!==null){var h=xn();Lr(c,r,s,h)}ai(r,s)}},so=function(){return ot},Ed=function(r,s){var c=ot;try{return ot=r,s()}finally{ot=c}},Ws=function(r,s,c){switch(s){case"input":if(Br(r,c),s=c.name,c.type==="radio"&&s!=null){for(c=r;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<c.length;s++){var h=c[s];if(h!==r&&h.form===r.form){var g=Iu(h);if(!g)throw Error(i(90));ln(h),Br(h,g)}}}break;case"textarea":bn(r,c);break;case"select":s=c.value,s!=null&&nt(r,!!c.multiple,s,!1)}},nl=oc,An=li;var Va={usingClientEntryPoint:!1,Events:[dr,Un,Iu,$i,to,oc]},xt={findFiberByHostInstance:ar,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Tr={bundleType:xt.bundleType,version:xt.version,rendererPackageName:xt.rendererPackageName,rendererConfig:xt.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:pe.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=eu(r),r===null?null:r.stateNode},findFiberByHostInstance:xt.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vl.isDisabled&&Vl.supportsFiber)try{Ti=Vl.inject(Tr),lr=Vl}catch{}}return xr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Va,xr.createPortal=function(r,s){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zo(s))throw Error(i(200));return Ul(r,s,null,c)},xr.createRoot=function(r,s){if(!zo(r))throw Error(i(299));var c=!1,h="",g=Ha;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(g=s.onRecoverableError)),s=Wo(r,1,!1,null,null,c,!1,h,g),r[Ir]=s.current,Js(r.nodeType===8?r.parentNode:r),new hc(s)},xr.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=eu(s),r=r===null?null:r.stateNode,r},xr.flushSync=function(r){return li(r)},xr.hydrate=function(r,s,c){if(!Gl(s))throw Error(i(200));return pc(null,r,s,!0,c)},xr.hydrateRoot=function(r,s,c){if(!zo(r))throw Error(i(405));var h=c!=null&&c.hydratedSources||null,g=!1,$="",T=Ha;if(c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&($=c.identifierPrefix),c.onRecoverableError!==void 0&&(T=c.onRecoverableError)),s=Hl(s,null,r,1,c??null,g,!1,$,T),r[Ir]=s.current,Js(r),h)for(r=0;r<h.length;r++)c=h[r],g=c._getVersion,g=g(c._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[c,g]:s.mutableSourceEagerHydrationData.push(c,g);return new Xn(s)},xr.render=function(r,s,c){if(!Gl(s))throw Error(i(200));return pc(null,r,s,!1,c)},xr.unmountComponentAtNode=function(r){if(!Gl(r))throw Error(i(40));return r._reactRootContainer?(li(function(){pc(null,null,r,!1,function(){r._reactRootContainer=null,r[Ir]=null})}),!0):!1},xr.unstable_batchedUpdates=oc,xr.unstable_renderSubtreeIntoContainer=function(r,s,c,h){if(!Gl(c))throw Error(i(200));if(r==null||r._reactInternals===void 0)throw Error(i(38));return pc(r,s,c,!1,h)},xr.version="18.3.1-next-f1338f8080-20240426",xr}var lT;function ry(){if(lT)return f$.exports;lT=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(u){console.error(u)}}return l(),f$.exports=ny(),f$.exports}var uT;function sy(){if(uT)return Ag;uT=1;var l=ry();return Ag.createRoot=l.createRoot,Ag.hydrateRoot=l.hydrateRoot,Ag}var iy=sy();function Dg({url:l,text:u}){return F.jsx("li",{children:F.jsx("a",{href:l,children:u})})}const oy=()=>F.jsxs("ul",{children:[F.jsx(Dg,{url:"https://kalvinvar.github.io/Final/#/app",text:"Kalvin"}),F.jsx(Dg,{url:"https://jacob-pickard.github.io/Quiz-App/",text:"Jacob"}),F.jsx(Dg,{url:"https://rofenac.github.io/blog/",text:"David"}),F.jsx(Dg,{url:"https://Aprilv.github.io/my-first-react-app",text:"April"})]}),bp={black:"#000",white:"#fff"},nd={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},rd={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},sd={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},id={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},od={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},hp={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},ly={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function Tc(l,...u){const i=new URL(`https://mui.com/production-error/?code=${l}`);return u.forEach(d=>i.searchParams.append("args[]",d)),`Minified MUI error #${l}; visit ${i} for the full message.`}const q$="$$material";function M$(){return M$=Object.assign?Object.assign.bind():function(l){for(var u=1;u<arguments.length;u++){var i=arguments[u];for(var d in i)({}).hasOwnProperty.call(i,d)&&(l[d]=i[d])}return l},M$.apply(null,arguments)}function uy(l){if(l.sheet)return l.sheet;for(var u=0;u<document.styleSheets.length;u++)if(document.styleSheets[u].ownerNode===l)return document.styleSheets[u]}function cy(l){var u=document.createElement("style");return u.setAttribute("data-emotion",l.key),l.nonce!==void 0&&u.setAttribute("nonce",l.nonce),u.appendChild(document.createTextNode("")),u.setAttribute("data-s",""),u}var ay=function(){function l(i){var d=this;this._insertTag=function(p){var m;d.tags.length===0?d.insertionPoint?m=d.insertionPoint.nextSibling:d.prepend?m=d.container.firstChild:m=d.before:m=d.tags[d.tags.length-1].nextSibling,d.container.insertBefore(p,m),d.tags.push(p)},this.isSpeedy=i.speedy===void 0?!0:i.speedy,this.tags=[],this.ctr=0,this.nonce=i.nonce,this.key=i.key,this.container=i.container,this.prepend=i.prepend,this.insertionPoint=i.insertionPoint,this.before=null}var u=l.prototype;return u.hydrate=function(d){d.forEach(this._insertTag)},u.insert=function(d){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(cy(this));var p=this.tags[this.tags.length-1];if(this.isSpeedy){var m=uy(p);try{m.insertRule(d,m.cssRules.length)}catch{}}else p.appendChild(document.createTextNode(d));this.ctr++},u.flush=function(){this.tags.forEach(function(d){var p;return(p=d.parentNode)==null?void 0:p.removeChild(d)}),this.tags=[],this.ctr=0},l}(),sr="-ms-",Yg="-moz-",gt="-webkit-",uE="comm",Q$="rule",Z$="decl",dy="@import",cE="@keyframes",hy="@layer",py=Math.abs,Zg=String.fromCharCode,gy=Object.assign;function fy(l,u){return Kn(l,0)^45?(((u<<2^Kn(l,0))<<2^Kn(l,1))<<2^Kn(l,2))<<2^Kn(l,3):0}function aE(l){return l.trim()}function $y(l,u){return(l=u.exec(l))?l[0]:l}function ft(l,u,i){return l.replace(u,i)}function N$(l,u){return l.indexOf(u)}function Kn(l,u){return l.charCodeAt(u)|0}function yp(l,u,i){return l.slice(u,i)}function Ji(l){return l.length}function em(l){return l.length}function Mg(l,u){return u.push(l),l}function my(l,u){return l.map(u).join("")}var ef=1,ad=1,dE=0,Pr=0,Tn=0,dd="";function tf(l,u,i,d,p,m,b){return{value:l,root:u,parent:i,type:d,props:p,children:m,line:ef,column:ad,length:b,return:""}}function pp(l,u){return gy(tf("",null,null,"",null,null,0),l,{length:-l.length},u)}function _y(){return Tn}function Ty(){return Tn=Pr>0?Kn(dd,--Pr):0,ad--,Tn===10&&(ad=1,ef--),Tn}function us(){return Tn=Pr<dE?Kn(dd,Pr++):0,ad++,Tn===10&&(ad=1,ef++),Tn}function Zi(){return Kn(dd,Pr)}function Fg(){return Pr}function kp(l,u){return yp(dd,l,u)}function vp(l){switch(l){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function hE(l){return ef=ad=1,dE=Ji(dd=l),Pr=0,[]}function pE(l){return dd="",l}function Ug(l){return aE(kp(Pr-1,x$(l===91?l+2:l===40?l+1:l)))}function Ey(l){for(;(Tn=Zi())&&Tn<33;)us();return vp(l)>2||vp(Tn)>3?"":" "}function by(l,u){for(;--u&&us()&&!(Tn<48||Tn>102||Tn>57&&Tn<65||Tn>70&&Tn<97););return kp(l,Fg()+(u<6&&Zi()==32&&us()==32))}function x$(l){for(;us();)switch(Tn){case l:return Pr;case 34:case 39:l!==34&&l!==39&&x$(Tn);break;case 40:l===41&&x$(l);break;case 92:us();break}return Pr}function yy(l,u){for(;us()&&l+Tn!==57;)if(l+Tn===84&&Zi()===47)break;return"/*"+kp(u,Pr-1)+"*"+Zg(l===47?l:us())}function vy(l){for(;!vp(Zi());)us();return kp(l,Pr)}function Sy(l){return pE(Hg("",null,null,null,[""],l=hE(l),0,[0],l))}function Hg(l,u,i,d,p,m,b,y,S){for(var L=0,U=0,D=b,R=0,V=0,B=0,k=1,K=1,te=1,ue=0,he="",pe=p,ve=m,be=d,$e=he;K;)switch(B=ue,ue=us()){case 40:if(B!=108&&Kn($e,D-1)==58){N$($e+=ft(Ug(ue),"&","&\f"),"&\f")!=-1&&(te=-1);break}case 34:case 39:case 91:$e+=Ug(ue);break;case 9:case 10:case 13:case 32:$e+=Ey(B);break;case 92:$e+=by(Fg()-1,7);continue;case 47:switch(Zi()){case 42:case 47:Mg(Cy(yy(us(),Fg()),u,i),S);break;default:$e+="/"}break;case 123*k:y[L++]=Ji($e)*te;case 125*k:case 59:case 0:switch(ue){case 0:case 125:K=0;case 59+U:te==-1&&($e=ft($e,/\f/g,"")),V>0&&Ji($e)-D&&Mg(V>32?aT($e+";",d,i,D-1):aT(ft($e," ","")+";",d,i,D-2),S);break;case 59:$e+=";";default:if(Mg(be=cT($e,u,i,L,U,p,y,he,pe=[],ve=[],D),m),ue===123)if(U===0)Hg($e,u,be,be,pe,m,D,y,ve);else switch(R===99&&Kn($e,3)===110?100:R){case 100:case 108:case 109:case 115:Hg(l,be,be,d&&Mg(cT(l,be,be,0,0,p,y,he,p,pe=[],D),ve),p,ve,D,y,d?pe:ve);break;default:Hg($e,be,be,be,[""],ve,0,y,ve)}}L=U=V=0,k=te=1,he=$e="",D=b;break;case 58:D=1+Ji($e),V=B;default:if(k<1){if(ue==123)--k;else if(ue==125&&k++==0&&Ty()==125)continue}switch($e+=Zg(ue),ue*k){case 38:te=U>0?1:($e+="\f",-1);break;case 44:y[L++]=(Ji($e)-1)*te,te=1;break;case 64:Zi()===45&&($e+=Ug(us())),R=Zi(),U=D=Ji(he=$e+=vy(Fg())),ue++;break;case 45:B===45&&Ji($e)==2&&(k=0)}}return m}function cT(l,u,i,d,p,m,b,y,S,L,U){for(var D=p-1,R=p===0?m:[""],V=em(R),B=0,k=0,K=0;B<d;++B)for(var te=0,ue=yp(l,D+1,D=py(k=b[B])),he=l;te<V;++te)(he=aE(k>0?R[te]+" "+ue:ft(ue,/&\f/g,R[te])))&&(S[K++]=he);return tf(l,u,i,p===0?Q$:y,S,L,U)}function Cy(l,u,i){return tf(l,u,i,uE,Zg(_y()),yp(l,2,-2),0)}function aT(l,u,i,d){return tf(l,u,i,Z$,yp(l,0,d),yp(l,d+1,-1),d)}function ud(l,u){for(var i="",d=em(l),p=0;p<d;p++)i+=u(l[p],p,l,u)||"";return i}function Iy(l,u,i,d){switch(l.type){case hy:if(l.children.length)break;case dy:case Z$:return l.return=l.return||l.value;case uE:return"";case cE:return l.return=l.value+"{"+ud(l.children,d)+"}";case Q$:l.value=l.props.join(",")}return Ji(i=ud(l.children,d))?l.return=l.value+"{"+i+"}":""}function ky(l){var u=em(l);return function(i,d,p,m){for(var b="",y=0;y<u;y++)b+=l[y](i,d,p,m)||"";return b}}function wy(l){return function(u){u.root||(u=u.return)&&l(u)}}function gE(l){var u=Object.create(null);return function(i){return u[i]===void 0&&(u[i]=l(i)),u[i]}}var Oy=function(u,i,d){for(var p=0,m=0;p=m,m=Zi(),p===38&&m===12&&(i[d]=1),!vp(m);)us();return kp(u,Pr)},Ry=function(u,i){var d=-1,p=44;do switch(vp(p)){case 0:p===38&&Zi()===12&&(i[d]=1),u[d]+=Oy(Pr-1,i,d);break;case 2:u[d]+=Ug(p);break;case 4:if(p===44){u[++d]=Zi()===58?"&\f":"",i[d]=u[d].length;break}default:u[d]+=Zg(p)}while(p=us());return u},Ly=function(u,i){return pE(Ry(hE(u),i))},dT=new WeakMap,Ay=function(u){if(!(u.type!=="rule"||!u.parent||u.length<1)){for(var i=u.value,d=u.parent,p=u.column===d.column&&u.line===d.line;d.type!=="rule";)if(d=d.parent,!d)return;if(!(u.props.length===1&&i.charCodeAt(0)!==58&&!dT.get(d))&&!p){dT.set(u,!0);for(var m=[],b=Ly(i,m),y=d.props,S=0,L=0;S<b.length;S++)for(var U=0;U<y.length;U++,L++)u.props[L]=m[S]?b[S].replace(/&\f/g,y[U]):y[U]+" "+b[S]}}},Dy=function(u){if(u.type==="decl"){var i=u.value;i.charCodeAt(0)===108&&i.charCodeAt(2)===98&&(u.return="",u.value="")}};function fE(l,u){switch(fy(l,u)){case 5103:return gt+"print-"+l+l;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return gt+l+l;case 5349:case 4246:case 4810:case 6968:case 2756:return gt+l+Yg+l+sr+l+l;case 6828:case 4268:return gt+l+sr+l+l;case 6165:return gt+l+sr+"flex-"+l+l;case 5187:return gt+l+ft(l,/(\w+).+(:[^]+)/,gt+"box-$1$2"+sr+"flex-$1$2")+l;case 5443:return gt+l+sr+"flex-item-"+ft(l,/flex-|-self/,"")+l;case 4675:return gt+l+sr+"flex-line-pack"+ft(l,/align-content|flex-|-self/,"")+l;case 5548:return gt+l+sr+ft(l,"shrink","negative")+l;case 5292:return gt+l+sr+ft(l,"basis","preferred-size")+l;case 6060:return gt+"box-"+ft(l,"-grow","")+gt+l+sr+ft(l,"grow","positive")+l;case 4554:return gt+ft(l,/([^-])(transform)/g,"$1"+gt+"$2")+l;case 6187:return ft(ft(ft(l,/(zoom-|grab)/,gt+"$1"),/(image-set)/,gt+"$1"),l,"")+l;case 5495:case 3959:return ft(l,/(image-set\([^]*)/,gt+"$1$`$1");case 4968:return ft(ft(l,/(.+:)(flex-)?(.*)/,gt+"box-pack:$3"+sr+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+gt+l+l;case 4095:case 3583:case 4068:case 2532:return ft(l,/(.+)-inline(.+)/,gt+"$1$2")+l;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ji(l)-1-u>6)switch(Kn(l,u+1)){case 109:if(Kn(l,u+4)!==45)break;case 102:return ft(l,/(.+:)(.+)-([^]+)/,"$1"+gt+"$2-$3$1"+Yg+(Kn(l,u+3)==108?"$3":"$2-$3"))+l;case 115:return~N$(l,"stretch")?fE(ft(l,"stretch","fill-available"),u)+l:l}break;case 4949:if(Kn(l,u+1)!==115)break;case 6444:switch(Kn(l,Ji(l)-3-(~N$(l,"!important")&&10))){case 107:return ft(l,":",":"+gt)+l;case 101:return ft(l,/(.+:)([^;!]+)(;|!.+)?/,"$1"+gt+(Kn(l,14)===45?"inline-":"")+"box$3$1"+gt+"$2$3$1"+sr+"$2box$3")+l}break;case 5936:switch(Kn(l,u+11)){case 114:return gt+l+sr+ft(l,/[svh]\w+-[tblr]{2}/,"tb")+l;case 108:return gt+l+sr+ft(l,/[svh]\w+-[tblr]{2}/,"tb-rl")+l;case 45:return gt+l+sr+ft(l,/[svh]\w+-[tblr]{2}/,"lr")+l}return gt+l+sr+l+l}return l}var My=function(u,i,d,p){if(u.length>-1&&!u.return)switch(u.type){case Z$:u.return=fE(u.value,u.length);break;case cE:return ud([pp(u,{value:ft(u.value,"@","@"+gt)})],p);case Q$:if(u.length)return my(u.props,function(m){switch($y(m,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ud([pp(u,{props:[ft(m,/:(read-\w+)/,":"+Yg+"$1")]})],p);case"::placeholder":return ud([pp(u,{props:[ft(m,/:(plac\w+)/,":"+gt+"input-$1")]}),pp(u,{props:[ft(m,/:(plac\w+)/,":"+Yg+"$1")]}),pp(u,{props:[ft(m,/:(plac\w+)/,sr+"input-$1")]})],p)}return""})}},Ny=[My],xy=function(u){var i=u.key;if(i==="css"){var d=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(d,function(k){var K=k.getAttribute("data-emotion");K.indexOf(" ")!==-1&&(document.head.appendChild(k),k.setAttribute("data-s",""))})}var p=u.stylisPlugins||Ny,m={},b,y=[];b=u.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+i+' "]'),function(k){for(var K=k.getAttribute("data-emotion").split(" "),te=1;te<K.length;te++)m[K[te]]=!0;y.push(k)});var S,L=[Ay,Dy];{var U,D=[Iy,wy(function(k){U.insert(k)})],R=ky(L.concat(p,D)),V=function(K){return ud(Sy(K),R)};S=function(K,te,ue,he){U=ue,V(K?K+"{"+te.styles+"}":te.styles),he&&(B.inserted[te.name]=!0)}}var B={key:i,sheet:new ay({key:i,container:b,nonce:u.nonce,speedy:u.speedy,prepend:u.prepend,insertionPoint:u.insertionPoint}),nonce:u.nonce,inserted:m,registered:{},insert:S};return B.sheet.hydrate(y),B},Py=!0;function By(l,u,i){var d="";return i.split(" ").forEach(function(p){l[p]!==void 0?u.push(l[p]+";"):p&&(d+=p+" ")}),d}var $E=function(u,i,d){var p=u.key+"-"+i.name;(d===!1||Py===!1)&&u.registered[p]===void 0&&(u.registered[p]=i.styles)},Fy=function(u,i,d){$E(u,i,d);var p=u.key+"-"+i.name;if(u.inserted[i.name]===void 0){var m=i;do u.insert(i===m?"."+p:"",m,u.sheet,!0),m=m.next;while(m!==void 0)}};function Uy(l){for(var u=0,i,d=0,p=l.length;p>=4;++d,p-=4)i=l.charCodeAt(d)&255|(l.charCodeAt(++d)&255)<<8|(l.charCodeAt(++d)&255)<<16|(l.charCodeAt(++d)&255)<<24,i=(i&65535)*1540483477+((i>>>16)*59797<<16),i^=i>>>24,u=(i&65535)*1540483477+((i>>>16)*59797<<16)^(u&65535)*1540483477+((u>>>16)*59797<<16);switch(p){case 3:u^=(l.charCodeAt(d+2)&255)<<16;case 2:u^=(l.charCodeAt(d+1)&255)<<8;case 1:u^=l.charCodeAt(d)&255,u=(u&65535)*1540483477+((u>>>16)*59797<<16)}return u^=u>>>13,u=(u&65535)*1540483477+((u>>>16)*59797<<16),((u^u>>>15)>>>0).toString(36)}var Hy={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Gy=/[A-Z]|^ms/g,Vy=/_EMO_([^_]+?)_([^]*?)_EMO_/g,mE=function(u){return u.charCodeAt(1)===45},hT=function(u){return u!=null&&typeof u!="boolean"},_$=gE(function(l){return mE(l)?l:l.replace(Gy,"-$&").toLowerCase()}),pT=function(u,i){switch(u){case"animation":case"animationName":if(typeof i=="string")return i.replace(Vy,function(d,p,m){return qi={name:p,styles:m,next:qi},p})}return Hy[u]!==1&&!mE(u)&&typeof i=="number"&&i!==0?i+"px":i};function Sp(l,u,i){if(i==null)return"";var d=i;if(d.__emotion_styles!==void 0)return d;switch(typeof i){case"boolean":return"";case"object":{var p=i;if(p.anim===1)return qi={name:p.name,styles:p.styles,next:qi},p.name;var m=i;if(m.styles!==void 0){var b=m.next;if(b!==void 0)for(;b!==void 0;)qi={name:b.name,styles:b.styles,next:qi},b=b.next;var y=m.styles+";";return y}return Wy(l,u,i)}case"function":{if(l!==void 0){var S=qi,L=i(l);return qi=S,Sp(l,u,L)}break}}var U=i;if(u==null)return U;var D=u[U];return D!==void 0?D:U}function Wy(l,u,i){var d="";if(Array.isArray(i))for(var p=0;p<i.length;p++)d+=Sp(l,u,i[p])+";";else for(var m in i){var b=i[m];if(typeof b!="object"){var y=b;u!=null&&u[y]!==void 0?d+=m+"{"+u[y]+"}":hT(y)&&(d+=_$(m)+":"+pT(m,y)+";")}else if(Array.isArray(b)&&typeof b[0]=="string"&&(u==null||u[b[0]]===void 0))for(var S=0;S<b.length;S++)hT(b[S])&&(d+=_$(m)+":"+pT(m,b[S])+";");else{var L=Sp(l,u,b);switch(m){case"animation":case"animationName":{d+=_$(m)+":"+L+";";break}default:d+=m+"{"+L+"}"}}}return d}var gT=/label:\s*([^\s;{]+)\s*(;|$)/g,qi;function _E(l,u,i){if(l.length===1&&typeof l[0]=="object"&&l[0]!==null&&l[0].styles!==void 0)return l[0];var d=!0,p="";qi=void 0;var m=l[0];if(m==null||m.raw===void 0)d=!1,p+=Sp(i,u,m);else{var b=m;p+=b[0]}for(var y=1;y<l.length;y++)if(p+=Sp(i,u,l[y]),d){var S=m;p+=S[y]}gT.lastIndex=0;for(var L="",U;(U=gT.exec(p))!==null;)L+="-"+U[1];var D=Uy(p)+L;return{name:D,styles:p,next:qi}}var zy=function(u){return u()},jy=rT.useInsertionEffect?rT.useInsertionEffect:!1,Xy=jy||zy,TE=le.createContext(typeof HTMLElement<"u"?xy({key:"css"}):null);TE.Provider;var Ky=function(u){return le.forwardRef(function(i,d){var p=le.useContext(TE);return u(i,p,d)})},EE=le.createContext({}),Yy=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Jy=gE(function(l){return Yy.test(l)||l.charCodeAt(0)===111&&l.charCodeAt(1)===110&&l.charCodeAt(2)<91}),qy=Jy,Qy=function(u){return u!=="theme"},fT=function(u){return typeof u=="string"&&u.charCodeAt(0)>96?qy:Qy},$T=function(u,i,d){var p;if(i){var m=i.shouldForwardProp;p=u.__emotion_forwardProp&&m?function(b){return u.__emotion_forwardProp(b)&&m(b)}:m}return typeof p!="function"&&d&&(p=u.__emotion_forwardProp),p},Zy=function(u){var i=u.cache,d=u.serialized,p=u.isStringTag;return $E(i,d,p),Xy(function(){return Fy(i,d,p)}),null},ev=function l(u,i){var d=u.__emotion_real===u,p=d&&u.__emotion_base||u,m,b;i!==void 0&&(m=i.label,b=i.target);var y=$T(u,i,d),S=y||fT(p),L=!S("as");return function(){var U=arguments,D=d&&u.__emotion_styles!==void 0?u.__emotion_styles.slice(0):[];if(m!==void 0&&D.push("label:"+m+";"),U[0]==null||U[0].raw===void 0)D.push.apply(D,U);else{var R=U[0];D.push(R[0]);for(var V=U.length,B=1;B<V;B++)D.push(U[B],R[B])}var k=Ky(function(K,te,ue){var he=L&&K.as||p,pe="",ve=[],be=K;if(K.theme==null){be={};for(var $e in K)be[$e]=K[$e];be.theme=le.useContext(EE)}typeof K.className=="string"?pe=By(te.registered,ve,K.className):K.className!=null&&(pe=K.className+" ");var ce=_E(D.concat(ve),te.registered,be);pe+=te.key+"-"+ce.name,b!==void 0&&(pe+=" "+b);var ze=L&&y===void 0?fT(he):S,C={};for(var me in K)L&&me==="as"||ze(me)&&(C[me]=K[me]);return C.className=pe,ue&&(C.ref=ue),le.createElement(le.Fragment,null,le.createElement(Zy,{cache:te,serialized:ce,isStringTag:typeof he=="string"}),le.createElement(he,C))});return k.displayName=m!==void 0?m:"Styled("+(typeof p=="string"?p:p.displayName||p.name||"Component")+")",k.defaultProps=u.defaultProps,k.__emotion_real=k,k.__emotion_base=p,k.__emotion_styles=D,k.__emotion_forwardProp=y,Object.defineProperty(k,"toString",{value:function(){return"."+b}}),k.withComponent=function(K,te){var ue=l(K,M$({},i,te,{shouldForwardProp:$T(k,te,!0)}));return ue.apply(void 0,D)},k}},tv=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],P$=ev.bind(null);tv.forEach(function(l){P$[l]=P$(l)});var T$={exports:{}},E$,mT;function nv(){if(mT)return E$;mT=1;var l="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return E$=l,E$}var b$,_T;function rv(){if(_T)return b$;_T=1;var l=nv();function u(){}function i(){}return i.resetWarningCache=u,b$=function(){function d(b,y,S,L,U,D){if(D!==l){var R=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw R.name="Invariant Violation",R}}d.isRequired=d;function p(){return d}var m={array:d,bigint:d,bool:d,func:d,number:d,object:d,string:d,symbol:d,any:d,arrayOf:p,element:d,elementType:d,instanceOf:p,node:d,objectOf:p,oneOf:p,oneOfType:p,shape:p,exact:p,checkPropTypes:i,resetWarningCache:u};return m.PropTypes=m,m},b$}var TT;function sv(){return TT||(TT=1,T$.exports=rv()()),T$.exports}var iv=sv();const Ps=Y$(iv);/**
 * @mui/styled-engine v6.4.0
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function bE(l,u){return P$(l,u)}function ov(l,u){Array.isArray(l.__emotion_styles)&&(l.__emotion_styles=u(l.__emotion_styles))}const ET=[];function bT(l){return ET[0]=l,_E(ET)}var y$={exports:{}},It={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yT;function lv(){if(yT)return It;yT=1;var l=Symbol.for("react.transitional.element"),u=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.consumer"),b=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),R=Symbol.for("react.offscreen"),V=Symbol.for("react.client.reference");function B(k){if(typeof k=="object"&&k!==null){var K=k.$$typeof;switch(K){case l:switch(k=k.type,k){case i:case p:case d:case S:case L:return k;default:switch(k=k&&k.$$typeof,k){case b:case y:case D:case U:return k;case m:return k;default:return K}}case u:return K}}}return It.ContextConsumer=m,It.ContextProvider=b,It.Element=l,It.ForwardRef=y,It.Fragment=i,It.Lazy=D,It.Memo=U,It.Portal=u,It.Profiler=p,It.StrictMode=d,It.Suspense=S,It.SuspenseList=L,It.isContextConsumer=function(k){return B(k)===m},It.isContextProvider=function(k){return B(k)===b},It.isElement=function(k){return typeof k=="object"&&k!==null&&k.$$typeof===l},It.isForwardRef=function(k){return B(k)===y},It.isFragment=function(k){return B(k)===i},It.isLazy=function(k){return B(k)===D},It.isMemo=function(k){return B(k)===U},It.isPortal=function(k){return B(k)===u},It.isProfiler=function(k){return B(k)===p},It.isStrictMode=function(k){return B(k)===d},It.isSuspense=function(k){return B(k)===S},It.isSuspenseList=function(k){return B(k)===L},It.isValidElementType=function(k){return typeof k=="string"||typeof k=="function"||k===i||k===p||k===d||k===S||k===L||k===R||typeof k=="object"&&k!==null&&(k.$$typeof===D||k.$$typeof===U||k.$$typeof===b||k.$$typeof===m||k.$$typeof===y||k.$$typeof===V||k.getModuleId!==void 0)},It.typeOf=B,It}var vT;function uv(){return vT||(vT=1,y$.exports=lv()),y$.exports}var yE=uv();function Qi(l){if(typeof l!="object"||l===null)return!1;const u=Object.getPrototypeOf(l);return(u===null||u===Object.prototype||Object.getPrototypeOf(u)===null)&&!(Symbol.toStringTag in l)&&!(Symbol.iterator in l)}function vE(l){if(le.isValidElement(l)||yE.isValidElementType(l)||!Qi(l))return l;const u={};return Object.keys(l).forEach(i=>{u[i]=vE(l[i])}),u}function cs(l,u,i={clone:!0}){const d=i.clone?{...l}:l;return Qi(l)&&Qi(u)&&Object.keys(u).forEach(p=>{le.isValidElement(u[p])||yE.isValidElementType(u[p])?d[p]=u[p]:Qi(u[p])&&Object.prototype.hasOwnProperty.call(l,p)&&Qi(l[p])?d[p]=cs(l[p],u[p],i):i.clone?d[p]=Qi(u[p])?vE(u[p]):u[p]:d[p]=u[p]}),d}const cv=l=>{const u=Object.keys(l).map(i=>({key:i,val:l[i]}))||[];return u.sort((i,d)=>i.val-d.val),u.reduce((i,d)=>({...i,[d.key]:d.val}),{})};function av(l){const{values:u={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:i="px",step:d=5,...p}=l,m=cv(u),b=Object.keys(m);function y(R){return`@media (min-width:${typeof u[R]=="number"?u[R]:R}${i})`}function S(R){return`@media (max-width:${(typeof u[R]=="number"?u[R]:R)-d/100}${i})`}function L(R,V){const B=b.indexOf(V);return`@media (min-width:${typeof u[R]=="number"?u[R]:R}${i}) and (max-width:${(B!==-1&&typeof u[b[B]]=="number"?u[b[B]]:V)-d/100}${i})`}function U(R){return b.indexOf(R)+1<b.length?L(R,b[b.indexOf(R)+1]):y(R)}function D(R){const V=b.indexOf(R);return V===0?y(b[1]):V===b.length-1?S(b[V]):L(R,b[b.indexOf(R)+1]).replace("@media","@media not all and")}return{keys:b,values:m,up:y,down:S,between:L,only:U,not:D,unit:i,...p}}function dv(l,u){if(!l.containerQueries)return u;const i=Object.keys(u).filter(d=>d.startsWith("@container")).sort((d,p)=>{var b,y;const m=/min-width:\s*([0-9.]+)/;return+(((b=d.match(m))==null?void 0:b[1])||0)-+(((y=p.match(m))==null?void 0:y[1])||0)});return i.length?i.reduce((d,p)=>{const m=u[p];return delete d[p],d[p]=m,d},{...u}):u}function hv(l,u){return u==="@"||u.startsWith("@")&&(l.some(i=>u.startsWith(`@${i}`))||!!u.match(/^@\d/))}function pv(l,u){const i=u.match(/^@([^/]+)?\/?(.+)?$/);if(!i)return null;const[,d,p]=i,m=Number.isNaN(+d)?d||0:+d;return l.containerQueries(p).up(m)}function gv(l){const u=(m,b)=>m.replace("@media",b?`@container ${b}`:"@container");function i(m,b){m.up=(...y)=>u(l.breakpoints.up(...y),b),m.down=(...y)=>u(l.breakpoints.down(...y),b),m.between=(...y)=>u(l.breakpoints.between(...y),b),m.only=(...y)=>u(l.breakpoints.only(...y),b),m.not=(...y)=>{const S=u(l.breakpoints.not(...y),b);return S.includes("not all and")?S.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):S}}const d={},p=m=>(i(d,m),d);return i(p),{...l,containerQueries:p}}const fv={borderRadius:4};function _p(l,u){return u?cs(l,u,{clone:!1}):l}const nf={xs:0,sm:600,md:900,lg:1200,xl:1536},ST={keys:["xs","sm","md","lg","xl"],up:l=>`@media (min-width:${nf[l]}px)`},$v={containerQueries:l=>({up:u=>{let i=typeof u=="number"?u:nf[u]||u;return typeof i=="number"&&(i=`${i}px`),l?`@container ${l} (min-width:${i})`:`@container (min-width:${i})`}})};function el(l,u,i){const d=l.theme||{};if(Array.isArray(u)){const m=d.breakpoints||ST;return u.reduce((b,y,S)=>(b[m.up(m.keys[S])]=i(u[S]),b),{})}if(typeof u=="object"){const m=d.breakpoints||ST;return Object.keys(u).reduce((b,y)=>{if(hv(m.keys,y)){const S=pv(d.containerQueries?d:$v,y);S&&(b[S]=i(u[y],y))}else if(Object.keys(m.values||nf).includes(y)){const S=m.up(y);b[S]=i(u[y],y)}else{const S=y;b[S]=u[S]}return b},{})}return i(u)}function mv(l={}){var i;return((i=l.keys)==null?void 0:i.reduce((d,p)=>{const m=l.up(p);return d[m]={},d},{}))||{}}function _v(l,u){return l.reduce((i,d)=>{const p=i[d];return(!p||Object.keys(p).length===0)&&delete i[d],i},u)}function Cp(l){if(typeof l!="string")throw new Error(Tc(7));return l.charAt(0).toUpperCase()+l.slice(1)}function rf(l,u,i=!0){if(!u||typeof u!="string")return null;if(l&&l.vars&&i){const d=`vars.${u}`.split(".").reduce((p,m)=>p&&p[m]?p[m]:null,l);if(d!=null)return d}return u.split(".").reduce((d,p)=>d&&d[p]!=null?d[p]:null,l)}function Jg(l,u,i,d=i){let p;return typeof l=="function"?p=l(i):Array.isArray(l)?p=l[i]||d:p=rf(l,i)||d,u&&(p=u(p,d,l)),p}function an(l){const{prop:u,cssProperty:i=l.prop,themeKey:d,transform:p}=l,m=b=>{if(b[u]==null)return null;const y=b[u],S=b.theme,L=rf(S,d)||{};return el(b,y,D=>{let R=Jg(L,p,D);return D===R&&typeof D=="string"&&(R=Jg(L,p,`${u}${D==="default"?"":Cp(D)}`,D)),i===!1?R:{[i]:R}})};return m.propTypes={},m.filterProps=[u],m}function Tv(l){const u={};return i=>(u[i]===void 0&&(u[i]=l(i)),u[i])}const Ev={m:"margin",p:"padding"},bv={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},CT={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},yv=Tv(l=>{if(l.length>2)if(CT[l])l=CT[l];else return[l];const[u,i]=l.split(""),d=Ev[u],p=bv[i]||"";return Array.isArray(p)?p.map(m=>d+m):[d+p]}),tm=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],nm=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...tm,...nm];function wp(l,u,i,d){const p=rf(l,u,!0)??i;return typeof p=="number"||typeof p=="string"?m=>typeof m=="string"?m:typeof p=="string"?`calc(${m} * ${p})`:p*m:Array.isArray(p)?m=>{if(typeof m=="string")return m;const b=Math.abs(m),y=p[b];return m>=0?y:typeof y=="number"?-y:`-${y}`}:typeof p=="function"?p:()=>{}}function rm(l){return wp(l,"spacing",8)}function Op(l,u){return typeof u=="string"||u==null?u:l(u)}function vv(l,u){return i=>l.reduce((d,p)=>(d[p]=Op(u,i),d),{})}function Sv(l,u,i,d){if(!u.includes(i))return null;const p=yv(i),m=vv(p,d),b=l[i];return el(l,b,m)}function SE(l,u){const i=rm(l.theme);return Object.keys(l).map(d=>Sv(l,u,d,i)).reduce(_p,{})}function sn(l){return SE(l,tm)}sn.propTypes={};sn.filterProps=tm;function on(l){return SE(l,nm)}on.propTypes={};on.filterProps=nm;function CE(l=8,u=rm({spacing:l})){if(l.mui)return l;const i=(...d)=>(d.length===0?[1]:d).map(m=>{const b=u(m);return typeof b=="number"?`${b}px`:b}).join(" ");return i.mui=!0,i}function sf(...l){const u=l.reduce((d,p)=>(p.filterProps.forEach(m=>{d[m]=p}),d),{}),i=d=>Object.keys(d).reduce((p,m)=>u[m]?_p(p,u[m](d)):p,{});return i.propTypes={},i.filterProps=l.reduce((d,p)=>d.concat(p.filterProps),[]),i}function Fs(l){return typeof l!="number"?l:`${l}px solid`}function Hs(l,u){return an({prop:l,themeKey:"borders",transform:u})}const Cv=Hs("border",Fs),Iv=Hs("borderTop",Fs),kv=Hs("borderRight",Fs),wv=Hs("borderBottom",Fs),Ov=Hs("borderLeft",Fs),Rv=Hs("borderColor"),Lv=Hs("borderTopColor"),Av=Hs("borderRightColor"),Dv=Hs("borderBottomColor"),Mv=Hs("borderLeftColor"),Nv=Hs("outline",Fs),xv=Hs("outlineColor"),of=l=>{if(l.borderRadius!==void 0&&l.borderRadius!==null){const u=wp(l.theme,"shape.borderRadius",4),i=d=>({borderRadius:Op(u,d)});return el(l,l.borderRadius,i)}return null};of.propTypes={};of.filterProps=["borderRadius"];sf(Cv,Iv,kv,wv,Ov,Rv,Lv,Av,Dv,Mv,of,Nv,xv);const lf=l=>{if(l.gap!==void 0&&l.gap!==null){const u=wp(l.theme,"spacing",8),i=d=>({gap:Op(u,d)});return el(l,l.gap,i)}return null};lf.propTypes={};lf.filterProps=["gap"];const uf=l=>{if(l.columnGap!==void 0&&l.columnGap!==null){const u=wp(l.theme,"spacing",8),i=d=>({columnGap:Op(u,d)});return el(l,l.columnGap,i)}return null};uf.propTypes={};uf.filterProps=["columnGap"];const cf=l=>{if(l.rowGap!==void 0&&l.rowGap!==null){const u=wp(l.theme,"spacing",8),i=d=>({rowGap:Op(u,d)});return el(l,l.rowGap,i)}return null};cf.propTypes={};cf.filterProps=["rowGap"];const Pv=an({prop:"gridColumn"}),Bv=an({prop:"gridRow"}),Fv=an({prop:"gridAutoFlow"}),Uv=an({prop:"gridAutoColumns"}),Hv=an({prop:"gridAutoRows"}),Gv=an({prop:"gridTemplateColumns"}),Vv=an({prop:"gridTemplateRows"}),Wv=an({prop:"gridTemplateAreas"}),zv=an({prop:"gridArea"});sf(lf,uf,cf,Pv,Bv,Fv,Uv,Hv,Gv,Vv,Wv,zv);function cd(l,u){return u==="grey"?u:l}const jv=an({prop:"color",themeKey:"palette",transform:cd}),Xv=an({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:cd}),Kv=an({prop:"backgroundColor",themeKey:"palette",transform:cd});sf(jv,Xv,Kv);function ls(l){return l<=1&&l!==0?`${l*100}%`:l}const Yv=an({prop:"width",transform:ls}),sm=l=>{if(l.maxWidth!==void 0&&l.maxWidth!==null){const u=i=>{var p,m,b,y,S;const d=((b=(m=(p=l.theme)==null?void 0:p.breakpoints)==null?void 0:m.values)==null?void 0:b[i])||nf[i];return d?((S=(y=l.theme)==null?void 0:y.breakpoints)==null?void 0:S.unit)!=="px"?{maxWidth:`${d}${l.theme.breakpoints.unit}`}:{maxWidth:d}:{maxWidth:ls(i)}};return el(l,l.maxWidth,u)}return null};sm.filterProps=["maxWidth"];const Jv=an({prop:"minWidth",transform:ls}),qv=an({prop:"height",transform:ls}),Qv=an({prop:"maxHeight",transform:ls}),Zv=an({prop:"minHeight",transform:ls});an({prop:"size",cssProperty:"width",transform:ls});an({prop:"size",cssProperty:"height",transform:ls});const eS=an({prop:"boxSizing"});sf(Yv,sm,Jv,qv,Qv,Zv,eS);const Rp={border:{themeKey:"borders",transform:Fs},borderTop:{themeKey:"borders",transform:Fs},borderRight:{themeKey:"borders",transform:Fs},borderBottom:{themeKey:"borders",transform:Fs},borderLeft:{themeKey:"borders",transform:Fs},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Fs},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:of},color:{themeKey:"palette",transform:cd},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:cd},backgroundColor:{themeKey:"palette",transform:cd},p:{style:on},pt:{style:on},pr:{style:on},pb:{style:on},pl:{style:on},px:{style:on},py:{style:on},padding:{style:on},paddingTop:{style:on},paddingRight:{style:on},paddingBottom:{style:on},paddingLeft:{style:on},paddingX:{style:on},paddingY:{style:on},paddingInline:{style:on},paddingInlineStart:{style:on},paddingInlineEnd:{style:on},paddingBlock:{style:on},paddingBlockStart:{style:on},paddingBlockEnd:{style:on},m:{style:sn},mt:{style:sn},mr:{style:sn},mb:{style:sn},ml:{style:sn},mx:{style:sn},my:{style:sn},margin:{style:sn},marginTop:{style:sn},marginRight:{style:sn},marginBottom:{style:sn},marginLeft:{style:sn},marginX:{style:sn},marginY:{style:sn},marginInline:{style:sn},marginInlineStart:{style:sn},marginInlineEnd:{style:sn},marginBlock:{style:sn},marginBlockStart:{style:sn},marginBlockEnd:{style:sn},displayPrint:{cssProperty:!1,transform:l=>({"@media print":{display:l}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:lf},rowGap:{style:cf},columnGap:{style:uf},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:ls},maxWidth:{style:sm},minWidth:{transform:ls},height:{transform:ls},maxHeight:{transform:ls},minHeight:{transform:ls},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function tS(...l){const u=l.reduce((d,p)=>d.concat(Object.keys(p)),[]),i=new Set(u);return l.every(d=>i.size===Object.keys(d).length)}function nS(l,u){return typeof l=="function"?l(u):l}function rS(){function l(i,d,p,m){const b={[i]:d,theme:p},y=m[i];if(!y)return{[i]:d};const{cssProperty:S=i,themeKey:L,transform:U,style:D}=y;if(d==null)return null;if(L==="typography"&&d==="inherit")return{[i]:d};const R=rf(p,L)||{};return D?D(b):el(b,d,B=>{let k=Jg(R,U,B);return B===k&&typeof B=="string"&&(k=Jg(R,U,`${i}${B==="default"?"":Cp(B)}`,B)),S===!1?k:{[S]:k}})}function u(i){const{sx:d,theme:p={}}=i||{};if(!d)return null;const m=p.unstable_sxConfig??Rp;function b(y){let S=y;if(typeof y=="function")S=y(p);else if(typeof y!="object")return y;if(!S)return null;const L=mv(p.breakpoints),U=Object.keys(L);let D=L;return Object.keys(S).forEach(R=>{const V=nS(S[R],p);if(V!=null)if(typeof V=="object")if(m[R])D=_p(D,l(R,V,p,m));else{const B=el({theme:p},V,k=>({[R]:k}));tS(B,V)?D[R]=u({sx:V,theme:p}):D=_p(D,B)}else D=_p(D,l(R,V,p,m))}),dv(p,_v(U,D))}return Array.isArray(d)?d.map(b):b(d)}return u}const Ec=rS();Ec.filterProps=["sx"];function sS(l,u){var d;const i=this;if(i.vars){if(!((d=i.colorSchemes)!=null&&d[l])||typeof i.getColorSchemeSelector!="function")return{};let p=i.getColorSchemeSelector(l);return p==="&"?u:((p.includes("data-")||p.includes("."))&&(p=`*:where(${p.replace(/\s*&$/,"")}) &`),{[p]:u})}return i.palette.mode===l?u:{}}function im(l={},...u){const{breakpoints:i={},palette:d={},spacing:p,shape:m={},...b}=l,y=av(i),S=CE(p);let L=cs({breakpoints:y,direction:"ltr",components:{},palette:{mode:"light",...d},spacing:S,shape:{...fv,...m}},b);return L=gv(L),L.applyStyles=sS,L=u.reduce((U,D)=>cs(U,D),L),L.unstable_sxConfig={...Rp,...b==null?void 0:b.unstable_sxConfig},L.unstable_sx=function(D){return Ec({sx:D,theme:this})},L}function iS(l){return Object.keys(l).length===0}function oS(l=null){const u=le.useContext(EE);return!u||iS(u)?l:u}const lS=im();function IE(l=lS){return oS(l)}const uS=l=>{var d;const u={systemProps:{},otherProps:{}},i=((d=l==null?void 0:l.theme)==null?void 0:d.unstable_sxConfig)??Rp;return Object.keys(l).forEach(p=>{i[p]?u.systemProps[p]=l[p]:u.otherProps[p]=l[p]}),u};function kE(l){const{sx:u,...i}=l,{systemProps:d,otherProps:p}=uS(i);let m;return Array.isArray(u)?m=[d,...u]:typeof u=="function"?m=(...b)=>{const y=u(...b);return Qi(y)?{...d,...y}:d}:m={...d,...u},{...p,sx:m}}const IT=l=>l,cS=()=>{let l=IT;return{configure(u){l=u},generate(u){return l(u)},reset(){l=IT}}},wE=cS();function OE(l){var u,i,d="";if(typeof l=="string"||typeof l=="number")d+=l;else if(typeof l=="object")if(Array.isArray(l)){var p=l.length;for(u=0;u<p;u++)l[u]&&(i=OE(l[u]))&&(d&&(d+=" "),d+=i)}else for(i in l)l[i]&&(d&&(d+=" "),d+=i);return d}function Lp(){for(var l,u,i=0,d="",p=arguments.length;i<p;i++)(l=arguments[i])&&(u=OE(l))&&(d&&(d+=" "),d+=u);return d}function aS(l={}){const{themeId:u,defaultTheme:i,defaultClassName:d="MuiBox-root",generateClassName:p}=l,m=bE("div",{shouldForwardProp:y=>y!=="theme"&&y!=="sx"&&y!=="as"})(Ec);return le.forwardRef(function(S,L){const U=IE(i),{className:D,component:R="div",...V}=kE(S);return F.jsx(m,{as:R,ref:L,className:Lp(D,p?p(d):d),theme:u&&U[u]||U,...V})})}const dS={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Ap(l,u,i="Mui"){const d=dS[u];return d?`${i}-${d}`:`${wE.generate(l)}-${u}`}function Dp(l,u,i="Mui"){const d={};return u.forEach(p=>{d[p]=Ap(l,p,i)}),d}function RE(l){const{variants:u,...i}=l,d={variants:u,style:bT(i),isProcessed:!0};return d.style===i||u&&u.forEach(p=>{typeof p.style!="function"&&(p.style=bT(p.style))}),d}const hS=im();function v$(l){return l!=="ownerState"&&l!=="theme"&&l!=="sx"&&l!=="as"}function pS(l){return l?(u,i)=>i[l]:null}function gS(l,u,i){l.theme=mS(l.theme)?i:l.theme[u]||l.theme}function Gg(l,u){const i=typeof u=="function"?u(l):u;if(Array.isArray(i))return i.flatMap(d=>Gg(l,d));if(Array.isArray(i==null?void 0:i.variants)){let d;if(i.isProcessed)d=i.style;else{const{variants:p,...m}=i;d=m}return LE(l,i.variants,[d])}return i!=null&&i.isProcessed?i.style:i}function LE(l,u,i=[]){var p;let d;e:for(let m=0;m<u.length;m+=1){const b=u[m];if(typeof b.props=="function"){if(d??(d={...l,...l.ownerState,ownerState:l.ownerState}),!b.props(d))continue}else for(const y in b.props)if(l[y]!==b.props[y]&&((p=l.ownerState)==null?void 0:p[y])!==b.props[y])continue e;typeof b.style=="function"?(d??(d={...l,...l.ownerState,ownerState:l.ownerState}),i.push(b.style(d))):i.push(b.style)}return i}function fS(l={}){const{themeId:u,defaultTheme:i=hS,rootShouldForwardProp:d=v$,slotShouldForwardProp:p=v$}=l;function m(y){gS(y,u,i)}return(y,S={})=>{ov(y,ve=>ve.filter(be=>be!==Ec));const{name:L,slot:U,skipVariantsResolver:D,skipSx:R,overridesResolver:V=pS(TS(U)),...B}=S,k=D!==void 0?D:U&&U!=="Root"&&U!=="root"||!1,K=R||!1;let te=v$;U==="Root"||U==="root"?te=d:U?te=p:_S(y)&&(te=void 0);const ue=bE(y,{shouldForwardProp:te,label:$S(),...B}),he=ve=>{if(typeof ve=="function"&&ve.__emotion_real!==ve)return function($e){return Gg($e,ve)};if(Qi(ve)){const be=RE(ve);return be.variants?function(ce){return Gg(ce,be)}:be.style}return ve},pe=(...ve)=>{const be=[],$e=ve.map(he),ce=[];if(be.push(m),L&&V&&ce.push(function(Ce){var Xe,Ye;const Re=(Ye=(Xe=Ce.theme.components)==null?void 0:Xe[L])==null?void 0:Ye.styleOverrides;if(!Re)return null;const Ge={};for(const X in Re)Ge[X]=Gg(Ce,Re[X]);return V(Ce,Ge)}),L&&!k&&ce.push(function(Ce){var Ge,Xe;const Me=Ce.theme,Re=(Xe=(Ge=Me==null?void 0:Me.components)==null?void 0:Ge[L])==null?void 0:Xe.variants;return Re?LE(Ce,Re):null}),K||ce.push(Ec),Array.isArray($e[0])){const me=$e.shift(),Ce=new Array(be.length).fill(""),Me=new Array(ce.length).fill("");let Re;Re=[...Ce,...me,...Me],Re.raw=[...Ce,...me.raw,...Me],be.unshift(Re)}const ze=[...be,...$e,...ce],C=ue(...ze);return y.muiName&&(C.muiName=y.muiName),C};return ue.withConfig&&(pe.withConfig=ue.withConfig),pe}}function $S(l,u){return void 0}function mS(l){for(const u in l)return!1;return!0}function _S(l){return typeof l=="string"&&l.charCodeAt(0)>96}function TS(l){return l&&l.charAt(0).toLowerCase()+l.slice(1)}function B$(l,u){const i={...u};for(const d in l)if(Object.prototype.hasOwnProperty.call(l,d)){const p=d;if(p==="components"||p==="slots")i[p]={...l[p],...i[p]};else if(p==="componentsProps"||p==="slotProps"){const m=l[p],b=u[p];if(!b)i[p]=m||{};else if(!m)i[p]=b;else{i[p]={...b};for(const y in m)if(Object.prototype.hasOwnProperty.call(m,y)){const S=y;i[p][S]=B$(m[S],b[S])}}}else i[p]===void 0&&(i[p]=l[p])}return i}function ES(l,u=Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER){return Math.max(u,Math.min(l,i))}function om(l,u=0,i=1){return ES(l,u,i)}function bS(l){l=l.slice(1);const u=new RegExp(`.{1,${l.length>=6?2:1}}`,"g");let i=l.match(u);return i&&i[0].length===1&&(i=i.map(d=>d+d)),i?`rgb${i.length===4?"a":""}(${i.map((d,p)=>p<3?parseInt(d,16):Math.round(parseInt(d,16)/255*1e3)/1e3).join(", ")})`:""}function ql(l){if(l.type)return l;if(l.charAt(0)==="#")return ql(bS(l));const u=l.indexOf("("),i=l.substring(0,u);if(!["rgb","rgba","hsl","hsla","color"].includes(i))throw new Error(Tc(9,l));let d=l.substring(u+1,l.length-1),p;if(i==="color"){if(d=d.split(" "),p=d.shift(),d.length===4&&d[3].charAt(0)==="/"&&(d[3]=d[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(p))throw new Error(Tc(10,p))}else d=d.split(",");return d=d.map(m=>parseFloat(m)),{type:i,values:d,colorSpace:p}}const yS=l=>{const u=ql(l);return u.values.slice(0,3).map((i,d)=>u.type.includes("hsl")&&d!==0?`${i}%`:i).join(" ")},fp=(l,u)=>{try{return yS(l)}catch{return l}};function af(l){const{type:u,colorSpace:i}=l;let{values:d}=l;return u.includes("rgb")?d=d.map((p,m)=>m<3?parseInt(p,10):p):u.includes("hsl")&&(d[1]=`${d[1]}%`,d[2]=`${d[2]}%`),u.includes("color")?d=`${i} ${d.join(" ")}`:d=`${d.join(", ")}`,`${u}(${d})`}function AE(l){l=ql(l);const{values:u}=l,i=u[0],d=u[1]/100,p=u[2]/100,m=d*Math.min(p,1-p),b=(L,U=(L+i/30)%12)=>p-m*Math.max(Math.min(U-3,9-U,1),-1);let y="rgb";const S=[Math.round(b(0)*255),Math.round(b(8)*255),Math.round(b(4)*255)];return l.type==="hsla"&&(y+="a",S.push(u[3])),af({type:y,values:S})}function F$(l){l=ql(l);let u=l.type==="hsl"||l.type==="hsla"?ql(AE(l)).values:l.values;return u=u.map(i=>(l.type!=="color"&&(i/=255),i<=.03928?i/12.92:((i+.055)/1.055)**2.4)),Number((.2126*u[0]+.7152*u[1]+.0722*u[2]).toFixed(3))}function vS(l,u){const i=F$(l),d=F$(u);return(Math.max(i,d)+.05)/(Math.min(i,d)+.05)}function U$(l,u){return l=ql(l),u=om(u),(l.type==="rgb"||l.type==="hsl")&&(l.type+="a"),l.type==="color"?l.values[3]=`/${u}`:l.values[3]=u,af(l)}function Ng(l,u,i){try{return U$(l,u)}catch{return l}}function lm(l,u){if(l=ql(l),u=om(u),l.type.includes("hsl"))l.values[2]*=1-u;else if(l.type.includes("rgb")||l.type.includes("color"))for(let i=0;i<3;i+=1)l.values[i]*=1-u;return af(l)}function Lt(l,u,i){try{return lm(l,u)}catch{return l}}function um(l,u){if(l=ql(l),u=om(u),l.type.includes("hsl"))l.values[2]+=(100-l.values[2])*u;else if(l.type.includes("rgb"))for(let i=0;i<3;i+=1)l.values[i]+=(255-l.values[i])*u;else if(l.type.includes("color"))for(let i=0;i<3;i+=1)l.values[i]+=(1-l.values[i])*u;return af(l)}function At(l,u,i){try{return um(l,u)}catch{return l}}function SS(l,u=.15){return F$(l)>.5?lm(l,u):um(l,u)}function xg(l,u,i){try{return SS(l,u)}catch{return l}}function df(l,u,i=void 0){const d={};for(const p in l){const m=l[p];let b="",y=!0;for(let S=0;S<m.length;S+=1){const L=m[S];L&&(b+=(y===!0?"":" ")+u(L),y=!1,i&&i[L]&&(b+=" "+i[L]))}d[p]=b}return d}const CS=le.createContext(void 0);function IS(l){const{theme:u,name:i,props:d}=l;if(!u||!u.components||!u.components[i])return d;const p=u.components[i];return p.defaultProps?B$(p.defaultProps,d):!p.styleOverrides&&!p.variants?B$(p,d):d}function kS({props:l,name:u}){const i=le.useContext(CS);return IS({props:l,name:u,theme:{components:i}})}const kT={theme:void 0};function wS(l){let u,i;return function(p){let m=u;return(m===void 0||p.theme!==i)&&(kT.theme=p.theme,m=RE(l(kT)),u=m,i=p.theme),m}}function OS(l=""){function u(...d){if(!d.length)return"";const p=d[0];return typeof p=="string"&&!p.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${l?`${l}-`:""}${p}${u(...d.slice(1))})`:`, ${p}`}return(d,...p)=>`var(--${l?`${l}-`:""}${d}${u(...p)})`}const wT=(l,u,i,d=[])=>{let p=l;u.forEach((m,b)=>{b===u.length-1?Array.isArray(p)?p[Number(m)]=i:p&&typeof p=="object"&&(p[m]=i):p&&typeof p=="object"&&(p[m]||(p[m]=d.includes(m)?[]:{}),p=p[m])})},RS=(l,u,i)=>{function d(p,m=[],b=[]){Object.entries(p).forEach(([y,S])=>{(!i||!i([...m,y]))&&S!=null&&(typeof S=="object"&&Object.keys(S).length>0?d(S,[...m,y],Array.isArray(S)?[...b,y]:b):u([...m,y],S,b))})}d(l)},LS=(l,u)=>typeof u=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(d=>l.includes(d))||l[l.length-1].toLowerCase().includes("opacity")?u:`${u}px`:u;function S$(l,u){const{prefix:i,shouldSkipGeneratingVar:d}=u||{},p={},m={},b={};return RS(l,(y,S,L)=>{if((typeof S=="string"||typeof S=="number")&&(!d||!d(y,S))){const U=`--${i?`${i}-`:""}${y.join("-")}`,D=LS(y,S);Object.assign(p,{[U]:D}),wT(m,y,`var(${U})`,L),wT(b,y,`var(${U}, ${D})`,L)}},y=>y[0]==="vars"),{css:p,vars:m,varsWithDefaults:b}}function AS(l,u={}){const{getSelector:i=K,disableCssColorScheme:d,colorSchemeSelector:p}=u,{colorSchemes:m={},components:b,defaultColorScheme:y="light",...S}=l,{vars:L,css:U,varsWithDefaults:D}=S$(S,u);let R=D;const V={},{[y]:B,...k}=m;if(Object.entries(k||{}).forEach(([he,pe])=>{const{vars:ve,css:be,varsWithDefaults:$e}=S$(pe,u);R=cs(R,$e),V[he]={css:be,vars:ve}}),B){const{css:he,vars:pe,varsWithDefaults:ve}=S$(B,u);R=cs(R,ve),V[y]={css:he,vars:pe}}function K(he,pe){var be,$e;let ve=p;if(p==="class"&&(ve=".%s"),p==="data"&&(ve="[data-%s]"),p!=null&&p.startsWith("data-")&&!p.includes("%s")&&(ve=`[${p}="%s"]`),he){if(ve==="media")return l.defaultColorScheme===he?":root":{[`@media (prefers-color-scheme: ${(($e=(be=m[he])==null?void 0:be.palette)==null?void 0:$e.mode)||he})`]:{":root":pe}};if(ve)return l.defaultColorScheme===he?`:root, ${ve.replace("%s",String(he))}`:ve.replace("%s",String(he))}return":root"}return{vars:R,generateThemeVars:()=>{let he={...L};return Object.entries(V).forEach(([,{vars:pe}])=>{he=cs(he,pe)}),he},generateStyleSheets:()=>{var ce,ze;const he=[],pe=l.defaultColorScheme||"light";function ve(C,me){Object.keys(me).length&&he.push(typeof C=="string"?{[C]:{...me}}:C)}ve(i(void 0,{...U}),U);const{[pe]:be,...$e}=V;if(be){const{css:C}=be,me=(ze=(ce=m[pe])==null?void 0:ce.palette)==null?void 0:ze.mode,Ce=!d&&me?{colorScheme:me,...C}:{...C};ve(i(pe,{...Ce}),Ce)}return Object.entries($e).forEach(([C,{css:me}])=>{var Re,Ge;const Ce=(Ge=(Re=m[C])==null?void 0:Re.palette)==null?void 0:Ge.mode,Me=!d&&Ce?{colorScheme:Ce,...me}:{...me};ve(i(C,{...Me}),Me)}),he}}}function DS(l){return function(i){return l==="media"?`@media (prefers-color-scheme: ${i})`:l?l.startsWith("data-")&&!l.includes("%s")?`[${l}="${i}"] &`:l==="class"?`.${i} &`:l==="data"?`[data-${i}] &`:`${l.replace("%s",i)} &`:"&"}}function DE(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:bp.white,default:bp.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const MS=DE();function ME(){return{text:{primary:bp.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:bp.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const OT=ME();function RT(l,u,i,d){const p=d.light||d,m=d.dark||d*1.5;l[u]||(l.hasOwnProperty(i)?l[u]=l[i]:u==="light"?l.light=um(l.main,p):u==="dark"&&(l.dark=lm(l.main,m)))}function NS(l="light"){return l==="dark"?{main:sd[200],light:sd[50],dark:sd[400]}:{main:sd[700],light:sd[400],dark:sd[800]}}function xS(l="light"){return l==="dark"?{main:rd[200],light:rd[50],dark:rd[400]}:{main:rd[500],light:rd[300],dark:rd[700]}}function PS(l="light"){return l==="dark"?{main:nd[500],light:nd[300],dark:nd[700]}:{main:nd[700],light:nd[400],dark:nd[800]}}function BS(l="light"){return l==="dark"?{main:id[400],light:id[300],dark:id[700]}:{main:id[700],light:id[500],dark:id[900]}}function FS(l="light"){return l==="dark"?{main:od[400],light:od[300],dark:od[700]}:{main:od[800],light:od[500],dark:od[900]}}function US(l="light"){return l==="dark"?{main:hp[400],light:hp[300],dark:hp[700]}:{main:"#ed6c02",light:hp[500],dark:hp[900]}}function cm(l){const{mode:u="light",contrastThreshold:i=3,tonalOffset:d=.2,...p}=l,m=l.primary||NS(u),b=l.secondary||xS(u),y=l.error||PS(u),S=l.info||BS(u),L=l.success||FS(u),U=l.warning||US(u);function D(k){return vS(k,OT.text.primary)>=i?OT.text.primary:MS.text.primary}const R=({color:k,name:K,mainShade:te=500,lightShade:ue=300,darkShade:he=700})=>{if(k={...k},!k.main&&k[te]&&(k.main=k[te]),!k.hasOwnProperty("main"))throw new Error(Tc(11,K?` (${K})`:"",te));if(typeof k.main!="string")throw new Error(Tc(12,K?` (${K})`:"",JSON.stringify(k.main)));return RT(k,"light",ue,d),RT(k,"dark",he,d),k.contrastText||(k.contrastText=D(k.main)),k};let V;return u==="light"?V=DE():u==="dark"&&(V=ME()),cs({common:{...bp},mode:u,primary:R({color:m,name:"primary"}),secondary:R({color:b,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:R({color:y,name:"error"}),warning:R({color:U,name:"warning"}),info:R({color:S,name:"info"}),success:R({color:L,name:"success"}),grey:ly,contrastThreshold:i,getContrastText:D,augmentColor:R,tonalOffset:d,...V},p)}function HS(l){const u={};return Object.entries(l).forEach(d=>{const[p,m]=d;typeof m=="object"&&(u[p]=`${m.fontStyle?`${m.fontStyle} `:""}${m.fontVariant?`${m.fontVariant} `:""}${m.fontWeight?`${m.fontWeight} `:""}${m.fontStretch?`${m.fontStretch} `:""}${m.fontSize||""}${m.lineHeight?`/${m.lineHeight} `:""}${m.fontFamily||""}`)}),u}function GS(l,u){return{toolbar:{minHeight:56,[l.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[l.up("sm")]:{minHeight:64}},...u}}function VS(l){return Math.round(l*1e5)/1e5}const LT={textTransform:"uppercase"},AT='"Roboto", "Helvetica", "Arial", sans-serif';function WS(l,u){const{fontFamily:i=AT,fontSize:d=14,fontWeightLight:p=300,fontWeightRegular:m=400,fontWeightMedium:b=500,fontWeightBold:y=700,htmlFontSize:S=16,allVariants:L,pxToRem:U,...D}=typeof u=="function"?u(l):u,R=d/14,V=U||(K=>`${K/S*R}rem`),B=(K,te,ue,he,pe)=>({fontFamily:i,fontWeight:K,fontSize:V(te),lineHeight:ue,...i===AT?{letterSpacing:`${VS(he/te)}em`}:{},...pe,...L}),k={h1:B(p,96,1.167,-1.5),h2:B(p,60,1.2,-.5),h3:B(m,48,1.167,0),h4:B(m,34,1.235,.25),h5:B(m,24,1.334,0),h6:B(b,20,1.6,.15),subtitle1:B(m,16,1.75,.15),subtitle2:B(b,14,1.57,.1),body1:B(m,16,1.5,.15),body2:B(m,14,1.43,.15),button:B(b,14,1.75,.4,LT),caption:B(m,12,1.66,.4),overline:B(m,12,2.66,1,LT),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return cs({htmlFontSize:S,pxToRem:V,fontFamily:i,fontSize:d,fontWeightLight:p,fontWeightRegular:m,fontWeightMedium:b,fontWeightBold:y,...k},D,{clone:!1})}const zS=.2,jS=.14,XS=.12;function Qt(...l){return[`${l[0]}px ${l[1]}px ${l[2]}px ${l[3]}px rgba(0,0,0,${zS})`,`${l[4]}px ${l[5]}px ${l[6]}px ${l[7]}px rgba(0,0,0,${jS})`,`${l[8]}px ${l[9]}px ${l[10]}px ${l[11]}px rgba(0,0,0,${XS})`].join(",")}const KS=["none",Qt(0,2,1,-1,0,1,1,0,0,1,3,0),Qt(0,3,1,-2,0,2,2,0,0,1,5,0),Qt(0,3,3,-2,0,3,4,0,0,1,8,0),Qt(0,2,4,-1,0,4,5,0,0,1,10,0),Qt(0,3,5,-1,0,5,8,0,0,1,14,0),Qt(0,3,5,-1,0,6,10,0,0,1,18,0),Qt(0,4,5,-2,0,7,10,1,0,2,16,1),Qt(0,5,5,-3,0,8,10,1,0,3,14,2),Qt(0,5,6,-3,0,9,12,1,0,3,16,2),Qt(0,6,6,-3,0,10,14,1,0,4,18,3),Qt(0,6,7,-4,0,11,15,1,0,4,20,3),Qt(0,7,8,-4,0,12,17,2,0,5,22,4),Qt(0,7,8,-4,0,13,19,2,0,5,24,4),Qt(0,7,9,-4,0,14,21,2,0,5,26,4),Qt(0,8,9,-5,0,15,22,2,0,6,28,5),Qt(0,8,10,-5,0,16,24,2,0,6,30,5),Qt(0,8,11,-5,0,17,26,2,0,6,32,5),Qt(0,9,11,-5,0,18,28,2,0,7,34,6),Qt(0,9,12,-6,0,19,29,2,0,7,36,6),Qt(0,10,13,-6,0,20,31,3,0,8,38,7),Qt(0,10,13,-6,0,21,33,3,0,8,40,7),Qt(0,10,14,-6,0,22,35,3,0,8,42,7),Qt(0,11,14,-7,0,23,36,3,0,9,44,8),Qt(0,11,15,-7,0,24,38,3,0,9,46,8)],YS={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},JS={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function DT(l){return`${Math.round(l)}ms`}function qS(l){if(!l)return 0;const u=l/36;return Math.min(Math.round((4+15*u**.25+u/5)*10),3e3)}function QS(l){const u={...YS,...l.easing},i={...JS,...l.duration};return{getAutoHeightDuration:qS,create:(p=["all"],m={})=>{const{duration:b=i.standard,easing:y=u.easeInOut,delay:S=0,...L}=m;return(Array.isArray(p)?p:[p]).map(U=>`${U} ${typeof b=="string"?b:DT(b)} ${y} ${typeof S=="string"?S:DT(S)}`).join(",")},...l,easing:u,duration:i}}const ZS={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function eC(l){return Qi(l)||typeof l>"u"||typeof l=="string"||typeof l=="boolean"||typeof l=="number"||Array.isArray(l)}function NE(l={}){const u={...l};function i(d){const p=Object.entries(d);for(let m=0;m<p.length;m++){const[b,y]=p[m];!eC(y)||b.startsWith("unstable_")?delete d[b]:Qi(y)&&(d[b]={...y},i(d[b]))}}return i(u),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(u,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function H$(l={},...u){const{breakpoints:i,mixins:d={},spacing:p,palette:m={},transitions:b={},typography:y={},shape:S,...L}=l;if(l.vars)throw new Error(Tc(20));const U=cm(m),D=im(l);let R=cs(D,{mixins:GS(D.breakpoints,d),palette:U,shadows:KS.slice(),typography:WS(U,y),transitions:QS(b),zIndex:{...ZS}});return R=cs(R,L),R=u.reduce((V,B)=>cs(V,B),R),R.unstable_sxConfig={...Rp,...L==null?void 0:L.unstable_sxConfig},R.unstable_sx=function(B){return Ec({sx:B,theme:this})},R.toRuntimeSource=NE,R}function G$(l){let u;return l<1?u=5.11916*l**2:u=4.5*Math.log(l+1)+2,Math.round(u*10)/1e3}const tC=[...Array(25)].map((l,u)=>{if(u===0)return"none";const i=G$(u);return`linear-gradient(rgba(255 255 255 / ${i}), rgba(255 255 255 / ${i}))`});function xE(l){return{inputPlaceholder:l==="dark"?.5:.42,inputUnderline:l==="dark"?.7:.42,switchTrackDisabled:l==="dark"?.2:.12,switchTrack:l==="dark"?.3:.38}}function PE(l){return l==="dark"?tC:[]}function nC(l){const{palette:u={mode:"light"},opacity:i,overlays:d,...p}=l,m=cm(u);return{palette:m,opacity:{...xE(m.mode),...i},overlays:d||PE(m.mode),...p}}function rC(l){var u;return!!l[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!l[0].match(/sxConfig$/)||l[0]==="palette"&&!!((u=l[1])!=null&&u.match(/(mode|contrastThreshold|tonalOffset)/))}const sC=l=>[...[...Array(25)].map((u,i)=>`--${l?`${l}-`:""}overlays-${i}`),`--${l?`${l}-`:""}palette-AppBar-darkBg`,`--${l?`${l}-`:""}palette-AppBar-darkColor`],iC=l=>(u,i)=>{const d=l.rootSelector||":root",p=l.colorSchemeSelector;let m=p;if(p==="class"&&(m=".%s"),p==="data"&&(m="[data-%s]"),p!=null&&p.startsWith("data-")&&!p.includes("%s")&&(m=`[${p}="%s"]`),l.defaultColorScheme===u){if(u==="dark"){const b={};return sC(l.cssVarPrefix).forEach(y=>{b[y]=i[y],delete i[y]}),m==="media"?{[d]:i,"@media (prefers-color-scheme: dark)":{[d]:b}}:m?{[m.replace("%s",u)]:b,[`${d}, ${m.replace("%s",u)}`]:i}:{[d]:{...i,...b}}}if(m&&m!=="media")return`${d}, ${m.replace("%s",String(u))}`}else if(u){if(m==="media")return{[`@media (prefers-color-scheme: ${String(u)})`]:{[d]:i}};if(m)return m.replace("%s",String(u))}return d};function oC(l,u){u.forEach(i=>{l[i]||(l[i]={})})}function Q(l,u,i){!l[u]&&i&&(l[u]=i)}function $p(l){return typeof l!="string"||!l.startsWith("hsl")?l:AE(l)}function Zo(l,u){`${u}Channel`in l||(l[`${u}Channel`]=fp($p(l[u])))}function lC(l){return typeof l=="number"?`${l}px`:typeof l=="string"||typeof l=="function"||Array.isArray(l)?l:"8px"}const Yi=l=>{try{return l()}catch{}},uC=(l="mui")=>OS(l);function C$(l,u,i,d){if(!u)return;u=u===!0?{}:u;const p=d==="dark"?"dark":"light";if(!i){l[d]=nC({...u,palette:{mode:p,...u==null?void 0:u.palette}});return}const{palette:m,...b}=H$({...i,palette:{mode:p,...u==null?void 0:u.palette}});return l[d]={...u,palette:m,opacity:{...xE(p),...u==null?void 0:u.opacity},overlays:(u==null?void 0:u.overlays)||PE(p)},b}function cC(l={},...u){const{colorSchemes:i={light:!0},defaultColorScheme:d,disableCssColorScheme:p=!1,cssVarPrefix:m="mui",shouldSkipGeneratingVar:b=rC,colorSchemeSelector:y=i.light&&i.dark?"media":void 0,rootSelector:S=":root",...L}=l,U=Object.keys(i)[0],D=d||(i.light&&U!=="light"?"light":U),R=uC(m),{[D]:V,light:B,dark:k,...K}=i,te={...K};let ue=V;if((D==="dark"&&!("dark"in i)||D==="light"&&!("light"in i))&&(ue=!0),!ue)throw new Error(Tc(21,D));const he=C$(te,ue,L,D);B&&!te.light&&C$(te,B,void 0,"light"),k&&!te.dark&&C$(te,k,void 0,"dark");let pe={defaultColorScheme:D,...he,cssVarPrefix:m,colorSchemeSelector:y,rootSelector:S,getCssVar:R,colorSchemes:te,font:{...HS(he.typography),...he.font},spacing:lC(L.spacing)};Object.keys(pe.colorSchemes).forEach(ze=>{const C=pe.colorSchemes[ze].palette,me=Ce=>{const Me=Ce.split("-"),Re=Me[1],Ge=Me[2];return R(Ce,C[Re][Ge])};if(C.mode==="light"&&(Q(C.common,"background","#fff"),Q(C.common,"onBackground","#000")),C.mode==="dark"&&(Q(C.common,"background","#000"),Q(C.common,"onBackground","#fff")),oC(C,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),C.mode==="light"){Q(C.Alert,"errorColor",Lt(C.error.light,.6)),Q(C.Alert,"infoColor",Lt(C.info.light,.6)),Q(C.Alert,"successColor",Lt(C.success.light,.6)),Q(C.Alert,"warningColor",Lt(C.warning.light,.6)),Q(C.Alert,"errorFilledBg",me("palette-error-main")),Q(C.Alert,"infoFilledBg",me("palette-info-main")),Q(C.Alert,"successFilledBg",me("palette-success-main")),Q(C.Alert,"warningFilledBg",me("palette-warning-main")),Q(C.Alert,"errorFilledColor",Yi(()=>C.getContrastText(C.error.main))),Q(C.Alert,"infoFilledColor",Yi(()=>C.getContrastText(C.info.main))),Q(C.Alert,"successFilledColor",Yi(()=>C.getContrastText(C.success.main))),Q(C.Alert,"warningFilledColor",Yi(()=>C.getContrastText(C.warning.main))),Q(C.Alert,"errorStandardBg",At(C.error.light,.9)),Q(C.Alert,"infoStandardBg",At(C.info.light,.9)),Q(C.Alert,"successStandardBg",At(C.success.light,.9)),Q(C.Alert,"warningStandardBg",At(C.warning.light,.9)),Q(C.Alert,"errorIconColor",me("palette-error-main")),Q(C.Alert,"infoIconColor",me("palette-info-main")),Q(C.Alert,"successIconColor",me("palette-success-main")),Q(C.Alert,"warningIconColor",me("palette-warning-main")),Q(C.AppBar,"defaultBg",me("palette-grey-100")),Q(C.Avatar,"defaultBg",me("palette-grey-400")),Q(C.Button,"inheritContainedBg",me("palette-grey-300")),Q(C.Button,"inheritContainedHoverBg",me("palette-grey-A100")),Q(C.Chip,"defaultBorder",me("palette-grey-400")),Q(C.Chip,"defaultAvatarColor",me("palette-grey-700")),Q(C.Chip,"defaultIconColor",me("palette-grey-700")),Q(C.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),Q(C.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),Q(C.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),Q(C.LinearProgress,"primaryBg",At(C.primary.main,.62)),Q(C.LinearProgress,"secondaryBg",At(C.secondary.main,.62)),Q(C.LinearProgress,"errorBg",At(C.error.main,.62)),Q(C.LinearProgress,"infoBg",At(C.info.main,.62)),Q(C.LinearProgress,"successBg",At(C.success.main,.62)),Q(C.LinearProgress,"warningBg",At(C.warning.main,.62)),Q(C.Skeleton,"bg",`rgba(${me("palette-text-primaryChannel")} / 0.11)`),Q(C.Slider,"primaryTrack",At(C.primary.main,.62)),Q(C.Slider,"secondaryTrack",At(C.secondary.main,.62)),Q(C.Slider,"errorTrack",At(C.error.main,.62)),Q(C.Slider,"infoTrack",At(C.info.main,.62)),Q(C.Slider,"successTrack",At(C.success.main,.62)),Q(C.Slider,"warningTrack",At(C.warning.main,.62));const Ce=xg(C.background.default,.8);Q(C.SnackbarContent,"bg",Ce),Q(C.SnackbarContent,"color",Yi(()=>C.getContrastText(Ce))),Q(C.SpeedDialAction,"fabHoverBg",xg(C.background.paper,.15)),Q(C.StepConnector,"border",me("palette-grey-400")),Q(C.StepContent,"border",me("palette-grey-400")),Q(C.Switch,"defaultColor",me("palette-common-white")),Q(C.Switch,"defaultDisabledColor",me("palette-grey-100")),Q(C.Switch,"primaryDisabledColor",At(C.primary.main,.62)),Q(C.Switch,"secondaryDisabledColor",At(C.secondary.main,.62)),Q(C.Switch,"errorDisabledColor",At(C.error.main,.62)),Q(C.Switch,"infoDisabledColor",At(C.info.main,.62)),Q(C.Switch,"successDisabledColor",At(C.success.main,.62)),Q(C.Switch,"warningDisabledColor",At(C.warning.main,.62)),Q(C.TableCell,"border",At(Ng(C.divider,1),.88)),Q(C.Tooltip,"bg",Ng(C.grey[700],.92))}if(C.mode==="dark"){Q(C.Alert,"errorColor",At(C.error.light,.6)),Q(C.Alert,"infoColor",At(C.info.light,.6)),Q(C.Alert,"successColor",At(C.success.light,.6)),Q(C.Alert,"warningColor",At(C.warning.light,.6)),Q(C.Alert,"errorFilledBg",me("palette-error-dark")),Q(C.Alert,"infoFilledBg",me("palette-info-dark")),Q(C.Alert,"successFilledBg",me("palette-success-dark")),Q(C.Alert,"warningFilledBg",me("palette-warning-dark")),Q(C.Alert,"errorFilledColor",Yi(()=>C.getContrastText(C.error.dark))),Q(C.Alert,"infoFilledColor",Yi(()=>C.getContrastText(C.info.dark))),Q(C.Alert,"successFilledColor",Yi(()=>C.getContrastText(C.success.dark))),Q(C.Alert,"warningFilledColor",Yi(()=>C.getContrastText(C.warning.dark))),Q(C.Alert,"errorStandardBg",Lt(C.error.light,.9)),Q(C.Alert,"infoStandardBg",Lt(C.info.light,.9)),Q(C.Alert,"successStandardBg",Lt(C.success.light,.9)),Q(C.Alert,"warningStandardBg",Lt(C.warning.light,.9)),Q(C.Alert,"errorIconColor",me("palette-error-main")),Q(C.Alert,"infoIconColor",me("palette-info-main")),Q(C.Alert,"successIconColor",me("palette-success-main")),Q(C.Alert,"warningIconColor",me("palette-warning-main")),Q(C.AppBar,"defaultBg",me("palette-grey-900")),Q(C.AppBar,"darkBg",me("palette-background-paper")),Q(C.AppBar,"darkColor",me("palette-text-primary")),Q(C.Avatar,"defaultBg",me("palette-grey-600")),Q(C.Button,"inheritContainedBg",me("palette-grey-800")),Q(C.Button,"inheritContainedHoverBg",me("palette-grey-700")),Q(C.Chip,"defaultBorder",me("palette-grey-700")),Q(C.Chip,"defaultAvatarColor",me("palette-grey-300")),Q(C.Chip,"defaultIconColor",me("palette-grey-300")),Q(C.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),Q(C.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),Q(C.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),Q(C.LinearProgress,"primaryBg",Lt(C.primary.main,.5)),Q(C.LinearProgress,"secondaryBg",Lt(C.secondary.main,.5)),Q(C.LinearProgress,"errorBg",Lt(C.error.main,.5)),Q(C.LinearProgress,"infoBg",Lt(C.info.main,.5)),Q(C.LinearProgress,"successBg",Lt(C.success.main,.5)),Q(C.LinearProgress,"warningBg",Lt(C.warning.main,.5)),Q(C.Skeleton,"bg",`rgba(${me("palette-text-primaryChannel")} / 0.13)`),Q(C.Slider,"primaryTrack",Lt(C.primary.main,.5)),Q(C.Slider,"secondaryTrack",Lt(C.secondary.main,.5)),Q(C.Slider,"errorTrack",Lt(C.error.main,.5)),Q(C.Slider,"infoTrack",Lt(C.info.main,.5)),Q(C.Slider,"successTrack",Lt(C.success.main,.5)),Q(C.Slider,"warningTrack",Lt(C.warning.main,.5));const Ce=xg(C.background.default,.98);Q(C.SnackbarContent,"bg",Ce),Q(C.SnackbarContent,"color",Yi(()=>C.getContrastText(Ce))),Q(C.SpeedDialAction,"fabHoverBg",xg(C.background.paper,.15)),Q(C.StepConnector,"border",me("palette-grey-600")),Q(C.StepContent,"border",me("palette-grey-600")),Q(C.Switch,"defaultColor",me("palette-grey-300")),Q(C.Switch,"defaultDisabledColor",me("palette-grey-600")),Q(C.Switch,"primaryDisabledColor",Lt(C.primary.main,.55)),Q(C.Switch,"secondaryDisabledColor",Lt(C.secondary.main,.55)),Q(C.Switch,"errorDisabledColor",Lt(C.error.main,.55)),Q(C.Switch,"infoDisabledColor",Lt(C.info.main,.55)),Q(C.Switch,"successDisabledColor",Lt(C.success.main,.55)),Q(C.Switch,"warningDisabledColor",Lt(C.warning.main,.55)),Q(C.TableCell,"border",Lt(Ng(C.divider,1),.68)),Q(C.Tooltip,"bg",Ng(C.grey[700],.92))}Zo(C.background,"default"),Zo(C.background,"paper"),Zo(C.common,"background"),Zo(C.common,"onBackground"),Zo(C,"divider"),Object.keys(C).forEach(Ce=>{const Me=C[Ce];Ce!=="tonalOffset"&&Me&&typeof Me=="object"&&(Me.main&&Q(C[Ce],"mainChannel",fp($p(Me.main))),Me.light&&Q(C[Ce],"lightChannel",fp($p(Me.light))),Me.dark&&Q(C[Ce],"darkChannel",fp($p(Me.dark))),Me.contrastText&&Q(C[Ce],"contrastTextChannel",fp($p(Me.contrastText))),Ce==="text"&&(Zo(C[Ce],"primary"),Zo(C[Ce],"secondary")),Ce==="action"&&(Me.active&&Zo(C[Ce],"active"),Me.selected&&Zo(C[Ce],"selected")))})}),pe=u.reduce((ze,C)=>cs(ze,C),pe);const ve={prefix:m,disableCssColorScheme:p,shouldSkipGeneratingVar:b,getSelector:iC(pe)},{vars:be,generateThemeVars:$e,generateStyleSheets:ce}=AS(pe,ve);return pe.vars=be,Object.entries(pe.colorSchemes[pe.defaultColorScheme]).forEach(([ze,C])=>{pe[ze]=C}),pe.generateThemeVars=$e,pe.generateStyleSheets=ce,pe.generateSpacing=function(){return CE(L.spacing,rm(this))},pe.getColorSchemeSelector=DS(y),pe.spacing=pe.generateSpacing(),pe.shouldSkipGeneratingVar=b,pe.unstable_sxConfig={...Rp,...L==null?void 0:L.unstable_sxConfig},pe.unstable_sx=function(C){return Ec({sx:C,theme:this})},pe.toRuntimeSource=NE,pe}function MT(l,u,i){l.colorSchemes&&i&&(l.colorSchemes[u]={...i!==!0&&i,palette:cm({...i===!0?{}:i.palette,mode:u})})}function BE(l={},...u){const{palette:i,cssVariables:d=!1,colorSchemes:p=i?void 0:{light:!0},defaultColorScheme:m=i==null?void 0:i.mode,...b}=l,y=m||"light",S=p==null?void 0:p[y],L={...p,...i?{[y]:{...typeof S!="boolean"&&S,palette:i}}:void 0};if(d===!1){if(!("colorSchemes"in l))return H$(l,...u);let U=i;"palette"in l||L[y]&&(L[y]!==!0?U=L[y].palette:y==="dark"&&(U={mode:"dark"}));const D=H$({...l,palette:U},...u);return D.defaultColorScheme=y,D.colorSchemes=L,D.palette.mode==="light"&&(D.colorSchemes.light={...L.light!==!0&&L.light,palette:D.palette},MT(D,"dark",L.dark)),D.palette.mode==="dark"&&(D.colorSchemes.dark={...L.dark!==!0&&L.dark,palette:D.palette},MT(D,"light",L.light)),D}return!i&&!("light"in L)&&y==="light"&&(L.light=!0),cC({...b,colorSchemes:L,defaultColorScheme:y,...typeof d!="boolean"&&d},...u)}const FE=BE();function aC(){const l=IE(FE);return l[q$]||l}function dC(l){return l!=="ownerState"&&l!=="theme"&&l!=="sx"&&l!=="as"}const hC=l=>dC(l)&&l!=="classes",hf=fS({themeId:q$,defaultTheme:FE,rootShouldForwardProp:hC});function pC(){return kE}const UE=wS;function pf(l){return kS(l)}function gC(l){return Ap("MuiPaper",l)}Dp("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const fC=l=>{const{square:u,elevation:i,variant:d,classes:p}=l,m={root:["root",d,!u&&"rounded",d==="elevation"&&`elevation${i}`]};return df(m,gC,p)},$C=hf("div",{name:"MuiPaper",slot:"Root",overridesResolver:(l,u)=>{const{ownerState:i}=l;return[u.root,u[i.variant],!i.square&&u.rounded,i.variant==="elevation"&&u[`elevation${i.elevation}`]]}})(UE(({theme:l})=>({backgroundColor:(l.vars||l).palette.background.paper,color:(l.vars||l).palette.text.primary,transition:l.transitions.create("box-shadow"),variants:[{props:({ownerState:u})=>!u.square,style:{borderRadius:l.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(l.vars||l).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),mC=le.forwardRef(function(u,i){var V;const d=pf({props:u,name:"MuiPaper"}),p=aC(),{className:m,component:b="div",elevation:y=1,square:S=!1,variant:L="elevation",...U}=d,D={...d,component:b,elevation:y,square:S,variant:L},R=fC(D);return F.jsx($C,{as:b,ownerState:D,className:Lp(R.root,m),ref:i,...U,style:{...L==="elevation"&&{"--Paper-shadow":(p.vars||p).shadows[y],...p.vars&&{"--Paper-overlay":(V=p.vars.overlays)==null?void 0:V[y]},...!p.vars&&p.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${U$("#fff",G$(y))}, ${U$("#fff",G$(y))})`}},...U.style}})});function _C(l){return typeof l.main=="string"}function TC(l,u=[]){if(!_C(l))return!1;for(const i of u)if(!l.hasOwnProperty(i)||typeof l[i]!="string")return!1;return!0}function EC(l=[]){return([,u])=>u&&TC(u,l)}function bC(l){return Ap("MuiTypography",l)}Dp("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const yC={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},vC=pC(),SC=l=>{const{align:u,gutterBottom:i,noWrap:d,paragraph:p,variant:m,classes:b}=l,y={root:["root",m,l.align!=="inherit"&&`align${Cp(u)}`,i&&"gutterBottom",d&&"noWrap",p&&"paragraph"]};return df(y,bC,b)},CC=hf("span",{name:"MuiTypography",slot:"Root",overridesResolver:(l,u)=>{const{ownerState:i}=l;return[u.root,i.variant&&u[i.variant],i.align!=="inherit"&&u[`align${Cp(i.align)}`],i.noWrap&&u.noWrap,i.gutterBottom&&u.gutterBottom,i.paragraph&&u.paragraph]}})(UE(({theme:l})=>{var u;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(l.typography).filter(([i,d])=>i!=="inherit"&&d&&typeof d=="object").map(([i,d])=>({props:{variant:i},style:d})),...Object.entries(l.palette).filter(EC()).map(([i])=>({props:{color:i},style:{color:(l.vars||l).palette[i].main}})),...Object.entries(((u=l.palette)==null?void 0:u.text)||{}).filter(([,i])=>typeof i=="string").map(([i])=>({props:{color:`text${Cp(i)}`},style:{color:(l.vars||l).palette.text[i]}})),{props:({ownerState:i})=>i.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:i})=>i.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:i})=>i.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:i})=>i.paragraph,style:{marginBottom:16}}]}})),NT={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},I$=le.forwardRef(function(u,i){const{color:d,...p}=pf({props:u,name:"MuiTypography"}),m=!yC[d],b=vC({...p,...m&&{color:d}}),{align:y="inherit",className:S,component:L,gutterBottom:U=!1,noWrap:D=!1,paragraph:R=!1,variant:V="body1",variantMapping:B=NT,...k}=b,K={...b,align:y,color:d,className:S,component:L,gutterBottom:U,noWrap:D,paragraph:R,variant:V,variantMapping:B},te=L||(R?"p":B[V]||NT[V])||"span",ue=SC(K);return F.jsx(CC,{as:te,ref:i,className:Lp(ue.root,S),...k,ownerState:K,style:{...y!=="inherit"&&{"--Typography-textAlign":y},...k.style}})}),IC=Dp("MuiBox",["root"]),kC=BE(),wC=aS({themeId:q$,defaultTheme:kC,defaultClassName:IC.root,generateClassName:wE.generate});function OC(l){return Ap("MuiCard",l)}Dp("MuiCard",["root"]);const RC=l=>{const{classes:u}=l;return df({root:["root"]},OC,u)},LC=hf(mC,{name:"MuiCard",slot:"Root",overridesResolver:(l,u)=>u.root})({overflow:"hidden"}),AC=le.forwardRef(function(u,i){const d=pf({props:u,name:"MuiCard"}),{className:p,raised:m=!1,...b}=d,y={...d,raised:m},S=RC(y);return F.jsx(LC,{className:Lp(S.root,p),elevation:m?8:void 0,ref:i,ownerState:y,...b})});function DC(l){return Ap("MuiCardContent",l)}Dp("MuiCardContent",["root"]);const MC=l=>{const{classes:u}=l;return df({root:["root"]},DC,u)},NC=hf("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(l,u)=>u.root})({padding:16,"&:last-child":{paddingBottom:24}}),xC=le.forwardRef(function(u,i){const d=pf({props:u,name:"MuiCardContent"}),{className:p,component:m="div",...b}=d,y={...d,component:m},S=MC(y);return F.jsx(NC,{as:m,className:Lp(S.root,p),ownerState:y,ref:i,...b})});function PC(l,u){var i={};for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&u.indexOf(d)<0&&(i[d]=l[d]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var p=0,d=Object.getOwnPropertySymbols(l);p<d.length;p++)u.indexOf(d[p])<0&&Object.prototype.propertyIsEnumerable.call(l,d[p])&&(i[d[p]]=l[d[p]]);return i}const Ip="abcdefgh".split(""),Vg={a8:"bR",b8:"bN",c8:"bB",d8:"bQ",e8:"bK",f8:"bB",g8:"bN",h8:"bR",a7:"bP",b7:"bP",c7:"bP",d7:"bP",e7:"bP",f7:"bP",g7:"bP",h7:"bP",a2:"wP",b2:"wP",c2:"wP",d2:"wP",e2:"wP",f2:"wP",g2:"wP",h2:"wP",a1:"wR",b1:"wN",c1:"wB",d1:"wQ",e1:"wK",f1:"wB",g1:"wN",h1:"wR"},BC={a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7},FC={a:7,b:6,c:5,d:4,e:3,f:2,g:1,h:0},UC=[7,6,5,4,3,2,1,0],HC=[0,1,2,3,4,5,6,7],xT={wP:F.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:F.jsx("path",{d:"m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z",style:{opacity:"1",fill:"#ffffff",fillOpacity:"1",fillRule:"nonzero",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"miter",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}})})),wR:F.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:F.jsxs("g",Object.assign({style:{opacity:"1",fill:"#ffffff",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[F.jsx("path",{d:"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z ",style:{strokeLinecap:"butt"}}),F.jsx("path",{d:"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z ",style:{strokeLinecap:"butt"}}),F.jsx("path",{d:"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14",style:{strokeLinecap:"butt"}}),F.jsx("path",{d:"M 34,14 L 31,17 L 14,17 L 11,14"}),F.jsx("path",{d:"M 31,17 L 31,29.5 L 14,29.5 L 14,17",style:{strokeLinecap:"butt",strokeLinejoin:"miter"}}),F.jsx("path",{d:"M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5"}),F.jsx("path",{d:"M 11,14 L 34,14",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}})]}))})),wN:F.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:F.jsxs("g",Object.assign({style:{opacity:"1",fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[F.jsx("path",{d:"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18",style:{fill:"#ffffff",stroke:"#000000"}}),F.jsx("path",{d:"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10",style:{fill:"#ffffff",stroke:"#000000"}}),F.jsx("path",{d:"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z",style:{fill:"#000000",stroke:"#000000"}}),F.jsx("path",{d:"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z",transform:"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)",style:{fill:"#000000",stroke:"#000000"}})]}))})),wB:F.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:F.jsxs("g",Object.assign({style:{opacity:"1",fill:"none",fillRule:"evenodd",fillOpacity:"1",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[F.jsxs("g",Object.assign({style:{fill:"#ffffff",stroke:"#000000",strokeLinecap:"butt"}},{children:[F.jsx("path",{d:"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z"}),F.jsx("path",{d:"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"}),F.jsx("path",{d:"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"})]})),F.jsx("path",{d:"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}})]}))})),wQ:F.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:F.jsxs("g",Object.assign({style:{fill:"#ffffff",stroke:"#000000",strokeWidth:"1.5",strokeLinejoin:"round"}},{children:[F.jsx("path",{d:"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z"}),F.jsx("path",{d:"M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 11,36 11,36 C 9.5,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z"}),F.jsx("path",{d:"M 11.5,30 C 15,29 30,29 33.5,30",style:{fill:"none"}}),F.jsx("path",{d:"M 12,33.5 C 18,32.5 27,32.5 33,33.5",style:{fill:"none"}}),F.jsx("circle",{cx:"6",cy:"12",r:"2"}),F.jsx("circle",{cx:"14",cy:"9",r:"2"}),F.jsx("circle",{cx:"22.5",cy:"8",r:"2"}),F.jsx("circle",{cx:"31",cy:"9",r:"2"}),F.jsx("circle",{cx:"39",cy:"12",r:"2"})]}))})),wK:F.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:F.jsxs("g",Object.assign({style:{fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[F.jsx("path",{d:"M 22.5,11.63 L 22.5,6",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),F.jsx("path",{d:"M 20,8 L 25,8",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),F.jsx("path",{d:"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25",style:{fill:"#ffffff",stroke:"#000000",strokeLinecap:"butt",strokeLinejoin:"miter"}}),F.jsx("path",{d:"M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37",style:{fill:"#ffffff",stroke:"#000000"}}),F.jsx("path",{d:"M 12.5,30 C 18,27 27,27 32.5,30",style:{fill:"none",stroke:"#000000"}}),F.jsx("path",{d:"M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5",style:{fill:"none",stroke:"#000000"}}),F.jsx("path",{d:"M 12.5,37 C 18,34 27,34 32.5,37",style:{fill:"none",stroke:"#000000"}})]}))})),bP:F.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:F.jsx("path",{d:"m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z",style:{opacity:"1",fill:"#000000",fillOpacity:"1",fillRule:"nonzero",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"miter",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}})})),bR:F.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:F.jsxs("g",Object.assign({style:{opacity:"1",fill:"#000000",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[F.jsx("path",{d:"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z ",style:{strokeLinecap:"butt"}}),F.jsx("path",{d:"M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z ",style:{strokeLinecap:"butt"}}),F.jsx("path",{d:"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z ",style:{strokeLinecap:"butt"}}),F.jsx("path",{d:"M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z ",style:{strokeLinecap:"butt",strokeLinejoin:"miter"}}),F.jsx("path",{d:"M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z ",style:{strokeLinecap:"butt"}}),F.jsx("path",{d:"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z ",style:{strokeLinecap:"butt"}}),F.jsx("path",{d:"M 12,35.5 L 33,35.5 L 33,35.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),F.jsx("path",{d:"M 13,31.5 L 32,31.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),F.jsx("path",{d:"M 14,29.5 L 31,29.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),F.jsx("path",{d:"M 14,16.5 L 31,16.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),F.jsx("path",{d:"M 11,14 L 34,14",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}})]}))})),bN:F.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:F.jsxs("g",Object.assign({style:{opacity:"1",fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[F.jsx("path",{d:"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18",style:{fill:"#000000",stroke:"#000000"}}),F.jsx("path",{d:"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10",style:{fill:"#000000",stroke:"#000000"}}),F.jsx("path",{d:"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z",style:{fill:"#ffffff",stroke:"#ffffff"}}),F.jsx("path",{d:"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z",transform:"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)",style:{fill:"#ffffff",stroke:"#ffffff"}}),F.jsx("path",{d:"M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z ",style:{fill:"#ffffff",stroke:"none"}})]}))})),bB:F.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:F.jsxs("g",Object.assign({style:{opacity:"1",fill:"none",fillRule:"evenodd",fillOpacity:"1",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[F.jsxs("g",Object.assign({style:{fill:"#000000",stroke:"#000000",strokeLinecap:"butt"}},{children:[F.jsx("path",{d:"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z"}),F.jsx("path",{d:"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"}),F.jsx("path",{d:"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"})]})),F.jsx("path",{d:"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18",style:{fill:"none",stroke:"#ffffff",strokeLinejoin:"miter"}})]}))})),bQ:F.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:F.jsxs("g",Object.assign({style:{fill:"#000000",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}},{children:[F.jsx("path",{d:"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z",style:{strokeLinecap:"butt",fill:"#000000"}}),F.jsx("path",{d:"m 9,26 c 0,2 1.5,2 2.5,4 1,1.5 1,1 0.5,3.5 -1.5,1 -1,2.5 -1,2.5 -1.5,1.5 0,2.5 0,2.5 6.5,1 16.5,1 23,0 0,0 1.5,-1 0,-2.5 0,0 0.5,-1.5 -1,-2.5 -0.5,-2.5 -0.5,-2 0.5,-3.5 1,-2 2.5,-2 2.5,-4 -8.5,-1.5 -18.5,-1.5 -27,0 z"}),F.jsx("path",{d:"M 11.5,30 C 15,29 30,29 33.5,30"}),F.jsx("path",{d:"m 12,33.5 c 6,-1 15,-1 21,0"}),F.jsx("circle",{cx:"6",cy:"12",r:"2"}),F.jsx("circle",{cx:"14",cy:"9",r:"2"}),F.jsx("circle",{cx:"22.5",cy:"8",r:"2"}),F.jsx("circle",{cx:"31",cy:"9",r:"2"}),F.jsx("circle",{cx:"39",cy:"12",r:"2"}),F.jsx("path",{d:"M 11,38.5 A 35,35 1 0 0 34,38.5",style:{fill:"none",stroke:"#000000",strokeLinecap:"butt"}}),F.jsxs("g",Object.assign({style:{fill:"none",stroke:"#ffffff"}},{children:[F.jsx("path",{d:"M 11,29 A 35,35 1 0 1 34,29"}),F.jsx("path",{d:"M 12.5,31.5 L 32.5,31.5"}),F.jsx("path",{d:"M 11.5,34.5 A 35,35 1 0 0 33.5,34.5"}),F.jsx("path",{d:"M 10.5,37.5 A 35,35 1 0 0 34.5,37.5"})]}))]}))})),bK:F.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:F.jsxs("g",Object.assign({style:{fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[F.jsx("path",{d:"M 22.5,11.63 L 22.5,6",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"},id:"path6570"}),F.jsx("path",{d:"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25",style:{fill:"#000000",fillOpacity:"1",strokeLinecap:"butt",strokeLinejoin:"miter"}}),F.jsx("path",{d:"M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37",style:{fill:"#000000",stroke:"#000000"}}),F.jsx("path",{d:"M 20,8 L 25,8",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),F.jsx("path",{d:"M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.5,26.6 L 22.5,24.5 C 20,18 10.85,14 6.97,19.85 C 4.5,25.5 13,29.5 13,29.5",style:{fill:"none",stroke:"#ffffff"}}),F.jsx("path",{d:"M 12.5,30 C 18,27 27,27 32.5,30 M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5 M 12.5,37 C 18,34 27,34 32.5,37",style:{fill:"none",stroke:"#ffffff"}})]}))}))};function V$(l,u,i){const d=u/8,p=l==="white"?BC:FC,m=l==="white"?UC:HC,b=p[i[0]]*d+d/2,y=m[parseInt(i[1],10)-1]*d+d/2;return{x:b,y}}function PT(l){let u=!1;return Object.keys(Vg).forEach(i=>{l[i]!==Vg[i]&&(u=!0)}),Object.keys(l).forEach(i=>{Vg[i]!==l[i]&&(u=!0)}),u}function GC(l,u){const i={removed:{},added:{}};return Object.keys(l).forEach(d=>{u[d]!==l[d]&&(i.removed[d]=l[d])}),Object.keys(u).forEach(d=>{l[d]!==u[d]&&(i.added[d]=u[d])}),i}function BT(l){return l==="start"?Vg:typeof l=="string"?VC(l):l}function VC(l){if(!WC(l))return{};l=l.replace(/ .+$/,"");const u=l.split("/"),i={};let d=8;for(let p=0;p<8;p++){const m=u[p].split("");let b=0;for(let y=0;y<m.length;y++)if(m[y].search(/[1-8]/)!==-1){const S=parseInt(m[y],10);b=b+S}else{const S=Ip[b]+d;i[S]=jC(m[y]),b=b+1}d=d-1}return i}function WC(l){l=l.replace(/ .+$/,""),l=zC(l);const u=l.split("/");if(u.length!==8)return!1;for(let i=0;i<8;i++)if(u[i].length!==8||u[i].search(/[^kqrnbpKQRNBP1]/)!==-1)return!1;return!0}function zC(l){return l.replace(/8/g,"11111111").replace(/7/g,"1111111").replace(/6/g,"111111").replace(/5/g,"11111").replace(/4/g,"1111").replace(/3/g,"111").replace(/2/g,"11")}function jC(l){return l.toLowerCase()===l?"b"+l.toUpperCase():"w"+l.toUpperCase()}const XC=(l,u=!0,i,d)=>{const[p,m]=le.useState([]),[b,y]=le.useState([]),[S,L]=le.useState();le.useEffect(()=>{Array.isArray(l)&&(U(),m(l==null?void 0:l.filter(B=>B[0]!==B[1])))},[l]),le.useEffect(()=>{i==null||i(b)},[b]);function U(){y([]),L(void 0)}const D=(B,k)=>{u&&L([B,k,d])},R=[...b,...p];return{arrows:R,newArrow:S,clearArrows:U,drawNewArrow:D,setArrows:y,onArrowDrawEnd:(B,k)=>{if(B===k||!u)return;let K;const te=[B,k,d];R.every(([he,pe])=>!(he===B&&pe===k))?K=[...b,te]:K=b.filter(([he,pe])=>!(he===B&&pe===k)),L(void 0),y(K)}}},HE=le.createContext({}),tl=()=>le.useContext(HE),KC=le.forwardRef(({allowDragOutsideBoard:l=!0,animationDuration:u=300,areArrowsAllowed:i=!0,arePiecesDraggable:d=!0,arePremovesAllowed:p=!1,autoPromoteToQueen:m=!1,boardOrientation:b="white",boardWidth:y,children:S,clearPremovesOnRightClick:L=!0,customArrows:U,customArrowColor:D="rgb(255,170,0)",customBoardStyle:R,customNotationStyle:V,customDarkSquareStyle:B={backgroundColor:"#B58863"},customDropSquareStyle:k={boxShadow:"inset 0 0 1px 6px rgba(255,255,255,0.75)"},customLightSquareStyle:K={backgroundColor:"#F0D9B5"},customPieces:te,customPremoveDarkSquareStyle:ue={backgroundColor:"#A42323"},customPremoveLightSquareStyle:he={backgroundColor:"#BD2828"},customSquare:pe="div",customSquareStyles:ve,dropOffBoardAction:be="snapback",id:$e=0,isDraggablePiece:ce=()=>!0,getPositionObject:ze=()=>{},onArrowsChange:C=()=>{},onDragOverSquare:me=()=>{},onMouseOutSquare:Ce=()=>{},onMouseOverSquare:Me=()=>{},onPieceClick:Re=()=>{},onPieceDragBegin:Ge=()=>{},onPieceDragEnd:Xe=()=>{},onPieceDrop:Ye=()=>!0,onPieceDropOffBoard:X=()=>{},onPromotionCheck:xe=(Wt,ln,Yn)=>(Yn==="wP"&&Wt[1]==="7"&&ln[1]==="8"||Yn==="bP"&&Wt[1]==="2"&&ln[1]==="1")&&Math.abs(Wt.charCodeAt(0)-ln.charCodeAt(0))<=1,onPromotionPieceSelect:Ee=()=>!0,onSparePieceDrop:H=()=>!0,onSquareClick:se=()=>{},onSquareRightClick:We=()=>{},position:Pe="start",promotionDialogVariant:je="default",promotionToSquare:Be=null,showBoardNotation:we=!0,showPromotionDialog:Ke=!1,snapToCursor:qe=!0},kt)=>{const[Wt,ln]=le.useState(BT(Pe)),[Yn,Gs]=le.useState({removed:{},added:{}}),[En,zt]=le.useState(void 0),[Br,ir]=le.useState(Ke&&!m),[Vs,Le]=le.useState(null),[nt,et]=le.useState(Be),[Fr,bn]=le.useState([]),dn=le.useRef(Fr),[br,Bt]=le.useState(),[Rn,fi]=le.useState(Object.assign(Object.assign({},xT),te)),[J,ke]=le.useState(!1),[_,v]=le.useState(),[N,x]=le.useState(!1),[fe,ht]=le.useState(null);le.useImperativeHandle(kt,()=>({clearPremoves(ut=!0){An(ut)}})),le.useEffect(()=>{fi(Object.assign(Object.assign({},xT),te))},[te]),le.useEffect(()=>{ir(Ke),et(Be)},[Be,Ke]),le.useEffect(()=>{var ut,lt,un;Jn();const Mt=BT(Pe),or=GC(Wt,Mt),qn=((ut=Object.keys(or.added))===null||ut===void 0?void 0:ut.length)<=2?(un=(lt=Object.entries(or.added))===null||lt===void 0?void 0:lt[0])===null||un===void 0?void 0:un[1][0]:void 0;if(N)ln(Mt),x(!1),p&&to(qn),_&&clearTimeout(_);else if(J)ln(Mt),x(!1),p&&to(qn);else{PT(Mt)&&En!==void 0?zt(qn):PT(Mt)?zt(void 0):zt("b"),Gs(or),x(!0);const vc=setTimeout(()=>{ln(Mt),x(!1),p&&to(qn)},u);v(vc)}return ke(!1),ze(Mt),Ws(),()=>{clearTimeout(_)}},[Pe]);const{arrows:Ln,newArrow:Ur,clearArrows:Ws,drawNewArrow:yr,onArrowDrawEnd:Hr}=XC(U,i,C,D);function eo(ut,lt,un,Mt){if(ut===lt)return;if(Ws(),p&&N||p&&(En===un[0]||dn.current.filter(qn=>qn.piece[0]===un[0]).length>0)){const qn=[...dn.current];qn.push({sourceSq:ut,targetSq:lt,piece:un}),dn.current=qn,bn([...qn]),Jn();return}if(!p&&N)return;const or=Object.assign({},Wt);ke(!!Mt),zt(un[0]),Ye.length?Ye(ut,lt,un)||(An(),ke(!1)):(delete or[ut],or[lt]=un,ln(or)),Jn(),ze(or)}function $i(ut){const lt=Object.assign({},Wt);delete lt[ut],ln(lt),ze(lt)}function to(ut){if(dn.current.length===0)return;const lt=dn.current[0];if(lt.piece[0]!==void 0&&lt.piece[0]!==ut&&Ye.length)if(zt(lt.piece[0]),ke(!0),Ye(lt.sourceSq,lt.targetSq,lt.piece)){const Mt=[...dn.current];Mt.shift(),dn.current=Mt,bn([...Mt])}else An()}function nl(ut,lt){if(!H(ut,lt))return;const Mt=Object.assign({},Wt);Mt[lt]=ut,ln(Mt),ze(Mt)}function An(ut=!0){ut&&zt(void 0),dn.current=[],bn([])}function Jn(){Le(null),et(null),ir(!1)}function rl(ut){Bt(ut)}function zs(ut){if(br){if(br===ut){Bt(void 0),L&&An(!1),We(ut);return}}else Bt(void 0)}function sl(){Bt(void 0)}const js={allowDragOutsideBoard:l,animationDuration:u,arePiecesDraggable:d,arePremovesAllowed:p,arrows:Ln,autoPromoteToQueen:m,boardOrientation:b,boardWidth:y,chessPieces:Rn,clearArrows:Ws,clearCurrentRightClickDown:sl,currentPosition:Wt,currentRightClickDown:br,customArrowColor:D,customBoardStyle:R,customDarkSquareStyle:B,customDropSquareStyle:k,customLightSquareStyle:K,customNotationStyle:V,customPremoveDarkSquareStyle:ue,customPremoveLightSquareStyle:he,customSquare:pe,customSquareStyles:ve,deletePieceFromSquare:$i,drawNewArrow:yr,dropOffBoardAction:be,handleSetPosition:eo,handleSparePieceDrop:nl,id:$e,isDraggablePiece:ce,isWaitingForAnimation:N,lastPieceColour:En,lastSquareDraggedOver:fe,newArrow:Ur,onArrowDrawEnd:Hr,onDragOverSquare:me,onMouseOutSquare:Ce,onMouseOverSquare:Me,onPieceClick:Re,onPieceDragBegin:Ge,onPieceDragEnd:Xe,onPieceDrop:Ye,onPieceDropOffBoard:X,onPromotionCheck:xe,onPromotionPieceSelect:Ee,onRightClickDown:rl,onRightClickUp:zs,onSparePieceDrop:H,onSquareClick:se,positionDifferences:Yn,premoves:Fr,promoteFromSquare:Vs,promoteToSquare:nt,promotionDialogVariant:je,setLastSquareDraggedOver:ht,setPromoteFromSquare:Le,setPromoteToSquare:et,setShowPromoteDialog:ir,showBoardNotation:we,showPromoteDialog:Br,snapToCursor:qe};return F.jsx(HE.Provider,Object.assign({value:js},{children:S}))});function YC({row:l,col:u}){const{boardOrientation:i,boardWidth:d,customDarkSquareStyle:p,customLightSquareStyle:m,customNotationStyle:b}=tl(),y=m.backgroundColor,S=p.backgroundColor,L=u===0,U=l===7,D=L&&U;function R(){return i==="white"?8-l:l+1}function V(){return i==="black"?Ip[7-u]:Ip[u]}function B(){return F.jsxs(F.Fragment,{children:[F.jsx("div",Object.assign({style:Object.assign(Object.assign({zIndex:3,position:"absolute"},{color:y}),UT(d,b))},{children:R()})),F.jsx("div",Object.assign({style:Object.assign(Object.assign({zIndex:3,position:"absolute"},{color:y}),FT(d,b))},{children:V()}))]})}function k(){return F.jsx("div",Object.assign({style:Object.assign(Object.assign({userSelect:"none",zIndex:3,position:"absolute"},{color:u%2!==0?S:y}),FT(d,b))},{children:V()}))}function K(){return F.jsx("div",Object.assign({style:Object.assign(Object.assign({userSelect:"none",zIndex:3,position:"absolute"},i==="black"?{color:l%2===0?S:y}:{color:l%2===0?S:y}),UT(d,b))},{children:R()}))}return D?B():U?k():L?K():null}const FT=(l,u)=>Object.assign({alignSelf:"flex-end",paddingLeft:l/8-l/48,fontSize:l/48},u),UT=(l,u)=>Object.assign({alignSelf:"flex-start",paddingRight:l/8-l/48,fontSize:l/48},u),GE=le.createContext({dragDropManager:void 0});function Bs(l){return"Minified Redux error #"+l+"; visit https://redux.js.org/Errors?code="+l+" for the full message or use the non-minified dev environment for full errors. "}var HT=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),k$=function(){return Math.random().toString(36).substring(7).split("").join(".")},GT={INIT:"@@redux/INIT"+k$(),REPLACE:"@@redux/REPLACE"+k$(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+k$()}};function JC(l){if(typeof l!="object"||l===null)return!1;for(var u=l;Object.getPrototypeOf(u)!==null;)u=Object.getPrototypeOf(u);return Object.getPrototypeOf(l)===u}function VE(l,u,i){var d;if(typeof u=="function"&&typeof i=="function"||typeof i=="function"&&typeof arguments[3]=="function")throw new Error(Bs(0));if(typeof u=="function"&&typeof i>"u"&&(i=u,u=void 0),typeof i<"u"){if(typeof i!="function")throw new Error(Bs(1));return i(VE)(l,u)}if(typeof l!="function")throw new Error(Bs(2));var p=l,m=u,b=[],y=b,S=!1;function L(){y===b&&(y=b.slice())}function U(){if(S)throw new Error(Bs(3));return m}function D(k){if(typeof k!="function")throw new Error(Bs(4));if(S)throw new Error(Bs(5));var K=!0;return L(),y.push(k),function(){if(K){if(S)throw new Error(Bs(6));K=!1,L();var ue=y.indexOf(k);y.splice(ue,1),b=null}}}function R(k){if(!JC(k))throw new Error(Bs(7));if(typeof k.type>"u")throw new Error(Bs(8));if(S)throw new Error(Bs(9));try{S=!0,m=p(m,k)}finally{S=!1}for(var K=b=y,te=0;te<K.length;te++){var ue=K[te];ue()}return k}function V(k){if(typeof k!="function")throw new Error(Bs(10));p=k,R({type:GT.REPLACE})}function B(){var k,K=D;return k={subscribe:function(ue){if(typeof ue!="object"||ue===null)throw new Error(Bs(11));function he(){ue.next&&ue.next(U())}he();var pe=K(he);return{unsubscribe:pe}}},k[HT]=function(){return this},k}return R({type:GT.INIT}),d={dispatch:R,subscribe:D,getState:U,replaceReducer:V},d[HT]=B,d}function Je(l,u,...i){if(qC()&&u===void 0)throw new Error("invariant requires an error message argument");if(!l){let d;if(u===void 0)d=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let p=0;d=new Error(u.replace(/%s/g,function(){return i[p++]})),d.name="Invariant Violation"}throw d.framesToPop=1,d}}function qC(){return typeof process<"u"&&!0}function QC(l,u,i){return u.split(".").reduce((d,p)=>d&&d[p]?d[p]:i,l)}function ZC(l,u){return l.filter(i=>i!==u)}function WE(l){return typeof l=="object"}function eI(l,u){const i=new Map,d=m=>{i.set(m,i.has(m)?i.get(m)+1:1)};l.forEach(d),u.forEach(d);const p=[];return i.forEach((m,b)=>{m===1&&p.push(b)}),p}function tI(l,u){return l.filter(i=>u.indexOf(i)>-1)}const am="dnd-core/INIT_COORDS",gf="dnd-core/BEGIN_DRAG",dm="dnd-core/PUBLISH_DRAG_SOURCE",ff="dnd-core/HOVER",$f="dnd-core/DROP",mf="dnd-core/END_DRAG";function VT(l,u){return{type:am,payload:{sourceClientOffset:u||null,clientOffset:l||null}}}const nI={type:am,payload:{clientOffset:null,sourceClientOffset:null}};function rI(l){return function(i=[],d={publishSource:!0}){const{publishSource:p=!0,clientOffset:m,getSourceClientOffset:b}=d,y=l.getMonitor(),S=l.getRegistry();l.dispatch(VT(m)),sI(i,y,S);const L=lI(i,y);if(L==null){l.dispatch(nI);return}let U=null;if(m){if(!b)throw new Error("getSourceClientOffset must be defined");iI(b),U=b(L)}l.dispatch(VT(m,U));const R=S.getSource(L).beginDrag(y,L);if(R==null)return;oI(R),S.pinSource(L);const V=S.getSourceType(L);return{type:gf,payload:{itemType:V,item:R,sourceId:L,clientOffset:m||null,sourceClientOffset:U||null,isSourcePublic:!!p}}}}function sI(l,u,i){Je(!u.isDragging(),"Cannot call beginDrag while dragging."),l.forEach(function(d){Je(i.getSource(d),"Expected sourceIds to be registered.")})}function iI(l){Je(typeof l=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function oI(l){Je(WE(l),"Item must be an object.")}function lI(l,u){let i=null;for(let d=l.length-1;d>=0;d--)if(u.canDragSource(l[d])){i=l[d];break}return i}function uI(l,u,i){return u in l?Object.defineProperty(l,u,{value:i,enumerable:!0,configurable:!0,writable:!0}):l[u]=i,l}function cI(l){for(var u=1;u<arguments.length;u++){var i=arguments[u]!=null?arguments[u]:{},d=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(i).filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable}))),d.forEach(function(p){uI(l,p,i[p])})}return l}function aI(l){return function(i={}){const d=l.getMonitor(),p=l.getRegistry();dI(d),gI(d).forEach((b,y)=>{const S=hI(b,y,p,d),L={type:$f,payload:{dropResult:cI({},i,S)}};l.dispatch(L)})}}function dI(l){Je(l.isDragging(),"Cannot call drop while not dragging."),Je(!l.didDrop(),"Cannot call drop twice during one drag operation.")}function hI(l,u,i,d){const p=i.getTarget(l);let m=p?p.drop(d,l):void 0;return pI(m),typeof m>"u"&&(m=u===0?{}:d.getDropResult()),m}function pI(l){Je(typeof l>"u"||WE(l),"Drop result must either be an object or undefined.")}function gI(l){const u=l.getTargetIds().filter(l.canDropOnTarget,l);return u.reverse(),u}function fI(l){return function(){const i=l.getMonitor(),d=l.getRegistry();$I(i);const p=i.getSourceId();return p!=null&&(d.getSource(p,!0).endDrag(i,p),d.unpinSource()),{type:mf}}}function $I(l){Je(l.isDragging(),"Cannot call endDrag while not dragging.")}function W$(l,u){return u===null?l===null:Array.isArray(l)?l.some(i=>i===u):l===u}function mI(l){return function(i,{clientOffset:d}={}){_I(i);const p=i.slice(0),m=l.getMonitor(),b=l.getRegistry(),y=m.getItemType();return EI(p,b,y),TI(p,m,b),bI(p,m,b),{type:ff,payload:{targetIds:p,clientOffset:d||null}}}}function _I(l){Je(Array.isArray(l),"Expected targetIds to be an array.")}function TI(l,u,i){Je(u.isDragging(),"Cannot call hover while not dragging."),Je(!u.didDrop(),"Cannot call hover after drop.");for(let d=0;d<l.length;d++){const p=l[d];Je(l.lastIndexOf(p)===d,"Expected targetIds to be unique in the passed array.");const m=i.getTarget(p);Je(m,"Expected targetIds to be registered.")}}function EI(l,u,i){for(let d=l.length-1;d>=0;d--){const p=l[d],m=u.getTargetType(p);W$(m,i)||l.splice(d,1)}}function bI(l,u,i){l.forEach(function(d){i.getTarget(d).hover(u,d)})}function yI(l){return function(){if(l.getMonitor().isDragging())return{type:dm}}}function vI(l){return{beginDrag:rI(l),publishDragSource:yI(l),hover:mI(l),drop:aI(l),endDrag:fI(l)}}class SI{receiveBackend(u){this.backend=u}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const u=this,{dispatch:i}=this.store;function d(m){return(...b)=>{const y=m.apply(u,b);typeof y<"u"&&i(y)}}const p=vI(this);return Object.keys(p).reduce((m,b)=>{const y=p[b];return m[b]=d(y),m},{})}dispatch(u){this.store.dispatch(u)}constructor(u,i){this.isSetUp=!1,this.handleRefCountChange=()=>{const d=this.store.getState().refCount>0;this.backend&&(d&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!d&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=u,this.monitor=i,u.subscribe(this.handleRefCountChange)}}function CI(l,u){return{x:l.x+u.x,y:l.y+u.y}}function zE(l,u){return{x:l.x-u.x,y:l.y-u.y}}function II(l){const{clientOffset:u,initialClientOffset:i,initialSourceClientOffset:d}=l;return!u||!i||!d?null:zE(CI(u,d),i)}function kI(l){const{clientOffset:u,initialClientOffset:i}=l;return!u||!i?null:zE(u,i)}const Tp=[],hm=[];Tp.__IS_NONE__=!0;hm.__IS_ALL__=!0;function wI(l,u){return l===Tp?!1:l===hm||typeof u>"u"?!0:tI(u,l).length>0}class OI{subscribeToStateChange(u,i={}){const{handlerIds:d}=i;Je(typeof u=="function","listener must be a function."),Je(typeof d>"u"||Array.isArray(d),"handlerIds, when specified, must be an array of strings.");let p=this.store.getState().stateId;const m=()=>{const b=this.store.getState(),y=b.stateId;try{y===p||y===p+1&&!wI(b.dirtyHandlerIds,d)||u()}finally{p=y}};return this.store.subscribe(m)}subscribeToOffsetChange(u){Je(typeof u=="function","listener must be a function.");let i=this.store.getState().dragOffset;const d=()=>{const p=this.store.getState().dragOffset;p!==i&&(i=p,u())};return this.store.subscribe(d)}canDragSource(u){if(!u)return!1;const i=this.registry.getSource(u);return Je(i,`Expected to find a valid source. sourceId=${u}`),this.isDragging()?!1:i.canDrag(this,u)}canDropOnTarget(u){if(!u)return!1;const i=this.registry.getTarget(u);if(Je(i,`Expected to find a valid target. targetId=${u}`),!this.isDragging()||this.didDrop())return!1;const d=this.registry.getTargetType(u),p=this.getItemType();return W$(d,p)&&i.canDrop(this,u)}isDragging(){return!!this.getItemType()}isDraggingSource(u){if(!u)return!1;const i=this.registry.getSource(u,!0);if(Je(i,`Expected to find a valid source. sourceId=${u}`),!this.isDragging()||!this.isSourcePublic())return!1;const d=this.registry.getSourceType(u),p=this.getItemType();return d!==p?!1:i.isDragging(this,u)}isOverTarget(u,i={shallow:!1}){if(!u)return!1;const{shallow:d}=i;if(!this.isDragging())return!1;const p=this.registry.getTargetType(u),m=this.getItemType();if(m&&!W$(p,m))return!1;const b=this.getTargetIds();if(!b.length)return!1;const y=b.indexOf(u);return d?y===b.length-1:y>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return II(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return kI(this.store.getState().dragOffset)}constructor(u,i){this.store=u,this.registry=i}}const WT=typeof global<"u"?global:self,jE=WT.MutationObserver||WT.WebKitMutationObserver;function XE(l){return function(){const i=setTimeout(p,0),d=setInterval(p,50);function p(){clearTimeout(i),clearInterval(d),l()}}}function RI(l){let u=1;const i=new jE(l),d=document.createTextNode("");return i.observe(d,{characterData:!0}),function(){u=-u,d.data=u}}const LI=typeof jE=="function"?RI:XE;class AI{enqueueTask(u){const{queue:i,requestFlush:d}=this;i.length||(d(),this.flushing=!0),i[i.length]=u}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:u}=this;for(;this.index<u.length;){const i=this.index;if(this.index++,u[i].call(),this.index>this.capacity){for(let d=0,p=u.length-this.index;d<p;d++)u[d]=u[d+this.index];u.length-=this.index,this.index=0}}u.length=0,this.index=0,this.flushing=!1},this.registerPendingError=u=>{this.pendingErrors.push(u),this.requestErrorThrow()},this.requestFlush=LI(this.flush),this.requestErrorThrow=XE(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class DI{call(){try{this.task&&this.task()}catch(u){this.onError(u)}finally{this.task=null,this.release(this)}}constructor(u,i){this.onError=u,this.release=i,this.task=null}}class MI{create(u){const i=this.freeTasks,d=i.length?i.pop():new DI(this.onError,p=>i[i.length]=p);return d.task=u,d}constructor(u){this.onError=u,this.freeTasks=[]}}const KE=new AI,NI=new MI(KE.registerPendingError);function xI(l){KE.enqueueTask(NI.create(l))}const pm="dnd-core/ADD_SOURCE",gm="dnd-core/ADD_TARGET",fm="dnd-core/REMOVE_SOURCE",_f="dnd-core/REMOVE_TARGET";function PI(l){return{type:pm,payload:{sourceId:l}}}function BI(l){return{type:gm,payload:{targetId:l}}}function FI(l){return{type:fm,payload:{sourceId:l}}}function UI(l){return{type:_f,payload:{targetId:l}}}function HI(l){Je(typeof l.canDrag=="function","Expected canDrag to be a function."),Je(typeof l.beginDrag=="function","Expected beginDrag to be a function."),Je(typeof l.endDrag=="function","Expected endDrag to be a function.")}function GI(l){Je(typeof l.canDrop=="function","Expected canDrop to be a function."),Je(typeof l.hover=="function","Expected hover to be a function."),Je(typeof l.drop=="function","Expected beginDrag to be a function.")}function z$(l,u){if(u&&Array.isArray(l)){l.forEach(i=>z$(i,!1));return}Je(typeof l=="string"||typeof l=="symbol",u?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var Us;(function(l){l.SOURCE="SOURCE",l.TARGET="TARGET"})(Us||(Us={}));let VI=0;function WI(){return VI++}function zI(l){const u=WI().toString();switch(l){case Us.SOURCE:return`S${u}`;case Us.TARGET:return`T${u}`;default:throw new Error(`Unknown Handler Role: ${l}`)}}function zT(l){switch(l[0]){case"S":return Us.SOURCE;case"T":return Us.TARGET;default:throw new Error(`Cannot parse handler ID: ${l}`)}}function jT(l,u){const i=l.entries();let d=!1;do{const{done:p,value:[,m]}=i.next();if(m===u)return!0;d=!!p}while(!d);return!1}class jI{addSource(u,i){z$(u),HI(i);const d=this.addHandler(Us.SOURCE,u,i);return this.store.dispatch(PI(d)),d}addTarget(u,i){z$(u,!0),GI(i);const d=this.addHandler(Us.TARGET,u,i);return this.store.dispatch(BI(d)),d}containsHandler(u){return jT(this.dragSources,u)||jT(this.dropTargets,u)}getSource(u,i=!1){return Je(this.isSourceId(u),"Expected a valid source ID."),i&&u===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(u)}getTarget(u){return Je(this.isTargetId(u),"Expected a valid target ID."),this.dropTargets.get(u)}getSourceType(u){return Je(this.isSourceId(u),"Expected a valid source ID."),this.types.get(u)}getTargetType(u){return Je(this.isTargetId(u),"Expected a valid target ID."),this.types.get(u)}isSourceId(u){return zT(u)===Us.SOURCE}isTargetId(u){return zT(u)===Us.TARGET}removeSource(u){Je(this.getSource(u),"Expected an existing source."),this.store.dispatch(FI(u)),xI(()=>{this.dragSources.delete(u),this.types.delete(u)})}removeTarget(u){Je(this.getTarget(u),"Expected an existing target."),this.store.dispatch(UI(u)),this.dropTargets.delete(u),this.types.delete(u)}pinSource(u){const i=this.getSource(u);Je(i,"Expected an existing source."),this.pinnedSourceId=u,this.pinnedSource=i}unpinSource(){Je(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(u,i,d){const p=zI(u);return this.types.set(p,i),u===Us.SOURCE?this.dragSources.set(p,d):u===Us.TARGET&&this.dropTargets.set(p,d),p}constructor(u){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=u}}const XI=(l,u)=>l===u;function KI(l,u){return!l&&!u?!0:!l||!u?!1:l.x===u.x&&l.y===u.y}function YI(l,u,i=XI){if(l.length!==u.length)return!1;for(let d=0;d<l.length;++d)if(!i(l[d],u[d]))return!1;return!0}function JI(l=Tp,u){switch(u.type){case ff:break;case pm:case gm:case _f:case fm:return Tp;case gf:case dm:case mf:case $f:default:return hm}const{targetIds:i=[],prevTargetIds:d=[]}=u.payload,p=eI(i,d);if(!(p.length>0||!YI(i,d)))return Tp;const b=d[d.length-1],y=i[i.length-1];return b!==y&&(b&&p.push(b),y&&p.push(y)),p}function qI(l,u,i){return u in l?Object.defineProperty(l,u,{value:i,enumerable:!0,configurable:!0,writable:!0}):l[u]=i,l}function QI(l){for(var u=1;u<arguments.length;u++){var i=arguments[u]!=null?arguments[u]:{},d=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(i).filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable}))),d.forEach(function(p){qI(l,p,i[p])})}return l}const XT={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function ZI(l=XT,u){const{payload:i}=u;switch(u.type){case am:case gf:return{initialSourceClientOffset:i.sourceClientOffset,initialClientOffset:i.clientOffset,clientOffset:i.clientOffset};case ff:return KI(l.clientOffset,i.clientOffset)?l:QI({},l,{clientOffset:i.clientOffset});case mf:case $f:return XT;default:return l}}function ek(l,u,i){return u in l?Object.defineProperty(l,u,{value:i,enumerable:!0,configurable:!0,writable:!0}):l[u]=i,l}function ld(l){for(var u=1;u<arguments.length;u++){var i=arguments[u]!=null?arguments[u]:{},d=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(i).filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable}))),d.forEach(function(p){ek(l,p,i[p])})}return l}const tk={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function nk(l=tk,u){const{payload:i}=u;switch(u.type){case gf:return ld({},l,{itemType:i.itemType,item:i.item,sourceId:i.sourceId,isSourcePublic:i.isSourcePublic,dropResult:null,didDrop:!1});case dm:return ld({},l,{isSourcePublic:!0});case ff:return ld({},l,{targetIds:i.targetIds});case _f:return l.targetIds.indexOf(i.targetId)===-1?l:ld({},l,{targetIds:ZC(l.targetIds,i.targetId)});case $f:return ld({},l,{dropResult:i.dropResult,didDrop:!0,targetIds:[]});case mf:return ld({},l,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return l}}function rk(l=0,u){switch(u.type){case pm:case gm:return l+1;case fm:case _f:return l-1;default:return l}}function sk(l=0){return l+1}function ik(l,u,i){return u in l?Object.defineProperty(l,u,{value:i,enumerable:!0,configurable:!0,writable:!0}):l[u]=i,l}function ok(l){for(var u=1;u<arguments.length;u++){var i=arguments[u]!=null?arguments[u]:{},d=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(i).filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable}))),d.forEach(function(p){ik(l,p,i[p])})}return l}function lk(l={},u){return{dirtyHandlerIds:JI(l.dirtyHandlerIds,{type:u.type,payload:ok({},u.payload,{prevTargetIds:QC(l,"dragOperation.targetIds",[])})}),dragOffset:ZI(l.dragOffset,u),refCount:rk(l.refCount,u),dragOperation:nk(l.dragOperation,u),stateId:sk(l.stateId)}}function uk(l,u=void 0,i={},d=!1){const p=ck(d),m=new OI(p,new jI(p)),b=new SI(p,m),y=l(b,u,i);return b.receiveBackend(y),b}function ck(l){const u=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return VE(lk,l&&u&&u({name:"dnd-core",instanceId:"dnd-core"}))}function ak(l,u){if(l==null)return{};var i=dk(l,u),d,p;if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(l);for(p=0;p<m.length;p++)d=m[p],!(u.indexOf(d)>=0)&&Object.prototype.propertyIsEnumerable.call(l,d)&&(i[d]=l[d])}return i}function dk(l,u){if(l==null)return{};var i={},d=Object.keys(l),p,m;for(m=0;m<d.length;m++)p=d[m],!(u.indexOf(p)>=0)&&(i[p]=l[p]);return i}let KT=0;const Wg=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var hk=le.memo(function(u){var{children:i}=u,d=ak(u,["children"]);const[p,m]=pk(d);return le.useEffect(()=>{if(m){const b=YE();return++KT,()=>{--KT===0&&(b[Wg]=null)}}},[]),F.jsx(GE.Provider,{value:p,children:i})});function pk(l){if("manager"in l)return[{dragDropManager:l.manager},!1];const u=gk(l.backend,l.context,l.options,l.debugMode),i=!l.context;return[u,i]}function gk(l,u=YE(),i,d){const p=u;return p[Wg]||(p[Wg]={dragDropManager:uk(l,u,i,d)}),p[Wg]}function YE(){return typeof global<"u"?global:window}var fk=function l(u,i){if(u===i)return!0;if(u&&i&&typeof u=="object"&&typeof i=="object"){if(u.constructor!==i.constructor)return!1;var d,p,m;if(Array.isArray(u)){if(d=u.length,d!=i.length)return!1;for(p=d;p--!==0;)if(!l(u[p],i[p]))return!1;return!0}if(u.constructor===RegExp)return u.source===i.source&&u.flags===i.flags;if(u.valueOf!==Object.prototype.valueOf)return u.valueOf()===i.valueOf();if(u.toString!==Object.prototype.toString)return u.toString()===i.toString();if(m=Object.keys(u),d=m.length,d!==Object.keys(i).length)return!1;for(p=d;p--!==0;)if(!Object.prototype.hasOwnProperty.call(i,m[p]))return!1;for(p=d;p--!==0;){var b=m[p];if(!l(u[b],i[b]))return!1}return!0}return u!==u&&i!==i};const bc=typeof window<"u"?le.useLayoutEffect:le.useEffect;function JE(l,u,i){const[d,p]=le.useState(()=>u(l)),m=le.useCallback(()=>{const b=u(l);fk(d,b)||(p(b),i&&i())},[d,l,i]);return bc(m),[d,m]}function $k(l,u,i){const[d,p]=JE(l,u,i);return bc(function(){const b=l.getHandlerId();if(b!=null)return l.subscribeToStateChange(p,{handlerIds:[b]})},[l,p]),d}function qE(l,u,i){return $k(u,l||(()=>({})),()=>i.reconnect())}function QE(l,u){const i=[...u||[]];return u==null&&typeof l!="function"&&i.push(l),le.useMemo(()=>typeof l=="function"?l():l,i)}function mk(l){return le.useMemo(()=>l.hooks.dragSource(),[l])}function _k(l){return le.useMemo(()=>l.hooks.dragPreview(),[l])}let w$=!1,O$=!1;class Tk{receiveHandlerId(u){this.sourceId=u}getHandlerId(){return this.sourceId}canDrag(){Je(!w$,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return w$=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{w$=!1}}isDragging(){if(!this.sourceId)return!1;Je(!O$,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return O$=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{O$=!1}}subscribeToStateChange(u,i){return this.internalMonitor.subscribeToStateChange(u,i)}isDraggingSource(u){return this.internalMonitor.isDraggingSource(u)}isOverTarget(u,i){return this.internalMonitor.isOverTarget(u,i)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(u){return this.internalMonitor.subscribeToOffsetChange(u)}canDragSource(u){return this.internalMonitor.canDragSource(u)}canDropOnTarget(u){return this.internalMonitor.canDropOnTarget(u)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(u){this.sourceId=null,this.internalMonitor=u.getMonitor()}}let R$=!1;class Ek{receiveHandlerId(u){this.targetId=u}getHandlerId(){return this.targetId}subscribeToStateChange(u,i){return this.internalMonitor.subscribeToStateChange(u,i)}canDrop(){if(!this.targetId)return!1;Je(!R$,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return R$=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{R$=!1}}isOver(u){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,u):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(u){this.targetId=null,this.internalMonitor=u.getMonitor()}}function bk(l,u,i){const d=i.getRegistry(),p=d.addTarget(l,u);return[p,()=>d.removeTarget(p)]}function yk(l,u,i){const d=i.getRegistry(),p=d.addSource(l,u);return[p,()=>d.removeSource(p)]}function j$(l,u,i,d){let p;if(p!==void 0)return!!p;if(l===u)return!0;if(typeof l!="object"||!l||typeof u!="object"||!u)return!1;const m=Object.keys(l),b=Object.keys(u);if(m.length!==b.length)return!1;const y=Object.prototype.hasOwnProperty.bind(u);for(let S=0;S<m.length;S++){const L=m[S];if(!y(L))return!1;const U=l[L],D=u[L];if(p=void 0,p===!1||p===void 0&&U!==D)return!1}return!0}function X$(l){return l!==null&&typeof l=="object"&&Object.prototype.hasOwnProperty.call(l,"current")}function vk(l){if(typeof l.type=="string")return;const u=l.type.displayName||l.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${u} into a <div>, or turn it into a drag source or a drop target itself.`)}function Sk(l){return(u=null,i=null)=>{if(!le.isValidElement(u)){const m=u;return l(m,i),m}const d=u;return vk(d),Ck(d,i?m=>l(m,i):l)}}function ZE(l){const u={};return Object.keys(l).forEach(i=>{const d=l[i];if(i.endsWith("Ref"))u[i]=l[i];else{const p=Sk(d);u[i]=()=>p}}),u}function YT(l,u){typeof l=="function"?l(u):l.current=u}function Ck(l,u){const i=l.ref;return Je(typeof i!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),i?le.cloneElement(l,{ref:d=>{YT(i,d),YT(u,d)}}):le.cloneElement(l,{ref:u})}class Ik{receiveHandlerId(u){this.handlerId!==u&&(this.handlerId=u,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(u){this.dragSourceOptionsInternal=u}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(u){this.dragPreviewOptionsInternal=u}reconnect(){const u=this.reconnectDragSource();this.reconnectDragPreview(u)}reconnectDragSource(){const u=this.dragSource,i=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return i&&this.disconnectDragSource(),this.handlerId?u?(i&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=u,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,u,this.dragSourceOptions)),i):(this.lastConnectedDragSource=u,i):i}reconnectDragPreview(u=!1){const i=this.dragPreview,d=u||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(d&&this.disconnectDragPreview(),!!this.handlerId){if(!i){this.lastConnectedDragPreview=i;return}d&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=i,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,i,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!j$(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!j$(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(u){this.hooks=ZE({dragSource:(i,d)=>{this.clearDragSource(),this.dragSourceOptions=d||null,X$(i)?this.dragSourceRef=i:this.dragSourceNode=i,this.reconnectDragSource()},dragPreview:(i,d)=>{this.clearDragPreview(),this.dragPreviewOptions=d||null,X$(i)?this.dragPreviewRef=i:this.dragPreviewNode=i,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=u}}class kk{get connectTarget(){return this.dropTarget}reconnect(){const u=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();u&&this.disconnectDropTarget();const i=this.dropTarget;if(this.handlerId){if(!i){this.lastConnectedDropTarget=i;return}u&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=i,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,i,this.dropTargetOptions))}}receiveHandlerId(u){u!==this.handlerId&&(this.handlerId=u,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(u){this.dropTargetOptionsInternal=u}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!j$(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(u){this.hooks=ZE({dropTarget:(i,d)=>{this.clearDropTarget(),this.dropTargetOptions=d,X$(i)?this.dropTargetRef=i:this.dropTargetNode=i,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=u}}function yc(){const{dragDropManager:l}=le.useContext(GE);return Je(l!=null,"Expected drag drop context"),l}function wk(l,u){const i=yc(),d=le.useMemo(()=>new Ik(i.getBackend()),[i]);return bc(()=>(d.dragSourceOptions=l||null,d.reconnect(),()=>d.disconnectDragSource()),[d,l]),bc(()=>(d.dragPreviewOptions=u||null,d.reconnect(),()=>d.disconnectDragPreview()),[d,u]),d}function Ok(){const l=yc();return le.useMemo(()=>new Tk(l),[l])}class Rk{beginDrag(){const u=this.spec,i=this.monitor;let d=null;return typeof u.item=="object"?d=u.item:typeof u.item=="function"?d=u.item(i):d={},d??null}canDrag(){const u=this.spec,i=this.monitor;return typeof u.canDrag=="boolean"?u.canDrag:typeof u.canDrag=="function"?u.canDrag(i):!0}isDragging(u,i){const d=this.spec,p=this.monitor,{isDragging:m}=d;return m?m(p):i===u.getSourceId()}endDrag(){const u=this.spec,i=this.monitor,d=this.connector,{end:p}=u;p&&p(i.getItem(),i),d.reconnect()}constructor(u,i,d){this.spec=u,this.monitor=i,this.connector=d}}function Lk(l,u,i){const d=le.useMemo(()=>new Rk(l,u,i),[u,i]);return le.useEffect(()=>{d.spec=l},[l]),d}function Ak(l){return le.useMemo(()=>{const u=l.type;return Je(u!=null,"spec.type must be defined"),u},[l])}function Dk(l,u,i){const d=yc(),p=Lk(l,u,i),m=Ak(l);bc(function(){if(m!=null){const[y,S]=yk(m,p,d);return u.receiveHandlerId(y),i.receiveHandlerId(y),S}},[d,u,i,p,m])}function Mk(l,u){const i=QE(l,u);Je(!i.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const d=Ok(),p=wk(i.options,i.previewOptions);return Dk(i,d,p),[qE(i.collect,d,p),mk(p),_k(p)]}function Nk(l){const i=yc().getMonitor(),[d,p]=JE(i,l);return le.useEffect(()=>i.subscribeToOffsetChange(p)),le.useEffect(()=>i.subscribeToStateChange(p)),d}function xk(l){return le.useMemo(()=>l.hooks.dropTarget(),[l])}function Pk(l){const u=yc(),i=le.useMemo(()=>new kk(u.getBackend()),[u]);return bc(()=>(i.dropTargetOptions=l||null,i.reconnect(),()=>i.disconnectDropTarget()),[l]),i}function Bk(){const l=yc();return le.useMemo(()=>new Ek(l),[l])}function Fk(l){const{accept:u}=l;return le.useMemo(()=>(Je(l.accept!=null,"accept must be defined"),Array.isArray(u)?u:[u]),[u])}class Uk{canDrop(){const u=this.spec,i=this.monitor;return u.canDrop?u.canDrop(i.getItem(),i):!0}hover(){const u=this.spec,i=this.monitor;u.hover&&u.hover(i.getItem(),i)}drop(){const u=this.spec,i=this.monitor;if(u.drop)return u.drop(i.getItem(),i)}constructor(u,i){this.spec=u,this.monitor=i}}function Hk(l,u){const i=le.useMemo(()=>new Uk(l,u),[u]);return le.useEffect(()=>{i.spec=l},[l]),i}function Gk(l,u,i){const d=yc(),p=Hk(l,u),m=Fk(l);bc(function(){const[y,S]=bk(m,p,d);return u.receiveHandlerId(y),i.receiveHandlerId(y),S},[d,u,p,i,m.map(b=>b.toString()).join("|")])}function Vk(l,u){const i=QE(l,u),d=Bk(),p=Pk(i.options);return Gk(i,d,p),[qE(i.collect,d,p),xk(p)]}function eb(l){let u=null;return()=>(u==null&&(u=l()),u)}function Wk(l,u){return l.filter(i=>i!==u)}function zk(l,u){const i=new Set,d=m=>i.add(m);l.forEach(d),u.forEach(d);const p=[];return i.forEach(m=>p.push(m)),p}class jk{enter(u){const i=this.entered.length,d=p=>this.isNodeInDocument(p)&&(!p.contains||p.contains(u));return this.entered=zk(this.entered.filter(d),[u]),i===0&&this.entered.length>0}leave(u){const i=this.entered.length;return this.entered=Wk(this.entered.filter(this.isNodeInDocument),u),i>0&&this.entered.length===0}reset(){this.entered=[]}constructor(u){this.entered=[],this.isNodeInDocument=u}}class Xk{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(u=>{Object.defineProperty(this.item,u,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${u}" until the drop event.`),null}})})}loadDataTransfer(u){if(u){const i={};Object.keys(this.config.exposeProperties).forEach(d=>{const p=this.config.exposeProperties[d];p!=null&&(i[d]={value:p(u,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,i)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(u,i){return i===u.getSourceId()}endDrag(){}constructor(u){this.config=u,this.item={},this.initializeExposedProperties()}}const tb="__NATIVE_FILE__",nb="__NATIVE_URL__",rb="__NATIVE_TEXT__",sb="__NATIVE_HTML__";var JT=Object.freeze({__proto__:null,FILE:tb,HTML:sb,TEXT:rb,URL:nb});function L$(l,u,i){const d=u.reduce((p,m)=>p||l.getData(m),"");return d??i}const K$={[tb]:{exposeProperties:{files:l=>Array.prototype.slice.call(l.files),items:l=>l.items,dataTransfer:l=>l},matchesTypes:["Files"]},[sb]:{exposeProperties:{html:(l,u)=>L$(l,u,""),dataTransfer:l=>l},matchesTypes:["Html","text/html"]},[nb]:{exposeProperties:{urls:(l,u)=>L$(l,u,"").split(`
`),dataTransfer:l=>l},matchesTypes:["Url","text/uri-list"]},[rb]:{exposeProperties:{text:(l,u)=>L$(l,u,""),dataTransfer:l=>l},matchesTypes:["Text","text/plain"]}};function Kk(l,u){const i=K$[l];if(!i)throw new Error(`native type ${l} has no configuration`);const d=new Xk(i);return d.loadDataTransfer(u),d}function A$(l){if(!l)return null;const u=Array.prototype.slice.call(l.types||[]);return Object.keys(K$).filter(i=>{const d=K$[i];return d!=null&&d.matchesTypes?d.matchesTypes.some(p=>u.indexOf(p)>-1):!1})[0]||null}const Yk=eb(()=>/firefox/i.test(navigator.userAgent)),ib=eb(()=>!!window.safari);class qT{interpolate(u){const{xs:i,ys:d,c1s:p,c2s:m,c3s:b}=this;let y=i.length-1;if(u===i[y])return d[y];let S=0,L=b.length-1,U;for(;S<=L;){U=Math.floor(.5*(S+L));const V=i[U];if(V<u)S=U+1;else if(V>u)L=U-1;else return d[U]}y=Math.max(0,L);const D=u-i[y],R=D*D;return d[y]+p[y]*D+m[y]*R+b[y]*D*R}constructor(u,i){const{length:d}=u,p=[];for(let V=0;V<d;V++)p.push(V);p.sort((V,B)=>u[V]<u[B]?-1:1);const m=[],b=[];let y,S;for(let V=0;V<d-1;V++)y=u[V+1]-u[V],S=i[V+1]-i[V],m.push(y),b.push(S/y);const L=[b[0]];for(let V=0;V<m.length-1;V++){const B=b[V],k=b[V+1];if(B*k<=0)L.push(0);else{y=m[V];const K=m[V+1],te=y+K;L.push(3*te/((te+K)/B+(te+y)/k))}}L.push(b[b.length-1]);const U=[],D=[];let R;for(let V=0;V<L.length-1;V++){R=b[V];const B=L[V],k=1/m[V],K=B+L[V+1]-R-R;U.push((R-B-K)*k),D.push(K*k*k)}this.xs=u,this.ys=i,this.c1s=L,this.c2s=U,this.c3s=D}}const Jk=1;function ob(l){const u=l.nodeType===Jk?l:l.parentElement;if(!u)return null;const{top:i,left:d}=u.getBoundingClientRect();return{x:d,y:i}}function Pg(l){return{x:l.clientX,y:l.clientY}}function qk(l){var u;return l.nodeName==="IMG"&&(Yk()||!(!((u=document.documentElement)===null||u===void 0)&&u.contains(l)))}function Qk(l,u,i,d){let p=l?u.width:i,m=l?u.height:d;return ib()&&l&&(m/=window.devicePixelRatio,p/=window.devicePixelRatio),{dragPreviewWidth:p,dragPreviewHeight:m}}function Zk(l,u,i,d,p){const m=qk(u),y=ob(m?l:u),S={x:i.x-y.x,y:i.y-y.y},{offsetWidth:L,offsetHeight:U}=l,{anchorX:D,anchorY:R}=d,{dragPreviewWidth:V,dragPreviewHeight:B}=Qk(m,u,L,U),k=()=>{let be=new qT([0,.5,1],[S.y,S.y/U*B,S.y+B-U]).interpolate(R);return ib()&&m&&(be+=(window.devicePixelRatio-1)*B),be},K=()=>new qT([0,.5,1],[S.x,S.x/L*V,S.x+V-L]).interpolate(D),{offsetX:te,offsetY:ue}=p,he=te===0||te,pe=ue===0||ue;return{x:he?te:K(),y:pe?ue:k()}}let ew=class{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var u;return!((u=this.globalContext)===null||u===void 0)&&u.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var u;return((u=this.optionsArgs)===null||u===void 0?void 0:u.rootElement)||this.window}constructor(u,i){this.ownerDocument=null,this.globalContext=u,this.optionsArgs=i}};function tw(l,u,i){return u in l?Object.defineProperty(l,u,{value:i,enumerable:!0,configurable:!0,writable:!0}):l[u]=i,l}function QT(l){for(var u=1;u<arguments.length;u++){var i=arguments[u]!=null?arguments[u]:{},d=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(i).filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable}))),d.forEach(function(p){tw(l,p,i[p])})}return l}class nw{profile(){var u,i;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((u=this.dragStartSourceIds)===null||u===void 0?void 0:u.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((i=this.dragOverTargetIds)===null||i===void 0?void 0:i.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const u=this.rootElement;if(u!==void 0){if(u.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");u.__isReactDndBackendSetUp=!0,this.addEventListeners(u)}}teardown(){const u=this.rootElement;if(u!==void 0&&(u.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var i;(i=this.window)===null||i===void 0||i.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(u,i,d){return this.sourcePreviewNodeOptions.set(u,d),this.sourcePreviewNodes.set(u,i),()=>{this.sourcePreviewNodes.delete(u),this.sourcePreviewNodeOptions.delete(u)}}connectDragSource(u,i,d){this.sourceNodes.set(u,i),this.sourceNodeOptions.set(u,d);const p=b=>this.handleDragStart(b,u),m=b=>this.handleSelectStart(b);return i.setAttribute("draggable","true"),i.addEventListener("dragstart",p),i.addEventListener("selectstart",m),()=>{this.sourceNodes.delete(u),this.sourceNodeOptions.delete(u),i.removeEventListener("dragstart",p),i.removeEventListener("selectstart",m),i.setAttribute("draggable","false")}}connectDropTarget(u,i){const d=b=>this.handleDragEnter(b,u),p=b=>this.handleDragOver(b,u),m=b=>this.handleDrop(b,u);return i.addEventListener("dragenter",d),i.addEventListener("dragover",p),i.addEventListener("drop",m),()=>{i.removeEventListener("dragenter",d),i.removeEventListener("dragover",p),i.removeEventListener("drop",m)}}addEventListeners(u){u.addEventListener&&(u.addEventListener("dragstart",this.handleTopDragStart),u.addEventListener("dragstart",this.handleTopDragStartCapture,!0),u.addEventListener("dragend",this.handleTopDragEndCapture,!0),u.addEventListener("dragenter",this.handleTopDragEnter),u.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),u.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),u.addEventListener("dragover",this.handleTopDragOver),u.addEventListener("dragover",this.handleTopDragOverCapture,!0),u.addEventListener("drop",this.handleTopDrop),u.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(u){u.removeEventListener&&(u.removeEventListener("dragstart",this.handleTopDragStart),u.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),u.removeEventListener("dragend",this.handleTopDragEndCapture,!0),u.removeEventListener("dragenter",this.handleTopDragEnter),u.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),u.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),u.removeEventListener("dragover",this.handleTopDragOver),u.removeEventListener("dragover",this.handleTopDragOverCapture,!0),u.removeEventListener("drop",this.handleTopDrop),u.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const u=this.monitor.getSourceId(),i=this.sourceNodeOptions.get(u);return QT({dropEffect:this.altKeyPressed?"copy":"move"},i||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const u=this.monitor.getSourceId(),i=this.sourcePreviewNodeOptions.get(u);return QT({anchorX:.5,anchorY:.5,captureDraggingState:!1},i||{})}isDraggingNativeItem(){const u=this.monitor.getItemType();return Object.keys(JT).some(i=>JT[i]===u)}beginDragNativeItem(u,i){this.clearCurrentDragSourceNode(),this.currentNativeSource=Kk(u,i),this.currentNativeHandle=this.registry.addSource(u,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(u){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=u;const i=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var d;return(d=this.rootElement)===null||d===void 0?void 0:d.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},i)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var u;(u=this.window)===null||u===void 0||u.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(u,i){u.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(i))}handleDragEnter(u,i){this.dragEnterTargetIds.unshift(i)}handleDragOver(u,i){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(i)}handleDrop(u,i){this.dropTargetIds.unshift(i)}constructor(u,i,d){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=p=>{const m=this.sourceNodes.get(p);return m&&ob(m)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=p=>!!(p&&this.document&&this.document.body&&this.document.body.contains(p)),this.endDragIfSourceWasRemovedFromDOM=()=>{const p=this.currentDragSourceNode;p==null||this.isNodeInDocument(p)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=p=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(p||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=p=>{if(p.defaultPrevented)return;const{dragStartSourceIds:m}=this;this.dragStartSourceIds=null;const b=Pg(p);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(m||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:b});const{dataTransfer:y}=p,S=A$(y);if(this.monitor.isDragging()){if(y&&typeof y.setDragImage=="function"){const U=this.monitor.getSourceId(),D=this.sourceNodes.get(U),R=this.sourcePreviewNodes.get(U)||D;if(R){const{anchorX:V,anchorY:B,offsetX:k,offsetY:K}=this.getCurrentSourcePreviewNodeOptions(),he=Zk(D,R,b,{anchorX:V,anchorY:B},{offsetX:k,offsetY:K});y.setDragImage(R,he.x,he.y)}}try{y==null||y.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(p.target);const{captureDraggingState:L}=this.getCurrentSourcePreviewNodeOptions();L?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(S)this.beginDragNativeItem(S);else{if(y&&!y.types&&(p.target&&!p.target.hasAttribute||!p.target.hasAttribute("draggable")))return;p.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=p=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var m;(m=this.currentNativeSource)===null||m===void 0||m.loadDataTransfer(p.dataTransfer)}if(!this.enterLeaveCounter.enter(p.target)||this.monitor.isDragging())return;const{dataTransfer:y}=p,S=A$(y);S&&this.beginDragNativeItem(S,y)},this.handleTopDragEnter=p=>{const{dragEnterTargetIds:m}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=p.altKey,m.length>0&&this.actions.hover(m,{clientOffset:Pg(p)}),m.some(y=>this.monitor.canDropOnTarget(y))&&(p.preventDefault(),p.dataTransfer&&(p.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=p=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var m;(m=this.currentNativeSource)===null||m===void 0||m.loadDataTransfer(p.dataTransfer)}},this.handleTopDragOver=p=>{const{dragOverTargetIds:m}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){p.preventDefault(),p.dataTransfer&&(p.dataTransfer.dropEffect="none");return}this.altKeyPressed=p.altKey,this.lastClientOffset=Pg(p),this.scheduleHover(m),(m||[]).some(y=>this.monitor.canDropOnTarget(y))?(p.preventDefault(),p.dataTransfer&&(p.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?p.preventDefault():(p.preventDefault(),p.dataTransfer&&(p.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=p=>{this.isDraggingNativeItem()&&p.preventDefault(),this.enterLeaveCounter.leave(p.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=p=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var m;p.preventDefault(),(m=this.currentNativeSource)===null||m===void 0||m.loadDataTransfer(p.dataTransfer)}else A$(p.dataTransfer)&&p.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=p=>{const{dropTargetIds:m}=this;this.dropTargetIds=[],this.actions.hover(m,{clientOffset:Pg(p)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=p=>{const m=p.target;typeof m.dragDrop=="function"&&(m.tagName==="INPUT"||m.tagName==="SELECT"||m.tagName==="TEXTAREA"||m.isContentEditable||(p.preventDefault(),m.dragDrop()))},this.options=new ew(i,d),this.actions=u.getActions(),this.monitor=u.getMonitor(),this.registry=u.getRegistry(),this.enterLeaveCounter=new jk(this.isNodeInDocument)}}let Bg;function rw(){return Bg||(Bg=new Image,Bg.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),Bg}const sw=function(u,i,d){return new nw(u,i,d)};function ZT({isPremovedPiece:l=!1,piece:u,square:i,squares:d}){const{animationDuration:p,arePiecesDraggable:m,boardWidth:b,boardOrientation:y,chessPieces:S,currentPosition:L,deletePieceFromSquare:U,dropOffBoardAction:D,id:R,isDraggablePiece:V,isWaitingForAnimation:B,onPieceClick:k,onPieceDragBegin:K,onPieceDragEnd:te,onPieceDropOffBoard:ue,onPromotionCheck:he,positionDifferences:pe}=tl(),[ve,be]=le.useState({opacity:1,zIndex:5,touchAction:"none",cursor:m&&V({piece:u,sourceSquare:i})?"-webkit-grab":"default"}),[{canDrag:$e,isDragging:ce},ze,C]=Mk(()=>({type:"piece",item:()=>(K(u,i),{piece:u,square:i,id:R}),end:(Ce,Me)=>{te(u,i),!Me.didDrop()&&(D==="trash"&&U(i),ue==null||ue(i,u))},collect:Ce=>({canDrag:V({piece:u,sourceSquare:i}),isDragging:!!Ce.isDragging()})}),[u,i,L,R]);C(rw(),{captureDraggingState:!0}),le.useEffect(()=>{be(Ce=>Object.assign(Object.assign({},Ce),{opacity:ce?0:1}))},[ce]),le.useEffect(()=>{var Ce;const Me=(Ce=pe.removed)===null||Ce===void 0?void 0:Ce[i];if(!pe.added||!Me)return;const Re=Object.entries(pe.added).find(([Ge,Xe])=>Xe===Me||he(i,Ge,Me));if(B&&Me&&Re&&!l){const Ge=i,Xe=Re[0];if(Ge&&Xe){const Ye=b/8;be(X=>Object.assign(Object.assign({},X),{transform:`translate(${(y==="black"?-1:1)*(Xe.charCodeAt(0)-Ge.charCodeAt(0))*Ye}px, ${(y==="black"?-1:1)*(Number(Ge[1])-Number(Xe[1]))*Ye}px)`,transition:`transform ${p}ms`,zIndex:6}))}}},[pe]),le.useEffect(()=>{const{sourceSq:Ce}=me();Ce&&be(Me=>Object.assign(Object.assign({},Me),{transform:"translate(0px, 0px)",transition:"transform 0ms"}))},[L]),le.useEffect(()=>{be(Ce=>Object.assign(Object.assign({},Ce),{cursor:m&&V({piece:u,sourceSquare:i})?"-webkit-grab":"default"}))},[i,L,m]);function me(){return{sourceSq:d[i]}}return F.jsx("div",Object.assign({ref:m&&$e?ze:null,onClick:()=>k(u,i),"data-piece":u,style:ve},{children:typeof S[u]=="function"?S[u]({squareWidth:b/8,isDragging:ce,square:i}):F.jsx("svg",Object.assign({viewBox:"1 1 43 43",width:b/8,height:b/8,style:{display:"block"}},{children:F.jsx("g",{children:S[u]})}))}))}function iw({square:l,squareColor:u,setSquares:i,squareHasPremove:d,children:p}){const m=le.useRef(null),{autoPromoteToQueen:b,boardWidth:y,boardOrientation:S,clearArrows:L,currentPosition:U,currentRightClickDown:D,customBoardStyle:R,customDarkSquareStyle:V,customDropSquareStyle:B,customLightSquareStyle:k,customPremoveDarkSquareStyle:K,customPremoveLightSquareStyle:te,customSquare:ue,customSquareStyles:he,drawNewArrow:pe,handleSetPosition:ve,handleSparePieceDrop:be,isWaitingForAnimation:$e,lastPieceColour:ce,lastSquareDraggedOver:ze,onArrowDrawEnd:C,onDragOverSquare:me,onMouseOutSquare:Ce,onMouseOverSquare:Me,onPieceDrop:Re,onPromotionCheck:Ge,onRightClickDown:Xe,onRightClickUp:Ye,onSquareClick:X,setLastSquareDraggedOver:xe,setPromoteFromSquare:Ee,setPromoteToSquare:H,setShowPromoteDialog:se}=tl(),[{isOver:We},Pe]=Vk(()=>({accept:"piece",drop:je,collect:we=>({isOver:!!we.isOver()})}),[l,U,Re,$e,ce]);function je(we){if(we.isSpare){be(we.piece,l);return}Ge(we.square,l,we.piece)?b?ve(we.square,l,we.piece[0]==="w"?"wQ":"bQ"):(Ee(we.square),H(l),se(!0)):ve(we.square,l,we.piece,!0)}le.useEffect(()=>{if(m.current){const{x:we,y:Ke}=m.current.getBoundingClientRect();i(qe=>Object.assign(Object.assign({},qe),{[l]:{x:we,y:Ke}}))}},[y,S]);const Be=Object.assign(Object.assign(Object.assign(Object.assign({},ow(l,S,R)),u==="black"?V:k),d&&(u==="black"?K:te)),We&&B);return F.jsx("div",Object.assign({ref:Pe,style:Be,"data-square-color":u,"data-square":l,onTouchMove:we=>{var Ke;const qe=we.touches[0],kt=document.elementsFromPoint(qe.clientX,qe.clientY),Wt=(Ke=kt==null?void 0:kt.find(ln=>ln.getAttribute("data-square")))===null||Ke===void 0?void 0:Ke.getAttribute("data-square");Wt&&Wt!==ze&&(xe(Wt),me(Wt))},onMouseOver:we=>{we.buttons===2&&D&&pe(D,l),!(we.relatedTarget&&we.currentTarget.contains(we.relatedTarget))&&Me(l)},onMouseOut:we=>{we.relatedTarget&&we.currentTarget.contains(we.relatedTarget)||Ce(l)},onMouseDown:we=>{we.button===2&&Xe(l)},onMouseUp:we=>{we.button===2&&(D&&C(D,l),Ye(l))},onDragEnter:()=>me(l),onClick:()=>{const we=U[l];X(l,we),L()},onContextMenu:we=>{we.preventDefault()}},{children:typeof ue=="string"?F.jsx(ue,Object.assign({ref:m,style:Object.assign(Object.assign(Object.assign({},tE(y)),eE),!d&&(he==null?void 0:he[l]))},{children:p})):F.jsx(ue,Object.assign({ref:m,square:l,squareColor:u,style:Object.assign(Object.assign(Object.assign({},tE(y)),eE),!d&&(he==null?void 0:he[l]))},{children:p}))}))}const eE={display:"flex",justifyContent:"center"},tE=l=>({width:l/8,height:l/8}),ow=(l,u,i)=>i!=null&&i.borderRadius?l==="a1"?u==="white"?{borderBottomLeftRadius:i.borderRadius}:{borderTopRightRadius:i.borderRadius}:l==="a8"?u==="white"?{borderTopLeftRadius:i.borderRadius}:{borderBottomRightRadius:i.borderRadius}:l==="h1"?u==="white"?{borderBottomRightRadius:i.borderRadius}:{borderTopLeftRadius:i.borderRadius}:l==="h8"?u==="white"?{borderTopRightRadius:i.borderRadius}:{borderBottomLeftRadius:i.borderRadius}:{}:{};function lw(){const[l,u]=le.useState({}),{arePremovesAllowed:i,boardOrientation:d,boardWidth:p,currentPosition:m,id:b,premoves:y,showBoardNotation:S}=tl(),L=le.useMemo(()=>{const U=[];return i?(y.forEach((D,R)=>{const{sourceSq:V,targetSq:B,piece:k}=D,K=U.find(te=>{var ue;return te.piece===k&&((ue=te.premovesRoute.at(-1))===null||ue===void 0?void 0:ue.targetSq)===V});K?K.premovesRoute.push({sourceSq:V,targetSq:B,index:R}):U.push({piece:k,premovesRoute:[{sourceSq:V,targetSq:B,index:R}]})}),U):[]},[y]);return F.jsx("div",Object.assign({"data-boardid":b},{children:[...Array(8)].map((U,D)=>F.jsx("div",Object.assign({style:{display:"flex",flexWrap:"nowrap",width:p}},{children:[...Array(8)].map((R,V)=>{const B=d==="black"?Ip[7-V]+(D+1):Ip[V]+(8-D),k=V%2===D%2?"white":"black",K=y.find(ue=>ue.sourceSq===B||ue.targetSq===B),te=L.filter(({premovesRoute:ue})=>{var he;return((he=ue.at(-1))===null||he===void 0?void 0:he.targetSq)===B}).sort((ue,he)=>{var pe,ve;return((pe=he.premovesRoute.at(-1))===null||pe===void 0?void 0:pe.index)-((ve=ue.premovesRoute.at(-1))===null||ve===void 0?void 0:ve.index)}).at(0);return F.jsxs(iw,Object.assign({square:B,squareColor:k,setSquares:u,squareHasPremove:!!K},{children:[!K&&m[B]&&F.jsx(ZT,{piece:m[B],square:B,squares:l}),te&&F.jsx(ZT,{isPremovedPiece:!0,piece:te.piece,square:B,squares:l}),S&&F.jsx(YC,{row:D,col:V})]}),`${V}${D}`)})}),D.toString()))}))}const uw=()=>{const{arrows:l,newArrow:u,boardOrientation:i,boardWidth:d,customArrowColor:p}=tl(),m=[...l,u].filter(Boolean);return F.jsx("svg",Object.assign({width:d,height:d,style:{position:"absolute",top:"0",left:"0",pointerEvents:"none",zIndex:"10"}},{children:m.map((b,y)=>{const[S,L,U]=b;if(S===L)return null;const D=V$(i,d,S),R=V$(i,d,L);let V=d/32;const B=y===l.length;l.some(he=>he[0]!==S&&he[1]===L)&&!B&&(V=d/16);const k=R.x-D.x,K=R.y-D.y,te=Math.hypot(K,k),ue={x:D.x+k*(te-V)/te,y:D.y+K*(te-V)/te};return F.jsxs(le.Fragment,{children:[F.jsx("marker",Object.assign({id:`arrowhead-${y}`,markerWidth:"2",markerHeight:"2.5",refX:"1.25",refY:"1.25",orient:"auto"},{children:F.jsx("polygon",{points:"0.3 0, 2 1.25, 0.3 2.5",fill:U??p})})),F.jsx("line",{x1:D.x,y1:D.y,x2:ue.x,y2:ue.y,opacity:B?"0.5":"0.65",stroke:U??p,strokeWidth:B?.9*d/40:d/40,markerEnd:`url(#arrowhead-${y})`})]},`${S}-${L}${B?"-active":""}`)})}))};function cw({option:l}){const[u,i]=le.useState(!1),{boardWidth:d,chessPieces:p,customDarkSquareStyle:m,customLightSquareStyle:b,handleSetPosition:y,onPromotionPieceSelect:S,promoteFromSquare:L,promoteToSquare:U,promotionDialogVariant:D}=tl(),R=()=>{switch(l[1]){case"Q":return m.backgroundColor;case"R":return b.backgroundColor;case"N":return D==="default"?b.backgroundColor:m.backgroundColor;case"B":return D==="default"?m.backgroundColor:b.backgroundColor}};return F.jsx("div",Object.assign({onClick:()=>{S(l,L??void 0,U??void 0)&&y(L,U,l,!0)},onMouseOver:()=>i(!0),onMouseOut:()=>i(!1),"data-piece":l,style:{cursor:"pointer",backgroundColor:u?R():`${R()}aa`,borderRadius:"4px",transition:"all 0.1s ease-out"}},{children:typeof p[l]=="function"?F.jsx("div",Object.assign({style:{transition:"all 0.1s ease-out",transform:u?"scale(1)":"scale(0.85)"}},{children:p[l]({squareWidth:d/8,isDragging:!1})})):F.jsx("svg",Object.assign({viewBox:"1 1 43 43",width:d/8,height:d/8,style:{transition:"all 0.1s ease-out",transform:u?"scale(1)":"scale(0.85)"}},{children:F.jsx("g",{children:p[l]})}))}))}function aw(){const{boardOrientation:l,boardWidth:u,promotionDialogVariant:i,promoteToSquare:d}=tl(),p=(d==null?void 0:d[1])==="1"?"b":"w",m=[`${p??"w"}Q`,`${p??"w"}R`,`${p??"w"}N`,`${p??"w"}B`],b={default:{display:"grid",gridTemplateColumns:"1fr 1fr",transform:`translate(${-u/8}px, ${-u/8}px)`},vertical:{transform:`translate(${-u/16}px, ${-u/16}px)`},modal:{display:"flex",justifyContent:"center",alignItems:"center",transform:`translate(0px, ${3*u/8}px)`,width:"100%",height:`${u/4}px`,top:0,backgroundColor:"white",left:0}},y=V$(l,u,d||"a8");return F.jsx("div",Object.assign({style:Object.assign({position:"absolute",top:`${y==null?void 0:y.y}px`,left:`${y==null?void 0:y.x}px`,zIndex:1e3},b[i]),title:"Choose promotion piece"},{children:m.map(S=>F.jsx(cw,{option:S},S))}))}const dw={whiteKing:F.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",style:{shapeRendering:"geometricPrecision",textRendering:"geometricPrecision",imageRendering:"crisp-edges"},viewBox:"0 0 4210 12970",x:"0px",y:"0px",fillRule:"evenodd",clipRule:"evenodd",width:"250",height:"250"},{children:F.jsx("g",{children:F.jsx("path",{style:{fill:"black",fillRule:"nonzero"},d:"M2105 0c169,0 286,160 249,315l200 0c-172,266 -231,479 -256,792 315,-24 530,-86 792,-255l0 897c-265,-171 -479,-231 -792,-256 18,234 75,495 185,682l339 0c233,0 369,269 225,456l545 0 -595 1916c130,94 158,275 59,402 465,0 416,568 51,568l-334 0 465 2867 332 0c250,0 381,306 199,485 162,63 273,220 273,399l0 633 168 0 0 475c-1403,0 -2807,0 -4210,0l0 -475 167 0 0 -633c0,-179 112,-336 274,-399 -181,-178 -52,-485 199,-485l332 0 465 -2867 -335 0c-353,0 -418,-568 51,-568 -98,-127 -70,-308 59,-402l-594 -1916c181,0 363,0 545,0 -144,-187 -9,-456 225,-456l339 0c110,-187 167,-448 185,-682 -315,25 -530,87 -793,256l0 -897c266,171 480,231 793,255 -25,-315 -87,-529 -256,-792l199 0c-36,-155 81,-315 250,-315zm-1994 10012l0 253 3988 0 0 -253c-1330,0 -2659,0 -3988,0zm484 -1060c-174,0 -316,142 -316,316l0 633 3652 0 0 -633c0,-174 -142,-316 -316,-316 -1007,0 -2013,0 -3020,0zm45 -457c-230,0 -225,345 0,345l2930 0c230,0 225,-345 0,-345 -977,0 -1953,0 -2930,0zm2020 -2978l-1111 0 -465 2867 2041 0 -465 -2867zm-1558 -456c-229,0 -224,345 0,345 669,0 1337,0 2005,0 230,0 225,-345 0,-345 -668,0 -1336,0 -2005,0zm1730 -457l-1454 0c-229,0 -224,345 0,345l1454 0c229,0 224,-345 0,-345zm-2064 -1862l544 1751c529,0 1057,0 1586,0l544 -1751c-892,0 -1783,0 -2674,0zm1085 -567l504 0c-126,-247 -163,-526 -177,-800 273,15 553,52 800,177l0 -504c-247,126 -527,163 -800,177 14,-273 51,-552 177,-799 -168,0 -336,0 -504,0 125,247 162,526 177,799 -274,-14 -553,-51 -800,-177l0 504c247,-125 527,-162 800,-177 -15,274 -52,553 -177,800zm969 111l-1434 0c-230,0 -225,345 0,345l1434 0c230,0 225,-345 0,-345zm-717 -2175c-105,0 -175,109 -133,204l266 0c42,-96 -30,-205 -133,-204z"})})}))};function hw({children:l}){try{return F.jsx(F.Fragment,{children:l})}catch(u){return console.log(u),F.jsx(lb,{showError:!0})}}function lb({showError:l=!1}){return F.jsxs("div",Object.assign({style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}},{children:[F.jsx("div",Object.assign({style:{width:250,height:250,transform:"rotate(90deg)"}},{children:dw.whiteKing})),l&&F.jsx("h1",{children:"Something went wrong"})]}))}function pw(){const l=le.useRef(null),{boardWidth:u,clearCurrentRightClickDown:i,onPromotionPieceSelect:d,setShowPromoteDialog:p,showPromoteDialog:m,customBoardStyle:b}=tl();return le.useEffect(()=>{function y(S){l.current&&!l.current.contains(S.target)&&i()}return document.addEventListener("mouseup",y),()=>{document.removeEventListener("mouseup",y)}},[]),u?F.jsx("div",Object.assign({style:{perspective:"1000px"}},{children:F.jsxs("div",Object.assign({ref:l,style:Object.assign(Object.assign({position:"relative"},gw(u)),b)},{children:[F.jsx(lw,{}),F.jsx(uw,{}),m&&F.jsxs(F.Fragment,{children:[F.jsx("div",{onClick:()=>{p(!1),d==null||d()},style:{position:"absolute",top:"0",left:"0",zIndex:"100",backgroundColor:"rgba(22,21,18,.7)",width:u,height:u}}),F.jsx(aw,{})]})]}))})):F.jsx(lb,{})}const gw=l=>({cursor:"default",height:l,width:l});var Jl;(function(l){l.mouse="mouse",l.touch="touch",l.keyboard="keyboard"})(Jl||(Jl={}));class fw{get delay(){var u;return(u=this.args.delay)!==null&&u!==void 0?u:0}get scrollAngleRanges(){return this.args.scrollAngleRanges}get getDropTargetElementsAtPoint(){return this.args.getDropTargetElementsAtPoint}get ignoreContextMenu(){var u;return(u=this.args.ignoreContextMenu)!==null&&u!==void 0?u:!1}get enableHoverOutsideTarget(){var u;return(u=this.args.enableHoverOutsideTarget)!==null&&u!==void 0?u:!1}get enableKeyboardEvents(){var u;return(u=this.args.enableKeyboardEvents)!==null&&u!==void 0?u:!1}get enableMouseEvents(){var u;return(u=this.args.enableMouseEvents)!==null&&u!==void 0?u:!1}get enableTouchEvents(){var u;return(u=this.args.enableTouchEvents)!==null&&u!==void 0?u:!0}get touchSlop(){return this.args.touchSlop||0}get delayTouchStart(){var u,i,d,p;return(p=(d=(u=this.args)===null||u===void 0?void 0:u.delayTouchStart)!==null&&d!==void 0?d:(i=this.args)===null||i===void 0?void 0:i.delay)!==null&&p!==void 0?p:0}get delayMouseStart(){var u,i,d,p;return(p=(d=(u=this.args)===null||u===void 0?void 0:u.delayMouseStart)!==null&&d!==void 0?d:(i=this.args)===null||i===void 0?void 0:i.delay)!==null&&p!==void 0?p:0}get window(){if(this.context&&this.context.window)return this.context.window;if(typeof window<"u")return window}get document(){var u;if(!((u=this.context)===null||u===void 0)&&u.document)return this.context.document;if(this.window)return this.window.document}get rootElement(){var u;return((u=this.args)===null||u===void 0?void 0:u.rootElement)||this.document}constructor(u,i){this.args=u,this.context=i}}function $w(l,u,i,d){return Math.sqrt(Math.pow(Math.abs(i-l),2)+Math.pow(Math.abs(d-u),2))}function mw(l,u,i,d,p){if(!p)return!1;const m=Math.atan2(d-u,i-l)*180/Math.PI+180;for(let b=0;b<p.length;++b){const y=p[b];if(y&&(y.start==null||m>=y.start)&&(y.end==null||m<=y.end))return!0}return!1}const _w={Left:1,Right:2,Center:4},Tw={Left:0,Center:1,Right:2};function D$(l){return l.button===void 0||l.button===Tw.Left}function Ew(l){return l.buttons===void 0||(l.buttons&_w.Left)===0}function ub(l){return!!l.targetTouches}const bw=1;function yw(l){const u=l.nodeType===bw?l:l.parentElement;if(!u)return;const{top:i,left:d}=u.getBoundingClientRect();return{x:d,y:i}}function vw(l,u){if(l.targetTouches.length===1)return qg(l.targetTouches[0]);if(u&&l.touches.length===1&&l.touches[0].target===u.target)return qg(l.touches[0])}function qg(l,u){return ub(l)?vw(l,u):{x:l.clientX,y:l.clientY}}const nE=(()=>{let l=!1;try{addEventListener("test",()=>{},Object.defineProperty({},"passive",{get(){return l=!0,!0}}))}catch{}return l})(),gp={[Jl.mouse]:{start:"mousedown",move:"mousemove",end:"mouseup",contextmenu:"contextmenu"},[Jl.touch]:{start:"touchstart",move:"touchmove",end:"touchend"},[Jl.keyboard]:{keydown:"keydown"}};class Ep{profile(){var u;return{sourceNodes:this.sourceNodes.size,sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,targetNodes:this.targetNodes.size,dragOverTargetIds:((u=this.dragOverTargetIds)===null||u===void 0?void 0:u.length)||0}}get document(){return this.options.document}setup(){const u=this.options.rootElement;u&&(Je(!Ep.isSetUp,"Cannot have two Touch backends at the same time."),Ep.isSetUp=!0,this.addEventListener(u,"start",this.getTopMoveStartHandler()),this.addEventListener(u,"start",this.handleTopMoveStartCapture,!0),this.addEventListener(u,"move",this.handleTopMove),this.addEventListener(u,"move",this.handleTopMoveCapture,!0),this.addEventListener(u,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.addEventListener(u,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.addEventListener(u,"keydown",this.handleCancelOnEscape,!0))}teardown(){const u=this.options.rootElement;u&&(Ep.isSetUp=!1,this._mouseClientOffset={},this.removeEventListener(u,"start",this.handleTopMoveStartCapture,!0),this.removeEventListener(u,"start",this.handleTopMoveStart),this.removeEventListener(u,"move",this.handleTopMoveCapture,!0),this.removeEventListener(u,"move",this.handleTopMove),this.removeEventListener(u,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.removeEventListener(u,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.removeEventListener(u,"keydown",this.handleCancelOnEscape,!0),this.uninstallSourceNodeRemovalObserver())}addEventListener(u,i,d,p=!1){const m=nE?{capture:p,passive:!1}:p;this.listenerTypes.forEach(function(b){const y=gp[b][i];y&&u.addEventListener(y,d,m)})}removeEventListener(u,i,d,p=!1){const m=nE?{capture:p,passive:!1}:p;this.listenerTypes.forEach(function(b){const y=gp[b][i];y&&u.removeEventListener(y,d,m)})}connectDragSource(u,i){const d=this.handleMoveStart.bind(this,u);return this.sourceNodes.set(u,i),this.addEventListener(i,"start",d),()=>{this.sourceNodes.delete(u),this.removeEventListener(i,"start",d)}}connectDragPreview(u,i,d){return this.sourcePreviewNodeOptions.set(u,d),this.sourcePreviewNodes.set(u,i),()=>{this.sourcePreviewNodes.delete(u),this.sourcePreviewNodeOptions.delete(u)}}connectDropTarget(u,i){const d=this.options.rootElement;if(!this.document||!d)return()=>{};const p=m=>{if(!this.document||!d||!this.monitor.isDragging())return;let b;switch(m.type){case gp.mouse.move:b={x:m.clientX,y:m.clientY};break;case gp.touch.move:var y,S;b={x:((y=m.touches[0])===null||y===void 0?void 0:y.clientX)||0,y:((S=m.touches[0])===null||S===void 0?void 0:S.clientY)||0};break}const L=b!=null?this.document.elementFromPoint(b.x,b.y):void 0,U=L&&i.contains(L);if(L===i||U)return this.handleMove(m,u)};return this.addEventListener(this.document.body,"move",p),this.targetNodes.set(u,i),()=>{this.document&&(this.targetNodes.delete(u),this.removeEventListener(this.document.body,"move",p))}}getTopMoveStartHandler(){return!this.options.delayTouchStart&&!this.options.delayMouseStart?this.handleTopMoveStart:this.handleTopMoveStartDelay}installSourceNodeRemovalObserver(u){this.uninstallSourceNodeRemovalObserver(),this.draggedSourceNode=u,this.draggedSourceNodeRemovalObserver=new MutationObserver(()=>{u&&!u.parentElement&&(this.resurrectSourceNode(),this.uninstallSourceNodeRemovalObserver())}),!(!u||!u.parentElement)&&this.draggedSourceNodeRemovalObserver.observe(u.parentElement,{childList:!0})}resurrectSourceNode(){this.document&&this.draggedSourceNode&&(this.draggedSourceNode.style.display="none",this.draggedSourceNode.removeAttribute("data-reactid"),this.document.body.appendChild(this.draggedSourceNode))}uninstallSourceNodeRemovalObserver(){this.draggedSourceNodeRemovalObserver&&this.draggedSourceNodeRemovalObserver.disconnect(),this.draggedSourceNodeRemovalObserver=void 0,this.draggedSourceNode=void 0}constructor(u,i,d){this.getSourceClientOffset=p=>{const m=this.sourceNodes.get(p);return m&&yw(m)},this.handleTopMoveStartCapture=p=>{D$(p)&&(this.moveStartSourceIds=[])},this.handleMoveStart=p=>{Array.isArray(this.moveStartSourceIds)&&this.moveStartSourceIds.unshift(p)},this.handleTopMoveStart=p=>{if(!D$(p))return;const m=qg(p);m&&(ub(p)&&(this.lastTargetTouchFallback=p.targetTouches[0]),this._mouseClientOffset=m),this.waitingForDelay=!1},this.handleTopMoveStartDelay=p=>{if(!D$(p))return;const m=p.type===gp.touch.start?this.options.delayTouchStart:this.options.delayMouseStart;this.timeout=setTimeout(this.handleTopMoveStart.bind(this,p),m),this.waitingForDelay=!0},this.handleTopMoveCapture=()=>{this.dragOverTargetIds=[]},this.handleMove=(p,m)=>{this.dragOverTargetIds&&this.dragOverTargetIds.unshift(m)},this.handleTopMove=p=>{if(this.timeout&&clearTimeout(this.timeout),!this.document||this.waitingForDelay)return;const{moveStartSourceIds:m,dragOverTargetIds:b}=this,y=this.options.enableHoverOutsideTarget,S=qg(p,this.lastTargetTouchFallback);if(!S)return;if(this._isScrolling||!this.monitor.isDragging()&&mw(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,S.x,S.y,this.options.scrollAngleRanges)){this._isScrolling=!0;return}if(!this.monitor.isDragging()&&this._mouseClientOffset.hasOwnProperty("x")&&m&&$w(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,S.x,S.y)>(this.options.touchSlop?this.options.touchSlop:0)&&(this.moveStartSourceIds=void 0,this.actions.beginDrag(m,{clientOffset:this._mouseClientOffset,getSourceClientOffset:this.getSourceClientOffset,publishSource:!1})),!this.monitor.isDragging())return;const L=this.sourceNodes.get(this.monitor.getSourceId());this.installSourceNodeRemovalObserver(L),this.actions.publishDragSource(),p.cancelable&&p.preventDefault();const U=(b||[]).map(B=>this.targetNodes.get(B)).filter(B=>!!B),D=this.options.getDropTargetElementsAtPoint?this.options.getDropTargetElementsAtPoint(S.x,S.y,U):this.document.elementsFromPoint(S.x,S.y),R=[];for(const B in D){if(!D.hasOwnProperty(B))continue;let k=D[B];for(k!=null&&R.push(k);k;)k=k.parentElement,k&&R.indexOf(k)===-1&&R.push(k)}const V=R.filter(B=>U.indexOf(B)>-1).map(B=>this._getDropTargetId(B)).filter(B=>!!B).filter((B,k,K)=>K.indexOf(B)===k);if(y)for(const B in this.targetNodes){const k=this.targetNodes.get(B);if(L&&k&&k.contains(L)&&V.indexOf(B)===-1){V.unshift(B);break}}V.reverse(),this.actions.hover(V,{clientOffset:S})},this._getDropTargetId=p=>{const m=this.targetNodes.keys();let b=m.next();for(;b.done===!1;){const y=b.value;if(p===this.targetNodes.get(y))return y;b=m.next()}},this.handleTopMoveEndCapture=p=>{if(this._isScrolling=!1,this.lastTargetTouchFallback=void 0,!!Ew(p)){if(!this.monitor.isDragging()||this.monitor.didDrop()){this.moveStartSourceIds=void 0;return}p.cancelable&&p.preventDefault(),this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.drop(),this.actions.endDrag()}},this.handleCancelOnEscape=p=>{p.key==="Escape"&&this.monitor.isDragging()&&(this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.endDrag())},this.options=new fw(d,i),this.actions=u.getActions(),this.monitor=u.getMonitor(),this.sourceNodes=new Map,this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.targetNodes=new Map,this.listenerTypes=[],this._mouseClientOffset={},this._isScrolling=!1,this.options.enableMouseEvents&&this.listenerTypes.push(Jl.mouse),this.options.enableTouchEvents&&this.listenerTypes.push(Jl.touch),this.options.enableKeyboardEvents&&this.listenerTypes.push(Jl.keyboard)}}const Sw=function(u,i={},d={}){return new Ep(u,i,d)},Cw=le.createContext({isCustomDndProviderSet:!1}),Iw=({children:l})=>F.jsx(F.Fragment,{children:l}),kw=({customDndBackend:l,customDndBackendOptions:u,children:i})=>{const[d,p]=le.useState(),[m,b]=le.useState(!1),[y,S]=le.useState(!1),{isCustomDndProviderSet:L}=le.useContext(Cw);le.useEffect(()=>{S("ontouchstart"in window),b(!0),p(window)},[]);const U=L?Iw:hk;return m?d?F.jsx(U,Object.assign({backend:l||(y?Sw:sw),context:d,options:l?u:void 0},{children:i})):F.jsx(F.Fragment,{children:i}):null};function ww({boardContainer:l}){const{boardWidth:u,chessPieces:i,id:d,snapToCursor:p,allowDragOutsideBoard:m}=tl(),b=Nk(R=>({item:R.getItem(),clientOffset:R.getClientOffset(),sourceClientOffset:R.getSourceClientOffset(),isDragging:R.isDragging()})),{isDragging:y,item:S,clientOffset:L,sourceClientOffset:U}=b,D=le.useCallback((R,V)=>{if(!R||!V)return{display:"none"};let{x:B,y:k}=p?R:V;const K=u/8/2;if(p&&(B-=K,k-=K),!m){const{left:ue,top:he}=l,pe=ue-K,ve=he-K,be=ue+u-K,$e=he+u-K;B=Math.max(pe,Math.min(B,be)),k=Math.max(ve,Math.min(k,$e))}const te=`translate(${B}px, ${k}px)`;return{transform:te,WebkitTransform:te,touchAction:"none"}},[u,m,p,l]);return y&&S.id===d?F.jsx("div",Object.assign({style:{position:"fixed",pointerEvents:"none",zIndex:10,left:0,top:0}},{children:F.jsx("div",Object.assign({style:D(L,U)},{children:typeof i[S.piece]=="function"?i[S.piece]({squareWidth:u/8,isDragging:!0}):F.jsx("svg",Object.assign({viewBox:"1 1 43 43",width:u/8,height:u/8},{children:F.jsx("g",{children:i[S.piece]})}))}))})):null}const Ow=le.forwardRef((l,u)=>{const{customDndBackend:i,customDndBackendOptions:d,onBoardWidthChange:p}=l,m=PC(l,["customDndBackend","customDndBackendOptions","onBoardWidthChange"]),[b,y]=le.useState(l.boardWidth),S=le.useRef(null),L=le.useRef(null),[U,D]=le.useState({left:0,top:0}),R=le.useMemo(()=>{var V;return(V=S.current)===null||V===void 0?void 0:V.getBoundingClientRect()},[S.current]);return le.useEffect(()=>{b&&(p==null||p(b))},[b]),le.useEffect(()=>{D({left:R!=null&&R.left?R==null?void 0:R.left:0,top:R!=null&&R.top?R==null?void 0:R.top:0})},[R]),le.useEffect(()=>{var V;if(l.boardWidth===void 0&&(!((V=S.current)===null||V===void 0)&&V.offsetWidth)){const B=new ResizeObserver(()=>{var k;y((k=S.current)===null||k===void 0?void 0:k.offsetWidth)});return B.observe(S.current),()=>{B.disconnect()}}},[S.current]),F.jsx(hw,{children:F.jsxs("div",Object.assign({ref:L,style:{display:"flex",flexDirection:"column",width:"100%"}},{children:[F.jsx("div",{ref:S,style:{width:"100%"}}),F.jsx(kw,Object.assign({customDndBackend:i,customDndBackendOptions:d},{children:b&&F.jsxs(KC,Object.assign({boardWidth:b},m,{ref:u},{children:[F.jsx(ww,{boardContainer:U}),F.jsx(pw,{})]}))}))]}))})});var zg={exports:{}},Rw=zg.exports,rE;function $m(){return rE||(rE=1,function(l,u){(function(i,d){l.exports=d()})(Rw,function(){var i={},d,p,m,b,y,S,L,U,D,R,V,B,k,K,te,ue,he,pe,ve,be,$e,ce,ze,C,me,Ce,Me,Re,Ge,Xe,Ye,X,xe,Ee,H,se,We,Pe,je,Be,we,Ke,qe,kt,Wt,ln,Yn,Gs,En,zt,Br,ir,Vs,Le,nt,et,Fr,bn,dn,br,Bt,Rn,fi,J,ke,_,v,N,x,fe,ht,Ln,Ur,Ws,yr,Hr,eo,$i,to,nl,An,Jn,rl,zs,sl,js,ut,lt,un,Mt,or,qn,vc,il,mi,Ql,hd,Zl,eu,pd,tu,gd,Sc,fd,Ft,Cc,ol,nu,_i,Mp,no,Ti,lr,Np,vr,xp,Ei,hn,bi,ll,Bn,Sr,Pp,$d,ul,Ic,kc,ro,ru,wc,ot,md,_d,cl,Td,so,Ed,su,io,as,ds,Xs,yi,hs,Gr,Bp,Oc,oo,Fp,bd,ps,yd,iu,yn,al,lo,ou,Up,Hp,Rc,lu,uu,gs,ur,cu,au,vd,du,hu,Sd,Qn,uo,Lc,dl,Cd,Ac,vi,Si,pu,co,Id,kd,wd,hl,Dc,Od,Gp,Rd,Ld,Mc,Ad,Dd,Md,Nd,Nc,gu,xd,xc,fu,fs,Pd,Bd,$u,Fd,Ud,Vp,pl,ao,Wp,Hd,Gd,Vd,Wd,ho,Ci,zd,gl,Pc,jd,Xd,po,go,Ks,fl,Kd,Yd,Bc,Fc,Jd,Uc,qd,Qd,zp,fo,mu,Hc,Zn,Vr,Gc,_u,Vc,Ut,Wc,$l,$o,mo,Tu,Ii,ki,zc,$s,ms,Eu,jc,bu,Zd,eh,Xc,th,Kc,ml,Ys,Yc,Jc,jp,yu,_o,nh,vu,Su,bt,To,_l,Js,rh,qc,Cr,Tl,Fn,sh,Xp,ih,oh,_s,El,Qc,Zc,ea,ta,Kp,na,Yp,Jp,bl,qs,lh,wi,cr,Eo,Ir,Cu,uh,yl,ar,dr,Un,Iu,ra,bo,Ts,$t,_t,Qs,vn,Dn,Es,Oi,Sn,ku,ch,ah,wu,Ae,jt,Xt,mt,Wr,vl,_e,Tt,Ri,Ou,zr,Hn,Gn,Zs,bs,jr,ys,sa,Ru,ia,Vn,er,Et,kr,dh,hh,oa,la,ua,Lu,Sl,vs,ca,ph,yo,Cl,aa,Au,Li,gh,Du,Mu,Xr,Nu,da,Il,tr,vo,cn,ei,ha,kl,Kr,Ss,xu,pa,Yr,Cs,wl,ga,Ol,fa,Rl,Jr,Ll,Al,Ai,$a,ti,fh,ma,wt,Dl,Pu,Bu,Ml,Fu,ni,yt,Ht,tn,Uu,So,Co,$h,pn,Hu,Gu,Vu,wr,nr,Io,_a,Ta,mh,Ea,_h,Th,Eh,bh,yh,ee;d=function(e,t,n,o){if(!(e instanceof ne)&&typeof e!="string"||`${e}`.trim()==="")throw Error('Invalid type "'+e+'". The type must be a non-empty string or a Blockly.registry.Type.');if(e=`${e}`.toLowerCase(),typeof t!="string"||t.trim()==="")throw Error('Invalid name "'+t+'". The name must be a non-empty string.');const a=t.toLowerCase();if(!n)throw Error("Can not register a null value");let f=Or[e],E=ko[e];if(f||(f=Or[e]=Object.create(null),E=ko[e]=Object.create(null)),p(e,n),!o&&f[a]&&f[a]!==n)throw Error('Name "'+a+'" with type "'+e+'" already registered.');f[a]=n,E[a]=t},p=function(e,t){switch(e){case String(ne.FIELD):if(typeof t.fromJson!="function")throw Error('Type "'+e+'" must have a fromJson function')}},m=function(e,t){e=`${e}`.toLowerCase(),t=t.toLowerCase();const n=Or[e];n&&n[t]?(delete Or[e][t],delete ko[e][t]):console.warn("Unable to unregister ["+t+"]["+e+"] from the registry.")},b=function(e,t,n){e=`${e}`.toLowerCase(),t=t.toLowerCase();const o=Or[e];if(!o||!o[t]){if(t="Unable to find ["+t+"]["+e+"] in the registry.",n)throw Error(t+" You must require or register a "+e+" plugin.");return console.warn(t),null}return o[t]},y=function(e,t){return e=`${e}`.toLowerCase(),t=t.toLowerCase(),(e=Or[e])?!!e[t]:!1},S=function(e,t,n){return b(e,t,n)},L=function(e,t,n){return b(e,t,n)},U=function(e,t,n){e=`${e}`.toLowerCase();var o=Or[e];if(!o){if(o=`Unable to find [${e}] in the registry.`,n)throw Error(`${o} You must require or register a ${e} plugin.`);return console.warn(o),null}if(!t)return o;e=ko[e],n=Object.create(null);for(const a of Object.keys(o))n[e[a]]=o[a];return n},D=function(e,t,n){return t=t.plugins[String(e)]||hr,typeof t=="function"?t:S(e,t,n)},R=function(e,t,n,o){e=e+" was deprecated in "+t+" and will be deleted in "+n+".",o&&(e+=`
Use `+o+" instead."),Sh.has(e)||(Sh.add(e),console.warn(e))},V=function(){return"blockly-"+(Qp++).toString(36)},B=function(){return Ih.genUid()},k=function(e){return e.type===z.BLOCK_CREATE},K=function(e){return e.type===z.BLOCK_DELETE},te=function(e){return e.type===z.BLOCK_CHANGE},ue=function(e){return e.type===z.BLOCK_FIELD_INTERMEDIATE_CHANGE},he=function(e){return e.type===z.BLOCK_MOVE},pe=function(e){return e.type===z.CLICK},ve=function(e){return e.type===z.BUBBLE_OPEN},be=function(e){return e.type===z.VIEWPORT_CHANGE},i.setRecordUndo$$module$build$src$core$events$utils=function(e){Wu=e},$e=function(){return Wu},ce=function(e){Rh.fireInternal(e)},ze=function(e){if(Re()){if(!Is.length)try{requestAnimationFrame(()=>{setTimeout(C,0)})}catch{setTimeout(C,0)}me(e)}},C=function(){const e=Ce(Is,!0);Is.length=0;for(const t of e){if(!t.workspaceId)continue;let n;(n=Ee(t.workspaceId))==null||n.fireChangeListener(t)}},me=function(e){if(te(e)&&e.element==="mutation"){let t;for(t=Is.length;0<t;t--){const n=Is[t-1];if(n.group!==e.group||n.workspaceId!==e.workspaceId||!he(n)||n.newParentId!==e.blockId)break}Is.splice(t,0,e)}else Is.push(e)},Ce=function(e,t=!0){t||(R("filter(queue, /*forward=*/false)","v11.2","v12"),e=e.slice().reverse());const n=[];for(const o of e)if(e=n[n.length-1],!o.isNull())if(e&&e.workspaceId===o.workspaceId&&e.group===o.group)if(he(o)&&he(e)&&o.blockId===e.blockId){if(e.newParentId=o.newParentId,e.newInputName=o.newInputName,e.newCoordinate=o.newCoordinate,e.reason||o.reason){let a,f;e.reason=Array.from(new Set(((a=e.reason)!=null?a:[]).concat((f=o.reason)!=null?f:[])))}}else te(o)&&te(e)&&o.blockId===e.blockId&&o.element===e.element&&o.name===e.name?e.newValue=o.newValue:be(o)&&be(e)?(e.viewTop=o.viewTop,e.viewLeft=o.viewLeft,e.scale=o.scale,e.oldScale=o.oldScale):pe(o)&&ve(e)||n.push(o);else n.push(o);return e=n.filter(o=>!o.isNull()),t||e.reverse(),e},Me=function(){for(let e=0,t;t=Is[e];e++)t.recordUndo=!1},i.disable$$module$build$src$core$events$utils=function(){Oh++},i.enable$$module$build$src$core$events$utils=function(){Oh--},Re=function(){return Oh===0},i.getGroup$$module$build$src$core$events$utils=function(){return wh},i.setGroup$$module$build$src$core$events$utils=function(e){Rh.setGroupInternal(e)},Ge=function(e){wh=typeof e=="boolean"?e?B():"":e},Xe=function(e){const t=[];e=e.getDescendants(!1);for(let n=0,o;o=e[n];n++)t[n]=o.id;return t},Ye=function(e,t){const n=X(e.type);if(!n)throw Error("Unknown event type.");return n.fromJson(e,t)},X=function(e){const t=S(ne.EVENT,e);if(!t)throw Error(`Event type ${e} not found in registry.`);return t},xe=function(e){if((he(e)||k(e))&&e.workspaceId){var t=Ee(e.workspaceId);if(!e.blockId)throw Error("Encountered a blockEvent without a proper blockId");if(e=t.getBlockById(e.blockId)){const n=Wu;try{Wu=!1;const o=e.getParent();if(o&&!o.hasDisabledReason(ya)){const a=e.getDescendants(!1);for(let f=0,E;E=a[f];f++)E.setDisabledReason(!1,ya)}else if((e.outputConnection||e.previousConnection)&&!t.isDragging())do e.setDisabledReason(!0,ya),e=e.getNextBlock();while(e)}finally{Wu=n}}}},Ee=function(e){return Di[e]||null},H=function(){const e=[];for(const t in Di)e.push(Di[t]);return e},se=function(e){Di[e.id]=e},We=function(e){delete Di[e.id]},Pe=function(){return Zp},je=function(e){Zp=e},Be=function(){return wo},i.setSelected$$module$build$src$core$common=function(e){if(wo!==e){var t,n,o,a,f,E,w=new(X(z.SELECTED))((o=(t=wo)==null?void 0:t.id)!=null?o:null,(a=e==null?void 0:e.id)!=null?a:null,(E=(f=e==null?void 0:e.workspace.id)!=null?f:(n=wo)==null?void 0:n.workspace.id)!=null?E:"");ce(w);var q;(q=wo)==null||q.unselect(),wo=e;var Se;(Se=wo)==null||Se.select()}},we=function(){return eg},Ke=function(e){eg=e},qe=function(e){for(;e.options.parentWorkspace;)e=e.options.parentWorkspace;const t=e.getParentSvg(),n=e.getCachedParentSvgSize();var o=t.parentElement;if(o instanceof HTMLElement){var a=o.offsetWidth;o=o.offsetHeight,n.width!==a&&(t.setAttribute("width",a+"px"),e.setCachedParentSvgSize(a,null)),n.height!==o&&(t.setAttribute("height",o+"px"),e.setCachedParentSvgSize(null,o)),e.resize()}},kt=function(e,t){const n=Object.create(null),o=e.getDescendants(!0);t&&(e=e.getNextBlock())&&(e=o.indexOf(e),o.splice(e,o.length-e));for(let a=0,f;f=o[a];a++)n[f.type]?n[f.type]++:n[f.type]=1;return n},Wt=function(e){return function(){this.jsonInit(e)}},ln=function(e){va.defineBlocksWithJsonArrayInternal(e)},Yn=function(e){i.defineBlocks$$module$build$src$core$common(i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common(e))},i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common=function(e){const t={};for(let n=0;n<e.length;n++){const o=e[n];if(!o){console.warn(`Block definition #${n} in JSON array is ${o}. Skipping`);continue}const a=o.type;a?t[a]={init:Wt(o)}:console.warn(`Block definition #${n} in JSON array is missing a type attribute. Skipping.`)}return t},i.defineBlocks$$module$build$src$core$common=function(e){for(const t of Object.keys(e)){const n=e[t];t in Wn&&console.warn(`Block definition "${t}" overwrites previous definition.`),Wn[t]=n}},Gs=function(e,t){En(),ju=setTimeout(function(){t&&t.handleRightClick(e)},Nl)},En=function(){ju&&(clearTimeout(ju),ju=0)},zt=function(){xl=null},Br=function(e){return!e.type.startsWith("pointer")||e instanceof PointerEvent&&Vs(e)},ir=function(e){return`${e.pointerId}`},Vs=function(e){const t=ir(e);return xl?xl===t:e.type==="pointerdown"?(xl=t,!0):!1},Le=function(e,t,n,o,a){function f(w){(a||Br(w))&&(n?o.call(n,w):o(w))}const E=[];if(t in Ro)for(let w=0;w<Ro[t].length;w++){const q=Ro[t][w];e.addEventListener(q,f,!1),E.push([e,q,f])}else e.addEventListener(t,f,!1),E.push([e,t,f]);return E},nt=function(e,t,n,o){function a(E){n?o.call(n,E):o(E)}const f=[];if(t in Ro)for(let E=0;E<Ro[t].length;E++){const w=Ro[t][E];e.addEventListener(w,a,!1),f.push([e,w,a])}else e.addEventListener(t,a,!1),f.push([e,t,a]);return f},et=function(e){const t=e[e.length-1][2];for(;e.length;){const[n,o,a]=e.pop();n.removeEventListener(o,a,!1)}return t},Fr=function(e){if(e.target instanceof HTMLElement){if(e.target.isContentEditable||e.target.getAttribute("data-is-text-input")==="true")return!0;if(e.target instanceof HTMLInputElement)return e=e.target,e.type==="text"||e.type==="number"||e.type==="email"||e.type==="password"||e.type==="search"||e.type==="tel"||e.type==="url";if(e.target instanceof HTMLTextAreaElement)return!0}return!1},bn=function(e){return e.ctrlKey&&Yu?!0:e.button===2},dn=function(e,t,n){const o=t.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,n||(n=t.getScreenCTM().inverse()),o.matrixTransform(n)},br=function(e){switch(e.deltaMode){default:return{x:e.deltaX,y:e.deltaY};case 1:return{x:e.deltaX*Ra,y:e.deltaY*Ra};case 2:return{x:e.deltaX*Ju,y:e.deltaY*Ju}}},Bt=function(e,t){return t=e.indexOf(t),t===-1?!1:(e.splice(t,1),!0)},Rn=function(e){if(Pl)throw Error("CSS already injected");Zr+=`
`+e},fi=function(e,t){Pl||(Pl=!0,e&&(e=t.replace(/[\\/]$/,""),t=Zr.replace(/<<<PATH>>>/g,e),Zr="",e=document.createElement("style"),e.id="blockly-common-style",t=document.createTextNode(t),e.appendChild(t),document.head.insertBefore(e,document.head.firstChild)))},J=function(e,t,n){e=document.createElementNS(Lo,`${e}`);for(const o in t)e.setAttribute(o,`${t[o]}`);return n&&n.appendChild(e),e},ke=function(e,t){return t=t.split(" "),t.every(n=>e.classList.contains(n))?!1:(e.classList.add(...t),!0)},_=function(e,t){e.classList.remove(...t.split(" "))},v=function(e,t){return t=t.split(" "),t.every(n=>!e.classList.contains(n))?!1:(e.classList.remove(...t),!0)},N=function(e,t){return e.classList.contains(t)},x=function(e){return e&&e.parentNode?e.parentNode.removeChild(e):null},fe=function(e,t){const n=t.nextSibling;if(t=t.parentNode,!t)throw Error("Reference node has no parent.");n?t.insertBefore(e,n):t.appendChild(e)},ht=function(e,t){e.style.transform=t,e.style["-webkit-transform"]=t},Ln=function(){Uh++,St||(St=Object.create(null))},Ur=function(){Uh--,Uh||(St=null)},Ws=function(e){const t=e.textContent+`
`+e.className.baseVal;let n;if(St&&(n=St[t]))return n;try{n=e.getComputedTextLength()}catch{return 8*e.textContent.length}return St&&(St[t]=n),n},yr=function(e,t,n,o){return Hr(e,t+"pt",n,o)},Hr=function(e,t,n,o){const a=e.textContent;e=a+`
`+e.className.baseVal;var f;return St&&(f=St[e])||(La||(f=document.createElement("canvas"),f.className="blocklyComputeCanvas",document.body.appendChild(f),La=f.getContext("2d")),La.font=n+" "+t+" "+o,f=a?La.measureText(a).width:0,St&&(St[e]=f)),f},eo=function(e,t,n,o){const a=document.createElement("span");a.style.font=n+" "+t+" "+o,a.textContent=e,e=document.createElement("div"),e.style.width="1px",e.style.height="0",t=document.createElement("div"),t.style.display="flex",t.style.position="fixed",t.style.top="0",t.style.left="0",t.appendChild(a),t.appendChild(e),document.body.appendChild(t),n={height:0,baseline:0};try{t.style.alignItems="baseline",n.baseline=e.offsetTop-a.offsetTop,t.style.alignItems="flex-end",n.height=e.offsetTop-a.offsetTop}finally{document.body.removeChild(t)}return n},$i=function(e){return Ao.getSizeInternal(e)},to=function(e){if(An(e,"display")!=="none")return nl(e);const t=e.style,n=t.display,o=t.visibility,a=t.position;t.visibility="hidden",t.position="absolute",t.display="inline";const f=e.offsetWidth;return e=e.offsetHeight,t.display=n,t.position=a,t.visibility=o,new oe(f,e)},nl=function(e){return R("Blockly.utils.style.getSizeWithDisplay()","v11.2","v13"),new oe(e.offsetWidth,e.offsetHeight)},An=function(e,t){return e=window.getComputedStyle(e),e[t]||e.getPropertyValue(t)},Jn=function(e){const t=new ae(0,0);e=e.getBoundingClientRect();var n=document.documentElement;return n=new ae(window.pageXOffset||n.scrollLeft,window.pageYOffset||n.scrollTop),t.x=e.left+n.x,t.y=e.top+n.y,t},rl=function(){const e=document.body,t=document.documentElement;return new ae(e.scrollLeft||t.scrollLeft,e.scrollTop||t.scrollTop)},zs=function(e){R("Blockly.utils.style.getBorderBox()","v11.2","v13");const t=parseFloat(An(e,"borderLeftWidth")),n=parseFloat(An(e,"borderRightWidth")),o=parseFloat(An(e,"borderTopWidth"));return e=parseFloat(An(e,"borderBottomWidth")),new ct(o,e,t,n)},sl=function(e,t,n){R("Blockly.utils.style.scrollIntoContainerView()","v11.2","v13","the native Element.scrollIntoView()"),e=js(e,t,n),t.scrollLeft=e.x,t.scrollTop=e.y},js=function(e,t,n){R("Blockly.utils.style.getContainerOffsetToScrollInto()","v11.2","v13");var o=Jn(e),a=Jn(t),f=zs(t);const E=o.x-a.x-f.left;return o=o.y-a.y-f.top,a=nl(e),e=t.clientWidth-a.width,a=t.clientHeight-a.height,f=t.scrollLeft,t=t.scrollTop,n?(f+=E-e/2,t+=o-a/2):(f+=Math.min(E,Math.max(E-e,0)),t+=Math.min(o,Math.max(o-a,0))),new ae(f,t)},ut=function(e){const t=new ae(0,0);var n=e.x&&e.getAttribute("x");const o=e.y&&e.getAttribute("y");return n&&(t.x=parseInt(n)),o&&(t.y=parseInt(o)),(n=(n=e.getAttribute("transform"))&&n.match(Hh))&&(t.x+=Number(n[1]),n[3]&&(t.y+=Number(n[3]))),(e=e.getAttribute("style"))&&e.includes("translate")&&(e=e.match(sg))&&(t.x+=Number(e[1]),e[3]&&(t.y+=Number(e[3]))),t},lt=function(e){let t=0,n=0;for(;e;){const o=ut(e);if(t+=o.x,n+=o.y,(" "+(e.getAttribute("class")||"")+" ").includes(" injectionDiv "))break;e=e.parentNode}return new ae(t,n)},un=function(){const e=rl();return new ct(e.y,document.documentElement.clientHeight+e.y,e.x,document.documentElement.clientWidth+e.x)},Mt=function(){const e=document.documentElement,t=window;return new ae(t.pageXOffset||e.scrollLeft,t.pageYOffset||e.scrollTop)},or=function(e,t){var n=t.x;t=t.y;const o=e.getInjectionDiv().getBoundingClientRect();return n=new ae(n-o.left,t-o.top),t=e.getOriginOffsetInPixels(),ae.difference(n,t).scale(1/e.scale)},qn=function(e,t){var n=t.scale(e.scale);t=n.x,n=n.y;const o=e.getInjectionDiv().getBoundingClientRect();return e=e.getOriginOffsetInPixels(),new ae(t+o.left+e.x,n+o.top+e.y)},vc=function(e){({document:Zu=Zu,DOMParser:Do=Do,XMLSerializer:Mo=Mo}=e),Qu=new Do,Aa=new Mo},i.createElement$$module$build$src$core$utils$xml=function(e){return Zu.createElementNS(fn,e)},i.createTextNode$$module$build$src$core$utils$xml=function(e){return Zu.createTextNode(e)},i.textToDom$$module$build$src$core$utils$xml=function(e){let t=Qu.parseFromString(e,"text/xml");if(t&&t.documentElement&&!t.getElementsByTagName("parsererror").length)return t.documentElement;if((t=Qu.parseFromString(e,"text/html"))&&t.body.firstChild&&t.body.firstChild.nodeName.toLowerCase()==="xml")return t.body.firstChild;throw Error(`DOMParser was unable to parse: ${e}`)},il=function(e){return mi(Aa.serializeToString(e))},mi=function(e){return e.replace(ts,t=>`&#${t.charCodeAt(0)};`)},Ql=function(e){return e?((e instanceof Element||typeof e=="string")&&(e=Ft(e),e=gd(e)),hd(e),e):null},hd=function(e){const t=e.kind;if(e=e.contents,t&&t!==Gh&&t!==Da)throw Error("Invalid toolbox kind "+t+". Please supply either "+Gh+" or "+Da);if(!e)throw Error("Toolbox must have a contents attribute.")},Zl=function(e){return e?e.contents?e.contents:Array.isArray(e)&&0<e.length&&!e[0].nodeType?e:Sc(e):[]},eu=function(e){return Vh.hasCategoriesInternal(e)},pd=function(e){if(!e)return!1;const t=e.kind;return t?t===Da:!!e.contents.filter(n=>n.kind.toUpperCase()==="CATEGORY").length},tu=function(e){return e&&e.contents?!!e.contents.filter(function(t){return t.kind.toUpperCase()==="CATEGORY"}).length:!1},gd=function(e){const t={contents:Sc(e)};return e instanceof Node&&fd(e,t),t},Sc=function(e){const t=[];let n=e.childNodes;n||(n=e);for(let o=0,a;a=n[o];o++){if(!a.tagName)continue;e={};const f=a.tagName.toUpperCase();e.kind=f,f==="BLOCK"?e.blockxml=a:a.childNodes&&0<a.childNodes.length&&(e.contents=Sc(a)),fd(a,e),t.push(e)}return t},fd=function(e,t){for(let n=0;n<e.attributes.length;n++){const o=e.attributes[n];o.nodeName.includes("css-")?(t.cssconfig=t.cssconfig||{},t.cssconfig[o.nodeName.replace("css-","")]=o.value):t[o.nodeName]=o.value}},Ft=function(e){let t=null;if(e)if(typeof e=="string"){if(t=i.textToDom$$module$build$src$core$utils$xml(e),t.nodeName.toLowerCase()!=="xml")throw TypeError("Toolbox should be an <xml> document.")}else e instanceof Element&&(t=e);return t},Cc=function(e,t,n,o,a,f){const E=f.scrollbar&&f.scrollbar.canScrollVertically();return e.horizontal===No.LEFT?(n=a.absoluteMetrics.left+n,E&&f.RTL&&(n+=Nt.scrollbarThickness)):(n=a.absoluteMetrics.left+a.viewMetrics.width-t.width-n,E&&!f.RTL&&(n-=Nt.scrollbarThickness)),e.vertical===si.TOP?e=a.absoluteMetrics.top+o:(e=a.absoluteMetrics.top+a.viewMetrics.height-t.height-o,f.scrollbar&&f.scrollbar.canScrollHorizontally()&&(e-=Nt.scrollbarThickness)),new ct(e,e+t.height,n,n+t.width)},ol=function(e,t){return{horizontal:t.toolboxMetrics.position===Fe.LEFT||e.horizontalLayout&&!e.RTL?No.RIGHT:No.LEFT,vertical:t.toolboxMetrics.position===Fe.BOTTOM?si.TOP:si.BOTTOM}},nu=function(e,t,n,o){const a=e.left,f=e.right-e.left,E=e.bottom-e.top;for(let w=0;w<o.length;w++){const q=o[w];e.intersects(q)&&(e=n===ii.UP?q.top-E-t:q.bottom+t,e=new ct(e,e+E,a,a+f),w=-1)}return e},_i=function(e,t){d(ne.SERIALIZER,e,t)},Mp=function(e){m(ne.SERIALIZER,e)},no=function(e,{addCoordinates:t=!1,saveIds:n=!0}={}){const o=e.workspace,a=Object.create(null);return a.height=e.getSize().height,a.width=e.getSize().width,n&&(a.id=e.id),t&&(t=e.getRelativeToSurfaceXY(),a.x=o.RTL?o.getWidth()-t.x:t.x,a.y=t.y),e.getText()&&(a.text=e.getText()),e.isCollapsed()&&(a.collapsed=!0),e.isOwnEditable()||(a.editable=!1),e.isOwnMovable()||(a.movable=!1),e.isOwnDeletable()||(a.deletable=!1),a},Ti=function(e,t,{recordUndo:n=!1}={}){const o=$e();if(i.setRecordUndo$$module$build$src$core$events$utils(n),n=t.newComment(e.id),e.text!==void 0&&n.setText(e.text),e.x!==void 0||e.y!==void 0){const f=n.getRelativeToSurfaceXY();let E,w=(E=e.x)!=null?E:f.x;w=t.RTL?t.getWidth()-w:w;var a;t=(a=e.y)!=null?a:f.y,n.moveTo(new ae(w,t))}if(e.width!==void 0||e.height){a=n.getSize();let f,E;n.setSize(new oe((f=e.width)!=null?f:a.width,(E=e.height)!=null?E:a.height))}return e.collapsed!==void 0&&n.setCollapsed(e.collapsed),e.editable!==void 0&&n.setEditable(e.editable),e.movable!==void 0&&n.setMovable(e.movable),e.deletable!==void 0&&n.setDeletable(e.deletable),i.setRecordUndo$$module$build$src$core$events$utils(o),n},lr=function(e,t){d(ne.PASTER,e,t)},Np=function(e){m(ne.PASTER,e)},vr=function(e){const t=e.workspace,n=e.getRelativeToSurfaceXY(),o=new ae(0,0),a=t.getTopComments(!1).filter(f=>f.id!==e.id).map(f=>f.getRelativeToSurfaceXY());for(;xp(ae.sum(n,o),a);)o.translate(t.RTL?-30:30,30);e.moveTo(ae.sum(n,o))},xp=function(e,t){return t.some(n=>1>=Math.abs(n.x-e.x)&&1>=Math.abs(n.y-e.y))},Ei=function(e,t){e.setAttribute(Na,t)},hn=function(e,t,n){Array.isArray(n)&&(n=n.join(" ")),e.setAttribute(Po+t,`${n}`)},bi=function(e){return e.saveState!==void 0&&e.loadState!==void 0},ll=function(e){return $d(e),Pp()?(ul(),Promise.resolve()):(Rs||(Rs=new Promise(t=>{nc=t,rc=window.requestAnimationFrame(()=>{ul(),t()})})),Rs)},Bn=function(){return Rs||Promise.resolve()},Sr=function(e){e||window.cancelAnimationFrame(rc),ul(e),!e&&nc&&nc()},Pp=function(){return wa},$d=function(e){Os.add(e),Bl.set(e,i.getGroup$$module$build$src$core$events$utils());const t=e.getParent();t?$d(t):Fo.add(e)},ul=function(e){const t=e?new Set([e]):new Set([...Fo].map(f=>f.workspace)),n=[...Fo].filter(kc).filter(f=>t.has(f.workspace));for(var o of n)ro(o);for(const f of t)f.resizeContents();for(var a of n)o=a.getRelativeToSurfaceXY(),a.updateComponentLocations(o);for(const f of n)a=i.getGroup$$module$build$src$core$events$utils(),(o=Bl.get(f))&&i.setGroup$$module$build$src$core$events$utils(o),f.bumpNeighbours(),i.setGroup$$module$build$src$core$events$utils(a);for(const f of n)Ic(f);e||(Rs=null)},Ic=function(e){Fo.delete(e),Os.delete(e),Bl.delete(e);for(const t of e.getChildren(!1))Ic(t)},kc=function(e){return!e.isDisposed()&&!e.getParent()},ro=function(e){if(Os.has(e)&&e.initialized){for(const t of e.getChildren(!1))ro(t);e.renderEfficiently()}},ru=function(e,t){xn(e,t)},wc=function(e){xn=e},ot=function(e,t){jn.confirmInternal(e,t)},md=function(e,t){oi(e,t)},_d=function(e){oi=e},cl=function(e,t,n){Lr(e,t,n)},Td=function(e){Lr=e},so=function(e){return e.getProcedureDef!==void 0},Ed=function(e){return e.getProcedureCall!==void 0&&e.renameProcedure!==void 0},su=function(e){return e.getVariableModel!==void 0},i.allUsedVarModels$$module$build$src$core$variables=function(e){e=e.getAllBlocks(!1);const t=new Set;for(let n=0;n<e.length;n++){const o=e[n].getVarModels();if(o)for(let a=0;a<o.length;a++){const f=o[a];f.getId()&&t.add(f)}}return Array.from(t.values())},i.allDeveloperVariables$$module$build$src$core$variables=function(e){e=e.getAllBlocks(!1);const t=new Set;for(let o=0,a;a=e[o];o++){var n=a.getDeveloperVariables;if(n){n=n();for(let f=0;f<n.length;f++)t.add(n[f])}}return Array.from(t.values())},io=function(e){let t=[];const n=document.createElement("button");return n.setAttribute("text","%{BKY_NEW_VARIABLE}"),n.setAttribute("callbackKey","CREATE_VARIABLE"),e.registerButtonCallback("CREATE_VARIABLE",function(o){hs(o.getTargetWorkspace())}),t.push(n),e=as(e),t=t.concat(e)},as=function(e){e=e.getVariablesOfType("");const t=[];if(0<e.length){var n=e[e.length-1];if(Wn.variables_set){var o=i.createElement$$module$build$src$core$utils$xml("block");o.setAttribute("type","variables_set"),o.setAttribute("gap",Wn.math_change?"8":"24"),o.appendChild(ps(n)),t.push(o)}if(Wn.math_change&&(o=i.createElement$$module$build$src$core$utils$xml("block"),o.setAttribute("type","math_change"),o.setAttribute("gap",Wn.variables_get?"20":"8"),o.appendChild(ps(n)),n=i.textToDom$$module$build$src$core$utils$xml('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),o.appendChild(n),t.push(o)),Wn.variables_get){e.sort(Fl.compareByName);for(let a=0,f;f=e[a];a++)n=i.createElement$$module$build$src$core$utils$xml("block"),n.setAttribute("type","variables_get"),n.setAttribute("gap","8"),n.appendChild(ps(f)),t.push(n)}}return t},ds=function(e){return Pa.generateUniqueNameInternal(e)},Xs=function(e){return yi(li.charAt(0),e.getAllVariableNames())},yi=function(e,t){if(!t.length)return e;const n=li;let o="",a=n.indexOf(e);for(;;){let f=!1;for(let E=0;E<t.length;E++)if(t[E].toLowerCase()===e){f=!0;break}if(!f)break;a++,a===n.length&&(a=0,o=`${Number(o)+1}`),e=n.charAt(a)+o}return e},hs=function(e,t,n){function o(f){Gr(i.Msg$$module$build$src$core$msg.NEW_VARIABLE_TITLE,f,function(E){if(E){var w=Oc(E,e);if(w){if(w.type===a)var q=i.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS.replace("%1",w.name);else q=i.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE,q=q.replace("%1",w.name).replace("%2",w.type);ru(q,function(){o(E)})}else e.createVariable(E,a),t&&t(E)}else t&&t(null)})}const a=n||"";o("")},i.renameVariable$$module$build$src$core$variables=function(e,t,n){function o(a){const f=i.Msg$$module$build$src$core$msg.RENAME_VARIABLE_TITLE.replace("%1",t.name);Gr(f,a,function(E){if(E){var w=Bp(E,t.type,e),q=oo(t.name,E,e);if(w||q){var Se="";w?Se=i.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",w.name).replace("%2",w.type):q&&(Se=i.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER.replace("%1",E).replace("%2",q)),ru(Se,function(){o(E)})}else e.renameVariableById(t.getId(),E),n&&n(E)}else n&&n(null)})}o("")},Gr=function(e,t,n){cl(e,t,function(o){o&&(o=o.replace(/[\s\xa0]+/g," ").trim(),o===i.Msg$$module$build$src$core$msg.RENAME_VARIABLE||o===i.Msg$$module$build$src$core$msg.NEW_VARIABLE)&&(o=null),n(o)})},Bp=function(e,t,n){n=n.getVariableMap().getAllVariables(),e=e.toLowerCase();for(let o=0,a;a=n[o];o++)if(a.name.toLowerCase()===e&&a.type!==t)return a;return null},Oc=function(e,t){t=t.getVariableMap().getAllVariables(),e=e.toLowerCase();for(let n=0,o;o=t[n];n++)if(o.name.toLowerCase()===e)return o;return null},oo=function(e,t,n){return n.getProcedureMap().getProcedures().length?Fp(e,t,n):bd(e,t,n)},Fp=function(e,t,n){e=e.toLowerCase(),t=t.toLowerCase(),n=n.getProcedureMap().getProcedures();for(const a of n){var o=a.getParameters().filter(su).map(f=>f.getVariableModel().name);if(o&&(n=o.some(f=>f.toLowerCase()===e),o=o.some(f=>f.toLowerCase()===t),n&&o))return a.getName()}return null},bd=function(e,t,n){e=e.toLowerCase(),t=t.toLowerCase(),n=n.getAllBlocks(!1);for(const a of n){if(!so(a))continue;n=a.getProcedureDef();var o=n[1];const f=o.some(E=>E.toLowerCase()===e);if(o=o.some(E=>E.toLowerCase()===t),f&&o)return n[0]}return null},ps=function(e){const t=i.createElement$$module$build$src$core$utils$xml("field");return t.setAttribute("name","VAR"),t.setAttribute("id",e.getId()),t.setAttribute("variabletype",e.type),e=i.createTextNode$$module$build$src$core$utils$xml(e.name),t.appendChild(e),t},i.getOrCreateVariablePackage$$module$build$src$core$variables=function(e,t,n,o){let a=i.getVariable$$module$build$src$core$variables(e,t,n,o);return a||(a=yd(e,t,n,o)),a},i.getVariable$$module$build$src$core$variables=function(e,t,n,o){const a=e.getPotentialVariableMap();let f=null;if(t&&(f=e.getVariableById(t),!f&&a&&(f=a.getVariableById(t)),f))return f;if(n){if(o===void 0)throw Error("Tried to look up a variable by name without a type");f=e.getVariable(n,o),!f&&a&&(f=a.getVariable(n,o))}return f},yd=function(e,t,n,o){const a=e.getPotentialVariableMap();return n||(n=ds(e.isFlyout?e.targetWorkspace:e)),a?a.createVariable(n,o,t):e.createVariable(n,o,t)},iu=function(e,t){e=e.getAllVariables();const n=[];if(t.length!==e.length)for(let o=0;o<e.length;o++){const a=e[o];t.includes(a)||n.push(a)}return n},yn=function(e,{addCoordinates:t=!1,addInputBlocks:n=!0,addNextBlocks:o=!0,doFullSerialization:a=!0,saveIds:f=!0}={}){if(e.isInsertionMarker())return null;const E={type:e.type,id:f?e.id:void 0};return t&&lo(e,E),al(e,E),ou(e,E,a),Up(e,E,a),Hp(e,E,a),n&&Rc(e,E,a,f),o&&lu(e,E,a,f),E},al=function(e,t){e.isCollapsed()&&(t.collapsed=!0),e.isEnabled()||(t.disabledReasons=Array.from(e.getDisabledReasons())),e.isOwnDeletable()||(t.deletable=!1),e.isOwnMovable()||(t.movable=!1),e.isOwnEditable()||(t.editable=!1),e.inputsInline!==void 0&&e.inputsInline!==e.inputsInlineDefault&&(t.inline=e.inputsInline),e.data&&(t.data=e.data)},lo=function(e,t){const n=e.workspace;e=e.getRelativeToSurfaceXY(),t.x=Math.round(n.RTL?n.getWidth()-e.x:e.x),t.y=Math.round(e.y)},ou=function(e,t,n){e.saveExtraState?(e=e.saveExtraState(n),e!==null&&(t.extraState=e)):e.mutationToDom&&(e=e.mutationToDom(),e!==null&&(t.extraState=Fn(e).replace(' xmlns="https://developers.google.com/blockly/xml"',"")))},Up=function(e,t,n){const o=Object.create(null);for(const a of e.getIcons())bi(a)&&(e=a.saveState(n))&&(o[a.getType().toString()]=e);Object.keys(o).length&&(t.icons=o)},Hp=function(e,t,n){const o=Object.create(null);for(let a=0;a<e.inputList.length;a++){const f=e.inputList[a];for(let E=0;E<f.fieldRow.length;E++){const w=f.fieldRow[E];w.isSerializable()&&(o[w.name]=w.saveState(n))}}Object.keys(o).length&&(t.fields=o)},Rc=function(e,t,n,o){const a=Object.create(null);for(let f=0;f<e.inputList.length;f++){const E=e.inputList[f];if(!E.connection)continue;const w=uu(E.connection,n,o);w&&(a[E.name]=w)}Object.keys(a).length&&(t.inputs=a)},lu=function(e,t,n,o){e.nextConnection&&(e=uu(e.nextConnection,n,o))&&(t.next=e)},uu=function(e,t,n){const o=e.getShadowState(!0);if(e=e.targetBlock(),!o&&!e)return null;const a=Object.create(null);return o&&(a.shadow=o),e&&!e.isShadow()&&(a.block=yn(e,{doFullSerialization:t,saveIds:n})),a},gs=function(e,t,{recordUndo:n=!1}={}){return e=ur(e,t,{recordUndo:n}),t.rendered&&Sr(),e},ur=function(e,t,{parentConnection:n,isShadow:o=!1,recordUndo:a=!1}={}){const f=$e();i.setRecordUndo$$module$build$src$core$events$utils(a),(a=i.getGroup$$module$build$src$core$events$utils())||i.setGroup$$module$build$src$core$events$utils(!0),i.disable$$module$build$src$core$events$utils();const E=t.getAllVariables();let w;try{w=cu(e,t,{parentConnection:n,isShadow:o})}finally{i.enable$$module$build$src$core$events$utils()}if(au(t,E),Re()&&ce(new(X(z.BLOCK_CREATE))(w)),i.setGroup$$module$build$src$core$events$utils(a),i.setRecordUndo$$module$build$src$core$events$utils(f),t.rendered){const q=w;setTimeout(()=>{q.disposed||q.setConnectionTracking(!0)},1)}return w},cu=function(e,t,{parentConnection:n,isShadow:o=!1}={}){if(!e.type)throw new Wh(e);const a=t.newBlock(e.type,e.id);return a.setShadow(o),vd(a,e),du(a,e),hu(a,e),Sd(n,a,e),Qn(a,e),uo(a,e),Lc(a,e),dl(a,e),Ac(a,t.rendered),a},au=function(e,t){if(Re())for(e=iu(e,t),t=0;t<e.length;t++){const n=e[t];ce(new(X(z.VAR_CREATE))(n))}},vd=function(e,t){let n=t.x===void 0?0:t.x;t=t.y===void 0?0:t.y;const o=e.workspace;n=o.RTL?o.getWidth()-n:n,e.moveBy(n,t)},du=function(e,t){if(t.collapsed&&e.setCollapsed(!0),t.deletable===!1&&e.setDeletable(!1),t.movable===!1&&e.setMovable(!1),t.editable===!1&&e.setEditable(!1),t.enabled===!1&&e.setDisabledReason(!0,kn),Array.isArray(t.disabledReasons))for(const n of t.disabledReasons)e.setDisabledReason(!0,n);t.inline!==void 0&&e.setInputsInline(t.inline),t.data!==void 0&&(e.data=t.data)},hu=function(e,t){t.extraState&&(e.loadExtraState?e.loadExtraState(t.extraState):e.domToMutation&&e.domToMutation(i.textToDom$$module$build$src$core$utils$xml(t.extraState)))},Sd=function(e,t,n){if(e){if(e.getSourceBlock().isShadow()&&!t.isShadow())throw new og(n);if(e.type===i.inputTypes$$module$build$src$core$inputs$input_types.VALUE){var o=t.outputConnection;if(!o)throw new Go("output",t,n)}else if(o=t.previousConnection,!o)throw new Go("previous",t,n);if(!e.connect(o)){const a=t.workspace.connectionChecker;throw new lc(a.getErrorMessage(a.canConnectWithReason(o,e,!1),o,e),e.type===i.inputTypes$$module$build$src$core$inputs$input_types.VALUE?"output connection":"previous connection",t,n)}}},Qn=function(e,t){if(t.icons){var n=Object.keys(t.icons);for(const a of n){n=t.icons[a];var o=e.getIcon(a);if(!o){if(o=S(ne.ICON,a,!1),!o)throw new lg(a,e,t);o=new o(e),e.addIcon(o)}bi(o)&&o.loadState(n)}}},uo=function(e,t){if(t.fields){var n=Object.keys(t.fields);for(let o=0;o<n.length;o++){const a=n[o],f=t.fields[a],E=e.getField(a);E?E.loadState(f):console.warn(`Ignoring non-existant field ${a} in block ${e.type}`)}}},Lc=function(e,t){if(t.inputs){var n=Object.keys(t.inputs);for(let o=0;o<n.length;o++){const a=n[o],f=e.getInput(a);if(!f||!f.connection)throw new Go(a,e,t);Cd(f.connection,t.inputs[a])}}},dl=function(e,t){if(t.next){if(!e.nextConnection)throw new Go("next",e,t);Cd(e.nextConnection,t.next)}},Cd=function(e,t){t.shadow&&e.setShadowState(t.shadow),t.block&&cu(t.block,e.getSourceBlock().workspace,{parentConnection:e})},Ac=function(e,t){if(t){e.setConnectionTracking(!1),e.initSvg(),e.queueRender();for(const n of e.getIcons())n.onLocationChange(e.getRelativeToSurfaceXY())}else e.initModel()},vi=function(e){return e.bubbleIsVisible!==void 0&&e.setBubbleVisible!==void 0},Si=function(e){return e*Math.PI/180},pu=function(e){return 180*e/Math.PI},co=function(e,t,n){if(n<e){const o=n;n=e,e=o}return Math.max(e,Math.min(t,n))},Id=function(){document.querySelector(".blocklyDropDownDiv")||(st=document.createElement("div"),st.className="blocklyDropDownDiv",(we()||document.body).appendChild(st),_r=document.createElement("div"),_r.className="blocklyDropDownContent",st.appendChild(_r),As=document.createElement("div"),As.className="blocklyDropDownArrow",st.appendChild(As),st.style.opacity="0",st.style.transition="transform "+uc+"s, opacity "+uc+"s",st.addEventListener("focusin",function(){ke(st,"blocklyFocused")}),st.addEventListener("focusout",function(){v(st,"blocklyFocused")}))},kd=function(e){ui=e},wd=function(){return rs},hl=function(){return _r},Dc=function(){_r.textContent="",_r.style.width=""},Od=function(e,t){st.style.backgroundColor=e,st.style.borderColor=t},Gp=function(e,t,n,o){return Ad(Ld(t),e,n,o)},Rd=function(e,t,n){return Ua=!0,Ad(Mc(e),e,t,n)},Ld=function(e){var t=e.getSvgRoot();const n=e.workspace.scale,o=e.height*n;return e=e.width*n,t=Jn(t),new ct(t.y,t.y+o,t.x,t.x+e)},Mc=function(e){return e=e.getScaledBBox(),new ct(e.top,e.bottom,e.left,e.right)},Ad=function(e,t,n,o){const a=e.left+(e.right-e.left)/2,f=e.bottom;e=e.top,o&&(e+=o),o=t.getSourceBlock();let E=o.workspace;for(;E.options.parentWorkspace;)E=E.options.parentWorkspace;return kd(E.getParentSvg().parentNode),Dd(t,o.RTL,a,f,a,e,n)},Dd=function(e,t,n,o,a,f,E){return rs=e,Vo=E||null,st.style.direction=t?"rtl":"ltr",e=Pe(),wn=e.getRenderer().getClassName(),Gi=e.getTheme().getClassName(),wn&&ke(st,wn),Gi&&ke(st,Gi),Pd(n,o,a,f)},Md=function(e,t,n,o){return e=gu(e,n.left,n.right,o.width),{initialX:e.divX,initialY:t,finalX:e.divX,finalY:t+Xh,arrowX:e.arrowX,arrowY:-9,arrowAtTop:!0,arrowVisible:!0}},Nd=function(e,t,n,o){return e=gu(e,n.left,n.right,o.width),{initialX:e.divX,initialY:t-o.height,finalX:e.divX,finalY:t-o.height-Xh,arrowX:e.arrowX,arrowY:o.height-2*jh-Ba/2,arrowAtTop:!1,arrowVisible:!0}},Nc=function(e,t,n){return e=gu(e,t.left,t.right,n.width),{initialX:e.divX,initialY:0,finalX:e.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},gu=function(e,t,n,o){return t=co(t,e-o/2,n-o),e=e-Ba/2-t,n=ug,e=co(n,e,o-n-Ba),{arrowX:e,divX:t}},xd=function(){return!!rs},xc=function(e,t){return rs===e?(t?fs():fu(),!0):!1},fu=function(){st.style.transform="translate(0, 0)",st.style.opacity="0",Fa=setTimeout(function(){fs()},1e3*uc),Vo&&(Vo(),Vo=null)},fs=function(){xd()&&(Fa&&clearTimeout(Fa),st.style.transform="",st.style.left="",st.style.top="",st.style.opacity="0",st.style.display="none",st.style.backgroundColor="",st.style.borderColor="",Vo&&(Vo(),Vo=null),Dc(),rs=null,wn&&(v(st,wn),wn=""),Gi&&(v(st,Gi),Gi=""),Pe().markFocused())},Pd=function(e,t,n,o){e=cc.getPositionMetrics(e,t,n,o),e.arrowVisible?(As.style.display="",As.style.transform="translate("+e.arrowX+"px,"+e.arrowY+"px) rotate(45deg)",As.setAttribute("class",e.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):As.style.display="none",t=Math.floor(e.initialX),n=Math.floor(e.initialY),o=Math.floor(e.finalX);const a=Math.floor(e.finalY);return st.style.left=t+"px",st.style.top=n+"px",st.style.display="block",st.style.opacity="1",st.style.transform="translate("+(o-t)+"px,"+(a-n)+"px)",!!e.arrowAtTop},Bd=function(){if(rs){var e=rs.getSourceBlock();e=Ua?Mc(rs):Ld(e);const t=e.left+(e.right-e.left)/2;Pd(t,e.bottom,t,e.top)}else fu()},$u=function(e){return e.length?e.reduce(function(t,n){return t.length<n.length?t:n}).length:0},Fd=function(e,t){if(!e.length)return 0;if(e.length===1)return e[0].length;let n=0;t=t||$u(e);let o;for(o=0;o<t;o++){for(var a=e[0][o],f=1;f<e.length;f++)if(a!==e[f][o])return n;a===" "&&(n=o+1)}for(a=1;a<e.length;a++)if((f=e[a][o])&&f!==" ")return n;return t},Ud=function(e,t){if(!e.length)return 0;if(e.length===1)return e[0].length;let n=0;t=t||$u(e);let o;for(o=0;o<t;o++){for(var a=e[0].substr(-o-1,1),f=1;f<e.length;f++)if(a!==e[f].substr(-o-1,1))return n;a===" "&&(n=o+1)}for(a=1;a<e.length;a++)if((f=e[a].charAt(e[a].length-o-1))&&f!==" ")return n;return t},i.wrap$$module$build$src$core$utils$string=function(e,t){e=e.split(`
`);for(let n=0;n<e.length;n++)e[n]=Vp(e[n],t);return e.join(`
`)},Vp=function(e,t){if(e.length<=t)return e;const n=e.trim().split(/\s+/);for(var o=0;o<n.length;o++)n[o].length>t&&(t=n[o].length);var a=-1/0;let f,E=1;do{o=a,f=e,e=[],a=n.length/E;let w=1;for(let q=0;q<n.length-1;q++)w<(q+1.5)/a?(w++,e[q]=!0):e[q]=!1;e=ao(n,e,t),a=pl(n,e,t),e=Wp(n,e),E++}while(a>o);return f},pl=function(e,t,n){const o=[0],a=[];for(var f=0;f<e.length;f++)o[o.length-1]+=e[f].length,t[f]===!0?(o.push(0),a.push(e[f].charAt(e[f].length-1))):t[f]===!1&&o[o.length-1]++;for(e=Math.max(...o),t=0,f=0;f<o.length;f++)t-=2*Math.pow(Math.abs(n-o[f]),1.5),t-=Math.pow(e-o[f],1.5),".?!".includes(a[f])?t+=n/3:",;)]}".includes(a[f])&&(t+=n/4);return 1<o.length&&o[o.length-1]<=o[o.length-2]&&(t+=.5),t},ao=function(e,t,n){let o=pl(e,t,n),a;for(let f=0;f<t.length-1;f++){if(t[f]===t[f+1])continue;const E=[].concat(t);E[f]=!E[f],E[f+1]=!E[f+1];const w=pl(e,E,n);w>o&&(o=w,a=E)}return a?ao(e,a,n):t},Wp=function(e,t){const n=[];for(let o=0;o<e.length;o++)n.push(e[o]),t[o]!==void 0&&n.push(t[o]?`
`:" ");return n.join("")},i.isNumber$$module$build$src$core$utils$string=function(e){return/^\s*-?\d+(\.\d+)?\s*$/.test(e)},Hd=function(e){ac=e},Gd=function(){return ac},Vd=function(){return Hl},Wd=function(){return xt},ho=function(e){if(e=Ci(e)){for(e=e.tooltip;typeof e=="function";)e=e();if(typeof e!="string")throw Error("Tooltip function must return a string.");return e}return""},Ci=function(e){for(;e&&e.tooltip;){if(typeof e.tooltip=="string"||typeof e.tooltip=="function")return e;e=e.tooltip}return null},zd=function(){document.querySelector(".blocklyTooltipDiv")||(xt=document.createElement("div"),xt.className="blocklyTooltipDiv",(we()||document.body).appendChild(xt))},gl=function(e){e.mouseOverWrapper_=nt(e,"pointerover",null,jd),e.mouseOutWrapper_=nt(e,"pointerout",null,Xd),e.addEventListener("pointermove",po,!1)},Pc=function(e){e&&(et(e.mouseOverWrapper_),et(e.mouseOutWrapper_),e.removeEventListener("pointermove",po))},jd=function(e){ci||(e=Ci(e.currentTarget),Xn!==e&&(Ks(),zo=null,Xn=e),clearTimeout(Kh))},Xd=function(e){ci||(Kh=setTimeout(function(){zo=Xn=null,Ks()},1),clearTimeout(ai),ai=0)},po=function(e){if(Xn&&Xn.tooltip&&!ci)if(Hl){const t=Ha-e.pageX;e=hc-e.pageY,Math.sqrt(t*t+e*e)>cg&&Ks()}else zo!==Xn&&(clearTimeout(ai),Ha=e.pageX,hc=e.pageY,ai=setTimeout(Jd,pc))},go=function(){zo=Xn=null,Ks()},Ks=function(){Hl&&(Hl=!1,xt&&(xt.style.display="none")),ai&&(clearTimeout(ai),ai=0)},fl=function(){Ks(),ci=!0},Kd=function(){ci=!1},Yd=function(){xt&&Xn&&(typeof ac=="function"?ac(xt,Xn):Bc())},Bc=function(){var e=ho(Xn);e=i.wrap$$module$build$src$core$utils$string(e,dc),e=e.split(`
`);for(let t=0;t<e.length;t++){const n=document.createElement("div");n.appendChild(document.createTextNode(e[t])),xt.appendChild(n)}},Fc=function(e){const t=document.documentElement.clientWidth,n=document.documentElement.clientHeight;let o=Ha;o=e?o-(Gl+xt.offsetWidth):o+Gl;let a=hc+Ga;return a+xt.offsetHeight>n+window.scrollY&&(a-=xt.offsetHeight+2*Ga),e?o=Math.max(Va-window.scrollX,o):o+xt.offsetWidth>t+window.scrollX-2*Va&&(o=t-xt.offsetWidth-2*Va),{x:o,y:a}},Jd=function(){if(!ci&&(zo=Xn,xt)){xt.textContent="",Yd();var e=Xn.RTL;xt.style.direction=e?"rtl":"ltr",xt.style.display="block",Hl=!0;var{x:t,y:n}=Fc(e);xt.style.left=t+"px",xt.style.top=n+"px"}},Uc=function(){return Vl},qd=function(e){Vl=e},Qd=function(){return r},zp=function(e){r=e},fo=function(e){e=`${e}`.toLowerCase().trim();var t=s[e];if(t||(t=e.substring(0,2)==="0x"?"#"+e.substring(2):e,t=t[0]==="#"?t:"#"+t,/^#[0-9a-f]{6}$/.test(t)))return t;if(/^#[0-9a-f]{3}$/.test(t))return["#",t[1],t[1],t[2],t[2],t[3],t[3]].join("");var n=e.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return n&&(e=Number(n[1]),t=Number(n[2]),n=Number(n[3]),0<=e&&256>e&&0<=t&&256>t&&0<=n&&256>n)?mu(e,t,n):null},mu=function(e,t,n){return t=e<<16|t<<8|n,16>e?"#"+(16777216|t).toString(16).substr(1):"#"+t.toString(16)},Hc=function(e){return e=fo(e),e?(e=parseInt(e.substr(1),16),[e>>16,e>>8&255,e&255]):[0,0,0]},Zn=function(e,t,n){let o=0,a=0,f=0;if(t===0)f=a=o=n;else{const E=Math.floor(e/60),w=e/60-E;e=n*(1-t);const q=n*(1-t*w);switch(t=n*(1-t*(1-w)),E){case 1:o=q,a=n,f=e;break;case 2:o=e,a=n,f=t;break;case 3:o=e,a=q,f=n;break;case 4:o=t,a=e,f=n;break;case 5:o=n,a=e,f=q;break;case 6:case 0:o=n,a=t,f=e}}return mu(Math.floor(o),Math.floor(a),Math.floor(f))},Vr=function(e,t,n){return e=fo(e),!e||(t=fo(t),!t)?null:(e=Hc(e),t=Hc(t),mu(Math.round(t[0]+n*(e[0]-t[0])),Math.round(t[1]+n*(e[1]-t[1])),Math.round(t[2]+n*(e[2]-t[2]))))},Gc=function(e){return Zn(e,Vl,255*r)},_u=function(e,t,n){const o=[];var a=e.split("");a.push("");var f=0;e=[];let E=null;for(let Se=0;Se<a.length;Se++){var w=a[Se];if(f===0)if(w==="%")(f=e.join(""))&&o.push(f),e.length=0,f=1;else if(n&&w===`
`){const Rt=e.join("");Rt&&o.push(Rt),e.length=0,o.push(w)}else e.push(w);else if(f===1)w==="%"?(e.push(w),f=0):t&&"0"<=w&&"9">=w?(f=2,E=w,(w=e.join(""))&&o.push(w),e.length=0):w==="{"?f=3:(e.push("%",w),f=0);else if(f===2)if("0"<=w&&"9">=w)E+=w;else{var q=void 0;o.push(parseInt((q=E)!=null?q:"",10)),Se--,f=0}else f===3&&(w===""?(e.splice(0,0,"%{"),Se--,f=0):w!=="}"?e.push(w):(f=e.join(""),/[A-Z]\w*/i.test(f)?(w=f.toUpperCase(),(w=w.startsWith("BKY_")?w.substring(4):null)&&w in i.Msg$$module$build$src$core$msg?(f=i.Msg$$module$build$src$core$msg[w],typeof f=="string"?Array.prototype.push.apply(o,_u(f,t,n)):t?o.push(`${f}`):o.push(f)):o.push("%{"+f+"}")):o.push("%{"+f+"}"),f=e.length=0))}for((t=e.join(""))&&o.push(t),q=[],e.length=0,a=0;a<o.length;a++)typeof o[a]!="string"||n&&o[a]===`
`?((t=e.join(""))&&q.push(t),e.length=0,q.push(o[a])):e.push(o[a]);return(t=e.join(""))&&q.push(t),e.length=0,q},Vc=function(e){return _u(e,!0,!0)},Ut=function(e){return typeof e!="string"?e:(e=_u(e,!1,!1),e.length?String(e[0]):"")},Wc=function(e){let t=!0;const n=i.Msg$$module$build$src$core$msg,o=e.match(/%{BKY_[A-Z]\w*}/gi);if(o)for(let a=0;a<o.length;a++){const f=o[a].toUpperCase();n[f.slice(6,-1)]===void 0&&(console.warn("No message string for "+o[a]+" in "+e),t=!1)}return t},$l=function(e){const t=typeof e=="string"?Ut(e):e;var n=Number(t);if(!isNaN(n)&&0<=n&&360>=n)return{hue:n,hex:Zn(n,Uc(),255*Qd())};if(n=fo(t))return{hue:null,hex:n};throw n='Invalid colour: "'+t+'"',e!==t&&(n+=' (from "'+e+'")'),Error(n)},$o=function(){return re},mo=function(e){if(re=e,e===null){let t;(t=document.querySelector("."+j))==null||t.remove()}},Tu=function(){const e=we()||document.body;document.querySelector("."+j)?re=document.querySelector("."+j):(re=document.createElement("div"),re.className=j),e.appendChild(re)},Ii=function(e,t,n,o){if(ki(),T=e,A=n,n=re){if(n.style.direction=t?"rtl":"ltr",n.style.display="block",!o&&e instanceof g){let E;o=(E=e.getSourceBlock())==null?void 0:E.workspace}var a;I=(a=o)!=null?a:null;var f;e=(f=o)!=null?f:Pe(),ie=e.getRenderer().getClassName(),de=e.getTheme().getClassName(),ie&&ke(n,ie),de&&ke(n,de)}},ki=function(){if(zc()){T=null;var e=re;e&&(e.style.display="none",e.style.left="",e.style.top="",A&&A(),A=null,e.textContent="",ie&&(v(e,ie),ie=""),de&&(v(e,de),de=""),Pe().markFocused())}},zc=function(){return!!T},$s=function(e){T===e&&ki()},ms=function(e){I!==null&&I!==e||ki()},Eu=function(e,t,n){re.style.left=e+"px",re.style.top=t+"px",re.style.height=n+"px"},jc=function(e,t,n,o){const a=Zd(e,t,n);e=bu(e,t,n,o),0>a?Eu(e,0,n.height+a):Eu(e,a,n.height)},bu=function(e,t,n,o){return o?Math.min(Math.max(t.right-n.width,e.left),e.right-n.width):Math.max(Math.min(t.left,e.right-n.width),e.left)},Zd=function(e,t,n){return t.bottom+n.height>=e.bottom?t.top-n.height:t.bottom},eh=function(e){return!(e==null||!e.repositionForWindowResize)},Xc=function(){eh(T)&&T.repositionForWindowResize()||ki()},th=function(){return Oe},Kc=function(e){Oe=e},ml=function(e,t,n,o){if(Ii(De,n,_o,o),t.length){var a=Ys(t,n,e);Pt=a,Yc(a,e,n),setTimeout(function(){a.focus()},1),Oe=null}else yu()},Ys=function(e,t,n){const o=new tc;o.setRole($r.MENU);for(let a=0;a<e.length;a++){const f=e[a],E=new Pi(f.text);E.setRightToLeft(t),E.setRole($r.MENUITEM),o.addChild(E),E.setEnabled(f.enabled),f.enabled&&E.onAction(function(){yu(),requestAnimationFrame(()=>{setTimeout(()=>{f.callback(f.scope,n)},0)})},{})}return o},Yc=function(e,t,n){const o=un();t=new ct(t.clientY+o.top,t.clientY+o.top,t.clientX+o.left,t.clientX+o.left),Jc(e);const a=e.getSize();n&&(t.left+=a.width,t.right+=a.width,o.left+=a.width,o.right+=a.width),jc(o,t,a,n),e.focus()},Jc=function(e){var t=$o();if(!t)throw Error("Attempting to create a context menu when widget div is null");t=e.render(t),ke(t,"blocklyContextMenu"),Le(t,"contextmenu",null,jp),e.focus()},jp=function(e){e.preventDefault(),e.stopPropagation()},yu=function(){$s(De),Oe=null},_o=function(){Pt&&(Pt.dispose(),Pt=null)},i.callbackFactory$$module$build$src$core$contextmenu=function(e,t){return()=>{i.disable$$module$build$src$core$events$utils();let n;try{n=t instanceof Element?_s(t,e.workspace):ur(t,e.workspace);const o=e.getRelativeToSurfaceXY();o.x=e.RTL?o.x-i.config$$module$build$src$core$config.snapRadius:o.x+i.config$$module$build$src$core$config.snapRadius,o.y+=2*i.config$$module$build$src$core$config.snapRadius,n.moveBy(o.x,o.y)}finally{i.enable$$module$build$src$core$events$utils()}return Re()&&!n.isShadow()&&ce(new(X(z.BLOCK_CREATE))(n)),i.setSelected$$module$build$src$core$common(n),n}},nh=function(e,t){return t=dn(t,e.getParentSvg(),e.getInverseScreenCTM()),t.x/=e.scale,t.y/=e.scale,t},vu=function(e,t,n){t=nh(e,t),He.set(e,ae.difference(n,t))},Su=function(e,t){if(t=nh(e,t),e=He.get(e),!e)throw Error("Drag not initialized");return ae.sum(e,t)},bt=function(e,t=!1){const n=i.createElement$$module$build$src$core$utils$xml("xml");var o=_l(i.allUsedVarModels$$module$build$src$core$variables(e));o.hasChildNodes()&&n.appendChild(o);for(const a of e.getTopComments())n.appendChild(To(a,t));for(e=e.getTopBlocks(!0),o=0;o<e.length;o++)n.appendChild(Js(e[o],t));return n},To=function(e,t=!1){const n=i.createElement$$module$build$src$core$utils$xml("comment");t||n.setAttribute("id",e.id),t=e.workspace;const o=e.getRelativeToSurfaceXY();return o.x=t.RTL?t.getWidth()-o.x:o.x,n.setAttribute("x",`${o.x}`),n.setAttribute("y",`${o.y}`),n.setAttribute("w",`${e.getSize().width}`),n.setAttribute("h",`${e.getSize().height}`),e.getText()&&(n.textContent=e.getText()),e.isCollapsed()&&n.setAttribute("collapsed","true"),e.isOwnEditable()||n.setAttribute("editable","false"),e.isOwnMovable()||n.setAttribute("movable","false"),e.isOwnDeletable()||n.setAttribute("deletable","false"),n},_l=function(e){const t=i.createElement$$module$build$src$core$utils$xml("variables");for(let n=0;n<e.length;n++){const o=e[n],a=i.createElement$$module$build$src$core$utils$xml("variable");a.appendChild(i.createTextNode$$module$build$src$core$utils$xml(o.name)),o.type&&a.setAttribute("type",o.type),a.id=o.getId(),t.appendChild(a)}return t},Js=function(e,t){if(e.isInsertionMarker()&&(e=e.getChildren(!1)[0],!e))return new DocumentFragment;let n=0;if(e.workspace.RTL&&(n=e.workspace.getWidth()),t=Cr(e,t),wi(t)){const o=e.getRelativeToSurfaceXY();t.setAttribute("x",String(Math.round(e.workspace.RTL?n-o.x:o.x))),t.setAttribute("y",String(Math.round(o.y)))}return t},rh=function(e){if(e.isSerializable()){const t=i.createElement$$module$build$src$core$utils$xml("field");return t.setAttribute("name",e.name||""),e.toXml(t)}return null},qc=function(e,t){for(let n=0;n<e.inputList.length;n++){const o=e.inputList[n];for(let a=0;a<o.fieldRow.length;a++){const f=rh(o.fieldRow[a]);f&&t.appendChild(f)}}},Cr=function(e,t){if(e.isInsertionMarker())return(t=e.getChildren(!1)[0])?Cr(t):new DocumentFragment;const n=i.createElement$$module$build$src$core$utils$xml(e.isShadow()?"shadow":"block");if(n.setAttribute("type",e.type),t||(n.id=e.id),e.mutationToDom){var o=e.mutationToDom();o&&(o.hasChildNodes()||o.hasAttributes())&&n.appendChild(o)}if(qc(e,n),o=e.getCommentText()){var a=e.getIcon(rn.COMMENT),f=a.getBubbleSize();a=a.bubbleIsVisible();var E=i.createElement$$module$build$src$core$utils$xml("comment");E.appendChild(i.createTextNode$$module$build$src$core$utils$xml(o)),E.setAttribute("pinned",`${a}`),E.setAttribute("h",String(f.height)),E.setAttribute("w",String(f.width)),n.appendChild(E)}for(e.data&&(o=i.createElement$$module$build$src$core$utils$xml("data"),o.appendChild(i.createTextNode$$module$build$src$core$utils$xml(e.data)),n.appendChild(o)),o=0;o<e.inputList.length;o++){f=e.inputList[o];var w=void 0;if(a=!0,f.type!==i.inputTypes$$module$build$src$core$inputs$input_types.DUMMY&&f.type!==i.inputTypes$$module$build$src$core$inputs$input_types.END_ROW){E=f.connection.targetBlock(),f.type===i.inputTypes$$module$build$src$core$inputs$input_types.VALUE?w=i.createElement$$module$build$src$core$utils$xml("value"):f.type===i.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT&&(w=i.createElement$$module$build$src$core$utils$xml("statement"));const Se=f.connection.getShadowDom();!Se||E&&E.isShadow()||w.appendChild(Tl(Se,t)),E&&(E=Cr(E,t),E.nodeType===pr.ELEMENT_NODE&&(w.appendChild(E),a=!1)),w.setAttribute("name",f.name),a||n.appendChild(w)}}e.inputsInline!==void 0&&e.inputsInline!==e.inputsInlineDefault&&n.setAttribute("inline",String(e.inputsInline)),e.isCollapsed()&&n.setAttribute("collapsed","true"),e.isEnabled()||n.setAttribute("disabled-reasons",Array.from(e.getDisabledReasons()).map(encodeURIComponent).join(",")),e.isOwnDeletable()||n.setAttribute("deletable","false"),e.isOwnMovable()||n.setAttribute("movable","false"),e.isOwnEditable()||n.setAttribute("editable","false"),w=e.getNextBlock();let q;return w&&(o=Cr(w,t),o.nodeType===pr.ELEMENT_NODE&&(q=i.createElement$$module$build$src$core$utils$xml("next"),q.appendChild(o),n.appendChild(q))),e=e.nextConnection&&e.nextConnection.getShadowDom(),!e||w&&w.isShadow()||q.appendChild(Tl(e,t)),n},Tl=function(e,t){let n=e=e.cloneNode(!0),o;for(;n;)if(t&&n.nodeName==="shadow"&&n.removeAttribute("id"),n.firstChild)n=n.firstChild;else{for(;n&&!n.nextSibling;){o=n,n=n.parentNode;let a;o.nodeType===pr.TEXT_NODE&&o.data.trim()===""&&((a=n)==null?void 0:a.firstChild)!==o&&x(o)}n&&(o=n,n=n.nextSibling,o.nodeType===pr.TEXT_NODE&&o.data.trim()===""&&x(o))}return e},Fn=function(e){return il(e).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},sh=function(e){e=Fn(e).split("<");let t="";for(let n=1;n<e.length;n++){const o=e[n];o[0]==="/"&&(t=t.substring(2)),e[n]=t+"<"+o,o[0]!=="/"&&o.slice(-2)!=="/>"&&(t+="  ")}return e=e.join(`
`),e=e.replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>"),e.replace(/^\n/,"")},Xp=function(e,t){return t.setResizesEnabled(!1),t.clear(),e=i.domToWorkspace$$module$build$src$core$xml(e,t),t.setResizesEnabled(!0),e},i.domToWorkspace$$module$build$src$core$xml=function(e,t){let n=0;t.RTL&&(n=t.getWidth());const o=[];Ln();const a=i.getGroup$$module$build$src$core$events$utils();a||i.setGroup$$module$build$src$core$events$utils(!0),t.setResizesEnabled&&t.setResizesEnabled(!1);let f=!0;try{for(let E=0,w;w=e.childNodes[E];E++){const q=w.nodeName.toLowerCase(),Se=w;if(q==="block"||q==="shadow"&&!$e()){const Rt=_s(Se,t);o.push(Rt.id);let Ct;const Nr=parseInt((Ct=Se.getAttribute("x"))!=null?Ct:"10",10);let td;const ap=parseInt((td=Se.getAttribute("y"))!=null?td:"10",10);isNaN(Nr)||isNaN(ap)||Rt.moveBy(t.RTL?n-Nr:Nr,ap,["create"]),f=!1}else{if(q==="shadow")throw TypeError("Shadow block cannot be a top-level block.");if(q==="comment")ih(Se,t);else if(q==="variables"){if(f)El(Se,t);else throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");f=!1}}}}finally{i.setGroup$$module$build$src$core$events$utils(a),t.setResizesEnabled&&t.setResizesEnabled(!0),t.rendered&&Sr(),Ur()}return ce(new(X(z.FINISHED_LOADING))(t)),o},ih=function(e,t){var n;const o=(n=e.getAttribute("id"))!=null?n:void 0;n=t.rendered?new tt(t,o):new en(t,o);var a;n.setText((a=e.textContent)!=null?a:"");var f;a=parseInt((f=e.getAttribute("x"))!=null?f:"",10);let E;f=parseInt((E=e.getAttribute("y"))!=null?E:"",10),isNaN(a)||isNaN(f)||(a=t.RTL?t.getWidth()-a:a,n.moveTo(new ae(a,f)));var w;t=parseInt((w=e.getAttribute("w"))!=null?w:"",10);let q;return w=parseInt((q=e.getAttribute("h"))!=null?q:"",10),isNaN(t)||isNaN(w)||n.setSize(new oe(t,w)),e.getAttribute("collapsed")==="true"&&n.setCollapsed(!0),e.getAttribute("editable")==="false"&&n.setEditable(!1),e.getAttribute("movable")==="false"&&n.setMovable(!1),e.getAttribute("deletable")==="false"&&n.setDeletable(!1),n},oh=function(e,t){if(!t.getBlocksBoundingBox)return i.domToWorkspace$$module$build$src$core$xml(e,t);var n=t.getBlocksBoundingBox();if(e=i.domToWorkspace$$module$build$src$core$xml(e,t),n&&n.top!==n.bottom){var o=n.bottom;n=t.RTL?n.right:n.left;var a=1/0;let f=-1/0,E=1/0;for(let w=0;w<e.length;w++){const q=t.getBlockById(e[w]).getRelativeToSurfaceXY();q.y<E&&(E=q.y),q.x<a&&(a=q.x),q.x>f&&(f=q.x)}for(o=o-E+10,n=t.RTL?n-f:n-a,a=0;a<e.length;a++)t.getBlockById(e[a]).moveBy(n,o,["create"])}return e},i.domToBlock$$module$build$src$core$xml=function(e,t){return e=_s(e,t),t.rendered&&Sr(),e},_s=function(e,t){i.disable$$module$build$src$core$events$utils();var n=t.getAllVariables();let o;try{if(o=bl(e,t),t.rendered){const a=o,f=o.getDescendants(!1);a.setConnectionTracking(!1);for(let E=f.length-1;0<=E;E--)f[E].initSvg();for(let E=f.length-1;0<=E;E--)f[E].queueRender();setTimeout(function(){a.disposed||a.setConnectionTracking(!0)},1),t.resizeContents()}else{const a=o.getDescendants(!1);for(let f=a.length-1;0<=f;f--)a[f].initModel()}}finally{i.enable$$module$build$src$core$events$utils()}if(Re()){for(e=iu(t,n),t=0;t<e.length;t++)n=e[t],ce(new(X(z.VAR_CREATE))(n));ce(new(X(z.BLOCK_CREATE))(o))}return o},El=function(e,t){for(let o=0;o<e.children.length;o++){var n=e.children[o];const a=n.getAttribute("type"),f=n.getAttribute("id");if(n=n.textContent,!n)break;t.createVariable(n,a,f)}},Qc=function(e){const t={mutation:[],comment:[],data:[],field:[],input:[],next:[]};for(let n=0;n<e.children.length;n++){const o=e.children[n];if(o.nodeType!==pr.TEXT_NODE)switch(o.nodeName.toLowerCase()){case"mutation":t.mutation.push(o);break;case"comment":t.comment.push(o);break;case"data":t.data.push(o);break;case"title":case"field":t.field.push(o);break;case"value":case"statement":t.input.push(o);break;case"next":t.next.push(o);break;default:console.warn("Ignoring unknown tag: "+o.nodeName)}}return t},Zc=function(e,t){let n=!1;for(let o=0;o<e.length;o++){const a=e[o];t.domToMutation&&(t.domToMutation(a),t.initSvg&&(n=!0))}return n},ea=function(e,t){for(let o=0;o<e.length;o++){var n=e[o];const a=n.textContent,f=n.getAttribute("pinned")==="true";let E;const w=parseInt((E=n.getAttribute("w"))!=null?E:"50",10);let q;n=parseInt((q=n.getAttribute("h"))!=null?q:"50",10),t.setCommentText(a);const Se=t.getIcon(rn.COMMENT);isNaN(w)||isNaN(n)||Se.setBubbleSize(new oe(w,n)),Se.setBubbleVisible(f),setTimeout(()=>Se.setBubbleVisible(f),1)}},ta=function(e,t){for(let n=0;n<e.length;n++)t.data=e[n].textContent},Kp=function(e,t){for(let n=0;n<e.length;n++){const o=e[n],a=o.getAttribute("name");a?qs(t,a,o):console.warn(`Ignoring unnamed field in block ${t.type}`)}},na=function(e){let t=null,n=null;for(let o=0;o<e.childNodes.length;o++){const a=e.childNodes[o];wi(a)&&(a.nodeName.toLowerCase()==="block"?t=a:a.nodeName.toLowerCase()==="shadow"&&(n=a))}return{childBlockElement:t,childShadowElement:n}},Yp=function(e,t,n,o){for(let f=0;f<e.length;f++){var a=e[f];const E=a.getAttribute("name"),w=E?n.getInput(E):null;if(!w){console.warn("Ignoring non-existent input "+E+" in block "+o);break}if(a=na(a),a.childBlockElement){if(!w.connection)throw TypeError("Input connection does not exist.");bl(a.childBlockElement,t,w.connection,!1)}if(a.childShadowElement){let q;(q=w.connection)==null||q.setShadowDom(a.childShadowElement)}}},Jp=function(e,t,n){for(let o=0;o<e.length;o++){const a=na(e[o]);if(a.childBlockElement){if(!n.nextConnection)throw TypeError("Next statement does not exist.");if(n.nextConnection.isConnected())throw TypeError("Next statement is already connected.");bl(a.childBlockElement,t,n.nextConnection,!0)}a.childShadowElement&&n.nextConnection&&n.nextConnection.setShadowDom(a.childShadowElement)}},bl=function(e,t,n,o){var a;const f=e.getAttribute("type");if(!f)throw TypeError("Block type unspecified: "+e.outerHTML);var E=(a=e.getAttribute("id"))!=null?a:void 0;a=t.newBlock(f,E),E=Qc(e);const w=Zc(E.mutation,a);if(ea(E.comment,a),ta(E.data,a),n)if(o)if(a.previousConnection)n.connect(a.previousConnection);else throw TypeError("Next block does not have previous statement.");else if(a.outputConnection)n.connect(a.outputConnection);else if(a.previousConnection)n.connect(a.previousConnection);else throw TypeError("Child block does not have output or previous statement.");if(Kp(E.field,a),Yp(E.input,t,a,f),Jp(E.next,t,a),w&&a.initSvg(),(t=e.getAttribute("inline"))&&a.setInputsInline(t==="true"),(t=e.getAttribute("disabled"))&&a.setDisabledReason(t==="true"||t==="disabled",kn),t=e.getAttribute("disabled-reasons"),t!==null)for(var q of t.split(","))a.setDisabledReason(!0,decodeURIComponent(q));if((q=e.getAttribute("deletable"))&&a.setDeletable(q==="true"),(q=e.getAttribute("movable"))&&a.setMovable(q==="true"),(q=e.getAttribute("editable"))&&a.setEditable(q==="true"),(q=e.getAttribute("collapsed"))&&a.setCollapsed(q==="true"),e.nodeName.toLowerCase()==="shadow"){for(e=a.getChildren(!1),q=0;q<e.length;q++)if(!e[q].isShadow())throw TypeError("Shadow block not allowed non-shadow child.");a.setShadow(!0)}return a},qs=function(e,t,n){const o=e.getField(t);o?o.fromXml(n):console.warn("Ignoring non-existent field "+t+" in block "+e.type)},lh=function(e){for(let t=0;t<e.childNodes.length;t++){const n=e.childNodes[t];if(n.nodeName.toLowerCase()==="next"){e.removeChild(n);break}}},wi=function(e){return e.nodeType===pr.ELEMENT_NODE},cr=function(e){if(!(100<e.getDescendants(!1).length)){var t=e.workspace,n=e.getSvgRoot();t.getAudioManager().play("delete");var o=e.getRelativeToSurfaceXY(),a=n.cloneNode(!0);a.setAttribute("transform","translate("+o.x+","+o.y+")");var f;(f=t.getLayerManager())==null||f.appendToAnimationLayer({getSvgRoot:()=>a}),Eo(a,{x:o.x,y:o.y,width:e.width,height:e.height},t.RTL,new Date)}},Eo=function(e,t,n,o){const a=(new Date().getTime()-o.getTime())/150;1<a?x(e):(e.setAttribute("transform","translate("+(t.x+(n?-1:1)*t.width/2*a)+","+(t.y+t.height/2*a)+") scale("+(1-a)+")"),setTimeout(Eo,10,e,t,n,o))},Ir=function(e){var t=e.workspace;const n=t.scale;if(t.getAudioManager().play("click"),!(1>n)){var o=t.getSvgXY(e.getSvgRoot());e.outputConnection?(o.x+=(e.RTL?3:-3)*n,o.y+=13*n):e.previousConnection&&(o.x+=(e.RTL?-23:23)*n,o.y+=3*n);var a=J(P.CIRCLE,{cx:o.x,cy:o.y,r:0,fill:"none",stroke:"#888","stroke-width":10},t.getParentSvg());e=J(P.ANIMATE,{id:"animationCircle",begin:"indefinite",attributeName:"r",dur:"150ms",from:0,to:25*n},a),t=J(P.ANIMATE,{id:"animationOpacity",begin:"indefinite",attributeName:"opacity",dur:"150ms",from:1,to:0},a),e.beginElement(),t.beginElement(),setTimeout(()=>void x(a),150)}},Cu=function(e){if(yl(),e.workspace.getAudioManager().play("disconnect"),!(1>e.workspace.scale)){var t=e.getHeightWidth().height;t=Math.atan(10/t)/Math.PI*180,e.RTL||(t*=-1),Jh=e,uh(e,t,new Date)}},uh=function(e,t,n){const o=(new Date().getTime()-n.getTime())/200;let a="";1>=o&&(a=`skewX(${Math.round(Math.sin(o*Math.PI*3)*(1-o)*t)})`,ag=setTimeout(uh,10,e,t,n)),e.getSvgRoot().setAttribute("transform",`${e.getTranslation()} ${a}`)},yl=function(){Jh&&(ag&&(clearTimeout(ag),ag=null),Jh.getSvgRoot().setAttribute("transform",Jh.getTranslation()),Jh=null)},ar=function(e){return e.getRelativeToSurfaceXY!==void 0&&e.isMovable!==void 0&&e.startDrag!==void 0&&e.drag!==void 0&&e.endDrag!==void 0&&e.revertDrag!==void 0},dr=function(e,t){for(const n in t)e[n]=t[n]!==null&&typeof t[n]=="object"?dr(e[n]||Object.create(null),t[n]):t[n];return e},Un=function(e,t){d(ne.FIELD,e,t)},Iu=function(e){m(ne.FIELD,e)},i.fromJson$$module$build$src$core$field_registry=function(e){return Tm.fromJsonInternal(e)},ra=function(e){const t=L(ne.FIELD,e.type);return t?t.fromJson(e):(console.warn("Blockly could not create a field of type "+e.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)},i.register$$module$build$src$core$extensions=function(e,t){if(typeof e!="string"||e.trim()==="")throw Error('Error: Invalid extension name "'+e+'"');if(za[e])throw Error('Error: Extension "'+e+'" is already registered.');if(typeof t!="function")throw Error('Error: Extension "'+e+'" must be a function');za[e]=t},i.registerMixin$$module$build$src$core$extensions=function(e,t){if(!t||typeof t!="object")throw Error('Error: Mixin "'+e+'" must be a object');i.register$$module$build$src$core$extensions(e,function(){this.mixin(t)})},i.registerMutator$$module$build$src$core$extensions=function(e,t,n,o){const a='Error when registering mutator "'+e+'": ';Oi(a,t);const f=Dn(t,a);if(n&&typeof n!="function")throw Error(a+'Extension "'+e+'" is not a function');i.register$$module$build$src$core$extensions(e,function(){f&&this.setMutator(new i.MutatorIcon$$module$build$src$core$icons$mutator_icon(o||[],this)),this.mixin(t),n&&n.apply(this)})},bo=function(e){Ts(e)?delete za[e]:console.warn('No extension mapping for name "'+e+'" found to unregister')},Ts=function(e){return!!za[e]},$t=function(e,t,n){const o=za[e];if(typeof o!="function")throw Error('Error: Extension "'+e+'" not found.');let a;if(n?_t(e,t):a=Sn(t),o.apply(t),n)Oi('Error after applying mutator "'+e+'": ',t);else if(!ku(a,t))throw Error('Error when applying extension "'+e+'": mutation properties changed when applying a non-mutator extension.')},_t=function(e,t){if(Sn(t).length)throw Error('Error: tried to apply mutation "'+e+'" to a block that already has mutator functions.  Block id: '+t.id)},Qs=function(e,t){return Es(e.mutationToDom,e.domToMutation,t+" mutationToDom/domToMutation")},vn=function(e,t){return Es(e.saveExtraState,e.loadExtraState,t+" saveExtraState/loadExtraState")},Dn=function(e,t){return Es(e.compose,e.decompose,t+" compose/decompose")},Es=function(e,t,n){if(e&&t){if(typeof e!="function"||typeof t!="function")throw Error(n+" must be a function");return!0}if(!e&&!t)return!1;throw Error(n+"Must have both or neither functions")},Oi=function(e,t){const n=Qs(t,e),o=vn(t,e);if(!n&&!o)throw Error(e+"Mutations must contain either XML hooks, or JSON hooks, or both");Dn(t,e)},Sn=function(e){const t=[];return e.domToMutation!==void 0&&t.push(e.domToMutation),e.mutationToDom!==void 0&&t.push(e.mutationToDom),e.saveExtraState!==void 0&&t.push(e.saveExtraState),e.loadExtraState!==void 0&&t.push(e.loadExtraState),e.compose!==void 0&&t.push(e.compose),e.decompose!==void 0&&t.push(e.decompose),t},ku=function(e,t){if(t=Sn(t),t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(e[n]!==t[n])return!1;return!0},ch=function(e){if(typeof document!="object")throw Error("runAfterPageLoad() requires browser document.");if(document.readyState==="complete")e();else{const t=setInterval(function(){document.readyState==="complete"&&(clearInterval(t),e())},10)}},i.buildTooltipForDropdown$$module$build$src$core$extensions=function(e,t){const n=[];return function(){n.includes(this.type)||(ah(this,e,t),n.push(this.type)),this.setTooltip((function(){const o=String(this.getFieldValue(e));return Ut(t[o])}).bind(this))}},ah=function(e,t,n){var o=e.getField(t);if(o instanceof Dr&&!o.isOptionListDynamic()){o=o.getOptions();for(const[,a]of o)n[a]===void 0&&console.warn(`No tooltip mapping for value ${a} of field ${t} of block type ${e.type}.`)}},i.buildTooltipWithFieldText$$module$build$src$core$extensions=function(e,t){return function(){this.setTooltip((function(){const n=this.getField(t);return Ut(e).replace("%1",n?n.getText():"")}).bind(this))}},wu=function(){const e=this.tooltip;this.setTooltip((function(){const t=this.getParent();return t&&t.getInputsInline()&&t.tooltip||e}).bind(this))},Ae=function(e,t){return" "+e+","+t+" "},jt=function(e,t){return" "+e+t.join("")},Xt=function(e,t){return" M "+e+","+t+" "},mt=function(e,t){return" m "+e+","+t+" "},Wr=function(e,t){return" l "+e+","+t+" "},vl=function(e){return" l"+e.join("")},_e=function(e,t){return" "+e+" "+t+" "},Tt=function(e,t,n,o){return e+" "+n+" "+n+" "+t+o},Ri=function(e,t){d(ne.ICON,e.toString(),t)},Ou=function(e){m(ne.ICON,e)},zr=function(e){return e.getProcedureModel!==void 0&&e.doProcedureUpdate!==void 0&&e.isProcedureDef!==void 0},Hn=function(e){return e.startPublishing!==void 0&&e.stopPublishing!==void 0},Gn=function(e){const t=e.getProcedureMap().getProcedures().filter(o=>!o.getReturnTypes()).map(o=>[o.getName(),o.getParameters().map(a=>a.getName()),!1]);e.getBlocksByType("procedures_defnoreturn",!1).forEach(o=>{!zr(o)&&so(o)&&t.push(o.getProcedureDef())});const n=e.getProcedureMap().getProcedures().filter(o=>!!o.getReturnTypes()).map(o=>[o.getName(),o.getParameters().map(a=>a.getName()),!0]);return e.getBlocksByType("procedures_defreturn",!1).forEach(o=>{!zr(o)&&so(o)&&n.push(o.getProcedureDef())}),t.sort(Zs),n.sort(Zs),[t,n]},Zs=function(e,t){return e[0].localeCompare(t[0],void 0,{sensitivity:"base"})},i.findLegalName$$module$build$src$core$procedures=function(e,t){if(t.isInFlyout)return e;for(e=e||i.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed";!bs(e,t.workspace,t);){const n=e.match(/^(.*?)(\d+)$/);e=n?n[1]+(parseInt(n[2])+1):e+"2"}return e},bs=function(e,t,n){return!jr(e,t,n)},jr=function(e,t,n){for(const o of t.getAllBlocks(!1))if(o!==n&&so(o)&&i.Names$$module$build$src$core$names.equals(o.getProcedureDef()[0],e))return!0;n=n&&zr(n)?n==null?void 0:n.getProcedureModel():void 0;for(const o of t.getProcedureMap().getProcedures())if(o!==n&&i.Names$$module$build$src$core$names.equals(o.getName(),e))return!0;return!1},i.rename$$module$build$src$core$procedures=function(e){var t=this.getSourceBlock();if(!t)throw new $;e=e.trim();const n=i.findLegalName$$module$build$src$core$procedures(e,t);zr(t)&&!t.isInsertionMarker()&&t.getProcedureModel().setName(n);const o=this.getValue();if(o!==e&&o!==n)for(e=t.workspace.getAllBlocks(!1),t=0;t<e.length;t++){const a=e[t];a.renameProcedure&&a.renameProcedure(o,n)}return n},ys=function(e){function t(f,E){for(let q=0;q<f.length;q++){var w=f[q][0];const Se=f[q][1],Rt=i.createElement$$module$build$src$core$utils$xml("block");Rt.setAttribute("type",E),Rt.setAttribute("gap","16");const Ct=i.createElement$$module$build$src$core$utils$xml("mutation");for(Ct.setAttribute("name",w),Rt.appendChild(Ct),w=0;w<Se.length;w++){const Nr=i.createElement$$module$build$src$core$utils$xml("arg");Nr.setAttribute("name",Se[w]),Ct.appendChild(Nr)}n.push(Rt)}}const n=[];if(Wn.procedures_defnoreturn){var o=i.createElement$$module$build$src$core$utils$xml("block");o.setAttribute("type","procedures_defnoreturn"),o.setAttribute("gap","16");var a=i.createElement$$module$build$src$core$utils$xml("field");a.setAttribute("name","NAME"),a.appendChild(i.createTextNode$$module$build$src$core$utils$xml(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_PROCEDURE)),o.appendChild(a),n.push(o)}return Wn.procedures_defreturn&&(o=i.createElement$$module$build$src$core$utils$xml("block"),o.setAttribute("type","procedures_defreturn"),o.setAttribute("gap","16"),a=i.createElement$$module$build$src$core$utils$xml("field"),a.setAttribute("name","NAME"),a.appendChild(i.createTextNode$$module$build$src$core$utils$xml(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_PROCEDURE)),o.appendChild(a),n.push(o)),Wn.procedures_ifreturn&&(o=i.createElement$$module$build$src$core$utils$xml("block"),o.setAttribute("type","procedures_ifreturn"),o.setAttribute("gap","16"),n.push(o)),n.length&&n[n.length-1].setAttribute("gap","24"),e=Gn(e),t(e[0],"procedures_callnoreturn"),t(e[1],"procedures_callreturn"),n},sa=function(e){var t=[],n=e.getBlocksByType("procedures_mutatorarg",!1);for(let f=0,E;E=n[f];f++)t.push(E.getFieldValue("NAME"));n=i.createElement$$module$build$src$core$utils$xml("xml");const o=i.createElement$$module$build$src$core$utils$xml("block");o.setAttribute("type","procedures_mutatorarg");const a=i.createElement$$module$build$src$core$utils$xml("field");a.setAttribute("name","NAME"),t=yi(i.DEFAULT_ARG$$module$build$src$core$procedures,t),t=i.createTextNode$$module$build$src$core$utils$xml(t),a.appendChild(t),o.appendChild(a),n.appendChild(o),e.updateToolbox(n)},Ru=function(e){if(ve(e)&&e.bubbleType==="mutator"&&e.isOpen&&e.blockId){e=Ee(e.workspaceId).getBlockById(e.blockId);var t=e.type;(t==="procedures_defnoreturn"||t==="procedures_defreturn")&&(e=e.getIcon(i.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE).getWorkspace(),sa(e),e.addChangeListener(ia))}},ia=function(e){(k(e)||K(e)||te(e)||ue(e))&&(e=Ee(e.workspaceId),sa(e))},Vn=function(e,t){return t.getAllBlocks(!1).filter(n=>er(n,e)||Ed(n)&&i.Names$$module$build$src$core$names.equals(n.getProcedureCall(),e))},er=function(e,t){return zr(e)&&!e.isProcedureDef()&&e.getProcedureModel()&&i.Names$$module$build$src$core$names.equals(e.getProcedureModel().getName(),t)},i.mutateCallers$$module$build$src$core$procedures=function(e){const t=$e();var n=e.getProcedureDef()[0];const o=e.mutationToDom(!0);e=Vn(n,e.workspace);for(let f=0,E;E=e[f];f++){n=(n=E.mutationToDom())&&il(n),E.domToMutation&&E.domToMutation(o);var a=E.mutationToDom();a=a&&il(a),n!==a&&(i.setRecordUndo$$module$build$src$core$events$utils(!1),ce(new(X(z.BLOCK_CHANGE))(E,"mutation",null,n,a)),i.setRecordUndo$$module$build$src$core$events$utils(t))}},i.getDefinition$$module$build$src$core$procedures=function(e,t){for(const n of t.getAllBlocks(!1))if(zr(n)&&n.isProcedureDef()&&i.Names$$module$build$src$core$names.equals(n.getProcedureModel().getName(),e)||so(n)&&i.Names$$module$build$src$core$names.equals(n.getProcedureDef()[0],e))return n;return null},Et=function(e){return e.isDynamic},kr=function(e){return e.pathDown!==void 0&&e.pathUp!==void 0},dh=function(e){return e.pathLeft!==void 0&&e.pathRight!==void 0},hh=function(e,t){if(!e||!t)throw Error("Cannot connect null connections.");e.targetConnection=t,t.targetConnection=e},oa=function(e,t){let n=null;t=t.outputConnection;const o=t==null?void 0:t.getConnectionChecker();for(let a=0,f;f=e.inputList[a];a++){const E=f.connection;let w;if(E&&((w=o)!=null&&w.canConnect(t,E,!1))){if(n)return null;n=E}}return n},la=function(e,t){let n;for(;n=oa(e,t);)if(e=n.targetBlock(),!e||e.isShadow())return n;return null},ua=function(e){return e.getType!==void 0&&e.initView!==void 0&&e.dispose!==void 0&&e.getWeight!==void 0&&e.getSize!==void 0&&e.applyColour!==void 0&&e.hideForInsertionMarker!==void 0&&e.updateEditable!==void 0&&e.updateCollapsed!==void 0&&e.isShownWhenCollapsed!==void 0&&e.setOffsetInBlock!==void 0&&e.onLocationChange!==void 0&&e.onClick!==void 0},Lu=function(e){return ua(e)&&vi(e)&&bi(e)&&e.setText!==void 0&&e.getText!==void 0&&e.setBubbleSize!==void 0&&e.getBubbleSize!==void 0&&e.getType()===rn.COMMENT},Sl=function(e){let t=e.outputConnection;return(!t||e.previousConnection&&e.previousConnection.isConnected())&&(t=e.previousConnection),t},vs=function(e,t){d(ne.RENDERER,e,t)},ca=function(e){m(ne.RENDERER,e)},ph=function(e,t,n){return e=new(S(ne.RENDERER,e))(e),e.init(t,n),e},yo=function(e){hs(e.getTargetWorkspace(),void 0,"String")},Cl=function(e){hs(e.getTargetWorkspace(),void 0,"Number")},aa=function(e){hs(e.getTargetWorkspace(),void 0,"Colour")},Au=function(e){let t=[],n=document.createElement("button");return n.setAttribute("text",i.Msg$$module$build$src$core$msg.NEW_STRING_VARIABLE),n.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),t.push(n),n=document.createElement("button"),n.setAttribute("text",i.Msg$$module$build$src$core$msg.NEW_NUMBER_VARIABLE),n.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),t.push(n),n=document.createElement("button"),n.setAttribute("text",i.Msg$$module$build$src$core$msg.NEW_COLOUR_VARIABLE),n.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),t.push(n),e.registerButtonCallback("CREATE_VARIABLE_STRING",yo),e.registerButtonCallback("CREATE_VARIABLE_NUMBER",Cl),e.registerButtonCallback("CREATE_VARIABLE_COLOUR",aa),e=Li(e),t=t.concat(e)},Li=function(e){e=e.getAllVariables();const t=[];if(0<e.length){if(Wn.variables_set_dynamic){var n=e[e.length-1];const o=i.createElement$$module$build$src$core$utils$xml("block");o.setAttribute("type","variables_set_dynamic"),o.setAttribute("gap","24"),o.appendChild(ps(n)),t.push(o)}if(Wn.variables_get_dynamic){e.sort(Fl.compareByName);for(let o=0,a;a=e[o];o++)n=i.createElement$$module$build$src$core$utils$xml("block"),n.setAttribute("type","variables_get_dynamic"),n.setAttribute("gap","8"),n.appendChild(ps(a)),t.push(n)}}return t},gh=function(e,t){const n=e.workspace,o=i.config$$module$build$src$core$config.snapRadius,a=ae.difference(t,e.getRelativeToSurfaceXY()),f=new ae(0,0),E=n.getAllBlocks(!1).filter(w=>w.id!=e.id).map(w=>w.getRelativeToSurfaceXY());for(;Du(ae.sum(t,f),E)||Mu(e,ae.sum(a,f),o);)n.RTL?f.translate(-o,2*o):f.translate(o,2*o);e.moveTo(ae.sum(t,f))},Du=function(e,t){return t.some(n=>1>=Math.abs(n.x-e.x)&&1>=Math.abs(n.y-e.y))},Mu=function(e,t,n){return e.getConnections_(!1).some(o=>!!o.closest(n,t).connection)},Xr=function(e,t,n){const o=n.getBoundingRectangle(),a=o.right-o.left,f=co(t.top,o.top,t.top+t.height-(o.bottom-o.top))-o.top;let E=t.left;return t=t.left+t.width-a,e.RTL?E=Math.min(t,E):t=Math.max(E,t),(e=co(E,o.left,t)-o.left)||f?(n.moveBy(e,f,["inbounds"]),!0):!1},Nu=function(e){return t=>{var n=e.getMetricsManager();if(n.hasFixedEdges()&&!e.isDragging()){var o;if(vh.includes((o=t.type)!=null?o:"")){o=n.getScrollMetrics(!0);const a=da(e,t);a&&(n=i.getGroup$$module$build$src$core$events$utils()||!1,i.setGroup$$module$build$src$core$events$utils(t.group),Xr(e,o,a)&&!t.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),i.setGroup$$module$build$src$core$events$utils(n))}else be(t)&&t.scale&&t.oldScale&&t.scale>t.oldScale&&Il(e)}}},da=function(e,t){let n=null;switch(t.type){case z.BLOCK_CREATE:case z.BLOCK_MOVE:(n=e.getBlockById(t.blockId))&&(n=n.getRootBlock());break;case z.COMMENT_CREATE:case z.COMMENT_MOVE:case z.COMMENT_RESIZE:n=e.getCommentById(t.commentId)}return n},Il=function(e){var t=e.getMetricsManager();if(t.hasFixedEdges()&&!e.isDragging()){t=t.getScrollMetrics(!0);var n=e.getTopBoundedElements();for(let o=0,a;a=n[o];o++)Xr(e,t,a)}},tr=function(e){return e.isDeletable!==void 0&&e.dispose!==void 0&&e.setDeleteStyle!==void 0},vo=function(e){const t=e.toCopyData();Vf=t;let n;return Wf=(n=e.workspace)!=null?n:null,t},cn=function(e,t,n){return e&&t?ei(e,t,n):Vf&&Wf?ei(Vf,Wf):null},ei=function(e,t,n){let o;t=(o=t.getRootWorkspace())!=null?o:t;let a,f;return(f=(a=L(ne.PASTER,e.paster,!1))==null?void 0:a.paste(e,t,n))!=null?f:null},ha=function(e){const t=e.toCopyData();return t?cn(t,e.workspace):null},kl=function(e){return e.toCopyData!==void 0},Kr=function(){dt.registry.register({name:zi.ESCAPE,preconditionFn(e){return!e.options.readOnly},callback(e){return e.hideChaff(),!0},keyCodes:[Qe.ESC]})},Ss=function(){dt.registry.register({name:zi.DELETE,preconditionFn(e){const t=Be();return!e.options.readOnly&&t!=null&&tr(t)&&t.isDeletable()&&!jo.inProgress()},callback(e,t){return t.preventDefault(),e=Be(),e instanceof xs?e.checkAndDelete():tr(e)&&e.isDeletable()&&(i.setGroup$$module$build$src$core$events$utils(!0),e.dispose(),i.setGroup$$module$build$src$core$events$utils(!1)),!0},keyCodes:[Qe.DELETE,Qe.BACKSPACE]})},xu=function(){const e=dt.registry.createSerializedKey(Qe.C,[Qe.CTRL]),t=dt.registry.createSerializedKey(Qe.C,[Qe.ALT]),n=dt.registry.createSerializedKey(Qe.C,[Qe.META]);dt.registry.register({name:zi.COPY,preconditionFn(o){const a=Be();return!o.options.readOnly&&!jo.inProgress()&&a!=null&&tr(a)&&a.isDeletable()&&ar(a)&&a.isMovable()&&kl(a)},callback(o,a){return a.preventDefault(),o.hideChaff(),a=Be(),!a||!kl(a)?!1:(Xl=a.toCopyData(),Kl=o,Qa=ar(a)?a.getRelativeToSurfaceXY():null,!!Xl)},keyCodes:[e,t,n]})},pa=function(){const e=dt.registry.createSerializedKey(Qe.X,[Qe.CTRL]),t=dt.registry.createSerializedKey(Qe.X,[Qe.ALT]),n=dt.registry.createSerializedKey(Qe.X,[Qe.META]);dt.registry.register({name:zi.CUT,preconditionFn(o){const a=Be();return!o.options.readOnly&&!jo.inProgress()&&a!=null&&tr(a)&&a.isDeletable()&&ar(a)&&a.isMovable()&&!a.workspace.isFlyout},callback(o){const a=Be();return a instanceof xs?(Xl=a.toCopyData(),Kl=o,Qa=a.getRelativeToSurfaceXY(),a.checkAndDelete(),!0):tr(a)&&a.isDeletable()&&kl(a)?(Xl=a.toCopyData(),Kl=o,Qa=ar(a)?a.getRelativeToSurfaceXY():null,a.dispose(),!0):!1},keyCodes:[e,t,n]})},Yr=function(){const e=dt.registry.createSerializedKey(Qe.V,[Qe.CTRL]),t=dt.registry.createSerializedKey(Qe.V,[Qe.ALT]),n=dt.registry.createSerializedKey(Qe.V,[Qe.META]);dt.registry.register({name:zi.PASTE,preconditionFn(o){return!o.options.readOnly&&!jo.inProgress()},callback(){if(!Xl||!Kl)return!1;if(!Qa)return!!cn(Xl,Kl);const{left:o,top:a,width:f,height:E}=Kl.getMetricsManager().getViewMetrics(!0);if(new ct(a,a+E,o,o+f).contains(Qa.x,Qa.y))return!!cn(Xl,Kl);const w=new ae(o+f/2,a+E/2);return!!cn(Xl,Kl,w)},keyCodes:[e,t,n]})},Cs=function(){const e=dt.registry.createSerializedKey(Qe.Z,[Qe.CTRL]),t=dt.registry.createSerializedKey(Qe.Z,[Qe.ALT]),n=dt.registry.createSerializedKey(Qe.Z,[Qe.META]);dt.registry.register({name:zi.UNDO,preconditionFn(o){return!o.options.readOnly&&!jo.inProgress()},callback(o,a){return o.hideChaff(),o.undo(!1),a.preventDefault(),!0},keyCodes:[e,t,n]})},wl=function(){const e=dt.registry.createSerializedKey(Qe.Z,[Qe.SHIFT,Qe.CTRL]),t=dt.registry.createSerializedKey(Qe.Z,[Qe.SHIFT,Qe.ALT]),n=dt.registry.createSerializedKey(Qe.Z,[Qe.SHIFT,Qe.META]),o=dt.registry.createSerializedKey(Qe.Y,[Qe.CTRL]);dt.registry.register({name:zi.REDO,preconditionFn(a){return!jo.inProgress()&&!a.options.readOnly},callback(a,f){return a.hideChaff(),a.undo(!0),f.preventDefault(),!0},keyCodes:[e,t,n,o]})},ga=function(){Kr(),Ss(),xu(),pa(),Yr(),Cs(),wl()},Ol=function(e){const t=e.saveState();return e.getParameters().length&&(t.parameters=e.getParameters().map(n=>n.saveState())),t},fa=function(e,t,n,o){if(e=e.loadState(n,o),!n.parameters)return e;for(const[a,f]of n.parameters.entries())e.insertParameter(t.loadState(f,o),a);return e},Rl=function(e){const t=Object.create(null),n=U(ne.SERIALIZER,!0);for(const o in n){let a;const f=(a=n[o])==null?void 0:a.save(e);f&&(t[o]=f)}return t},Jr=function(e,t,{recordUndo:n=!1}={}){var o=U(ne.SERIALIZER,!0);if(o){o=Object.entries(o).sort((f,E)=>E[1].priority-f[1].priority);var a=$e();i.setRecordUndo$$module$build$src$core$events$utils(n),(n=i.getGroup$$module$build$src$core$events$utils())||i.setGroup$$module$build$src$core$events$utils(!0),Ln(),t instanceof Ns&&t.setResizesEnabled(!1);for(const[,f]of o.reverse()){let E;(E=f)==null||E.clear(t)}for(const[f,E]of o.reverse())if(e[f]){let w;(w=E)==null||w.load(e[f],t)}t instanceof Ns&&t.setResizesEnabled(!0),Ur(),ce(new(X(z.FINISHED_LOADING))(t)),i.setGroup$$module$build$src$core$events$utils(n),i.setRecordUndo$$module$build$src$core$events$utils(a)}},Ll=function(e,t){let n=null;n=typeof e=="string"?document.getElementById(e)||document.querySelector(e):e;var o;if(!document.contains(n)&&document!==((o=n)==null?void 0:o.ownerDocument))throw Error("Error: container is not in current document");e=new Ds(t||{}),o=document.createElement("div"),ke(o,"injectionDiv"),t!=null&&t.rtl&&ke(o,"blocklyRTL"),o.tabIndex=0,hn(o,Gt.LABEL,i.Msg$$module$build$src$core$msg.WORKSPACE_ARIA_LABEL),n.appendChild(o),t=Al(o,e);const a=Ai(o,t,e);return $a(a),je(a),qe(a),o.addEventListener("focusin",function(){je(a)}),Le(o,"keydown",null,ti),Le(hl(),"keydown",null,ti),(t=$o())&&Le(t,"keydown",null,ti),a},Al=function(e,t){e.setAttribute("dir","LTR"),fi(t.hasCss,t.pathToMedia),e=J(P.SVG,{xmlns:Lo,"xmlns:html":es,"xmlns:xlink":rr,version:"1.1",class:"blocklySvg",tabindex:"0"},e);const n=J(P.DEFS,{},e),o=String(Math.random()).substring(2);return t.gridPattern=bf.createDom(o,t.gridOptions,n),e},Ai=function(e,t,n){n.parentWorkspace=null,n=new Ns(n);const o=n.options;n.scale=o.zoomOptions.startScale,t.appendChild(n.createDom("blocklyMainBackground",e));var a=n.getRenderer().getClassName();return a&&ke(e,a),(a=n.getTheme().getClassName())&&ke(e,a),!o.hasCategories&&o.languageTree&&(e=n.addFlyout(P.SVG),fe(e,t)),o.hasTrashcan&&n.addTrashcan(),o.zoomOptions&&o.zoomOptions.controls&&n.addZoomControls(),n.getThemeManager().subscribe(t,"workspaceBackgroundColour","background-color"),n.translate(0,0),n.addChangeListener(Nu(n)),qe(n),Tu(),Id(),zd(),n},$a=function(e){const t=e.options;var n=e.getParentSvg();if(Le(n.parentNode,"contextmenu",null,function(o){Fr(o)||o.preventDefault()}),n=Le(window,"resize",null,function(){Ks(),e.hideComponents(!0),Bd(),Xc(),qe(e),Il(e)}),e.setResizeHandlerWrapper(n),fh(),t.languageTree){n=e.getToolbox();const o=e.getFlyout(!0);n?n.init():o&&(o.init(e),o.show(t.languageTree),typeof o.scrollToStart=="function"&&o.scrollToStart())}t.hasTrashcan&&e.trashcan.init(),t.zoomOptions&&t.zoomOptions.controls&&e.zoomControls_.init(),t.moveOptions&&t.moveOptions.scrollbars?(e.scrollbar=new jf(e,t.moveOptions.scrollbars===!0||!!t.moveOptions.scrollbars.horizontal,t.moveOptions.scrollbars===!0||!!t.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),e.scrollbar.resize()):e.setMetrics({x:.5,y:.5}),t.hasSounds&&ma(t.pathToMedia,e)},ti=function(e){const t=Pe();t&&!(Fr(e)||t.rendered&&!t.isVisible())&&dt.registry.onKeyDown(t,e)},fh=function(){s_||(Le(document,"scroll",null,function(){const e=H();for(let t=0,n;n=e[t];t++)n instanceof Ns&&n.updateInverseScreenCTM()}),nt(document,"touchend",null,En),nt(document,"touchcancel",null,En)),s_=!0},ma=function(e,t){function n(){for(;a.length;){const f=a.pop();f&&et(f)}o.preload()}const o=t.getAudioManager();o.load([e+"click.mp3",e+"click.wav",e+"click.ogg"],"click"),o.load([e+"disconnect.wav",e+"disconnect.mp3",e+"disconnect.ogg"],"disconnect"),o.load([e+"delete.mp3",e+"delete.ogg",e+"delete.wav"],"delete");const a=[];a.push(Le(document,"pointermove",null,n,!0)),a.push(Le(document,"touchstart",null,n,!0))},wt=function(){O.registry.register({displayText(){return i.Msg$$module$build$src$core$msg.UNDO},preconditionFn(e){return 0<e.workspace.getUndoStack().length?"enabled":"disabled"},callback(e){e.workspace.undo(!1)},scopeType:O.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},Dl=function(){O.registry.register({displayText(){return i.Msg$$module$build$src$core$msg.REDO},preconditionFn(e){return 0<e.workspace.getRedoStack().length?"enabled":"disabled"},callback(e){e.workspace.undo(!0)},scopeType:O.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},Pu=function(){O.registry.register({displayText(){return i.Msg$$module$build$src$core$msg.CLEAN_UP},preconditionFn(e){return e.workspace.isMovable()?1<e.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback(e){e.workspace.cleanUp()},scopeType:O.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},Bu=function(e,t){function n(f){a--,f.setCollapsed(e),a===0&&i.setGroup$$module$build$src$core$events$utils(!1)}let o=0,a=0;i.setGroup$$module$build$src$core$events$utils(!0);for(let f=0;f<t.length;f++){let E=t[f];for(;E;)a++,setTimeout(n.bind(null,E),o),E=E.getNextBlock(),o+=10}},Ml=function(){O.registry.register({displayText(){return i.Msg$$module$build$src$core$msg.COLLAPSE_ALL},preconditionFn(e){if(e.workspace.options.collapse){e=e.workspace.getTopBlocks(!1);for(let t=0;t<e.length;t++){let n=e[t];for(;n;){if(!n.isCollapsed())return"enabled";n=n.getNextBlock()}}return"disabled"}return"hidden"},callback(e){Bu(!0,e.workspace.getTopBlocks(!0))},scopeType:O.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},Fu=function(){O.registry.register({displayText(){return i.Msg$$module$build$src$core$msg.EXPAND_ALL},preconditionFn(e){if(e.workspace.options.collapse){e=e.workspace.getTopBlocks(!1);for(let t=0;t<e.length;t++){let n=e[t];for(;n;){if(n.isCollapsed())return"enabled";n=n.getNextBlock()}}return"disabled"}return"hidden"},callback(e){Bu(!1,e.workspace.getTopBlocks(!0))},scopeType:O.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},ni=function(e,t){if(e.isDeletable())Array.prototype.push.apply(t,e.getDescendants(!1));else{e=e.getChildren(!1);for(let n=0;n<e.length;n++)ni(e[n],t)}},yt=function(e){const t=[];e=e.getTopBlocks(!0);for(let n=0;n<e.length;n++)ni(e[n],t);return t},Ht=function(e,t){t?i.setGroup$$module$build$src$core$events$utils(t):(i.setGroup$$module$build$src$core$events$utils(!0),t=i.getGroup$$module$build$src$core$events$utils());const n=e.shift();n&&(n.isDeadOrDying()?Ht(e,t):(n.dispose(!1,!0),setTimeout(Ht,10,e,t))),i.setGroup$$module$build$src$core$events$utils(!1)},tn=function(){O.registry.register({displayText(e){return e.workspace?(e=yt(e.workspace).length,e===1?i.Msg$$module$build$src$core$msg.DELETE_BLOCK:i.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${e}`)):""},preconditionFn(e){return e.workspace&&0<yt(e.workspace).length?"enabled":"disabled"},callback(e){if(e.workspace){e.workspace.cancelCurrentGesture();var t=yt(e.workspace);2>t.length?Ht(t):ot(i.Msg$$module$build$src$core$msg.DELETE_ALL_BLOCKS.replace("%1",String(t.length)),function(n){n&&Ht(t)})}},scopeType:O.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},Uu=function(){wt(),Dl(),Pu(),Ml(),Fu(),tn()},So=function(){O.registry.register({displayText(){return i.Msg$$module$build$src$core$msg.DUPLICATE_BLOCK},preconditionFn(e){return e=e.block,!e.isInFlyout&&e.isDeletable()&&e.isMovable()?e.isDuplicatable()?"enabled":"disabled":"hidden"},callback(e){if(e.block){var t=e.block.toCopyData();t&&cn(t,e.block.workspace)}},scopeType:O.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},Co=function(){O.registry.register({displayText(e){return e.block.hasIcon(Yo.TYPE)?i.Msg$$module$build$src$core$msg.REMOVE_COMMENT:i.Msg$$module$build$src$core$msg.ADD_COMMENT},preconditionFn(e){return e=e.block,!e.isInFlyout&&e.workspace.options.comments&&!e.isCollapsed()&&e.isEditable()?"enabled":"hidden"},callback(e){e=e.block,e.hasIcon(Yo.TYPE)?e.setCommentText(null):e.setCommentText("")},scopeType:O.ScopeType.BLOCK,id:"blockComment",weight:2})},$h=function(){O.registry.register({displayText(e){return e.block.getInputsInline()?i.Msg$$module$build$src$core$msg.EXTERNAL_INPUTS:i.Msg$$module$build$src$core$msg.INLINE_INPUTS},preconditionFn(e){if(e=e.block,!e.isInFlyout&&e.isMovable()&&!e.isCollapsed()){for(let t=1;t<e.inputList.length;t++)if(!(e.inputList[t-1]instanceof Og||e.inputList[t]instanceof Og))return"enabled"}return"hidden"},callback(e){e.block.setInputsInline(!e.block.getInputsInline())},scopeType:O.ScopeType.BLOCK,id:"blockInline",weight:3})},pn=function(){O.registry.register({displayText(e){return e.block.isCollapsed()?i.Msg$$module$build$src$core$msg.EXPAND_BLOCK:i.Msg$$module$build$src$core$msg.COLLAPSE_BLOCK},preconditionFn(e){return e=e.block,!e.isInFlyout&&e.isMovable()&&e.workspace.options.collapse?"enabled":"hidden"},callback(e){e.block.setCollapsed(!e.block.isCollapsed())},scopeType:O.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},Hu=function(){O.registry.register({displayText(e){return e.block.hasDisabledReason(kn)?i.Msg$$module$build$src$core$msg.ENABLE_BLOCK:i.Msg$$module$build$src$core$msg.DISABLE_BLOCK},preconditionFn(e){if(e=e.block,!e.isInFlyout&&e.workspace.options.disable&&e.isEditable()){var t=e.getDisabledReasons();return t=t.size>(t.has(kn)?1:0),e.getInheritedDisabled()||t?"disabled":"enabled"}return"hidden"},callback(e){e=e.block;const t=i.getGroup$$module$build$src$core$events$utils();t||i.setGroup$$module$build$src$core$events$utils(!0),e.setDisabledReason(!e.hasDisabledReason(kn),kn),i.setGroup$$module$build$src$core$events$utils(t)},scopeType:O.ScopeType.BLOCK,id:"blockDisable",weight:5})},Gu=function(){O.registry.register({displayText(e){var t=e.block;return e=t.getDescendants(!1).length,(t=t.getNextBlock())&&(e-=t.getDescendants(!1).length),e===1?i.Msg$$module$build$src$core$msg.DELETE_BLOCK:i.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${e}`)},preconditionFn(e){return!e.block.isInFlyout&&e.block.isDeletable()?"enabled":"hidden"},callback(e){e.block&&e.block.checkAndDelete()},scopeType:O.ScopeType.BLOCK,id:"blockDelete",weight:6})},Vu=function(){O.registry.register({displayText(){return i.Msg$$module$build$src$core$msg.HELP},preconditionFn(e){return e=e.block,(typeof e.helpUrl=="function"?e.helpUrl():e.helpUrl)?"enabled":"hidden"},callback(e){e.block.showHelp()},scopeType:O.ScopeType.BLOCK,id:"blockHelp",weight:7})},wr=function(){O.registry.register({displayText:()=>i.Msg$$module$build$src$core$msg.REMOVE_COMMENT,preconditionFn(e){let t;return(t=e.comment)!=null&&t.isDeletable()?"enabled":"hidden"},callback(e){i.setGroup$$module$build$src$core$events$utils(!0);let t;(t=e.comment)==null||t.dispose(),i.setGroup$$module$build$src$core$events$utils(!1)},scopeType:O.ScopeType.COMMENT,id:"commentDelete",weight:6})},nr=function(){O.registry.register({displayText:()=>i.Msg$$module$build$src$core$msg.DUPLICATE_COMMENT,preconditionFn(e){let t;return(t=e.comment)!=null&&t.isMovable()?"enabled":"hidden"},callback(e){if(e.comment){var t=e.comment.toCopyData();t&&cn(t,e.comment.workspace)}},scopeType:O.ScopeType.COMMENT,id:"commentDuplicate",weight:1})},Io=function(){O.registry.register({displayText:()=>i.Msg$$module$build$src$core$msg.ADD_COMMENT,preconditionFn:()=>"enabled",callback:(e,t)=>{if(e=e.workspace){i.setGroup$$module$build$src$core$events$utils(!0);var n=new tt(e);n.setText(i.Msg$$module$build$src$core$msg.WORKSPACE_COMMENT_DEFAULT_TEXT),n.moveTo(_a(new ae(t.clientX,t.clientY),e)),i.setSelected$$module$build$src$core$common(n),i.setGroup$$module$build$src$core$events$utils(!1)}},scopeType:O.ScopeType.WORKSPACE,id:"commentCreate",weight:8})},_a=function(e,t){var n=t.getInjectionDiv().getBoundingClientRect();return e=new ae(e.x-n.left,e.y-n.top),n=t.getOriginOffsetInPixels(),e=ae.difference(e,n),e.scale(1/t.scale),e},Ta=function(){So(),Co(),$h(),pn(),Hu(),Gu(),Vu()},mh=function(){nr(),wr(),Io()},Ea=function(){Uu(),Ta()},_h=function(e){return e.paste!==void 0},Th=function(e){return e.getSvgRoot!==void 0},Eh=function(e){return typeof e.id=="string"&&e.workspace!==void 0&&e.select!==void 0&&e.unselect!==void 0},bh=function(e){return e.isSelectable()},yh=function(e){Pe().hideChaff(e)},ee=ee||{},ee.scope={},ee.ASSUME_ES5=!1,ee.ASSUME_NO_NATIVE_MAP=!1,ee.ASSUME_NO_NATIVE_SET=!1,ee.SIMPLE_FROUND_POLYFILL=!1,ee.ISOLATE_POLYFILLS=!1,ee.FORCE_POLYFILL_PROMISE=!1,ee.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,ee.defineProperty=ee.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},ee.getGlobal=function(e){e=[typeof globalThis=="object"&&globalThis,e,typeof window=="object"&&window,typeof self=="object"&&self,typeof Q_=="object"&&Q_];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")},ee.global=ee.getGlobal(this),ee.IS_SYMBOL_NATIVE=typeof Symbol=="function"&&typeof Symbol("x")=="symbol",ee.TRUST_ES6_POLYFILLS=!ee.ISOLATE_POLYFILLS||ee.IS_SYMBOL_NATIVE,ee.polyfills={},ee.propertyToPolyfillSymbol={},ee.POLYFILL_PREFIX="$jscp$",ee.polyfill=function(e,t,n,o){t&&(ee.ISOLATE_POLYFILLS?ee.polyfillIsolated(e,t,n,o):ee.polyfillUnisolated(e,t,n,o))},ee.polyfillUnisolated=function(e,t,n,o){for(n=ee.global,e=e.split("."),o=0;o<e.length-1;o++){var a=e[o];if(!(a in n))return;n=n[a]}e=e[e.length-1],o=n[e],t=t(o),t!=o&&t!=null&&ee.defineProperty(n,e,{configurable:!0,writable:!0,value:t})},ee.polyfillIsolated=function(e,t,n,o){var a=e.split(".");e=a.length===1,o=a[0],o=!e&&o in ee.polyfills?ee.polyfills:ee.global;for(var f=0;f<a.length-1;f++){var E=a[f];if(!(E in o))return;o=o[E]}a=a[a.length-1],n=ee.IS_SYMBOL_NATIVE&&n==="es6"?o[a]:null,t=t(n),t!=null&&(e?ee.defineProperty(ee.polyfills,a,{configurable:!0,writable:!0,value:t}):t!==n&&(ee.propertyToPolyfillSymbol[a]===void 0&&(n=1e9*Math.random()>>>0,ee.propertyToPolyfillSymbol[a]=ee.IS_SYMBOL_NATIVE?ee.global.Symbol(a):ee.POLYFILL_PREFIX+n+"$"+a),ee.defineProperty(o,ee.propertyToPolyfillSymbol[a],{configurable:!0,writable:!0,value:t})))},ee.underscoreProtoCanBeSet=function(){var e={a:!0},t={};try{return t.__proto__=e,t.a}catch{}return!1},ee.setPrototypeOf=ee.TRUST_ES6_POLYFILLS&&typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf:ee.underscoreProtoCanBeSet()?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null,ee.arrayIteratorImpl=function(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}},ee.arrayIterator=function(e){return{next:ee.arrayIteratorImpl(e)}},ee.makeIterator=function(e){var t=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];if(t)return t.call(e);if(typeof e.length=="number")return ee.arrayIterator(e);throw Error(String(e)+" is not an iterable or ArrayLike")},ee.generator={},ee.generator.ensureIteratorResultIsObject_=function(e){if(!(e instanceof Object))throw new TypeError("Iterator result "+e+" is not an object")},ee.generator.Context=function(){this.isRunning_=!1,this.yieldAllIterator_=null,this.yieldResult=void 0,this.nextAddress=1,this.finallyAddress_=this.catchAddress_=0,this.finallyContexts_=this.abruptCompletion_=null},ee.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0},ee.generator.Context.prototype.stop_=function(){this.isRunning_=!1},ee.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_},ee.generator.Context.prototype.next_=function(e){this.yieldResult=e},ee.generator.Context.prototype.throw_=function(e){this.abruptCompletion_={exception:e,isException:!0},this.jumpToErrorHandler_()},ee.generator.Context.prototype.return=function(e){this.abruptCompletion_={return:e},this.nextAddress=this.finallyAddress_},ee.generator.Context.prototype.jumpThroughFinallyBlocks=function(e){this.abruptCompletion_={jumpTo:e},this.nextAddress=this.finallyAddress_},ee.generator.Context.prototype.yield=function(e,t){return this.nextAddress=t,{value:e}},ee.generator.Context.prototype.yieldAll=function(e,t){e=ee.makeIterator(e);var n=e.next();if(ee.generator.ensureIteratorResultIsObject_(n),n.done)this.yieldResult=n.value,this.nextAddress=t;else return this.yieldAllIterator_=e,this.yield(n.value,t)},ee.generator.Context.prototype.jumpTo=function(e){this.nextAddress=e},ee.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0},ee.generator.Context.prototype.setCatchFinallyBlocks=function(e,t){this.catchAddress_=e,t!=null&&(this.finallyAddress_=t)},ee.generator.Context.prototype.setFinallyBlock=function(e){this.catchAddress_=0,this.finallyAddress_=e||0},ee.generator.Context.prototype.leaveTryBlock=function(e,t){this.nextAddress=e,this.catchAddress_=t||0},ee.generator.Context.prototype.enterCatchBlock=function(e){return this.catchAddress_=e||0,e=this.abruptCompletion_.exception,this.abruptCompletion_=null,e},ee.generator.Context.prototype.enterFinallyBlock=function(e,t,n){n?this.finallyContexts_[n]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_],this.catchAddress_=e||0,this.finallyAddress_=t||0},ee.generator.Context.prototype.leaveFinallyBlock=function(e,t){if(t=this.finallyContexts_.splice(t||0)[0],t=this.abruptCompletion_=this.abruptCompletion_||t){if(t.isException)return this.jumpToErrorHandler_();t.jumpTo!=null&&this.finallyAddress_<t.jumpTo?(this.nextAddress=t.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=e},ee.generator.Context.prototype.forIn=function(e){return new ee.generator.Context.PropertyIterator(e)},ee.generator.Context.PropertyIterator=function(e){this.object_=e,this.properties_=[];for(var t in e)this.properties_.push(t);this.properties_.reverse()},ee.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var e=this.properties_.pop();if(e in this.object_)return e}return null},ee.generator.Engine_=function(e){this.context_=new ee.generator.Context,this.program_=e},ee.generator.Engine_.prototype.next_=function(e){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.next,e,this.context_.next_):(this.context_.next_(e),this.nextStep_())},ee.generator.Engine_.prototype.return_=function(e){this.context_.start_();var t=this.context_.yieldAllIterator_;return t?this.yieldAllStep_("return"in t?t.return:function(n){return{value:n,done:!0}},e,this.context_.return):(this.context_.return(e),this.nextStep_())},ee.generator.Engine_.prototype.throw_=function(e){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.throw,e,this.context_.next_):(this.context_.throw_(e),this.nextStep_())},ee.generator.Engine_.prototype.yieldAllStep_=function(e,t,n){try{var o=e.call(this.context_.yieldAllIterator_,t);if(ee.generator.ensureIteratorResultIsObject_(o),!o.done)return this.context_.stop_(),o;var a=o.value}catch(f){return this.context_.yieldAllIterator_=null,this.context_.throw_(f),this.nextStep_()}return this.context_.yieldAllIterator_=null,n.call(this.context_,a),this.nextStep_()},ee.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var e=this.program_(this.context_);if(e)return this.context_.stop_(),{value:e.value,done:!1}}catch(t){this.context_.yieldResult=void 0,this.context_.throw_(t)}if(this.context_.stop_(),this.context_.abruptCompletion_){if(e=this.context_.abruptCompletion_,this.context_.abruptCompletion_=null,e.isException)throw e.exception;return{value:e.return,done:!0}}return{value:void 0,done:!0}},ee.generator.Generator_=function(e){this.next=function(t){return e.next_(t)},this.throw=function(t){return e.throw_(t)},this.return=function(t){return e.return_(t)},this[Symbol.iterator]=function(){return this}},ee.generator.createGenerator=function(e,t){return t=new ee.generator.Generator_(new ee.generator.Engine_(t)),ee.setPrototypeOf&&e.prototype&&ee.setPrototypeOf(t,e.prototype),t},ee.asyncExecutePromiseGenerator=function(e){function t(o){return e.next(o)}function n(o){return e.throw(o)}return new Promise(function(o,a){function f(E){E.done?o(E.value):Promise.resolve(E.value).then(t,n).then(f,a)}f(e.next())})},ee.asyncExecutePromiseGeneratorFunction=function(e){return ee.asyncExecutePromiseGenerator(e())},ee.asyncExecutePromiseGeneratorProgram=function(e){return ee.asyncExecutePromiseGenerator(new ee.generator.Generator_(new ee.generator.Engine_(e)))},ee.polyfill("globalThis",function(e){return e||ee.global},"es_2020","es3"),ee.polyfill("Array.prototype.includes",function(e){return e||function(t,n){var o=this;o instanceof String&&(o=String(o));var a=o.length;for(n=n||0,0>n&&(n=Math.max(n+a,0));n<a;n++){var f=o[n];if(f===t||Object.is(f,t))return!0}return!1}},"es7","es3"),ee.initSymbol=function(){},ee.iteratorPrototype=function(e){return e={next:e},e[Symbol.iterator]=function(){return this},e},ee.iteratorFromArray=function(e,t){e instanceof String&&(e+="");var n=0,o=!1,a={next:function(){if(!o&&n<e.length){var f=n++;return{value:t(f,e[f]),done:!1}}return o=!0,{done:!0,value:void 0}}};return a[Symbol.iterator]=function(){return a},a},ee.polyfill("Array.prototype.values",function(e){return e||function(){return ee.iteratorFromArray(this,function(t,n){return n})}},"es8","es3"),ee.polyfill("Array.prototype.flat",function(e){return e||function(t){t=t===void 0?1:t;var n=[];return Array.prototype.forEach.call(this,function(o){Array.isArray(o)&&0<t?(o=Array.prototype.flat.call(o,t-1),n.push.apply(n,o)):n.push(o)}),n}},"es9","es5"),ee.polyfill("Array.prototype.flatMap",function(e){return e||function(t,n){var o=[];return Array.prototype.forEach.call(this,function(a,f){a=t.call(n,a,f,this),Array.isArray(a)?o.push.apply(o,a):o.push(a)}),o}},"es9","es5"),ee.owns=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},ee.polyfill("Object.entries",function(e){return e||function(t){var n=[],o;for(o in t)ee.owns(t,o)&&n.push([o,t[o]]);return n}},"es8","es3"),ee.polyfill("Object.values",function(e){return e||function(t){var n=[],o;for(o in t)ee.owns(t,o)&&n.push(t[o]);return n}},"es8","es3");var Or=Object.create(null),qp={typeMap:Or},ko=Object.create(null),hr="default",ne=class{constructor(e){this.name=e}toString(){return this.name}};ne.CONNECTION_CHECKER=new ne("connectionChecker"),ne.CONNECTION_PREVIEWER=new ne("connectionPreviewer"),ne.CURSOR=new ne("cursor"),ne.EVENT=new ne("event"),ne.FIELD=new ne("field"),ne.INPUT=new ne("input"),ne.RENDERER=new ne("renderer"),ne.TOOLBOX=new ne("toolbox"),ne.THEME=new ne("theme"),ne.TOOLBOX_ITEM=new ne("toolboxItem"),ne.FLYOUTS_VERTICAL_TOOLBOX=new ne("flyoutsVerticalToolbox"),ne.FLYOUTS_HORIZONTAL_TOOLBOX=new ne("flyoutsHorizontalToolbox"),ne.METRICS_MANAGER=new ne("metricsManager"),ne.BLOCK_DRAGGER=new ne("blockDragger"),ne.SERIALIZER=new ne("serializer"),ne.ICON=new ne("icon"),ne.PASTER=new ne("paster");var qr={DEFAULT:hr,TEST_ONLY:qp};qr.Type=ne,qr.getAllItems=U,qr.getClass=S,qr.getClassFromOptions=D,qr.getObject=L,qr.hasItem=y,qr.register=d,qr.unregister=m;var Wn=Object.create(null),z;(function(e){e.BLOCK_CREATE="create",e.BLOCK_DELETE="delete",e.BLOCK_CHANGE="change",e.BLOCK_FIELD_INTERMEDIATE_CHANGE="block_field_intermediate_change",e.BLOCK_MOVE="move",e.VAR_CREATE="var_create",e.VAR_DELETE="var_delete",e.VAR_RENAME="var_rename",e.UI="ui",e.BLOCK_DRAG="drag",e.SELECTED="selected",e.CLICK="click",e.MARKER_MOVE="marker_move",e.BUBBLE_OPEN="bubble_open",e.TRASHCAN_OPEN="trashcan_open",e.TOOLBOX_ITEM_SELECT="toolbox_item_select",e.THEME_CHANGE="theme_change",e.VIEWPORT_CHANGE="viewport_change",e.COMMENT_CREATE="comment_create",e.COMMENT_DELETE="comment_delete",e.COMMENT_CHANGE="comment_change",e.COMMENT_MOVE="comment_move",e.COMMENT_RESIZE="comment_resize",e.COMMENT_DRAG="comment_drag",e.COMMENT_COLLAPSE="comment_collapse",e.FINISHED_LOADING="finished_loading"})(z||(z={}));var vh=[z.BLOCK_CREATE,z.BLOCK_MOVE,z.COMMENT_CREATE,z.COMMENT_MOVE],Sh=new Set,ba={};ba.warn=R;var Ch="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",Ih={genUid:()=>{const e=Ch.length,t=[];for(let n=0;20>n;n++)t[n]=Ch.charAt(Math.random()*e);return t.join("")}},Qp=0,kh={TEST_ONLY:Ih};kh.genUid=B,kh.getNextUniqueId=V;var wh="",Wu=!0,Oh=0,ya="ORPHANED_BLOCK",Is=[],Rh={FIRE_QUEUE:Is,enqueueEvent:me,fireNow:C,fireInternal:ze,setGroupInternal:Ge};i.disable$$module$build$src$core$events$utils,i.enable$$module$build$src$core$events$utils,i.getGroup$$module$build$src$core$events$utils,i.setGroup$$module$build$src$core$events$utils,i.setRecordUndo$$module$build$src$core$events$utils;var Di=Object.create(null),Zp,wo=null,eg,zn=[],va={defineBlocksWithJsonArrayInternal:Yn},nn={TEST_ONLY:va};nn.createBlockDefinitionsFromJsonArray=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common,nn.defineBlocks=i.defineBlocks$$module$build$src$core$common,nn.defineBlocksWithJsonArray=ln,nn.draggingConnections=zn,nn.getAllWorkspaces=H,nn.getBlockTypeCounts=kt,nn.getMainWorkspace=Pe,nn.getParentContainer=we,nn.getSelected=Be,nn.getWorkspaceById=Ee,nn.registerWorkspace=se,nn.setMainWorkspace=je,nn.setParentContainer=Ke,nn.setSelected=i.setSelected$$module$build$src$core$common,nn.svgResize=qe,nn.unregisterWorkpace=We;var Oo=class{constructor(){this.workspaceId=void 0,this.isUiEvent=!1,this.type="",this.group=i.getGroup$$module$build$src$core$events$utils(),this.recordUndo=$e()}toJson(){return{type:this.type,group:this.group}}static fromJson(e,t,n){return n.isBlank=!1,n.group=e.group||"",n.workspaceId=t.id,n}isNull(){return!1}run(e){}getEventWorkspace_(){let e;if(this.workspaceId&&(e=Ee(this.workspaceId)),!e)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return e}},Rr=class extends Oo{constructor(e){super(),this.recordUndo=!1,this.isUiEvent=!0,this.isBlank=typeof e>"u",this.workspaceId=e||""}},Sa=class extends Rr{constructor(e,t,n){t=e?e.workspace.id:t,t===null&&(t=void 0),super(t),this.type=z.CLICK,this.blockId=e?e.id:void 0,this.targetType=n}toJson(){const e=super.toJson();if(!this.targetType)throw Error("The click target type is undefined. Either pass a block to the constructor, or call fromJson");return e.targetType=this.targetType,e.blockId=this.blockId,e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new Sa),t.targetType=e.targetType,t.blockId=e.blockId,t}},zu;(function(e){e.BLOCK="block",e.WORKSPACE="workspace",e.ZOOM_CONTROLS="zoom_controls"})(zu||(zu={})),d(ne.EVENT,z.CLICK,Sa);var Nl=750,Ca="ontouchstart"in globalThis||!!(globalThis.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!globalThis.navigator||!globalThis.navigator.maxTouchPoints&&!globalThis.navigator.msMaxTouchPoints),xl=null,Ro={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]},ju=0,Mi={TOUCH_ENABLED:Ca,TOUCH_MAP:Ro};Mi.checkTouchIdentifier=Vs,Mi.clearTouchIdentifier=zt,Mi.getTouchIdentifierFromEvent=ir,Mi.longStart=Gs,Mi.longStop=En,Mi.shouldHandleEvent=Br;var Ia,Lh,Ah,tg,Cn,gn,ka,Dh,Mh,Nh;(function(e){function t(o){return n.includes(o.toUpperCase())}Ia=e;const n=Ia.toUpperCase();Lh=t("JavaFX"),Ah=t("WebKit"),tg=t("Gecko")&&!Ah,Cn=t("Android"),e=globalThis.navigator&&globalThis.navigator.maxTouchPoints,gn=t("iPad")||t("Macintosh")&&0<e,ka=t("iPhone")&&!gn,Dh=t("Macintosh"),Mh=gn||Cn&&!t("Mobile")||t("Silk"),Nh=!Mh&&(ka||Cn)})(globalThis.navigator&&globalThis.navigator.userAgent||"");var ng=Ia,wa=Lh,xh=tg,Xu=Cn,Ku=gn,Ph=ka,Yu=Dh,Oa=Nh,rg={ANDROID:Xu,GECKO:xh,IPAD:Ku,IPHONE:Ph,JavaFx:wa,MAC:Yu,MOBILE:Oa,raw:ng},Ra=40,Ju=125,ri={};ri.bind=nt,ri.conditionalBind=Le,ri.getScrollDeltaPixels=br,ri.isRightButton=bn,ri.isTargetInput=Fr,ri.mouseToSvg=dn,ri.unbind=et;var Bh={};Bh.removeElem=Bt;var Qr=class{constructor(e){this.name=e}toString(){return this.name}};Qr.POSITIONABLE=new Qr("positionable"),Qr.DRAG_TARGET=new Qr("drag_target"),Qr.DELETE_AREA=new Qr("delete_area"),Qr.AUTOHIDEABLE=new Qr("autohideable");var vt=class{constructor(){this.componentData=new Map,this.capabilityToComponentIds=new Map}addComponent(e,t){const n=e.component.id;if(!t&&this.componentData.has(n)){var o;throw Error('Plugin "'+n+'" with capabilities "'+((o=this.componentData.get(n))==null?void 0:o.capabilities)+'" already added.')}for(this.componentData.set(n,e),t=[],o=0;o<e.capabilities.length;o++){const a=String(e.capabilities[o]).toLowerCase();if(t.push(a),this.capabilityToComponentIds.has(a)){let f;(f=this.capabilityToComponentIds.get(a))==null||f.push(n)}else this.capabilityToComponentIds.set(a,[n])}this.componentData.get(n).capabilities=t}removeComponent(e){const t=this.componentData.get(e);if(t){for(let n=0;n<t.capabilities.length;n++){const o=String(t.capabilities[n]).toLowerCase();Bt(this.capabilityToComponentIds.get(o),e)}this.componentData.delete(e)}}addCapability(e,t){if(!this.getComponent(e))throw Error('Cannot add capability, "'+t+'". Plugin "'+e+'" has not been added to the ComponentManager');if(this.hasCapability(e,t))console.warn('Plugin "'+e+'already has capability "'+t+'"');else{t=`${t}`.toLowerCase();var n;(n=this.componentData.get(e))==null||n.capabilities.push(t);var o;(o=this.capabilityToComponentIds.get(t))==null||o.push(e)}}removeCapability(e,t){if(!this.getComponent(e))throw Error('Cannot remove capability, "'+t+'". Plugin "'+e+'" has not been added to the ComponentManager');this.hasCapability(e,t)?(t=`${t}`.toLowerCase(),Bt(this.componentData.get(e).capabilities,t),Bt(this.capabilityToComponentIds.get(t),e)):console.warn('Plugin "'+e+`doesn't have capability "`+t+'" to remove')}hasCapability(e,t){return t=`${t}`.toLowerCase(),this.componentData.has(e)&&this.componentData.get(e).capabilities.includes(t)}getComponent(e){let t;return(t=this.componentData.get(e))==null?void 0:t.component}getComponents(e,t){if(e=`${e}`.toLowerCase(),e=this.capabilityToComponentIds.get(e),!e)return[];const n=[];if(t){const o=[];e.forEach(a=>{o.push(this.componentData.get(a))}),o.sort(function(a,f){return a.weight-f.weight}),o.forEach(function(a){n.push(a.component)})}else e.forEach(o=>{n.push(this.componentData.get(o).component)});return n}};vt.Capability=Qr,function(e){e=e.ComponentWeight||(e.ComponentWeight={}),e[e.TOOLBOX_WEIGHT=0]="TOOLBOX_WEIGHT",e[e.FLYOUT_WEIGHT=1]="FLYOUT_WEIGHT",e[e.TRASHCAN_WEIGHT=2]="TRASHCAN_WEIGHT",e[e.ZOOM_CONTROLS_WEIGHT=3]="ZOOM_CONTROLS_WEIGHT"}(vt),vt.ComponentWeight;var Pl=!1,Zr=`
.blocklySvg {
  background-color: #fff;
  outline: none;
  overflow: hidden;  /* IE overflows by default. */
  position: absolute;
  display: block;
}

.blocklyWidgetDiv {
  display: none;
  position: absolute;
  z-index: 99999;  /* big value for bootstrap3 compatibility */
}

.injectionDiv {
  height: 100%;
  position: relative;
  overflow: hidden;  /* So blocks in drag surface disappear at edges */
  touch-action: none;
  user-select: none;
  -webkit-user-select: none;
}

.blocklyNonSelectable {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
}

.blocklyBlockCanvas.blocklyCanvasTransitioning,
.blocklyBubbleCanvas.blocklyCanvasTransitioning {
  transition: transform .5s;
}

.blocklyTooltipDiv {
  background-color: #ffffc7;
  border: 1px solid #ddc;
  box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);
  color: #000;
  display: none;
  font: 9pt sans-serif;
  opacity: .9;
  padding: 2px;
  position: absolute;
  z-index: 100000;  /* big value for bootstrap3 compatibility */
}

.blocklyDropDownDiv {
  position: absolute;
  left: 0;
  top: 0;
  z-index: 1000;
  display: none;
  border: 1px solid;
  border-color: #dadce0;
  background-color: #fff;
  border-radius: 2px;
  padding: 4px;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownContent {
  max-height: 300px;  /* @todo: spec for maximum height. */
  overflow: auto;
  overflow-x: hidden;
  position: relative;
}

.blocklyDropDownArrow {
  position: absolute;
  left: 0;
  top: 0;
  width: 16px;
  height: 16px;
  z-index: -1;
  background-color: inherit;
  border-color: inherit;
}

.blocklyDropDownButton {
  display: inline-block;
  float: left;
  padding: 0;
  margin: 4px;
  border-radius: 4px;
  outline: none;
  border: 1px solid;
  transition: box-shadow .1s;
  cursor: pointer;
}

.blocklyArrowTop {
  border-top: 1px solid;
  border-left: 1px solid;
  border-top-left-radius: 4px;
  border-color: inherit;
}

.blocklyArrowBottom {
  border-bottom: 1px solid;
  border-right: 1px solid;
  border-bottom-right-radius: 4px;
  border-color: inherit;
}

.blocklyResizeSE {
  cursor: se-resize;
  fill: #aaa;
}

.blocklyResizeSW {
  cursor: sw-resize;
  fill: #aaa;
}

.blocklyResizeLine {
  stroke: #515A5A;
  stroke-width: 1;
}

.blocklyHighlightedConnectionPath {
  fill: none;
  stroke: #fc3;
  stroke-width: 4px;
}

.blocklyPathLight {
  fill: none;
  stroke-linecap: round;
  stroke-width: 1;
}

.blocklySelected>.blocklyPathLight {
  display: none;
}

.blocklyDraggable {
  cursor: grab;
  cursor: -webkit-grab;
}

.blocklyDragging {
  cursor: grabbing;
  cursor: -webkit-grabbing;
  /* Drag surface disables events to not block the toolbox, so we have to
   * reenable them here for the cursor values to work. */
  pointer-events: auto;
}

  /* Changes cursor on mouse down. Not effective in Firefox because of
     https://bugzilla.mozilla.org/show_bug.cgi?id=771241 */
.blocklyDraggable:active {
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

.blocklyDragging.blocklyDraggingDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyDragging>.blocklyPath,
.blocklyDragging>.blocklyPathLight {
  fill-opacity: .8;
  stroke-opacity: .8;
}

.blocklyDragging>.blocklyPathDark {
  display: none;
}

.blocklyDisabled>.blocklyPath {
  fill-opacity: .5;
  stroke-opacity: .5;
}

.blocklyDisabled>.blocklyPathLight,
.blocklyDisabled>.blocklyPathDark {
  display: none;
}

.blocklyInsertionMarker>.blocklyPath,
.blocklyInsertionMarker>.blocklyPathLight,
.blocklyInsertionMarker>.blocklyPathDark {
  fill-opacity: .2;
  stroke: none;
}

.blocklyNonEditableText>text {
  pointer-events: none;
}

.blocklyFlyout {
  position: absolute;
  z-index: 20;
}

.blocklyText text {
  cursor: default;
}

.blocklyHidden {
  display: none;
}

.blocklyFieldDropdown:not(.blocklyHidden) {
  display: block;
}

.blocklyIconGroup {
  cursor: default;
}

.blocklyIconGroup:not(:hover),
.blocklyIconGroupReadonly {
  opacity: .6;
}

.blocklyIconShape {
  fill: #00f;
  stroke: #fff;
  stroke-width: 1px;
}

.blocklyIconSymbol {
  fill: #fff;
}

.blocklyMinimalBody {
  margin: 0;
  padding: 0;
  height: 100%;
}

.blocklyHtmlInput {
  border: none;
  border-radius: 4px;
  height: 100%;
  margin: 0;
  outline: none;
  padding: 0;
  width: 100%;
  text-align: center;
  display: block;
  box-sizing: border-box;
}

/* Remove the increase and decrease arrows on the field number editor */
input.blocklyHtmlInput[type=number]::-webkit-inner-spin-button,
input.blocklyHtmlInput[type=number]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

input[type=number] {
  -moz-appearance: textfield;
}

.blocklyMainBackground {
  stroke-width: 1;
  stroke: #c6c6c6;  /* Equates to #ddd due to border being off-pixel. */
}

.blocklyMutatorBackground {
  fill: #fff;
  stroke: #ddd;
  stroke-width: 1;
}

.blocklyFlyoutBackground {
  fill: #ddd;
  fill-opacity: .8;
}

.blocklyMainWorkspaceScrollbar {
  z-index: 20;
}

.blocklyFlyoutScrollbar {
  z-index: 30;
}

.blocklyScrollbarHorizontal,
.blocklyScrollbarVertical {
  position: absolute;
  outline: none;
}

.blocklyScrollbarBackground {
  opacity: 0;
}

.blocklyScrollbarHandle {
  fill: #ccc;
}

.blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyScrollbarHandle:hover {
  fill: #bbb;
}

/* Darken flyout scrollbars due to being on a grey background. */
/* By contrast, workspace scrollbars are on a white background. */
.blocklyFlyout .blocklyScrollbarHandle {
  fill: #bbb;
}

.blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyFlyout .blocklyScrollbarHandle:hover {
  fill: #aaa;
}

.blocklyInvalidInput {
  background: #faa;
}

.blocklyVerticalMarker {
  stroke-width: 3px;
  fill: rgba(255,255,255,.5);
  pointer-events: none;
}

.blocklyComputeCanvas {
  position: absolute;
  width: 0;
  height: 0;
}

.blocklyNoPointerEvents {
  pointer-events: none;
}

.blocklyContextMenu {
  border-radius: 4px;
  max-height: 100%;
}

.blocklyDropdownMenu {
  border-radius: 2px;
  padding: 0 !important;
}

.blocklyDropdownMenu .blocklyMenuItem {
  /* 28px on the left for icon or checkbox. */
  padding-left: 28px;
}

/* BiDi override for the resting state. */
.blocklyDropdownMenu .blocklyMenuItemRtl {
  /* Flip left/right padding for BiDi. */
  padding-left: 5px;
  padding-right: 28px;
}

.blocklyWidgetDiv .blocklyMenu {
  background: #fff;
  border: 1px solid transparent;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
  font: normal 13px Arial, sans-serif;
  margin: 0;
  outline: none;
  padding: 4px 0;
  position: absolute;
  overflow-y: auto;
  overflow-x: hidden;
  max-height: 100%;
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

.blocklyWidgetDiv .blocklyMenu.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv .blocklyMenu {
  background: inherit;  /* Compatibility with gapi, reset from goog-menu */
  border: inherit;  /* Compatibility with gapi, reset from goog-menu */
  font: normal 13px "Helvetica Neue", Helvetica, sans-serif;
  outline: none;
  position: relative;  /* Compatibility with gapi, reset from goog-menu */
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

/* State: resting. */
.blocklyMenuItem {
  border: none;
  color: #000;
  cursor: pointer;
  list-style: none;
  margin: 0;
  /* 7em on the right for shortcut. */
  min-width: 7em;
  padding: 6px 15px;
  white-space: nowrap;
}

/* State: disabled. */
.blocklyMenuItemDisabled {
  color: #ccc;
  cursor: inherit;
}

/* State: hover. */
.blocklyMenuItemHighlight {
  background-color: rgba(0,0,0,.1);
}

/* State: selected/checked. */
.blocklyMenuItemCheckbox {
  height: 16px;
  position: absolute;
  width: 16px;
}

.blocklyMenuItemSelected .blocklyMenuItemCheckbox {
  background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;
  float: left;
  margin-left: -24px;
  position: static;  /* Scroll with the menu. */
}

.blocklyMenuItemRtl .blocklyMenuItemCheckbox {
  float: right;
  margin-right: -24px;
}

.blocklyBlockDragSurface, .blocklyAnimationLayer {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: visible !important;
  z-index: 80;
  pointer-events: none;
}
`,Fh={};Fh.inject=fi,Fh.register=Rn;var ae=class{constructor(e,t){this.x=e,this.y=t}clone(){return new ae(this.x,this.y)}scale(e){return this.x*=e,this.y*=e,this}translate(e,t){return this.x+=e,this.y+=t,this}static equals(e,t){return e===t?!0:e&&t?e.x===t.x&&e.y===t.y:!1}static distance(e,t){const n=e.x-t.x;return e=e.y-t.y,Math.sqrt(n*n+e*e)}static magnitude(e){return Math.sqrt(e.x*e.x+e.y*e.y)}static difference(e,t){return new ae(e.x-t.x,e.y-t.y)}static sum(e,t){return new ae(e.x+t.x,e.y+t.y)}},Lo="http://www.w3.org/2000/svg",es="http://www.w3.org/1999/xhtml",rr="http://www.w3.org/1999/xlink",pr;(function(e){e[e.ELEMENT_NODE=1]="ELEMENT_NODE",e[e.TEXT_NODE=3]="TEXT_NODE",e[e.COMMENT_NODE=8]="COMMENT_NODE"})(pr||(pr={}));var St=null,Uh=0,La=null,Zt={HTML_NS:es};Zt.NodeType=pr,Zt.SVG_NS=Lo,Zt.XLINK_NS=rr,Zt.addClass=ke,Zt.createSvgElement=J,Zt.getFastTextWidth=yr,Zt.getFastTextWidthWithSizeString=Hr,Zt.getTextWidth=Ws,Zt.hasClass=N,Zt.insertAfter=fe,Zt.measureFontMetrics=eo,Zt.removeClass=v,Zt.removeClasses=_,Zt.removeNode=x,Zt.setCssTransform=ht,Zt.startTextWidthCache=Ln,Zt.stopTextWidthCache=Ur;var P=class{constructor(e){this.tagName=e}toString(){return this.tagName}};P.ANIMATE=new P("animate"),P.CIRCLE=new P("circle"),P.CLIPPATH=new P("clipPath"),P.DEFS=new P("defs"),P.FECOMPOSITE=new P("feComposite"),P.FECOMPONENTTRANSFER=new P("feComponentTransfer"),P.FEFLOOD=new P("feFlood"),P.FEFUNCA=new P("feFuncA"),P.FEGAUSSIANBLUR=new P("feGaussianBlur"),P.FEPOINTLIGHT=new P("fePointLight"),P.FESPECULARLIGHTING=new P("feSpecularLighting"),P.FILTER=new P("filter"),P.FOREIGNOBJECT=new P("foreignObject"),P.G=new P("g"),P.IMAGE=new P("image"),P.LINE=new P("line"),P.PATH=new P("path"),P.PATTERN=new P("pattern"),P.POLYGON=new P("polygon"),P.RECT=new P("rect"),P.SVG=new P("svg"),P.TEXT=new P("text"),P.TSPAN=new P("tspan");var ct=class{constructor(e,t,n,o){this.top=e,this.bottom=t,this.left=n,this.right=o}clone(){return new ct(this.top,this.bottom,this.left,this.right)}getHeight(){return this.bottom-this.top}getWidth(){return this.right-this.left}contains(e,t){return e>=this.left&&e<=this.right&&t>=this.top&&t<=this.bottom}intersects(e){return this.left<=e.right&&this.right>=e.left&&this.bottom>=e.top&&this.top<=e.bottom}static equals(e,t){return e===t?!0:e&&t?e.top===t.top&&e.bottom===t.bottom&&e.left===t.left&&e.right===t.right:!1}static createFromPoint(e,t,n){const o=e.x;return e=e.y,new ct(e,e+n,o,o+t)}},oe=class{constructor(e,t){this.width=e,this.height=t}static equals(e,t){return e===t?!0:e&&t?e.width===t.width&&e.height===t.height:!1}static max(e,t){return new oe(Math.max(e.width,t.width),Math.max(e.height,t.height))}static min(e,t){return new oe(Math.min(e.width,t.width),Math.min(e.height,t.height))}},Ao={getSizeInternal:to},ks={TEST_ONLY:Ao};ks.getBorderBox=zs,ks.getComputedStyle=An,ks.getContainerOffsetToScrollInto=js,ks.getPageOffset=Jn,ks.getSize=$i,ks.getViewportPageOffset=rl,ks.scrollIntoContainerView=sl;var Hh=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,sg=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,qu={XY_REGEX:Hh,XY_STYLE_REGEX:sg},ws={TEST_ONLY:qu};ws.getDocumentScroll=Mt,ws.getInjectionDivXY=lt,ws.getRelativeXY=ut,ws.getViewportBBox=un,ws.screenToWsCoordinates=or,ws.wsToScreenCoordinates=qn;var Nt=class{constructor(e,t,n,o,a){this.workspace=e,this.horizontal=t,this.oldHostMetrics=null,this.ratio=1,this.origin=new ae(0,0),this.startDragHandle=this.handlePosition=this.handleLength=this.scrollbarLength=this.startDragMouse=0,this.containerVisible=this.isHandleVisible=!0,this.position=new ae(0,0),this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null,this.pair=n||!1,this.margin=a!==void 0?a:Nt.DEFAULT_SCROLLBAR_MARGIN,e="blocklyScrollbar"+(this.horizontal?"Horizontal":"Vertical"),o&&(e+=" "+o),this.outerSvg=J(P.SVG,{class:e}),o=J(P.G,{},this.outerSvg),this.svgBackground=J(P.RECT,{class:"blocklyScrollbarBackground"},o),e=Math.floor((Nt.scrollbarThickness-5)/2),this.svgHandle=J(P.RECT,{class:"blocklyScrollbarHandle",rx:e,ry:e},o),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarColour","fill"),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarOpacity","fill-opacity"),fe(this.outerSvg,this.workspace.getParentSvg()),this.setInitialThickness(),t?(this.lengthAttribute_="width",this.positionAttribute_="x"):(this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=Le(this.svgBackground,"pointerdown",this,this.onMouseDownBar),this.onMouseDownHandleWrapper_=Le(this.svgHandle,"pointerdown",this,this.onMouseDownHandle)}setInitialThickness(){const e=Nt.scrollbarThickness;this.horizontal?(this.svgBackground.setAttribute("height",String(e)),this.outerSvg.setAttribute("height",String(e)),this.svgHandle.setAttribute("height",String(e-5)),this.svgHandle.setAttribute("y","2.5")):(this.svgBackground.setAttribute("width",String(e)),this.outerSvg.setAttribute("width",String(e)),this.svgHandle.setAttribute("width",String(e-5)),this.svgHandle.setAttribute("x","2.5"))}dispose(){this.cleanUp(),et(this.onMouseDownBarWrapper_),et(this.onMouseDownHandleWrapper_),x(this.outerSvg),this.workspace.getThemeManager().unsubscribe(this.svgHandle)}constrainHandleLength(e){return e=0>=e||isNaN(e)?0:Math.min(e,this.scrollbarLength)}setHandleLength(e){this.handleLength=e,this.svgHandle.setAttribute(this.lengthAttribute_,String(this.handleLength))}constrainHandlePosition(e){return e=0>=e||isNaN(e)?0:Math.min(e,this.scrollbarLength-this.handleLength)}setHandlePosition(e){this.handlePosition=e,this.svgHandle.setAttribute(this.positionAttribute_,String(this.handlePosition))}setScrollbarLength(e){this.scrollbarLength=e,this.outerSvg.setAttribute(this.lengthAttribute_,String(this.scrollbarLength)),this.svgBackground.setAttribute(this.lengthAttribute_,String(this.scrollbarLength))}setPosition(e,t){this.position.x=e,this.position.y=t,ht(this.outerSvg,"translate("+(this.position.x+this.origin.x)+"px,"+(this.position.y+this.origin.y)+"px)")}resize(e){!e&&(e=this.workspace.getMetrics(),!e)||this.oldHostMetrics&&Nt.metricsAreEquivalent(e,this.oldHostMetrics)||(this.horizontal?this.resizeHorizontal(e):this.resizeVertical(e),this.oldHostMetrics=e,this.updateMetrics())}requiresViewResize(e){return this.oldHostMetrics?this.oldHostMetrics.viewWidth!==e.viewWidth||this.oldHostMetrics.viewHeight!==e.viewHeight||this.oldHostMetrics.absoluteLeft!==e.absoluteLeft||this.oldHostMetrics.absoluteTop!==e.absoluteTop:!0}resizeHorizontal(e){this.requiresViewResize(e)?this.resizeViewHorizontal(e):this.resizeContentHorizontal(e)}resizeViewHorizontal(e){var t=e.viewWidth-2*this.margin;this.pair&&(t-=Nt.scrollbarThickness),this.setScrollbarLength(Math.max(0,t)),t=e.absoluteLeft+this.margin,this.pair&&this.workspace.RTL&&(t+=Nt.scrollbarThickness),this.setPosition(t,e.absoluteTop+e.viewHeight-Nt.scrollbarThickness-this.margin),this.resizeContentHorizontal(e)}resizeContentHorizontal(e){if(e.viewWidth>=e.scrollWidth)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var t=this.scrollbarLength*e.viewWidth/e.scrollWidth;t=this.constrainHandleLength(t),this.setHandleLength(t),t=e.scrollWidth-e.viewWidth;var n=this.scrollbarLength-this.handleLength;e=(e.viewLeft-e.scrollLeft)/t*n,e=this.constrainHandlePosition(e),this.setHandlePosition(e),this.ratio=n/t}}resizeVertical(e){this.requiresViewResize(e)?this.resizeViewVertical(e):this.resizeContentVertical(e)}resizeViewVertical(e){let t=e.viewHeight-2*this.margin;this.pair&&(t-=Nt.scrollbarThickness),this.setScrollbarLength(Math.max(0,t)),this.setPosition(this.workspace.RTL?e.absoluteLeft+this.margin:e.absoluteLeft+e.viewWidth-Nt.scrollbarThickness-this.margin,e.absoluteTop+this.margin),this.resizeContentVertical(e)}resizeContentVertical(e){if(e.viewHeight>=e.scrollHeight)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var t=this.scrollbarLength*e.viewHeight/e.scrollHeight;t=this.constrainHandleLength(t),this.setHandleLength(t),t=e.scrollHeight-e.viewHeight;var n=this.scrollbarLength-this.handleLength;e=(e.viewTop-e.scrollTop)/t*n,e=this.constrainHandlePosition(e),this.setHandlePosition(e),this.ratio=n/t}}isVisible(){return this.isHandleVisible}setContainerVisible(e){const t=e!==this.containerVisible;this.containerVisible=e,t&&this.updateDisplay_()}setVisible(e){if(this.pair)throw Error("Unable to toggle visibility of paired scrollbars.");this.setVisibleInternal(e)}setVisibleInternal(e){const t=e!==this.isVisible();this.isHandleVisible=e,t&&this.updateDisplay_()}updateDisplay_(){this.containerVisible&&this.isVisible()?this.outerSvg.setAttribute("display","block"):this.outerSvg.setAttribute("display","none")}onMouseDownBar(e){if(this.workspace.markFocused(),zt(),this.cleanUp(),bn(e))e.stopPropagation();else{var t=dn(e,this.workspace.getParentSvg(),this.workspace.getInverseScreenCTM());t=this.horizontal?t.x:t.y;var n=lt(this.svgHandle);n=this.horizontal?n.x:n.y;var o=this.handlePosition,a=.95*this.handleLength;t<=n?o-=a:t>=n+this.handleLength&&(o+=a),this.setHandlePosition(this.constrainHandlePosition(o)),this.updateMetrics(),e.stopPropagation(),e.preventDefault()}}onMouseDownHandle(e){this.workspace.markFocused(),this.cleanUp(),bn(e)?e.stopPropagation():(this.startDragHandle=this.handlePosition,this.startDragMouse=this.horizontal?e.clientX:e.clientY,this.onMouseUpWrapper_=Le(document,"pointerup",this,this.onMouseUpHandle),this.onMouseMoveWrapper_=Le(document,"pointermove",this,this.onMouseMoveHandle),e.stopPropagation(),e.preventDefault())}onMouseMoveHandle(e){this.setHandlePosition(this.constrainHandlePosition(this.startDragHandle+((this.horizontal?e.clientX:e.clientY)-this.startDragMouse))),this.updateMetrics()}onMouseUpHandle(){zt(),this.cleanUp()}cleanUp(){this.workspace.hideChaff(!0),this.onMouseUpWrapper_&&(et(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&(et(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)}getRatio_(){let e=this.handlePosition/(this.scrollbarLength-this.handleLength);return isNaN(e)&&(e=0),e}updateMetrics(){const e=this.getRatio_();this.horizontal?this.workspace.setMetrics({x:e}):this.workspace.setMetrics({y:e})}set(e,t){this.setHandlePosition(this.constrainHandlePosition(e*this.ratio)),(t||t===void 0)&&this.updateMetrics()}setOrigin(e,t){this.origin=new ae(e,t)}static metricsAreEquivalent(e,t){return e.viewWidth===t.viewWidth&&e.viewHeight===t.viewHeight&&e.viewLeft===t.viewLeft&&e.viewTop===t.viewTop&&e.absoluteTop===t.absoluteTop&&e.absoluteLeft===t.absoluteLeft&&e.scrollWidth===t.scrollWidth&&e.scrollHeight===t.scrollHeight&&e.scrollLeft===t.scrollLeft&&e.scrollTop===t.scrollTop}};Nt.scrollbarThickness=Ca?25:15,Nt.DEFAULT_SCROLLBAR_MARGIN=.5;var Qu={parseFromString:function(){throw Error("DOMParser was not found in the global scope and was not properly injected using injectDependencies")}},Aa={serializeToString:function(){throw Error("XMLSerializer was not foundin the global scope and was not properly injected using injectDependencies")}},{document:Zu,DOMParser:Do,XMLSerializer:Mo}=globalThis;Do&&(Qu=new Do),Mo&&(Aa=new Mo);var fn="https://developers.google.com/blockly/xml",ts=/[\x00-\x09\x0B\x0C\x0E-\x1F]/g,gr={NAME_SPACE:fn};gr.createElement=i.createElement$$module$build$src$core$utils$xml,gr.createTextNode=i.createTextNode$$module$build$src$core$utils$xml,gr.domToText=il,gr.injectDependencies=vc,gr.textToDom=i.textToDom$$module$build$src$core$utils$xml;var Da="categoryToolbox",Gh="flyoutToolbox",Fe;(function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT"})(Fe||(Fe={}));var Vh={hasCategoriesInternal:pd},In={};In.Position=Fe,In.TEST_ONLY=Vh,In.convertFlyoutDefToJsonArray=Zl,In.convertToolboxDefToJson=Ql,In.hasCategories=eu,In.isCategoryCollapsible=tu,In.parseToolboxTree=Ft;var si;(function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM"})(si||(si={}));var No;(function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT"})(No||(No={}));var ii;(function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN"})(ii||(ii={}));var Ni={};Ni.bumpDirection=ii,Ni.bumpPositionRect=nu,Ni.getCornerOppositeToolbox=ol,Ni.getStartPositionRect=Cc,Ni.horizontalPosition=No,Ni.verticalPosition=si;var Mn={width:96,height:124,url:"sprites.png"},ig=class{constructor(e){this.workspace=e,this.id="zoomControls",this.boundEvents=[],this.zoomResetGroup=this.zoomOutGroup=this.zoomInGroup=null,this.HEIGHT=this.WIDTH=32,this.SMALL_SPACING=2,this.LARGE_SPACING=11,this.MARGIN_HORIZONTAL=this.MARGIN_VERTICAL=20,this.svgGroup=null,this.top=this.left=0,this.initialized=!1}createDom(){this.svgGroup=J(P.G,{});const e=String(Math.random()).substring(2);return this.createZoomOutSvg(e),this.createZoomInSvg(e),this.workspace.isMovable()&&this.createZoomResetSvg(e),this.svgGroup}init(){this.workspace.getComponentManager().addComponent({component:this,weight:vt.ComponentWeight.ZOOM_CONTROLS_WEIGHT,capabilities:[vt.Capability.POSITIONABLE]}),this.initialized=!0}dispose(){this.workspace.getComponentManager().removeComponent("zoomControls"),this.svgGroup&&x(this.svgGroup);for(const e of this.boundEvents)et(e);this.boundEvents.length=0}getBoundingRectangle(){let e=this.SMALL_SPACING+2*this.HEIGHT;return this.zoomResetGroup&&(e+=this.LARGE_SPACING+this.HEIGHT),new ct(this.top,this.top+e,this.left,this.left+this.WIDTH)}position(e,t){if(this.initialized){var n=ol(this.workspace,e),o=this.SMALL_SPACING+2*this.HEIGHT;if(this.zoomResetGroup&&(o+=this.LARGE_SPACING+this.HEIGHT),e=Cc(n,new oe(this.WIDTH,o),this.MARGIN_HORIZONTAL,this.MARGIN_VERTICAL,e,this.workspace),n=n.vertical,t=nu(e,this.MARGIN_VERTICAL,n===si.TOP?ii.DOWN:ii.UP,t),n===si.TOP){var a=this.SMALL_SPACING+this.HEIGHT,f;(f=this.zoomInGroup)==null||f.setAttribute("transform","translate(0, "+a+")"),this.zoomResetGroup&&this.zoomResetGroup.setAttribute("transform","translate(0, "+(a+this.LARGE_SPACING+this.HEIGHT)+")")}else{f=this.zoomResetGroup?this.LARGE_SPACING+this.HEIGHT:0;let w;(w=this.zoomInGroup)==null||w.setAttribute("transform","translate(0, "+f+")"),f=f+this.SMALL_SPACING+this.HEIGHT,(a=this.zoomOutGroup)==null||a.setAttribute("transform","translate(0, "+f+")")}this.top=t.top,this.left=t.left;var E;(E=this.svgGroup)==null||E.setAttribute("transform","translate("+this.left+","+this.top+")")}}createZoomOutSvg(e){this.zoomOutGroup=J(P.G,{class:"blocklyZoom blocklyZoomOut"},this.svgGroup);const t=J(P.CLIPPATH,{id:"blocklyZoomoutClipPath"+e},this.zoomOutGroup);J(P.RECT,{width:32,height:32},t),J(P.IMAGE,{width:Mn.width,height:Mn.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+e+")"},this.zoomOutGroup).setAttributeNS(rr,"xlink:href",this.workspace.options.pathToMedia+Mn.url),this.boundEvents.push(Le(this.zoomOutGroup,"pointerdown",null,this.zoom.bind(this,-1)))}createZoomInSvg(e){this.zoomInGroup=J(P.G,{class:"blocklyZoom blocklyZoomIn"},this.svgGroup);const t=J(P.CLIPPATH,{id:"blocklyZoominClipPath"+e},this.zoomInGroup);J(P.RECT,{width:32,height:32},t),J(P.IMAGE,{width:Mn.width,height:Mn.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+e+")"},this.zoomInGroup).setAttributeNS(rr,"xlink:href",this.workspace.options.pathToMedia+Mn.url),this.boundEvents.push(Le(this.zoomInGroup,"pointerdown",null,this.zoom.bind(this,1)))}zoom(e,t){this.workspace.markFocused(),this.workspace.zoomCenter(e),this.fireZoomEvent(),zt(),t.stopPropagation(),t.preventDefault()}createZoomResetSvg(e){this.zoomResetGroup=J(P.G,{class:"blocklyZoom blocklyZoomReset"},this.svgGroup);const t=J(P.CLIPPATH,{id:"blocklyZoomresetClipPath"+e},this.zoomResetGroup);J(P.RECT,{width:32,height:32},t),J(P.IMAGE,{width:Mn.width,height:Mn.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+e+")"},this.zoomResetGroup).setAttributeNS(rr,"xlink:href",this.workspace.options.pathToMedia+Mn.url),this.boundEvents.push(Le(this.zoomResetGroup,"pointerdown",null,this.resetZoom.bind(this)))}resetZoom(e){this.workspace.markFocused();const t=Math.log(this.workspace.options.zoomOptions.startScale/this.workspace.scale)/Math.log(this.workspace.options.zoomOptions.scaleSpeed);this.workspace.beginCanvasTransition(),this.workspace.zoomCenter(t),this.workspace.scrollCenter(),setTimeout(this.workspace.endCanvasTransition.bind(this.workspace),500),this.fireZoomEvent(),zt(),e.stopPropagation(),e.preventDefault()}fireZoomEvent(){const e=new(X(z.CLICK))(null,this.workspace.id,"zoom_controls");ce(e)}};Rn(`
.blocklyZoom>image, .blocklyZoom>svg>image {
  opacity: .4;
}

.blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {
  opacity: .6;
}

.blocklyZoom>image:active, .blocklyZoom>svg>image:active {
  opacity: .8;
}
`);var ec=100,Ma=75,fr=50,rt=25,$n={BLOCKS:fr,PROCEDURES:Ma,VARIABLES:ec,WORKSPACE_COMMENTS:rt},Kt={};Kt.register=_i,Kt.unregister=Mp;var mn=class{constructor(){this.priority=rt}save(e){const t=[];for(const n of e.getTopComments())(e=no(n,{addCoordinates:!0,saveIds:!0}))&&t.push(e);return t.length?t:null}load(e,t){for(const n of e)Ti(n,t,{recordUndo:$e()})}clear(e){for(const t of e.getTopComments())t.dispose()}};_i("workspaceComments",new mn);var Nn={};Nn.WorkspaceCommentSerializer=mn,Nn.append=Ti,Nn.save=no;var xi={};xi.register=lr,xi.unregister=Np;var Yt=class{paste(e,t,n){e=e.commentState,n&&(e.x=n.x,e.y=n.y),i.disable$$module$build$src$core$events$utils();let o;try{o=Ti(e,t),vr(o)}finally{i.enable$$module$build$src$core$events$utils()}return o?(Re()&&ce(new(X(z.COMMENT_CREATE))(o)),i.setSelected$$module$build$src$core$common(o),o):null}};Yt.TYPE="workspace-comment",lr(Yt.TYPE,new Yt);var xo;xo=28,i.config$$module$build$src$core$config={dragRadius:5,flyoutDragRadius:10,snapRadius:xo,connectingSnapRadius:xo,currentConnectionPreference:8,bumpDelay:250},i.config$$module$build$src$core$config;var Po="aria-",Na="role",$r;(function(e){e.GRID="grid",e.GRIDCELL="gridcell",e.GROUP="group",e.LISTBOX="listbox",e.MENU="menu",e.MENUITEM="menuitem",e.MENUITEMCHECKBOX="menuitemcheckbox",e.OPTION="option",e.PRESENTATION="presentation",e.ROW="row",e.TREE="tree",e.TREEITEM="treeitem"})($r||($r={}));var Gt;(function(e){e.ACTIVEDESCENDANT="activedescendant",e.COLCOUNT="colcount",e.DISABLED="disabled",e.EXPANDED="expanded",e.INVALID="invalid",e.LABEL="label",e.LABELLEDBY="labelledby",e.LEVEL="level",e.ORIENTATION="orientation",e.POSINSET="posinset",e.ROWCOUNT="rowcount",e.SELECTED="selected",e.SETSIZE="setsize",e.VALUEMAX="valuemax",e.VALUEMIN="valuemin"})(Gt||(Gt={}));var _n={};_n.Role=$r,_n.State=Gt,_n.setRole=Ei,_n.setState=hn;var tc=class{constructor(){this.menuItems=[],this.roleName=this.element=this.onKeyDownHandler=this.mouseLeaveHandler=this.mouseEnterHandler=this.clickHandler=this.mouseOverHandler=this.highlightedItem=this.openingCoords=null}addChild(e){this.menuItems.push(e)}render(e){const t=document.createElement("div");t.className="blocklyMenu goog-menu blocklyNonSelectable",t.tabIndex=0,this.roleName&&Ei(t,this.roleName),this.element=t;for(let n=0,o;o=this.menuItems[n];n++)t.appendChild(o.createDom());return this.mouseOverHandler=Le(t,"pointerover",this,this.handleMouseOver,!0),this.clickHandler=Le(t,"pointerup",this,this.handleClick,!0),this.mouseEnterHandler=Le(t,"pointerenter",this,this.handleMouseEnter,!0),this.mouseLeaveHandler=Le(t,"pointerleave",this,this.handleMouseLeave,!0),this.onKeyDownHandler=Le(t,"keydown",this,this.handleKeyEvent),e.appendChild(t),t}getElement(){return this.element}focus(){const e=this.getElement();e&&(e.focus({preventScroll:!0}),ke(e,"blocklyFocused"))}blur(){const e=this.getElement();e&&(e.blur(),v(e,"blocklyFocused"))}setRole(e){this.roleName=e}dispose(){this.mouseOverHandler&&(et(this.mouseOverHandler),this.mouseOverHandler=null),this.clickHandler&&(et(this.clickHandler),this.clickHandler=null),this.mouseEnterHandler&&(et(this.mouseEnterHandler),this.mouseEnterHandler=null),this.mouseLeaveHandler&&(et(this.mouseLeaveHandler),this.mouseLeaveHandler=null),this.onKeyDownHandler&&(et(this.onKeyDownHandler),this.onKeyDownHandler=null);for(let e=0,t;t=this.menuItems[e];e++)t.dispose();this.element=null}getMenuItem(e){const t=this.getElement();for(;e&&e!==t;){if(e.classList.contains("blocklyMenuItem")){for(let n=0,o;o=this.menuItems[n];n++)if(o.getElement()===e)return o}e=e.parentElement}return null}setHighlighted(e){var t=this.highlightedItem;if(t&&(t.setHighlighted(!1),this.highlightedItem=null),e){e.setHighlighted(!0),this.highlightedItem=e,(t=this.getElement())&&hn(t,Gt.ACTIVEDESCENDANT,e.getId());let n;(n=e.getElement())==null||n.scrollIntoView({block:"nearest",inline:"start"})}}highlightNext(){const e=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(e,1)}highlightPrevious(){const e=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(0>e?this.menuItems.length:e,-1)}highlightFirst(){this.highlightHelper(-1,1)}highlightLast(){this.highlightHelper(this.menuItems.length,-1)}highlightHelper(e,t){e+=t;let n;for(;n=this.menuItems[e];){if(n.isEnabled()){this.setHighlighted(n);break}e+=t}}handleMouseOver(e){(e=this.getMenuItem(e.target))&&(e.isEnabled()?this.highlightedItem!==e&&this.setHighlighted(e):this.setHighlighted(null))}handleClick(e){const t=this.openingCoords;if(this.openingCoords=null,t&&typeof e.clientX=="number"){const n=new ae(e.clientX,e.clientY);if(1>ae.distance(t,n))return}(e=this.getMenuItem(e.target))&&e.performAction()}handleMouseEnter(e){this.focus()}handleMouseLeave(e){this.getElement()&&(this.blur(),this.setHighlighted(null))}handleKeyEvent(e){if(this.menuItems.length&&!(e.shiftKey||e.ctrlKey||e.metaKey||e.altKey)){var t=this.highlightedItem;switch(e.key){case"Enter":case" ":t&&t.performAction();break;case"ArrowUp":this.highlightPrevious();break;case"ArrowDown":this.highlightNext();break;case"PageUp":case"Home":this.highlightFirst();break;case"PageDown":case"End":this.highlightLast();break;default:return}e.preventDefault(),e.stopPropagation()}}getSize(){const e=this.getElement(),t=$i(e);return t.height=e.scrollHeight,t}},Pi=class{constructor(e,t){this.content=e,this.opt_value=t,this.enabled=!0,this.element=null,this.rightToLeft=!1,this.roleName=null,this.highlight=this.checked=this.checkable=!1,this.actionHandler=null}createDom(){const e=document.createElement("div");e.id=V(),this.element=e,e.className="blocklyMenuItem goog-menuitem "+(this.enabled?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft?"blocklyMenuItemRtl goog-menuitem-rtl ":"");const t=document.createElement("div");if(t.className="blocklyMenuItemContent goog-menuitem-content",this.checkable){var n=document.createElement("div");n.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",t.appendChild(n)}return n=this.content,typeof this.content=="string"&&(n=document.createTextNode(this.content)),t.appendChild(n),e.appendChild(t),this.roleName&&Ei(e,this.roleName),hn(e,Gt.SELECTED,this.checkable&&this.checked||!1),hn(e,Gt.DISABLED,!this.enabled),e}dispose(){this.element=null}getElement(){return this.element}getId(){return this.element.id}getValue(){let e;return(e=this.opt_value)!=null?e:null}setRightToLeft(e){this.rightToLeft=e}setRole(e){this.roleName=e}setCheckable(e){this.checkable=e}setChecked(e){this.checked=e}setHighlighted(e){this.highlight=e;const t=this.getElement();t&&this.isEnabled()&&(e?(ke(t,"blocklyMenuItemHighlight"),ke(t,"goog-menuitem-highlight")):(v(t,"blocklyMenuItemHighlight"),v(t,"goog-menuitem-highlight")))}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}performAction(){this.isEnabled()&&this.actionHandler&&this.actionHandler(this)}onAction(e,t){this.actionHandler=e.bind(t)}},mr="_TEMP_COLLAPSED_INPUT",Bo="_TEMP_COLLAPSED_FIELD",kn="MANUALLY_DISABLED",Bi={COLLAPSED_FIELD_NAME:Bo,COLLAPSED_INPUT_NAME:mr,MANUALLY_DISABLED:kn};(function(e){e[e.VALUE=1]="VALUE",e[e.STATEMENT=3]="STATEMENT",e[e.DUMMY=5]="DUMMY",e[e.CUSTOM=6]="CUSTOM",e[e.END_ROW=7]="END_ROW"})(i.inputTypes$$module$build$src$core$inputs$input_types||(i.inputTypes$$module$build$src$core$inputs$input_types={})),i.inputTypes$$module$build$src$core$inputs$input_types;var Fo=new Set,Os=new WeakSet,Bl=new WeakMap,Rs=null,nc=null,rc=0,Uo={};Uo.finishQueuedRenders=Bn,Uo.queueRender=ll,Uo.triggerQueuedRenders=Sr;var xn=function(e,t){window.alert(e),t&&t()},oi=function(e,t){t(window.confirm(e))},Lr=function(e,t,n){n(window.prompt(e,t))},jn={confirmInternal:md},Fi={TEST_ONLY:jn};Fi.alert=ru,Fi.confirm=ot,Fi.prompt=cl,Fi.setAlert=wc,Fi.setConfirm=_d,Fi.setPrompt=Td;var sc,xa;i.Msg$$module$build$src$core$msg=Object.create(null),sc=function(e){Object.keys(e).forEach(function(t){i.Msg$$module$build$src$core$msg[t]=e[t]})},xa={Msg:i.Msg$$module$build$src$core$msg,setLocale:sc};var ic=class extends Oo{constructor(e){super(),this.isBlank=typeof e>"u",e&&(this.varId=e.getId(),this.workspaceId=e.workspace.id)}toJson(){const e=super.toJson();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");return e.varId=this.varId,e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new ic),t.varId=e.varId,t}},Ls=class extends ic{constructor(e){super(e),this.type=z.VAR_CREATE,e&&(this.varType=e.type,this.varName=e.name)}toJson(){const e=super.toJson();if(this.varType===void 0)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return e.varType=this.varType,e.varName=this.varName,e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new Ls),t.varType=e.varType,t.varName=e.varName,t}run(e){const t=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");e?t.createVariable(this.varName,this.varType,this.varId):t.deleteVariableById(this.varId)}};d(ne.EVENT,z.VAR_CREATE,Ls);var Fl=class{constructor(e,t,n,o){this.workspace=e,this.name=t,this.type=n||"",this.id=o||B()}getId(){return this.id}static compareByName(e,t){return e.name.localeCompare(t.name,void 0,{sensitivity:"base"})}},oc="VARIABLE",li="ijkmnopqrstuvwxyzabcdefgh",Pa={generateUniqueNameInternal:Xs},Jt={CATEGORY_NAME:oc,TEST_ONLY:Pa,VAR_LETTER_OPTIONS:li};Jt.allDeveloperVariables=i.allDeveloperVariables$$module$build$src$core$variables,Jt.allUsedVarModels=i.allUsedVarModels$$module$build$src$core$variables,Jt.createVariableButtonHandler=hs,Jt.flyoutCategory=io,Jt.flyoutCategoryBlocks=as,Jt.generateUniqueName=ds,Jt.generateUniqueNameFromOptions=yi,Jt.generateVariableFieldDom=ps,Jt.getAddedVariables=iu,Jt.getOrCreateVariablePackage=i.getOrCreateVariablePackage$$module$build$src$core$variables,Jt.getVariable=i.getVariable$$module$build$src$core$variables,Jt.nameUsedWithAnyType=Oc,Jt.nameUsedWithConflictingParam=oo,Jt.promptName=Gr,Jt.renameVariable=i.renameVariable$$module$build$src$core$variables;var Ho=class extends Error{},Wh=class extends Ho{constructor(e){super("Expected to find a 'type' property, defining the block type"),this.state=e}},Go=class extends Ho{constructor(e,t,n){super(`The block ${t.toDevString()} is missing a(n) ${e}
connection`),this.block=t,this.state=n}},lc=class extends Ho{constructor(e,t,n,o){super(`The block ${n.toDevString()} could not connect its
${t} to its parent, because: ${e}`),this.childBlock=n,this.childState=o}},og=class extends Ho{constructor(e){super(`Encountered a real block which is defined as a child of a shadow
block. It is an invariant of Blockly that shadow blocks only have shadow
children`),this.state=e}},lg=class extends Ho{constructor(e,t,n){super(`Cannot add an icon of type '${e}' to the block ${t.toDevString()}, because there is no icon registered with type '${e}'. Make sure that all of your icons have been registered.`),this.block=t,this.state=n}},Ui={};Ui.BadConnectionCheck=lc,Ui.DeserializationError=Ho,Ui.MissingBlockType=Wh,Ui.MissingConnection=Go,Ui.RealChildOfShadow=og,Ui.UnregisteredIcon=lg;var zh=class{constructor(){this.priority=fr}save(e){const t=[];for(const n of e.getTopBlocks(!1))(e=yn(n,{addCoordinates:!0,doFullSerialization:!1}))&&t.push(e);return t.length?{languageVersion:0,blocks:t}:null}load(e,t){e=e.blocks;for(const n of e)gs(n,t,{recordUndo:$e()})}clear(e){for(const t of e.getTopBlocks(!1))t.dispose(!1)}};_i("blocks",new zh);var ns={};ns.BlockSerializer=zh,ns.append=gs,ns.appendInternal=ur,ns.save=yn;var rn=class{constructor(e){this.name=e}toString(){return this.name}equals(e){return this.name===e.toString()}};rn.MUTATOR=new rn("mutator"),rn.WARNING=new rn("warning"),rn.COMMENT=new rn("comment");var Ar=class extends Oo{constructor(e){super(),this.isBlank=!e,e&&(this.blockId=e.id,this.workspaceId=e.workspace.id)}toJson(){const e=super.toJson();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return e.blockId=this.blockId,e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new Ar),t.blockId=e.blockId,t}},Hi=class extends Ar{constructor(e,t,n,o,a){super(e),this.type=z.BLOCK_CHANGE,e&&(this.element=t,this.name=n||void 0,this.oldValue=o,this.newValue=a)}toJson(){const e=super.toJson();if(!this.element)throw Error("The changed element is undefined. Either pass an element to the constructor, or call fromJson");return e.element=this.element,e.name=this.name,e.oldValue=this.oldValue,e.newValue=this.newValue,this.disabledReason&&(e.disabledReason=this.disabledReason),e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new Hi),t.element=e.element,t.name=e.name,t.oldValue=e.oldValue,t.newValue=e.newValue,e.disabledReason!==void 0&&(t.disabledReason=e.disabledReason),t}setDisabledReason(e){if(this.element!=="disabled")throw Error('Cannot set the disabled reason for a BlockChange event if the element is not "disabled".');this.disabledReason=e}isNull(){return this.oldValue===this.newValue}run(e){var t=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(t=t.getBlockById(this.blockId),!t)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");const n=t.getIcon(rn.MUTATOR);switch(n&&vi(n)&&n.bubbleIsVisible()&&n.setBubbleVisible(!1),e=e?this.newValue:this.oldValue,this.element){case"field":(t=t.getField(this.name))?t.setValue(e):console.warn("Can't set non-existent field: "+this.name);break;case"comment":t.setCommentText(e||null);break;case"collapsed":t.setCollapsed(!!e);break;case"disabled":var o;t.setDisabledReason(!!e,(o=this.disabledReason)!=null?o:kn);break;case"inline":t.setInputsInline(!!e);break;case"mutation":o=Hi.getExtraBlockState_(t),t.loadExtraState?t.loadExtraState(JSON.parse(e||"{}")):t.domToMutation&&t.domToMutation(i.textToDom$$module$build$src$core$utils$xml(e||"<mutation/>")),ce(new Hi(t,"mutation",null,o,e));break;default:console.warn("Unknown change type: "+this.element)}}static getExtraBlockState_(e){return e.saveExtraState?(e=e.saveExtraState(!0))?JSON.stringify(e):"":e.mutationToDom&&(e=e.mutationToDom())?Fn(e):""}};d(ne.EVENT,z.BLOCK_CHANGE,Hi);var Ot={};Ot.clamp=co,Ot.toDegrees=pu,Ot.toRadians=Si;var Ba=16,jh=1,ug=12,Xh=16,uc=.25,Fa=null,Vo=null,wn="",Gi="",st,_r,As,ui=null,rs=null,Ua=null,cc={getBoundsInfo:function(){const e=Jn(ui),t=$i(ui);return{left:e.x,right:e.x+t.width,top:e.y,bottom:e.y+t.height,width:t.width,height:t.height}},getPositionMetrics:function(e,t,n,o){const a=cc.getBoundsInfo(),f=$i(st);return t+f.height<a.bottom?Md(e,t,a,f):o-f.height>a.top?Nd(n,o,a,f):t+f.height<document.documentElement.clientHeight?Md(e,t,a,f):o-f.height>document.documentElement.clientTop?Nd(n,o,a,f):Nc(e,a,f)}},Pn={ANIMATION_TIME:uc,ARROW_HORIZONTAL_PADDING:ug,ARROW_SIZE:Ba,BORDER_SIZE:jh,PADDING_Y:Xh,TEST_ONLY:cc};Pn.clearContent=Dc,Pn.createDom=Id,Pn.getContentDiv=hl,Pn.getOwner=wd,Pn.getPositionX=gu,Pn.hide=fu,Pn.hideIfOwner=xc,Pn.hideWithoutAnimation=fs,Pn.isVisible=xd,Pn.repositionForWindowResize=Bd,Pn.setBoundsElement=kd,Pn.setColour=Od,Pn.show=Dd,Pn.showPositionedByBlock=Gp,Pn.showPositionedByField=Rd;var Wo=class{constructor(e){this.workspace=e,this.cursorSvg=this.cursor=null,this.markers=new Map,this.markerSvg=null}registerMarker(e,t){this.markers.has(e)&&this.unregisterMarker(e),t.setDrawer(this.workspace.getRenderer().makeMarkerDrawer(this.workspace,t)),this.setMarkerSvg(t.getDrawer().createDom()),this.markers.set(e,t)}unregisterMarker(e){const t=this.markers.get(e);if(t)t.dispose(),this.markers.delete(e);else throw Error("Marker with ID "+e+" does not exist. Can only unregister markers that exist.")}getCursor(){return this.cursor}getMarker(e){return this.markers.get(e)||null}setCursor(e){this.cursor&&this.cursor.getDrawer()&&this.cursor.getDrawer().dispose(),(this.cursor=e)&&(e=this.workspace.getRenderer().makeMarkerDrawer(this.workspace,this.cursor),this.cursor.setDrawer(e),this.setCursorSvg(this.cursor.getDrawer().createDom()))}setCursorSvg(e){e?(this.workspace.getBlockCanvas().appendChild(e),this.cursorSvg=e):this.cursorSvg=null}setMarkerSvg(e){e?this.workspace.getBlockCanvas()&&(this.cursorSvg?this.workspace.getBlockCanvas().insertBefore(e,this.cursorSvg):this.workspace.getBlockCanvas().appendChild(e)):this.markerSvg=null}updateMarkers(){this.workspace.keyboardAccessibilityMode&&this.cursorSvg&&this.workspace.getCursor().draw()}dispose(){const e=Object.keys(this.markers);for(let t=0,n;n=e[t];t++)this.unregisterMarker(n);this.markers.clear(),this.cursor&&(this.cursor.dispose(),this.cursor=null)}};Wo.LOCAL_MARKER="local_marker_1";var Ul={};Ul.commonWordPrefix=Fd,Ul.commonWordSuffix=Ud,Ul.isNumber=i.isNumber$$module$build$src$core$utils$string,Ul.shortestStringLength=$u,Ul.wrap=i.wrap$$module$build$src$core$utils$string;var ac=void 0,Hl=!1,ci=!1,dc=50,Kh=0,ai=0,Ha=0,hc=0,Xn=null,zo=null,Gl=0,Ga=10,cg=10,pc=750,Va=5,xt=null,Tr={HOVER_MS:pc,LIMIT:dc,MARGINS:Va,OFFSET_X:Gl,OFFSET_Y:Ga,RADIUS_OK:cg};Tr.bindMouseEvents=gl,Tr.block=fl,Tr.createDom=zd,Tr.dispose=go,Tr.getCustomTooltip=Gd,Tr.getDiv=Wd,Tr.getTooltipOfObject=ho,Tr.hide=Ks,Tr.isVisible=Vd,Tr.setCustomTooltip=Hd,Tr.unbindMouseEvents=Pc,Tr.unblock=Kd;var Vl=.45,r=.65,s={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},c={};c.blend=Vr,c.getHsvSaturation=Uc,c.getHsvValue=Qd,c.hexToRgb=Hc,c.hsvToHex=Zn,c.hueToHex=Gc,c.names=s,c.parse=fo,c.rgbToHex=mu,c.setHsvSaturation=qd,c.setHsvValue=zp;var h={};h.checkMessageReferences=Wc,h.parseBlockColour=$l,h.replaceMessageReferences=Ut,h.tokenizeInterpolation=Vc;var g=class{constructor(e,t,n){this.DEFAULT_VALUE=null,this.name=void 0,this.constants_=this.mouseDownWrapper=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg=this.cursorSvg=this.tooltip=this.validator_=null,this.disposed=!1,this.maxDisplayLength=50,this.sourceBlock_=null,this.enabled_=this.visible_=this.isDirty_=!0,this.suffixField=this.prefixField=this.clickTarget_=null,this.EDITABLE=!0,this.SERIALIZABLE=!1,this.CURSOR="",this.value_="DEFAULT_VALUE"in new.target.prototype?new.target.prototype.DEFAULT_VALUE:this.DEFAULT_VALUE,this.size_=new oe(0,0),e!==g.SKIP_SETUP&&(n&&this.configure_(n),this.setValue(e),t&&this.setValidator(t))}configure_(e){e.tooltip&&this.setTooltip(Ut(e.tooltip))}setSourceBlock(e){if(this.sourceBlock_)throw Error("Field already bound to a block");this.sourceBlock_=e}getConstants(){return!this.constants_&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_}getSourceBlock(){return this.sourceBlock_}init(){this.fieldGroup_||(this.fieldGroup_=J(P.G,{}),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip),this.bindEvents_(),this.initModel(),this.applyColour())}initView(){this.createBorderRect_(),this.createTextElement_()}initModel(){}isFullBlockField(){return!this.borderRect_}createBorderRect_(){this.borderRect_=J(P.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)}createTextElement_(){this.textElement_=J(P.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)}bindEvents_(){const e=this.getClickTarget_();if(!e)throw Error("A click target has not been set.");gl(e),this.mouseDownWrapper=Le(e,"pointerdown",this,this.onMouseDown_)}fromXml(e){this.setValue(e.textContent)}toXml(e){return e.textContent=this.getValue(),e}saveState(e){return e=this.saveLegacyState(g),e!==null?e:this.getValue()}loadState(e){this.loadLegacyState(g,e)||this.setValue(e)}saveLegacyState(e){return e.prototype.saveState===this.saveState&&e.prototype.toXml!==this.toXml?(e=i.createElement$$module$build$src$core$utils$xml("field"),e.setAttribute("name",this.name||""),il(this.toXml(e)).replace(' xmlns="https://developers.google.com/blockly/xml"',"")):null}loadLegacyState(e,t){return e.prototype.loadState===this.loadState&&e.prototype.fromXml!==this.fromXml?(this.fromXml(i.textToDom$$module$build$src$core$utils$xml(t)),!0):!1}dispose(){xc(this),$s(this);let e;(e=this.getSourceBlock())!=null&&e.isDeadOrDying()||x(this.fieldGroup_),this.disposed=!0}updateEditable(){const e=this.fieldGroup_,t=this.getSourceBlock();this.EDITABLE&&e&&t&&(this.enabled_&&t.isEditable()?(ke(e,"blocklyEditableText"),v(e,"blocklyNonEditableText"),e.style.cursor=this.CURSOR):(ke(e,"blocklyNonEditableText"),v(e,"blocklyEditableText"),e.style.cursor=""))}setEnabled(e){this.enabled_=e,this.updateEditable()}isEnabled(){return this.enabled_}isClickable(){return this.enabled_&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&this.showEditor_!==g.prototype.showEditor_}isClickableInFlyout(e){return!e}isCurrentlyEditable(){return this.enabled_&&this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()}isSerializable(){let e=!1;return this.name&&(this.SERIALIZABLE?e=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),e=!0)),e}isVisible(){return this.visible_}setVisible(e){if(this.visible_!==e){this.visible_=e;var t=this.fieldGroup_;t&&(t.style.display=e?"block":"none")}}setValidator(e){this.validator_=e}getValidator(){return this.validator_}getSvgRoot(){return this.fieldGroup_}getBorderRect(){if(!this.borderRect_)throw Error(`The border rectangle is ${this.borderRect_}.`);return this.borderRect_}getTextElement(){if(!this.textElement_)throw Error(`The text element is ${this.textElement_}.`);return this.textElement_}getTextContent(){if(!this.textContent_)throw Error(`The text content is ${this.textContent_}.`);return this.textContent_}applyColour(){}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()}showEditor(e){this.isClickable()&&this.showEditor_(e)}showEditor_(e){}repositionForWindowResize(){return!1}updateSize_(e){const t=this.getConstants();e=e!==void 0?e:this.isFullBlockField()?0:this.getConstants().FIELD_BORDER_RECT_X_PADDING;let n=2*e,o=t.FIELD_TEXT_HEIGHT,a=0;this.textElement_&&(a=yr(this.textElement_,t.FIELD_TEXT_FONTSIZE,t.FIELD_TEXT_FONTWEIGHT,t.FIELD_TEXT_FONTFAMILY),n+=a),this.isFullBlockField()||(o=Math.max(o,t.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=o,this.size_.width=n,this.positionTextElement_(e,a),this.positionBorderRect_()}positionTextElement_(e,t){if(this.textElement_){var n=this.getConstants(),o=this.size_.height/2,a;this.textElement_.setAttribute("x",String((a=this.getSourceBlock())!=null&&a.RTL?this.size_.width-t-e:e)),this.textElement_.setAttribute("y",String(n.FIELD_TEXT_BASELINE_CENTER?o:o-n.FIELD_TEXT_HEIGHT/2+n.FIELD_TEXT_BASELINE))}}positionBorderRect_(){this.borderRect_&&(this.borderRect_.setAttribute("width",String(this.size_.width)),this.borderRect_.setAttribute("height",String(this.size_.height)),this.borderRect_.setAttribute("rx",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)),this.borderRect_.setAttribute("ry",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)))}getSize(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&this.size_.width===0&&(this.render_(),this.size_.width!==0&&console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead.")),this.size_):new oe(0,0)}getScaledBBox(){let e;var t=this.getSourceBlock();if(!t)throw new $;if(this.isFullBlockField()){var n=this.sourceBlock_.getHeightWidth();const o=t.workspace.scale;e=this.getAbsoluteXY_(),t=(n.width+1)*o,n=(n.height+1)*o,xh?(e.x+=1.5*o,e.y+=1.5*o):(e.x-=.5*o,e.y-=.5*o)}else n=this.borderRect_.getBoundingClientRect(),e=Jn(this.borderRect_),t=n.width,n=n.height;return new ct(e.y,e.y+n,e.x,e.x+t)}onLocationChange(e){}getDisplayText_(){let e=this.getText();return e?(e.length>this.maxDisplayLength&&(e=e.substring(0,this.maxDisplayLength-2)+"…"),e=e.replace(/\s/g,g.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(e+="‏"),e):g.NBSP}getText(){const e=this.getText_();return String(e!==null?e:this.getValue())}getText_(){return null}markDirty(){this.isDirty_=!0,this.constants_=null}forceRerender(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&this.sourceBlock_.queueRender()}setValue(e,t=!0){if(e!==null){var n=i.getGroup$$module$build$src$core$events$utils();n||i.setGroup$$module$build$src$core$events$utils(!0);try{const q=this.doClassValidation_(e),Se=this.processValidation(e,q,t);if(!(Se instanceof Error)){var o,a=(o=this.getValidator())==null?void 0:o.call(this,Se),f=this.processValidation(Se,a,t);if(!(f instanceof Error)){var E=this.sourceBlock_;if(!E||!E.disposed){var w=this.getValue();w===f?this.doValueUpdate_(f):(this.doValueUpdate_(f),t&&E&&Re()&&ce(new(X(z.BLOCK_CHANGE))(E,"field",this.name||null,w,f)),this.isDirty_&&this.forceRerender())}}}}finally{i.setGroup$$module$build$src$core$events$utils(n)}}}processValidation(e,t,n){return t===null?(this.doValueInvalid_(e,n),this.isDirty_&&this.forceRerender(),Error()):t===void 0?e:t}getValue(){return this.value_}doClassValidation_(e){return e??null}doValueUpdate_(e){this.value_=e,this.isDirty_=!0}doValueInvalid_(e,t){}onMouseDown_(e){this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&(e=this.sourceBlock_.workspace.getGesture(e))&&e.setStartField(this)}setTooltip(e){e||e===""||(e=this.sourceBlock_);const t=this.getClickTarget_();t?t.tooltip=e:this.tooltip=e}getTooltip(){const e=this.getClickTarget_();return ho(e||{tooltip:this.tooltip})}getClickTarget_(){return this.clickTarget_||this.getSvgRoot()}getAbsoluteXY_(){return Jn(this.getClickTarget_())}referencesVariables(){return!1}refreshVariableName(){}getParentInput(){let e=null;const t=this.getSourceBlock();if(!t)throw new $;const n=t.inputList;for(let o=0;o<t.inputList.length;o++){const a=n[o],f=a.fieldRow;for(let E=0;E<f.length;E++)if(f[E]===this){e=a;break}}return e}getFlipRtl(){return!1}isTabNavigable(){return!1}onShortcut(e){return!1}setCursorSvg(e){if(e){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(e),this.cursorSvg=e}else this.cursorSvg=null}setMarkerSvg(e){if(e){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(e),this.markerSvg=e}else this.markerSvg=null}updateMarkers_(){var e=this.getSourceBlock();if(!e)throw new $;e=e.workspace,e.keyboardAccessibilityMode&&this.cursorSvg&&e.getCursor().draw(),e.keyboardAccessibilityMode&&this.markerSvg&&e.getMarker(Wo.LOCAL_MARKER).draw()}static fromJson(e){throw Error("Attempted to instantiate a field from the registry that hasn't defined a 'fromJson' method.")}};g.NBSP=" ",g.SKIP_SETUP=Symbol("SKIP_SETUP");var $=class extends Error{constructor(){super("The field has not yet been attached to its input. Call appendField to attach it.")}},T=null,I=null,A=null,j="blocklyWidgetDiv",ie="",de="",re,Te={};Te.createDom=Tu,Te.getDiv=$o,Te.hide=ki,Te.hideIfOwner=$s,Te.hideIfOwnerIsInWorkspace=ms,Te.isVisible=zc,Te.positionWithAnchor=jc,Te.repositionForWindowResize=Xc,Te.show=Ii,Te.testOnly_setDiv=mo;var Oe=null,De={},Pt=null,G={};G.callbackFactory=i.callbackFactory$$module$build$src$core$contextmenu,G.dispose=_o,G.getCurrentBlock=th,G.hide=yu,G.setCurrentBlock=Kc,G.show=ml;var O=class{constructor(){this.registeredItems=new Map,this.reset()}reset(){this.registeredItems.clear()}register(e){if(this.registeredItems.has(e.id))throw Error('Menu item with ID "'+e.id+'" is already registered.');this.registeredItems.set(e.id,e)}unregister(e){if(!this.registeredItems.has(e))throw Error('Menu item with ID "'+e+'" not found.');this.registeredItems.delete(e)}getItem(e){let t;return(t=this.registeredItems.get(e))!=null?t:null}getContextMenuOptions(e,t){const n=[];for(const a of this.registeredItems.values())if(e===a.scopeType){var o=a.preconditionFn(t);o!=="hidden"&&(o={text:typeof a.displayText=="function"?a.displayText(t):a.displayText,enabled:o==="enabled",callback:a.callback,scope:t,weight:a.weight},n.push(o))}return n.sort(function(a,f){return a.weight-f.weight}),n}};(function(e){var t=e.ScopeType||(e.ScopeType={});t.BLOCK="block",t.WORKSPACE="workspace",t.COMMENT="comment",e.registry=new e})(O),O.ScopeType;var W=50,ge=100,Ne={BLOCK:W,BUBBLE:ge},Ue=class{constructor(e){this.comment=e,this.startLoc=null,this.inGroup=!1,this.workspace=e.workspace}isMovable(){return this.comment.isOwnMovable()&&!this.comment.isDeadOrDying()&&!this.workspace.options.readOnly}startDrag(){(this.inGroup=!!i.getGroup$$module$build$src$core$events$utils())||i.setGroup$$module$build$src$core$events$utils(!0),this.fireDragStartEvent(),this.startLoc=this.comment.getRelativeToSurfaceXY(),this.workspace.setResizesEnabled(!1);let e;(e=this.workspace.getLayerManager())==null||e.moveToDragLayer(this.comment),this.comment.setDragging(!0)}drag(e){this.comment.moveDuringDrag(e)}endDrag(){this.fireDragEndEvent(),this.fireMoveEvent();let e;(e=this.workspace.getLayerManager())==null||e.moveOffDragLayer(this.comment,W),this.comment.setDragging(!1),this.comment.snapToGrid(),this.workspace.setResizesEnabled(!0),this.inGroup||i.setGroup$$module$build$src$core$events$utils(!1)}fireDragStartEvent(){const e=new(X(z.COMMENT_DRAG))(this.comment,!0);ce(e)}fireDragEndEvent(){const e=new(X(z.COMMENT_DRAG))(this.comment,!1);ce(e)}fireMoveEvent(){if(!this.comment.isDeadOrDying()){var e=new(X(z.COMMENT_MOVE))(this.comment);e.setReason(["drag"]),e.oldCoordinate_=this.startLoc,e.recordNew(),ce(e)}}revertDrag(){this.startLoc&&this.comment.moveDuringDrag(this.startLoc)}},He=new WeakMap,Ve=class{constructor(e){this.workspace=e,this.size=new oe(120,100),this.collapsed=!1,this.editable=!0,this.location=new ae(0,0),this.text="",this.textChangeListeners=[],this.sizeChangeListeners=[],this.disposeListeners=[],this.collapseChangeListeners=[],this.resizePointerMoveListener=this.resizePointerUpListener=null,this.disposed=this.disposing=!1,this.svgRoot=J(P.G,{class:"blocklyComment blocklyEditable blocklyDraggable"}),this.highlightRect=this.createHighlightRect(this.svgRoot),{topBarGroup:this.topBarGroup,topBarBackground:this.topBarBackground,deleteIcon:this.deleteIcon,foldoutIcon:this.foldoutIcon,textPreview:this.textPreview,textPreviewNode:this.textPreviewNode}=this.createTopBar(this.svgRoot,e),{foreignObject:this.foreignObject,textArea:this.textArea}=this.createTextArea(this.svgRoot),this.resizeHandle=this.createResizeHandle(this.svgRoot,e);let t;(t=e.getLayerManager())==null||t.append(this,W),this.setSizeWithoutFiringEvents(this.size),this.moveTo(new ae(0,0))}createHighlightRect(e){return J(P.RECT,{class:"blocklyCommentHighlight"},e)}createTopBar(e,t){e=J(P.G,{class:"blocklyCommentTopbar"},e);const n=J(P.RECT,{class:"blocklyCommentTopbarBackground"},e),o=J(P.IMAGE,{class:"blocklyDeleteIcon",href:`${t.options.pathToMedia}delete-icon.svg`},e);t=J(P.IMAGE,{class:"blocklyFoldoutIcon",href:`${t.options.pathToMedia}foldout-icon.svg`},e);const a=J(P.TEXT,{class:"blocklyCommentPreview blocklyCommentText blocklyText"},e),f=document.createTextNode("");return a.appendChild(f),Le(t,"pointerdown",this,this.onFoldoutDown),Le(o,"pointerdown",this,this.onDeleteDown),{topBarGroup:e,topBarBackground:n,deleteIcon:o,foldoutIcon:t,textPreview:a,textPreviewNode:f}}createTextArea(e){e=J(P.FOREIGNOBJECT,{class:"blocklyCommentForeignObject"},e);const t=document.createElementNS(es,"body");t.setAttribute("xmlns",es),t.className="blocklyMinimalBody";const n=document.createElementNS(es,"textarea");return ke(n,"blocklyCommentText"),ke(n,"blocklyTextarea"),ke(n,"blocklyText"),t.appendChild(n),e.appendChild(t),Le(n,"change",this,this.onTextChange),{foreignObject:e,textArea:n}}createResizeHandle(e,t){return e=J(P.IMAGE,{class:"blocklyResizeHandle",href:`${t.options.pathToMedia}resize-handle.svg`},e),Le(e,"pointerdown",this,this.onResizePointerDown),e}getSvgRoot(){return this.svgRoot}getSize(){return this.collapsed?this.topBarBackground.getBBox():this.size}setSizeWithoutFiringEvents(e){const t=this.topBarBackground.getBBox(),n=this.deleteIcon.getBBox(),o=this.foldoutIcon.getBBox(),a=this.textPreview.getBBox(),f=this.resizeHandle.getBBox();this.size=e=oe.max(e,this.calcMinSize(t,o,n)),this.svgRoot.setAttribute("height",`${e.height}`),this.svgRoot.setAttribute("width",`${e.width}`),this.updateHighlightRect(e),this.updateTopBarSize(e),this.updateTextAreaSize(e,t),this.updateDeleteIconPosition(e,t,n),this.updateFoldoutIconPosition(t,o),this.updateTextPreviewSize(e,t,a,n,f),this.updateResizeHandlePosition(e,f)}setSize(e){const t=this.preResizeSize||this.size;this.setSizeWithoutFiringEvents(e),this.onSizeChange(t,this.size)}calcMinSize(e,t,n){var o;this.updateTextPreview((o=this.textArea.value)!=null?o:""),o=Ws(this.textPreview);const a=this.calcFoldoutMargin(e,t),f=this.calcDeleteMargin(e,n);let E=o;return this.foldoutIcon.checkVisibility()?E+=t.width+2*a:o&&(E+=4),this.deleteIcon.checkVisibility()?E+=n.width+2*f:o&&(E+=4),new oe(E,e.height+20)}calcDeleteMargin(e,t){return(e.height-t.height)/2}calcFoldoutMargin(e,t){return(e.height-t.height)/2}updateHighlightRect(e){this.highlightRect.setAttribute("height",`${e.height}`),this.highlightRect.setAttribute("width",`${e.width}`),this.workspace.RTL&&this.highlightRect.setAttribute("x",`${-e.width}`)}updateTopBarSize(e){this.topBarBackground.setAttribute("width",`${e.width}`)}updateTextAreaSize(e,t){this.foreignObject.setAttribute("height",`${e.height-t.height}`),this.foreignObject.setAttribute("width",`${e.width}`),this.foreignObject.setAttribute("y",`${t.height}`),this.workspace.RTL&&this.foreignObject.setAttribute("x",`${-e.width}`)}updateDeleteIconPosition(e,t,n){t=this.calcDeleteMargin(t,n),this.deleteIcon.setAttribute("y",`${t}`),this.deleteIcon.setAttribute("x",`${e.width-n.width-t}`)}updateFoldoutIconPosition(e,t){e=this.calcFoldoutMargin(e,t),this.foldoutIcon.setAttribute("y",`${e}`),this.foldoutIcon.setAttribute("x",`${e}`)}updateTextPreviewSize(e,t,n,o,a){const f=(t.height-n.height)/2,E=this.calcDeleteMargin(t,o);t=this.calcFoldoutMargin(t,a),e=e.width-a.width-2*t-o.width-2*E,this.textPreview.setAttribute("x",`${a.width+2*t*(this.workspace.RTL?-1:1)}`),this.textPreview.setAttribute("y",`${f+n.height/2}`),this.textPreview.setAttribute("width",`${e}`)}updateResizeHandlePosition(e,t){this.resizeHandle.setAttribute("y",`${e.height-t.height}`),this.resizeHandle.setAttribute("x",`${e.width-t.width}`)}onSizeChange(e,t){for(let n=this.sizeChangeListeners.length-1;0<=n;n--)this.sizeChangeListeners[n](e,t)}addSizeChangeListener(e){this.sizeChangeListeners.push(e)}removeSizeChangeListener(e){this.sizeChangeListeners.splice(this.sizeChangeListeners.indexOf(e),1)}onResizePointerDown(e){this.isEditable()&&(this.bringToFront(),bn(e)||(this.preResizeSize=this.getSize(),vu(this.workspace,e,new ae(this.workspace.RTL?-this.getSize().width:this.getSize().width,this.getSize().height)),this.resizePointerUpListener=Le(document,"pointerup",this,this.onResizePointerUp),this.resizePointerMoveListener=Le(document,"pointermove",this,this.onResizePointerMove),this.workspace.hideChaff()),e.stopPropagation())}onResizePointerUp(e){zt(),this.resizePointerUpListener&&(et(this.resizePointerUpListener),this.resizePointerUpListener=null),this.resizePointerMoveListener&&(et(this.resizePointerMoveListener),this.resizePointerMoveListener=null),this.setSize(this.size),this.preResizeSize=void 0}onResizePointerMove(e){e=Su(this.workspace,e),this.setSizeWithoutFiringEvents(new oe(this.workspace.RTL?-e.x:e.x,e.y))}isCollapsed(){return this.collapsed}setCollapsed(e){(this.collapsed=e)?ke(this.svgRoot,"blocklyCollapsed"):v(this.svgRoot,"blocklyCollapsed"),this.setSizeWithoutFiringEvents(this.size),this.onCollapse()}onCollapse(){for(let e=this.collapseChangeListeners.length-1;0<=e;e--)this.collapseChangeListeners[e](this.collapsed)}addOnCollapseListener(e){this.collapseChangeListeners.push(e)}removeOnCollapseListener(e){this.collapseChangeListeners.splice(this.collapseChangeListeners.indexOf(e),1)}onFoldoutDown(e){zt(),this.bringToFront(),bn(e)||(this.setCollapsed(!this.collapsed),this.workspace.hideChaff()),e.stopPropagation()}isEditable(){return this.editable}setEditable(e){(this.editable=e)?(ke(this.svgRoot,"blocklyEditable"),v(this.svgRoot,"blocklyReadonly"),this.textArea.removeAttribute("readonly")):(v(this.svgRoot,"blocklyEditable"),ke(this.svgRoot,"blocklyReadonly"),this.textArea.setAttribute("readonly","true"))}getRelativeToSurfaceXY(){return this.location}moveTo(e){this.location=e,this.svgRoot.setAttribute("transform",`translate(${e.x}, ${e.y})`)}getText(){return this.text}setText(e){this.textArea.value=e,this.onTextChange()}addTextChangeListener(e){this.textChangeListeners.push(e)}removeTextChangeListener(e){this.textChangeListeners.splice(this.textChangeListeners.indexOf(e),1)}onTextChange(){const e=this.text;this.text=this.textArea.value,this.updateTextPreview(this.text),this.setSize(this.size);for(let t=this.textChangeListeners.length-1;0<=t;t--)this.textChangeListeners[t](e,this.text)}updateTextPreview(e){this.textPreviewNode.textContent=this.truncateText(e)}truncateText(e){return 12<=e.length?`${e.substring(0,9)}...`:e}bringToFront(){const e=this.svgRoot.parentNode,t=e.childNodes;t[t.length-1]!==this.svgRoot&&e.appendChild(this.svgRoot)}onDeleteDown(e){zt(),bn(e)||this.dispose(),e.stopPropagation()}dispose(){this.disposing=!0,x(this.svgRoot);for(let e=this.disposeListeners.length-1;0<=e;e--)this.disposeListeners[e]();this.disposed=!0}isDisposed(){return this.disposed}isDeadOrDying(){return this.disposing||this.disposed}addDisposeListener(e){this.disposeListeners.push(e)}removeDisposeListener(e){this.disposeListeners.splice(this.disposeListeners.indexOf(e),1)}};Rn(`
.injectionDiv {
  --commentFillColour: #FFFCC7;
  --commentBorderColour: #F2E49B;
}

.blocklyComment .blocklyTextarea {
  background-color: var(--commentFillColour);
  border: 1px solid var(--commentBorderColour);
  box-sizing: border-box;
  display: block;
  outline: 0;
  padding: 5px;
  resize: none;
  width: 100%;
  height: 100%;
}

.blocklyReadonly.blocklyComment .blocklyTextarea {
  cursor: inherit;
}

.blocklyDeleteIcon {
  width: 20px;
  height: 20px;
  display: none;
  cursor: pointer;
}

.blocklyFoldoutIcon {
  width: 20px;
  height: 20px;
  transform-origin: 12px 12px;
  cursor: pointer;
}
.blocklyResizeHandle {
  width: 12px;
  height: 12px;
  cursor: se-resize;
}
.blocklyReadonly.blocklyComment .blocklyResizeHandle {
  cursor: inherit;
}

.blocklyCommentTopbarBackground {
  fill: var(--commentBorderColour);
  height: 24px;
}

.blocklyComment .blocklyCommentPreview.blocklyText {
  fill: #000;
  dominant-baseline: middle;
  visibility: hidden;
}

.blocklyCollapsed.blocklyComment .blocklyCommentPreview {
  visibility: visible;
}

.blocklyCollapsed.blocklyComment .blocklyCommentForeignObject,
.blocklyCollapsed.blocklyComment .blocklyResizeHandle {
  display: none;
}

.blocklyCollapsed.blocklyComment .blocklyFoldoutIcon {
  transform: rotate(-90deg);
}

.blocklyRTL .blocklyCommentTopbar {
  transform: scale(-1, 1);
}

.blocklyRTL .blocklyCommentForeignObject {
  direction: rtl;
}

.blocklyRTL .blocklyCommentPreview {
  /* Revert the scale and control RTL using direction instead. */
  transform: scale(-1, 1);
  direction: rtl;
}

.blocklyRTL .blocklyResizeHandle {
  transform: scale(-1, 1);
  cursor: sw-resize;
}

.blocklyCommentHighlight {
  fill: none;
}

.blocklySelected .blocklyCommentHighlight {
  stroke: #fc3;
  stroke-width: 3px;
}

.blocklyCollapsed.blocklySelected .blocklyCommentHighlight {
  stroke: none;
}

.blocklyCollapsed.blocklySelected .blocklyCommentTopbarBackground {
  stroke: #fc3;
  stroke-width: 3px;
}
`);var en=class{constructor(e,t){this.workspace=e,this.text="",this.size=new oe(120,100),this.collapsed=!1,this.deletable=this.movable=this.editable=!0,this.location=new ae(0,0),this.disposing=this.disposed=!1,this.id=t&&!e.getCommentById(t)?t:B(),e.addTopComment(this),this.fireCreateEvent()}fireCreateEvent(){Re()&&ce(new(X(z.COMMENT_CREATE))(this))}fireDeleteEvent(){Re()&&ce(new(X(z.COMMENT_DELETE))(this))}fireChangeEvent(e,t){Re()&&ce(new(X(z.COMMENT_CHANGE))(this,e,t))}fireCollapseEvent(e){Re()&&ce(new(X(z.COMMENT_COLLAPSE))(this,e))}setText(e){const t=this.text;this.text=e,this.fireChangeEvent(t,e)}getText(){return this.text}setSize(e){const t=new(X(z.COMMENT_RESIZE))(this);this.size=e,t.recordCurrentSizeAsNewSize(),ce(t)}getSize(){return this.size}setCollapsed(e){this.collapsed=e,this.fireCollapseEvent(e)}isCollapsed(){return this.collapsed}setEditable(e){this.editable=e}isEditable(){return this.isOwnEditable()&&!this.workspace.options.readOnly}isOwnEditable(){return this.editable}setMovable(e){this.movable=e}isMovable(){return this.isOwnMovable()&&!this.workspace.options.readOnly}isOwnMovable(){return this.movable}setDeletable(e){this.deletable=e}isDeletable(){return this.isOwnDeletable()&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnDeletable(){return this.deletable}moveTo(e,t){const n=new(X(z.COMMENT_MOVE))(this);t&&n.setReason(t),this.location=e,n.recordNew(),ce(n)}getRelativeToSurfaceXY(){return this.location}dispose(){this.disposing=!0,this.fireDeleteEvent(),this.workspace.removeTopComment(this),this.disposed=!0}isDisposed(){return this.disposed}isDeadOrDying(){return this.disposing||this.disposed}},tt=class extends en{constructor(e,t){super(e,t),this.dragStrategy=new Ue(this),this.workspace=e,this.view=new Ve(e),this.view.setSize(this.getSize()),this.view.setEditable(this.isEditable()),this.view.getSvgRoot().setAttribute("data-id",this.id),this.addModelUpdateBindings(),Le(this.view.getSvgRoot(),"pointerdown",this,this.startGesture),Le(this.view.getSvgRoot(),"wheel",this,n=>{n.stopPropagation()})}addModelUpdateBindings(){this.view.addTextChangeListener((e,t)=>void super.setText(t)),this.view.addSizeChangeListener((e,t)=>void super.setSize(t)),this.view.addOnCollapseListener(()=>void super.setCollapsed(this.view.isCollapsed())),this.view.addDisposeListener(()=>{this.isDeadOrDying()||this.dispose()})}setText(e){this.view.setText(e)}setSize(e){this.view.setSize(e)}setCollapsed(e){this.view.setCollapsed(e)}setEditable(e){super.setEditable(e),this.view.setEditable(this.isEditable())}getSvgRoot(){return this.view.getSvgRoot()}getSize(){return super.getSize()}getBoundingRectangle(){const e=this.getRelativeToSurfaceXY();var t,n;const o=(n=(t=this.view)==null?void 0:t.getSize())!=null?n:this.getSize();return this.workspace.RTL?(t=e.x-o.width,n=e.x):(t=e.x,n=e.x+o.width),new ct(e.y,e.y+o.height,t,n)}moveBy(e,t,n){const o=this.getRelativeToSurfaceXY();e=new ae(o.x+e,o.y+t),this.moveTo(e,n)}moveTo(e,t){super.moveTo(e,t),this.view.moveTo(e)}moveDuringDrag(e){this.location=e,this.view.moveTo(e)}setDragging(e){e?ke(this.getSvgRoot(),"blocklyDragging"):v(this.getSvgRoot(),"blocklyDragging")}dispose(){this.disposing=!0,this.view.isDeadOrDying()||this.view.dispose(),super.dispose()}startGesture(e){const t=this.workspace.getGesture(e);if(t){t.handleCommentStart(e,this);let n;(n=this.workspace.getLayerManager())==null||n.append(this,W),i.setSelected$$module$build$src$core$common(this)}}setDeleteStyle(e){e?ke(this.getSvgRoot(),"blocklyDraggingDelete"):v(this.getSvgRoot(),"blocklyDraggingDelete")}isMovable(){return this.dragStrategy.isMovable()}startDrag(){this.dragStrategy.startDrag()}drag(e){this.dragStrategy.drag(e)}endDrag(){this.dragStrategy.endDrag()}revertDrag(){this.dragStrategy.revertDrag()}select(){ke(this.getSvgRoot(),"blocklySelected")}unselect(){v(this.getSvgRoot(),"blocklySelected")}toCopyData(){return{paster:Yt.TYPE,commentState:no(this,{addCoordinates:!0})}}showContextMenu(e){const t=O.registry.getContextMenuOptions(O.ScopeType.COMMENT,{comment:this});ml(e,t,this.workspace.RTL,this.workspace)}snapToGrid(){if(!this.isDeadOrDying()){var e=this.workspace.getGrid();if(e!=null&&e.shouldSnap()){var t=this.getRelativeToSurfaceXY();e=e.alignXY(t),e!==t&&this.moveTo(e,["snap"])}}}},Vt={};Vt.appendDomToWorkspace=oh,Vt.blockToDom=Cr,Vt.blockToDomWithXY=Js,Vt.clearWorkspaceAndLoadFromXml=Xp,Vt.deleteNext=lh,Vt.domToBlock=i.domToBlock$$module$build$src$core$xml,Vt.domToBlockInternal=_s,Vt.domToPrettyText=sh,Vt.domToText=Fn,Vt.domToVariables=El,Vt.domToWorkspace=i.domToWorkspace$$module$build$src$core$xml,Vt.loadWorkspaceComment=ih,Vt.saveWorkspaceComment=To,Vt.variablesToDom=_l,Vt.workspaceToDom=bt;var Yh=class extends Ar{constructor(e){super(e),this.type=z.BLOCK_CREATE,e&&(e.isShadow()&&(this.recordUndo=!1),this.xml=Js(e),this.ids=Xe(e),this.json=yn(e,{addCoordinates:!0}))}toJson(){const e=super.toJson();if(!this.xml)throw Error("The block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.xml=Fn(this.xml),e.ids=this.ids,e.json=this.json,this.recordUndo||(e.recordUndo=this.recordUndo),e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new Yh),t.xml=i.textToDom$$module$build$src$core$utils$xml(e.xml),t.ids=e.ids,t.json=e.json,e.recordUndo!==void 0&&(t.recordUndo=e.recordUndo),t}run(e){const t=this.getEventWorkspace_();if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!db(t,this.ids))if(e)gs(this.json,t);else for(e=0;e<this.ids.length;e++){const n=this.ids[e],o=t.getBlockById(n);o?o.dispose(!1):n===this.blockId&&console.warn("Can't uncreate non-existent block: "+n)}}},db=function(e,t){return t.map(n=>e.getBlockById(n)).filter(n=>n&&n.isShadow()).length===t.length};d(ne.EVENT,z.BLOCK_CREATE,Yh);var Tf=class extends Rr{constructor(e,t){super(t),this.type=z.THEME_CHANGE,this.themeName=e}toJson(){const e=super.toJson();if(!this.themeName)throw Error("The theme name is undefined. Either pass a theme name to the constructor, or call fromJson");return e.themeName=this.themeName,e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new Tf),t.themeName=e.themeName,t}};d(ne.EVENT,z.THEME_CHANGE,Tf);var Ef=class extends Rr{constructor(e,t,n,o,a){super(o),this.type=z.VIEWPORT_CHANGE,this.viewTop=e,this.viewLeft=t,this.scale=n,this.oldScale=a}toJson(){const e=super.toJson();if(this.viewTop===void 0)throw Error("The view top is undefined. Either pass a value to the constructor, or call fromJson");if(this.viewLeft===void 0)throw Error("The view left is undefined. Either pass a value to the constructor, or call fromJson");if(this.scale===void 0)throw Error("The scale is undefined. Either pass a value to the constructor, or call fromJson");if(this.oldScale===void 0)throw Error("The old scale is undefined. Either pass a value to the constructor, or call fromJson");return e.viewTop=this.viewTop,e.viewLeft=this.viewLeft,e.scale=this.scale,e.oldScale=this.oldScale,e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new Ef),t.viewTop=e.viewTop,t.viewLeft=e.viewLeft,t.scale=e.scale,t.oldScale=e.oldScale,t}};d(ne.EVENT,z.VIEWPORT_CHANGE,Ef);var Ie;(function(e){e[e.INPUT_VALUE=1]="INPUT_VALUE",e[e.OUTPUT_VALUE=2]="OUTPUT_VALUE",e[e.NEXT_STATEMENT=3]="NEXT_STATEMENT",e[e.PREVIOUS_STATEMENT=4]="PREVIOUS_STATEMENT"})(Ie||(Ie={}));var Wa=class{constructor(e){this.connectionChecker=e,this.connections=[]}addConnection(e,t){t=this.calculateIndexForYPos(t),this.connections.splice(t,0,e)}findIndexOfConnection(e,t){if(!this.connections.length)return-1;const n=this.calculateIndexForYPos(t);if(n>=this.connections.length)return-1;t=e.y;let o=n;for(;0<=o&&this.connections[o].y===t;){if(this.connections[o]===e)return o;o--}for(o=n;o<this.connections.length&&this.connections[o].y===t;){if(this.connections[o]===e)return o;o++}return-1}calculateIndexForYPos(e){if(!this.connections.length)return 0;let t=0,n=this.connections.length;for(;t<n;){const o=Math.floor((t+n)/2);if(this.connections[o].y<e)t=o+1;else if(this.connections[o].y>e)n=o;else{t=o;break}}return t}removeConnection(e,t){if(e=this.findIndexOfConnection(e,t),e===-1)throw Error("Unable to find connection in connectionDB.");this.connections.splice(e,1)}getNeighbours(e,t){function n(Se){const Rt=a-o[Se].x,Ct=f-o[Se].y;return Math.sqrt(Rt*Rt+Ct*Ct)<=t&&q.push(o[Se]),Ct<t}const o=this.connections,a=e.x,f=e.y;e=0;let E=o.length-2,w=E;for(;e<w;)o[w].y<f?e=w:E=w,w=Math.floor((e+E)/2);const q=[];if(E=e=w,o.length){for(;0<=e&&n(e);)e--;do E++;while(E<o.length&&n(E))}return q}isInYRange(e,t,n){return Math.abs(this.connections[e].y-t)<=n}searchForClosest(e,t,n){if(!this.connections.length)return{connection:null,radius:t};const o=e.y,a=e.x;e.x=a+n.x,e.y=o+n.y;var f=this.calculateIndexForYPos(e.y);n=null;let E=t,w,q=f-1;for(;0<=q&&this.isInYRange(q,e.y,t);)w=this.connections[q],this.connectionChecker.canConnect(e,w,!0,E)&&(n=w,E=w.distanceFrom(e)),q--;for(;f<this.connections.length&&this.isInYRange(f,e.y,t);)w=this.connections[f],this.connectionChecker.canConnect(e,w,!0,E)&&(n=w,E=w.distanceFrom(e)),f++;return e.x=a,e.y=o,{connection:n,radius:E}}static init(e){const t=[];return t[Ie.INPUT_VALUE]=new Wa(e),t[Ie.OUTPUT_VALUE]=new Wa(e),t[Ie.NEXT_STATEMENT]=new Wa(e),t[Ie.PREVIOUS_STATEMENT]=new Wa(e),t}},ag=null,Jh=null,qh={};qh.connectionUiEffect=Ir,qh.disconnectUiEffect=Cu,qh.disconnectUiStop=yl,qh.disposeUiEffect=cr;var mm=class{constructor(e){this.workspace=e,this.horizontalScrollEnabled=this.workspace.isMovableHorizontally(),this.verticalScrollEnabled=this.workspace.isMovableVertically(),this.startScrollXY_=new ae(e.scrollX,e.scrollY)}dispose(){this.workspace=null}startDrag(){Be()&&Be().unselect()}endDrag(e){this.drag(e)}drag(e){if(e=ae.sum(this.startScrollXY_,e),this.horizontalScrollEnabled&&this.verticalScrollEnabled)this.workspace.scroll(e.x,e.y);else if(this.horizontalScrollEnabled)this.workspace.scroll(e.x,this.workspace.scrollY);else if(this.verticalScrollEnabled)this.workspace.scroll(this.workspace.scrollX,e.y);else throw new TypeError("Invalid state.")}},hb=5,pb=6,jo=class{constructor(e,t){this.creatorWorkspace=t,this.mouseDownXY=new ae(0,0),this.startWorkspace_=this.targetBlock=this.startComment=this.startBlock=this.startIcon=this.startField=this.startBubble=null,this.hasExceededDragRadius=!1,this.boundEvents=[],this.workspaceDragger=this.dragger=null,this.dragging=!1,this.flyout=null,this.multiTouch=this.isEnding_=this.gestureHasStarted=this.calledUpdateIsDragging=!1,this.cachedPoints=new Map,this.startDistance=this.previousScale=0,this.currentDropdownOwner=this.isPinchZoomEnabled=null,this.mostRecentEvent=e,this.currentDragDeltaXY=new ae(0,0)}dispose(){zt(),Kd(),this.creatorWorkspace.clearGesture();for(const e of this.boundEvents)et(e);this.boundEvents.length=0,this.workspaceDragger&&this.workspaceDragger.dispose()}updateFromEvent(e){const t=new ae(e.clientX,e.clientY);this.updateDragDelta(t)&&(this.updateIsDragging(e),En()),this.mostRecentEvent=e}updateDragDelta(e){return this.currentDragDeltaXY=ae.difference(e,this.mouseDownXY),this.hasExceededDragRadius?!1:this.hasExceededDragRadius=ae.magnitude(this.currentDragDeltaXY)>(this.flyout?i.config$$module$build$src$core$config.flyoutDragRadius:i.config$$module$build$src$core$config.dragRadius)}updateIsDraggingFromFlyout(){let e;if(!this.targetBlock||(e=this.flyout)==null||!e.isBlockCreatable(this.targetBlock))return!1;if(!this.flyout.targetWorkspace)throw Error(`Cannot update dragging from the flyout because the ' +
          'flyout's target workspace is undefined`);return!this.flyout.isScrollable()||this.flyout.isDragTowardWorkspace(this.currentDragDeltaXY)?(this.startWorkspace_=this.flyout.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),i.getGroup$$module$build$src$core$events$utils()||i.setGroup$$module$build$src$core$events$utils(!0),this.startBlock=null,this.targetBlock=this.flyout.createBlock(this.targetBlock),i.setSelected$$module$build$src$core$common(this.targetBlock),!0):!1}updateIsDraggingWorkspace(){if(!this.startWorkspace_)throw Error("Cannot update dragging the workspace because the start workspace is undefined");(this.flyout?this.flyout.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.dragging=!0,this.workspaceDragger=new mm(this.startWorkspace_),this.workspaceDragger.startDrag())}updateIsDragging(e){if(!this.startWorkspace_)throw Error("Cannot update dragging because the start workspace is undefined");if(this.calledUpdateIsDragging)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging=!0,this.flyout&&this.updateIsDraggingFromFlyout();const t=Be();t&&ar(t)&&t.isMovable()?(this.dragging=!0,this.dragger=this.createDragger(t,this.startWorkspace_),this.dragger.onDragStart(e),this.dragger.onDrag(e,this.currentDragDeltaXY)):this.updateIsDraggingWorkspace()}createDragger(e,t){return new(D(ne.BLOCK_DRAGGER,this.creatorWorkspace.options,!0))(e,t)}doStart(e){if(!this.startWorkspace_)throw Error("Cannot start the touch gesture becauase the start workspace is undefined");this.isPinchZoomEnabled=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,Fr(e)?this.cancel():(this.gestureHasStarted=!0,yl(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),this.currentDropdownOwner=wd(),this.startWorkspace_.hideChaff(!!this.flyout),this.startWorkspace_.markFocused(),this.mostRecentEvent=e,fl(),bn(e)?this.handleRightClick(e):(e.type.toLowerCase()==="pointerdown"&&e.pointerType!=="mouse"&&Gs(e,this),this.mouseDownXY=new ae(e.clientX,e.clientY),this.bindMouseEvents(e),this.isEnding_||this.handleTouchStart(e)))}bindMouseEvents(e){this.boundEvents.push(Le(document,"pointerdown",null,this.handleStart.bind(this),!0)),this.boundEvents.push(Le(document,"pointermove",null,this.handleMove.bind(this),!0)),this.boundEvents.push(Le(document,"pointerup",null,this.handleUp.bind(this),!0)),e.preventDefault(),e.stopPropagation()}handleStart(e){this.isDragging()||(this.handleTouchStart(e),this.isMultiTouch()&&En())}handleMove(e){this.isDragging()&&Br(e)||!this.isMultiTouch()?(this.updateFromEvent(e),this.workspaceDragger?this.workspaceDragger.drag(this.currentDragDeltaXY):this.dragger&&this.dragger.onDrag(this.mostRecentEvent,this.currentDragDeltaXY),e.preventDefault(),e.stopPropagation()):this.isMultiTouch()&&(this.handleTouchMove(e),En())}handleUp(e){if(this.isDragging()||this.handleTouchEnd(e),!this.isMultiTouch()||this.isDragging()){if(!Br(e))return;if(this.updateFromEvent(e),En(),this.isEnding_){console.log("Trying to end a gesture recursively.");return}this.isEnding_=!0,this.dragger?this.dragger.onDragEnd(e,this.currentDragDeltaXY):this.workspaceDragger?this.workspaceDragger.endDrag(this.currentDragDeltaXY):this.isBubbleClick()||this.isCommentClick()||(this.isFieldClick()?this.doFieldClick():this.isIconClick()?this.doIconClick():this.isBlockClick()?this.doBlockClick():this.isWorkspaceClick()&&this.doWorkspaceClick(e))}e.preventDefault(),e.stopPropagation(),this.dispose()}handleTouchStart(e){var t=ir(e);this.cachedPoints.set(t,this.getTouchPoint(e));var n=Array.from(this.cachedPoints.keys());n.length===2&&(t=this.cachedPoints.get(n[0]),n=this.cachedPoints.get(n[1]),this.startDistance=ae.distance(t,n),this.multiTouch=!0,e.preventDefault())}handleTouchMove(e){const t=ir(e);this.cachedPoints.set(t,this.getTouchPoint(e)),this.isPinchZoomEnabled&&this.cachedPoints.size===2?this.handlePinch(e):(this.updateFromEvent(e),this.workspaceDragger?this.workspaceDragger.drag(this.currentDragDeltaXY):this.dragger&&this.dragger.onDrag(this.mostRecentEvent,this.currentDragDeltaXY),e.preventDefault(),e.stopPropagation())}handlePinch(e){var t=Array.from(this.cachedPoints.keys()),n=this.cachedPoints.get(t[0]);if(t=this.cachedPoints.get(t[1]),n=ae.distance(n,t)/this.startDistance,0<this.previousScale&&1/0>this.previousScale){if(t=n-this.previousScale,t=0<t?t*hb:t*pb,!this.startWorkspace_)throw Error("Cannot handle a pinch because the start workspace is undefined");const o=this.startWorkspace_,a=dn(e,o.getParentSvg(),o.getInverseScreenCTM());o.zoom(a.x,a.y,t)}this.previousScale=n,e.preventDefault()}handleTouchEnd(e){e=ir(e),this.cachedPoints.has(e)&&this.cachedPoints.delete(e),2>this.cachedPoints.size&&(this.cachedPoints.clear(),this.previousScale=0)}getTouchPoint(e){return this.startWorkspace_?new ae(e.pageX,e.pageY):null}isMultiTouch(){return this.multiTouch}cancel(){this.isEnding_||(En(),this.dragger?this.dragger.onDragEnd(this.mostRecentEvent,this.currentDragDeltaXY):this.workspaceDragger&&this.workspaceDragger.endDrag(this.currentDragDeltaXY),this.dispose())}handleRightClick(e){this.targetBlock?(this.bringBlockToFront(),this.targetBlock.workspace.hideChaff(!!this.flyout),this.targetBlock.showContextMenu(e)):this.startBubble?this.startBubble.showContextMenu(e):this.startComment?(this.startComment.workspace.hideChaff(),this.startComment.showContextMenu(e)):this.startWorkspace_&&!this.flyout&&(this.startWorkspace_.hideChaff(),this.startWorkspace_.showContextMenu(e)),e.preventDefault(),e.stopPropagation(),this.dispose()}handleWsStart(e,t){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace(t),this.mostRecentEvent=e,this.startBlock||this.startBubble||this.startComment||i.setSelected$$module$build$src$core$common(null),this.doStart(e)}fireWorkspaceClick(e){ce(new(X(z.CLICK))(null,e.id,"workspace"))}handleFlyoutStart(e,t){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout(t),this.handleWsStart(e,t.getWorkspace())}handleBlockStart(e,t){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(t),this.mostRecentEvent=e}handleBubbleStart(e,t){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(t),this.mostRecentEvent=e}handleCommentStart(e,t){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleCommentStart, but the gesture had already been started.");this.setStartComment(t),this.mostRecentEvent=e}doFieldClick(){if(!this.startField)throw Error("Cannot do a field click because the start field is undefined");this.currentDropdownOwner!==this.startField&&this.startField.showEditor(this.mostRecentEvent),this.bringBlockToFront()}doIconClick(){if(!this.startIcon)throw Error("Cannot do an icon click because the start icon is undefined");this.bringBlockToFront(),this.startIcon.onClick()}doBlockClick(){if(this.flyout&&this.flyout.autoClose){if(!this.targetBlock)throw Error("Cannot do a block click because the target block is undefined");if(this.targetBlock.isEnabled()){i.getGroup$$module$build$src$core$events$utils()||i.setGroup$$module$build$src$core$events$utils(!0);var e=this.flyout.createBlock(this.targetBlock);e.snapToGrid(),e.bumpNeighbours()}}else{if(!this.startWorkspace_)throw Error("Cannot do a block click because the start workspace is undefined");e=new(X(z.CLICK))(this.startBlock,this.startWorkspace_.id,"block"),ce(e)}this.bringBlockToFront(),i.setGroup$$module$build$src$core$events$utils(!1)}doWorkspaceClick(e){e=this.creatorWorkspace,Be()&&Be().unselect(),this.fireWorkspaceClick(this.startWorkspace_||e)}bringBlockToFront(){this.targetBlock&&!this.flyout&&this.targetBlock.bringToFront()}setStartField(e){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField||(this.startField=e)}setStartIcon(e){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartIcon, but the gesture had already been started.");this.startIcon||(this.startIcon=e)}setStartBubble(e){this.startBubble||(this.startBubble=e)}setStartComment(e){this.startComment||(this.startComment=e)}setStartBlock(e){this.startBlock||this.startBubble||(this.startBlock=e,i.setSelected$$module$build$src$core$common(this.startBlock),e.isInFlyout&&e!==e.getRootBlock()?this.setTargetBlock(e.getRootBlock()):this.setTargetBlock(e))}setTargetBlock(e){e.isShadow()?this.setTargetBlock(e.getParent()):this.targetBlock=e}setStartWorkspace(e){this.startWorkspace_||(this.startWorkspace_=e)}setStartFlyout(e){this.flyout||(this.flyout=e)}isBubbleClick(){return!!this.startBubble&&!this.hasExceededDragRadius}isCommentClick(){return!!this.startComment&&!this.hasExceededDragRadius}isBlockClick(){return!!this.startBlock&&!this.hasExceededDragRadius&&!this.isFieldClick()&&!this.isIconClick()}isFieldClick(){return this.startField?this.startField.isClickable()&&!this.hasExceededDragRadius&&(!this.flyout||this.startField.isClickableInFlyout(this.flyout.autoClose)):!1}isIconClick(){if(!this.startIcon)return!1;const e=!this.flyout||!this.startIcon.isClickableInFlyout||this.startIcon.isClickableInFlyout(this.flyout.autoClose);return!this.hasExceededDragRadius&&e}isWorkspaceClick(){return!this.startBlock&&!this.startBubble&&!this.startField&&!this.hasExceededDragRadius}getCurrentDragger(){let e,t;return(t=(e=this.workspaceDragger)!=null?e:this.dragger)!=null?t:null}isDragging(){return this.dragging}hasStarted(){return this.gestureHasStarted}static inProgress(){const e=H();for(let t=0,n;n=e[t];t++)if(n.currentGesture_)return!0;return!1}},bf=class{constructor(e,t){this.pattern=e,this.scale=1;let n;this.spacing=(n=t.spacing)!=null?n:0;let o;this.length=(o=t.length)!=null?o:1,this.line2=(this.line1=e.firstChild)&&this.line1.nextSibling;let a;this.snapToGrid=(a=t.snap)!=null?a:!1}setSpacing(e){this.spacing=e,this.update(this.scale)}getSpacing(){return this.spacing}setLength(e){this.length=e,this.update(this.scale)}getLength(){return this.length}setSnapToGrid(e){this.snapToGrid=e}shouldSnap(){return this.snapToGrid}getPatternId(){return this.pattern.id}update(e){this.scale=e;var t=this.spacing*e;this.pattern.setAttribute("width",`${t}`),this.pattern.setAttribute("height",`${t}`),t=Math.floor(this.spacing/2)+.5;let n=t-this.length/2,o=t+this.length/2;t*=e,n*=e,o*=e,this.setLineAttributes(this.line1,e,n,o,t,t),this.setLineAttributes(this.line2,e,t,t,n,o)}setLineAttributes(e,t,n,o,a,f){e&&(e.setAttribute("stroke-width",`${t}`),e.setAttribute("x1",`${n}`),e.setAttribute("y1",`${a}`),e.setAttribute("x2",`${o}`),e.setAttribute("y2",`${f}`))}moveTo(e,t){this.pattern.setAttribute("x",`${e}`),this.pattern.setAttribute("y",`${t}`)}alignXY(e){var t=this.getSpacing();const n=t/2,o=Math.round(Math.round((e.x-n)/t)*t+n);return t=Math.round(Math.round((e.y-n)/t)*t+n),o===e.x&&t===e.y?e:new ae(o,t)}static createDom(e,t,n){e=J(P.PATTERN,{id:"blocklyGridPattern"+e,patternUnits:"userSpaceOnUse"},n);let o,a;if(0<((o=t.length)!=null?o:1)&&0<((a=t.spacing)!=null?a:0)){J(P.LINE,{stroke:t.colour},e);let f;(f=t.length)!=null&&f&&J(P.LINE,{stroke:t.colour},e)}else J(P.LINE,{},e);return e}},gb=class{constructor(e){this.workspace=e,this.layers=new Map,(e=e.getInjectionDiv())&&(this.dragLayer=this.createDragLayer(e),this.animationLayer=this.createAnimationLayer(e)),e=this.createLayer(W),ke(e,"blocklyBlockCanvas"),e=this.createLayer(ge),ke(e,"blocklyBubbleCanvas")}createDragLayer(e){const t=J(P.SVG,{class:"blocklyBlockDragSurface",xmlns:Lo,"xmlns:html":es,"xmlns:xlink":rr,version:"1.1"});return e.append(t),J(P.G,{},t)}createAnimationLayer(e){const t=J(P.SVG,{class:"blocklyAnimationLayer",xmlns:Lo,"xmlns:html":es,"xmlns:xlink":rr,version:"1.1"});return e.append(t),J(P.G,{},t)}appendToAnimationLayer(e){let t;const n=(t=this.dragLayer)==null?void 0:t.getAttribute("transform");if(n){let a;(a=this.animationLayer)==null||a.setAttribute("transform",n)}let o;(o=this.animationLayer)==null||o.appendChild(e.getSvgRoot())}translateLayers(e,t){e=`translate(${e.x}, ${e.y}) scale(${t})`;let n;(n=this.dragLayer)==null||n.setAttribute("transform",e);for(const[,o]of this.layers)o.setAttribute("transform",e)}moveToDragLayer(e){let t;(t=this.dragLayer)==null||t.appendChild(e.getSvgRoot())}moveOffDragLayer(e,t){this.append(e,t)}append(e,t){this.layers.has(t)||this.createLayer(t);let n;(n=this.layers.get(t))==null||n.appendChild(e.getSvgRoot())}createLayer(e){const t=this.workspace.getSvgGroup(),n=J(P.G,{});let o=!1;const a=[...this.layers].sort((f,E)=>f[0]-E[0]);for(const[f,E]of a)if(e<f){t.insertBefore(n,E),o=!0;break}return o||t.appendChild(n),this.layers.set(e,n),n}hasLayer(e){return e===this.dragLayer||new Set(this.layers.values()).has(e)}getBlockLayer(){return this.layers.get(W)}getBubbleLayer(){return this.layers.get(ge)}},_m={};_m.deepMerge=dr;var gc=class{constructor(e,t,n,o){this.name=e,this.startHats=!1,this.blockStyles=t||Object.create(null),this.categoryStyles=n||Object.create(null),this.componentStyles=o||Object.create(null),this.fontStyle=Object.create(null),d(ne.THEME,e,this,!0)}getClassName(){return this.name+"-theme"}setBlockStyle(e,t){this.blockStyles[e]=t}setCategoryStyle(e,t){this.categoryStyles[e]=t}getComponentStyle(e){if(e=this.componentStyles[e],!e)return null;if(typeof e=="string"){const t=this.getComponentStyle(e);if(t)return t}return`${e}`}setComponentStyle(e,t){this.componentStyles[e]=t}setFontStyle(e){this.fontStyle=e}setStartHats(e){this.startHats=e}static defineTheme(e,t){e=e.toLowerCase();const n=new gc(e);let o=t.base;if(o){if(typeof o=="string"){let a;o=(a=L(ne.THEME,o))!=null?a:void 0}o instanceof gc&&(dr(n,o),n.name=e)}return dr(n.blockStyles,t.blockStyles),dr(n.categoryStyles,t.categoryStyles),dr(n.componentStyles,t.componentStyles),dr(n.fontStyle,t.fontStyle),t.startHats!==null&&(n.startHats=t.startHats),n}},fb={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},$b={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},dg=new gc("classic",fb,$b),Ds=class{constructor(e){this.gridPattern=null,this.getMetrics=this.setMetrics=void 0;let t=null,n=!1;var o=!1,a=!1,f=!1,E=!1,w=!1;const q=!!e.readOnly;if(!q){var Se;t=Ql((Se=e.toolbox)!=null?Se:null),n=eu(t),o=e.trashcan,o=o===void 0?n:o,a=e.collapse,a=a===void 0?n:a,f=e.comments,f=f===void 0?n:f,E=e.disable,E=E===void 0?n:E,w=e.sounds,w=w===void 0?!0:w}Se=e.maxTrashcanContents,o?Se===void 0&&(Se=32):Se=0;const Rt=!!e.rtl;let Ct=e.horizontalLayout;Ct===void 0&&(Ct=!1);var Nr=e.toolboxPosition!=="end";Nr=Ct?Nr?Fe.TOP:Fe.BOTTOM:Nr===Rt?Fe.RIGHT:Fe.LEFT;let td=e.css;td===void 0&&(td=!0);let ap="https://blockly-demo.appspot.com/static/media/";e.media&&(ap=e.media.endsWith("/")?e.media:e.media+"/");const K_=e.oneBasedIndex,Kb=e.renderer||"geras",Yb=e.plugins||{};let h$=e.modalInputs;h$===void 0&&(h$=!0),this.RTL=Rt,this.oneBasedIndex=K_===void 0?!0:K_,this.collapse=a,this.comments=f,this.disable=E,this.readOnly=q,this.maxBlocks=e.maxBlocks||1/0;let Y_;this.maxInstances=(Y_=e.maxInstances)!=null?Y_:null,this.modalInputs=h$,this.pathToMedia=ap,this.hasCategories=n,this.moveOptions=Ds.parseMoveOptions(e,n),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=o,this.maxTrashcanContents=Se,this.hasSounds=w,this.hasCss=td,this.horizontalLayout=Ct,this.languageTree=t,this.gridOptions=Ds.parseGridOptions(e),this.zoomOptions=Ds.parseZoomOptions(e),this.toolboxPosition=Nr,this.theme=Ds.parseThemeOptions(e),this.renderer=Kb;let J_;this.rendererOverrides=(J_=e.rendererOverrides)!=null?J_:null;let q_;this.parentWorkspace=(q_=e.parentWorkspace)!=null?q_:null,this.plugins=Yb}static parseMoveOptions(e,t){const n=e.move||{},o={};return n.scrollbars===void 0&&e.scrollbars===void 0?o.scrollbars=t:typeof n.scrollbars=="object"?(o.scrollbars={horizontal:!!n.scrollbars.horizontal,vertical:!!n.scrollbars.vertical},o.scrollbars.horizontal&&o.scrollbars.vertical?o.scrollbars=!0:o.scrollbars.horizontal||o.scrollbars.vertical||(o.scrollbars=!1)):o.scrollbars=!!n.scrollbars||!!e.scrollbars,o.wheel=o.scrollbars&&n.wheel!==void 0?!!n.wheel:typeof o.scrollbars=="object",o.drag=o.scrollbars?n.drag===void 0?!0:!!n.drag:!1,o}static parseZoomOptions(e){e=e.zoom||{};const t={};return t.controls=e.controls===void 0?!1:!!e.controls,t.wheel=e.wheel===void 0?!1:!!e.wheel,t.startScale=e.startScale===void 0?1:Number(e.startScale),t.maxScale=e.maxScale===void 0?3:Number(e.maxScale),t.minScale=e.minScale===void 0?.3:Number(e.minScale),t.scaleSpeed=e.scaleSpeed===void 0?1.2:Number(e.scaleSpeed),t.pinch=e.pinch===void 0?t.wheel||t.controls:!!e.pinch,t}static parseGridOptions(e){e=e.grid||{};const t={};return t.spacing=Number(e.spacing)||0,t.colour=e.colour||"#888",t.length=e.length===void 0?1:Number(e.length),t.snap=0<t.spacing&&!!e.snap,t}static parseThemeOptions(e){return e=e.theme||dg,typeof e=="string"?L(ne.THEME,e):e instanceof gc?e:gc.defineTheme(e.name||"builtin"+V(),e)}},Tm={fromJsonInternal:ra},hg={TEST_ONLY:Tm};hg.fromJson=i.fromJson$$module$build$src$core$field_registry,hg.register=Un,hg.unregister=Iu;var Dr=class extends g{constructor(e,t,n){super(g.SKIP_SETUP),this.svgArrow=this.arrow=this.imageElement=this.menu_=this.selectedMenuItem=null,this.SERIALIZABLE=!0,this.CURSOR="default",this.clickTarget_=this.suffixField=this.prefixField=this.generatedOptions=null,e!==g.SKIP_SETUP&&(Array.isArray(e)?(this.validateOptions(e),e=this.trimOptions(e),this.menuGenerator_=e.options,this.prefixField=e.prefix||null,this.suffixField=e.suffix||null):this.menuGenerator_=e,this.selectedOption=this.getOptions(!1)[0],n&&this.configure_(n),this.setValue(this.selectedOption[1]),t&&this.setValidator(t))}fromXml(e){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(e.textContent)}loadState(e){this.loadLegacyState(Dr,e)||(this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(e))}initView(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement=J(P.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&ke(this.borderRect_,"blocklyDropdownRect")}shouldAddBorderRect_(){let e;return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!((e=this.getSourceBlock())!=null&&e.isShadow())}createTextArrow_(){this.arrow=J(P.TSPAN,{},this.textElement_);let e;this.arrow.appendChild(document.createTextNode((e=this.getSourceBlock())!=null&&e.RTL?Dr.ARROW_CHAR+" ":" "+Dr.ARROW_CHAR)),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.arrow.setAttribute("dominant-baseline","central");let t;(t=this.getSourceBlock())!=null&&t.RTL?this.getTextElement().insertBefore(this.arrow,this.textContent_):this.getTextElement().appendChild(this.arrow)}createSVGArrow_(){this.svgArrow=J(P.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow.setAttributeNS(rr,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)}showEditor_(e){var t=this.getSourceBlock();if(!t)throw new $;this.dropdownCreate(),this.menu_.openingCoords=e&&typeof e.clientX=="number"?new ae(e.clientX,e.clientY):null,Dc(),e=this.menu_.render(hl()),ke(e,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV&&(t=t.getColour(),Od(t,this.sourceBlock_.style.colourTertiary)),Rd(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem&&this.menu_.setHighlighted(this.selectedMenuItem),this.applyColour()}dropdownCreate(){const e=this.getSourceBlock();if(!e)throw new $;const t=new tc;t.setRole($r.LISTBOX),this.menu_=t;const n=this.getOptions(!1);this.selectedMenuItem=null;for(let a=0;a<n.length;a++){const[f,E]=n[a];if(typeof f=="object"){var o=new Image(f.width,f.height);o.src=f.src,o.alt=f.alt||""}else o=f;o=new Pi(o,E),o.setRole($r.OPTION),o.setRightToLeft(e.RTL),o.setCheckable(!0),t.addChild(o),o.setChecked(E===this.value_),E===this.value_&&(this.selectedMenuItem=o),o.onAction(this.handleMenuActionEvent,this)}}dropdownDispose_(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem=this.menu_=null,this.applyColour()}handleMenuActionEvent(e){xc(this,!0),this.onItemSelected_(this.menu_,e)}onItemSelected_(e,t){this.setValue(t.getValue())}isOptionListDynamic(){return typeof this.menuGenerator_=="function"}getOptions(e){if(!this.menuGenerator_)throw TypeError("A menu generator was never defined.");return Array.isArray(this.menuGenerator_)?this.menuGenerator_:e&&this.generatedOptions?this.generatedOptions:(this.generatedOptions=this.menuGenerator_(),this.validateOptions(this.generatedOptions),this.generatedOptions)}doClassValidation_(e){return this.getOptions(!0).some(t=>t[1]===e)?e:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+e),null)}doValueUpdate_(e){super.doValueUpdate_(e),e=this.getOptions(!0);for(let t=0,n;n=e[t];t++)n[1]===this.value_&&(this.selectedOption=n)}applyColour(){const e=this.sourceBlock_.style;this.borderRect_&&(this.borderRect_.setAttribute("stroke",e.colourTertiary),this.menu_?this.borderRect_.setAttribute("fill",e.colourTertiary):this.borderRect_.setAttribute("fill","transparent")),this.sourceBlock_&&this.arrow&&(this.sourceBlock_.isShadow()?this.arrow.style.fill=e.colourSecondary:this.arrow.style.fill=e.colourPrimary)}render_(){this.getTextContent().nodeValue="",this.imageElement.style.display="none";const e=this.selectedOption&&this.selectedOption[0];e&&typeof e=="object"?this.renderSelectedImage(e):this.renderSelectedText(),this.positionBorderRect_()}renderSelectedImage(e){const t=this.getSourceBlock();if(!t)throw new $;this.imageElement.style.display="",this.imageElement.setAttributeNS(rr,"xlink:href",e.src),this.imageElement.setAttribute("height",String(e.height)),this.imageElement.setAttribute("width",String(e.width));const n=Number(e.height);e=Number(e.width);var o=!!this.borderRect_;const a=Math.max(o?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,n+Dr.IMAGE_Y_PADDING);o=o?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let f;f=this.svgArrow?this.positionSVGArrow(e+o,a/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):yr(this.arrow,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY),this.size_.width=e+f+2*o,this.size_.height=a;let E=0;t.RTL?this.imageElement.setAttribute("x",`${o+f}`):(E=e+f,this.getTextElement().setAttribute("text-anchor","end"),this.imageElement.setAttribute("x",`${o}`)),this.imageElement.setAttribute("y",String(a/2-n/2)),this.positionTextElement_(E+o,e+f)}renderSelectedText(){this.getTextContent().nodeValue=this.getDisplayText_();var e=this.getTextElement();ke(e,"blocklyDropdownText"),e.setAttribute("text-anchor","start");var t=!!this.borderRect_;e=Math.max(t?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT);const n=yr(this.getTextElement(),this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);t=t?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let o=0;this.svgArrow&&(o=this.positionSVGArrow(n+t,e/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=n+o+2*t,this.size_.height=e,this.positionTextElement_(t,n)}positionSVGArrow(e,t){if(!this.svgArrow)return 0;const n=this.getSourceBlock();if(!n)throw new $;const o=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,a=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,f=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow.setAttribute("transform","translate("+(n.RTL?o:e+a)+","+t+")"),f+a}getText_(){if(!this.selectedOption)return null;const e=this.selectedOption[0];return typeof e=="object"?e.alt:e}static fromJson(e){if(!e.options)throw Error("options are required for the dropdown field. The options property must be assigned an array of [humanReadableValue, languageNeutralValue] tuples.");return new this(e.options,void 0,e)}trimOptions(e){let t=!1;const n=e.map(([E,w])=>typeof E=="string"?[Ut(E),w]:(t=!0,[E.alt!==null?Object.assign({},E,{alt:Ut(E.alt)}):Object.assign({},E),w]));if(t||2>e.length)return{options:n};var o=n.map(([E])=>E),a=$u(o);e=Fd(o,a);const f=Ud(o,a);return!e&&!f||a<=e+f?{options:n}:(a=e?o[0].substring(0,e-1):void 0,o=f?o[0].substr(1-f):void 0,{options:this.applyTrim(n,e,f),prefix:a,suffix:o})}applyTrim(e,t,n){return e.map(([o,a])=>[o.substring(t,o.length-n),a])}validateOptions(e){if(!Array.isArray(e))throw TypeError("FieldDropdown options must be an array.");if(!e.length)throw TypeError("FieldDropdown options must not be an empty array.");let t=!1;for(let n=0;n<e.length;n++){const o=e[n];Array.isArray(o)?typeof o[1]!="string"?(t=!0,console.error(`Invalid option[${n}]: Each FieldDropdown option id must be a string. 
          Found ${o[1]} in: ${o}`)):o[0]&&typeof o[0]!="string"&&typeof o[0].src!="string"&&(t=!0,console.error(`Invalid option[${n}]: Each FieldDropdown option must have a string 
          label or image description. Found ${o[0]} in: ${o}`)):(t=!0,console.error(`Invalid option[${n}]: Each FieldDropdown option must be an array.
          Found: ${o}`))}if(t)throw TypeError("Found invalid FieldDropdown options.")}};Dr.CHECKMARK_OVERHANG=25,Dr.MAX_MENU_HEIGHT_VH=.45,Dr.ARROW_CHAR="▾",Dr.IMAGE_Y_OFFSET=5,Dr.IMAGE_Y_PADDING=2*Dr.IMAGE_Y_OFFSET,Un("field_dropdown",Dr);var Em=class{constructor(e,t){this.bubble=e,this.workspace=t,this.startLoc=null,this.inGroup=!1}isMovable(){return!0}startDrag(){(this.inGroup=!!i.getGroup$$module$build$src$core$events$utils())||i.setGroup$$module$build$src$core$events$utils(!0),this.startLoc=this.bubble.getRelativeToSurfaceXY(),this.workspace.setResizesEnabled(!1);let e;(e=this.workspace.getLayerManager())==null||e.moveToDragLayer(this.bubble),this.bubble.setDragging&&this.bubble.setDragging(!0)}drag(e){this.bubble.moveDuringDrag(e)}endDrag(){this.workspace.setResizesEnabled(!0),this.inGroup||i.setGroup$$module$build$src$core$events$utils(!1);let e;(e=this.workspace.getLayerManager())==null||e.moveOffDragLayer(this.bubble,ge),this.bubble.setDragging(!1)}revertDrag(){this.startLoc&&this.bubble.moveDuringDrag(this.startLoc)}},ss,pt=class{constructor(e,t,n){this.workspace=e,this.anchor=t,this.ownerRect=n,this.size=new oe(0,0),this.colour="#ffffff",this.disposed=!1,this.relativeLeft=this.relativeTop=0,this.dragStrategy=new Em(this,this.workspace),this.id=V(),this.svgRoot=J(P.G,{class:"blocklyBubble"},e.getBubbleCanvas()),e=J(P.G,{filter:`url(#${this.workspace.getRenderer().getConstants().embossFilterId})`},this.svgRoot),this.tail=J(P.PATH,{class:"blocklyBubbleTail"},e),this.background=J(P.RECT,{class:"blocklyDraggable",x:0,y:0,rx:ss.BORDER_WIDTH,ry:ss.BORDER_WIDTH},e),this.contentContainer=J(P.G,{},this.svgRoot),Le(this.background,"pointerdown",this,this.onMouseDown)}dispose(){x(this.svgRoot),this.disposed=!0}setAnchorLocation(e,t=!1){this.anchor=e,t?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}setPositionRelativeToAnchor(e,t){this.relativeLeft=e,this.relativeTop=t,this.positionRelativeToAnchor(),this.renderTail()}getSize(){return this.size}setSize(e,t=!1){e.width=Math.max(e.width,ss.MIN_SIZE),e.height=Math.max(e.height,ss.MIN_SIZE),this.size=e,this.background.setAttribute("width",`${e.width}`),this.background.setAttribute("height",`${e.height}`),t?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}getColour(){return this.colour}setColour(e){this.colour=e,this.tail.setAttribute("fill",e),this.background.setAttribute("fill",e)}onMouseDown(e){let t;(t=this.workspace.getGesture(e))==null||t.handleBubbleStart(e,this),this.bringToFront(),i.setSelected$$module$build$src$core$common(this)}positionRelativeToAnchor(){let e=this.anchor.x;e=this.workspace.RTL?e-(this.relativeLeft+this.size.width):e+this.relativeLeft,this.moveTo(e,this.relativeTop+this.anchor.y)}moveTo(e,t){this.svgRoot.setAttribute("transform",`translate(${e}, ${t})`)}positionByRect(e=new ct(0,0,0,0)){var t=this.workspace.getMetricsManager().getViewMetrics(!0),n=this.getOptimalRelativeLeft(t),o=this.getOptimalRelativeTop(t);const a={x:n,y:-this.size.height-this.workspace.getRenderer().getConstants().MIN_BLOCK_HEIGHT},f={x:-this.size.width-30,y:o};o={x:e.getWidth(),y:o};var E={x:n,y:e.getHeight()};n=e.getWidth()<e.getHeight()?o:E,e=e.getWidth()<e.getHeight()?E:o,o=this.getOverlap(a,t),E=this.getOverlap(f,t);const w=this.getOverlap(n,t);t=this.getOverlap(e,t),t=Math.max(o,E,w,t),o===t?(this.relativeLeft=a.x,this.relativeTop=a.y):E===t?(this.relativeLeft=f.x,this.relativeTop=f.y):w===t?(this.relativeLeft=n.x,this.relativeTop=n.y):(this.relativeLeft=e.x,this.relativeTop=e.y),this.positionRelativeToAnchor()}getOverlap(e,t){var n=this.workspace.RTL?this.anchor.x-e.x-this.size.width:e.x+this.anchor.x;return e=e.y+this.anchor.y,Math.max(0,Math.min(1,(Math.min(n+this.size.width,t.left+t.width)-Math.max(n,t.left))*(Math.min(e+this.size.height,t.top+t.height)-Math.max(e,t.top))/(this.size.width*this.size.height)))}getOptimalRelativeLeft(e){let t=-this.size.width/4;if(this.size.width>e.width)return t;if(e=this.getWorkspaceViewRect(e),this.workspace.RTL){var n=this.anchor.x-t;n-this.size.width<e.left?t=-(e.left-this.anchor.x+this.size.width):n>e.right&&(t=-(e.right-this.anchor.x))}else{n=t+this.anchor.x;const o=n+this.size.width;n<e.left?t=e.left-this.anchor.x:o>e.right&&(t=e.right-this.anchor.x-this.size.width)}return t}getOptimalRelativeTop(e){let t=-this.size.height/4;if(this.size.height>e.height)return t;const n=this.anchor.y+t,o=n+this.size.height;return e=this.getWorkspaceViewRect(e),n<e.top?t=e.top-this.anchor.y:o>e.bottom&&(t=e.bottom-this.anchor.y-this.size.height),t}getWorkspaceViewRect(e){const t=e.top;let n=e.top+e.height,o=e.left;return e=e.left+e.width,n-=this.getScrollbarThickness(),this.workspace.RTL?o-=this.getScrollbarThickness():e-=this.getScrollbarThickness(),new ct(t,n,o,e)}getScrollbarThickness(){return Nt.scrollbarThickness/this.workspace.scale}renderTail(){const e=[];var t=this.size.width/2,n=this.size.height/2,o=-this.relativeLeft,a=-this.relativeTop;if(t===o&&n===a)e.push("M "+t+","+n);else{a-=n,o-=t,this.workspace.RTL&&(o*=-1);var f=Math.sqrt(a*a+o*o),E=Math.acos(o/f);0>a&&(E=2*Math.PI-E);var w=E+Math.PI/2;w>2*Math.PI&&(w-=2*Math.PI);var q=Math.sin(w);const Rt=Math.cos(w);let Ct=(this.size.width+this.size.height)/ss.TAIL_THICKNESS;Ct=Math.min(Ct,this.size.width,this.size.height)/4,w=1-ss.ANCHOR_RADIUS/f,o=t+w*o,a=n+w*a,w=t+Ct*Rt;const Nr=n+Ct*q;t-=Ct*Rt,n-=Ct*q,q=Si(this.workspace.RTL?-ss.TAIL_ANGLE:ss.TAIL_ANGLE),q=E+q,q>2*Math.PI&&(q-=2*Math.PI),E=Math.sin(q)*f/ss.TAIL_BEND,f=Math.cos(q)*f/ss.TAIL_BEND,e.push("M"+w+","+Nr),e.push("C"+(w+f)+","+(Nr+E)+" "+o+","+a+" "+o+","+a),e.push("C"+o+","+a+" "+(t+f)+","+(n+E)+" "+t+","+n)}e.push("z");let Se;(Se=this.tail)==null||Se.setAttribute("d",e.join(" "))}bringToFront(){let e;const t=(e=this.svgRoot)==null?void 0:e.parentNode;return this.svgRoot&&(t==null?void 0:t.lastChild)!==this.svgRoot?(t==null||t.appendChild(this.svgRoot),!0):!1}getRelativeToSurfaceXY(){return new ae(this.workspace.RTL?-this.relativeLeft+this.anchor.x-this.size.width:this.anchor.x+this.relativeLeft,this.anchor.y+this.relativeTop)}getSvgRoot(){return this.svgRoot}moveDuringDrag(e){this.moveTo(e.x,e.y),this.relativeLeft=this.workspace.RTL?this.anchor.x-e.x-this.size.width:e.x-this.anchor.x,this.relativeTop=e.y-this.anchor.y,this.renderTail()}setDragging(e){}setDeleteStyle(e){}isDeletable(){return!1}showContextMenu(e){}isMovable(){return!0}startDrag(){this.dragStrategy.startDrag()}drag(e){this.dragStrategy.drag(e)}endDrag(){this.dragStrategy.endDrag()}revertDrag(){this.dragStrategy.revertDrag()}select(){}unselect(){}};ss=pt,pt.BORDER_WIDTH=6,pt.DOUBLE_BORDER=2*ss.BORDER_WIDTH,pt.MIN_SIZE=ss.DOUBLE_BORDER,pt.TAIL_THICKNESS=1,pt.TAIL_ANGLE=20,pt.TAIL_BEND=4,pt.ANCHOR_RADIUS=8;var Xo=class extends pt{constructor(e,t,n,o){super(t,n,o),this.workspace=t,this.anchor=n,this.ownerRect=o,this.autoLayout=!0,t=new Ds(e),this.validateWorkspaceOptions(t),this.svgDialog=J(P.SVG,{x:pt.BORDER_WIDTH,y:pt.BORDER_WIDTH},this.contentContainer),e.parentWorkspace=this.workspace,this.miniWorkspace=this.newWorkspaceSvg(new Ds(e)),this.miniWorkspace.internalIsMutator=!0,e=this.miniWorkspace.createDom("blocklyMutatorBackground"),this.svgDialog.appendChild(e),t.languageTree&&(e.insertBefore(this.miniWorkspace.addFlyout(P.G),this.miniWorkspace.getCanvas()),e=this.miniWorkspace.getFlyout(),e==null||e.init(this.miniWorkspace),e==null||e.show(t.languageTree)),this.miniWorkspace.addChangeListener(this.onWorkspaceChange.bind(this));let a,f;(a=this.miniWorkspace.getFlyout())==null||(f=a.getWorkspace())==null||f.addChangeListener(this.onWorkspaceChange.bind(this)),this.updateBubbleSize()}dispose(){this.miniWorkspace.dispose(),super.dispose()}getWorkspace(){return this.miniWorkspace}addWorkspaceChangeListener(e){this.miniWorkspace.addChangeListener(e)}validateWorkspaceOptions(e){if(e.hasCategories)throw Error("The miniworkspace bubble does not support toolboxes with categories");if(e.hasTrashcan)throw Error("The miniworkspace bubble does not support trashcans");if(e.zoomOptions.controls||e.zoomOptions.wheel||e.zoomOptions.pinch)throw Error("The miniworkspace bubble does not support zooming");if(e.moveOptions.scrollbars||e.moveOptions.wheel||e.moveOptions.drag)throw Error("The miniworkspace bubble does not scrolling/moving the workspace");if(e.horizontalLayout)throw Error("The miniworkspace bubble does not support horizontal layouts")}onWorkspaceChange(){this.bumpBlocksIntoBounds(),this.updateBubbleSize()}bumpBlocksIntoBounds(){if(!this.miniWorkspace.isDragging())for(const e of this.miniWorkspace.getTopBlocks(!1)){const t=e.getRelativeToSurfaceXY();if(20>t.y&&e.moveBy(0,20-t.y),e.RTL){let n=-20;const o=this.miniWorkspace.getFlyout();o&&(n-=o.getWidth()),t.x>n&&e.moveBy(n-t.x,0)}else 20>t.x&&e.moveBy(20-t.x,0)}}updateBubbleSize(){if(!this.miniWorkspace.isDragging()){var e=this.getSize(),t=this.calculateWorkspaceSize();Math.abs(e.width-t.width)<Xo.MINIMUM_VIEW_CHANGE&&Math.abs(e.height-t.height)<Xo.MINIMUM_VIEW_CHANGE||(this.svgDialog.setAttribute("width",`${t.width}px`),this.svgDialog.setAttribute("height",`${t.height}px`),this.miniWorkspace.setCachedParentSvgSize(t.width,t.height),this.miniWorkspace.RTL&&this.miniWorkspace.getCanvas().setAttribute("transform",`translate(${t.width}, 0)`),this.setSize(new oe(t.width+pt.DOUBLE_BORDER,t.height+pt.DOUBLE_BORDER),this.autoLayout),this.miniWorkspace.resize(),this.miniWorkspace.recordDragTargets())}}calculateWorkspaceSize(){var e=this.miniWorkspace.getCanvas().getBBox();let t=e.width+Xo.MARGIN;e=e.height+Xo.MARGIN;const n=this.miniWorkspace.getFlyout();if(n){const o=n.getWorkspace().getMetricsManager().getScrollMetrics();e=Math.max(e,o.height+20),t+=n.getWidth()}return new oe(t,e)}updateBlockStyles(){for(var e of this.miniWorkspace.getAllBlocks(!1))e.setStyle(e.getStyleName());let t;if(e=(t=this.miniWorkspace.getFlyout())==null?void 0:t.getWorkspace())for(const n of e.getAllBlocks(!1))n.setStyle(n.getStyleName())}moveDuringDrag(e){super.moveDuringDrag(e),this.autoLayout=!1}moveTo(e,t){super.moveTo(e,t),this.miniWorkspace.recordDragTargets()}newWorkspaceSvg(e){throw Error("The implementation of newWorkspaceSvg should be monkey-patched in by blockly.ts")}};Xo.MINIMUM_VIEW_CHANGE=10,Xo.MARGIN=3*pt.DOUBLE_BORDER;var pg=class{constructor(e){this.sourceBlock=e,this.offsetInBlock=new ae(0,0),this.workspaceLocation=new ae(0,0),this.svgRoot=null,this.tooltip=e}getType(){throw Error("Icons must implement getType")}initView(e){if(!this.svgRoot){var t=this.sourceBlock;this.svgRoot=J(P.G,{class:"blocklyIconGroup"}),t.getSvgRoot().appendChild(this.svgRoot),this.updateSvgRootOffset(),Le(this.svgRoot,"pointerdown",this,e),this.svgRoot.tooltip=this,gl(this.svgRoot)}}dispose(){Pc(this.svgRoot),x(this.svgRoot)}getWeight(){return-1}getSize(){return new oe(0,0)}setTooltip(e){this.tooltip=e??this.sourceBlock}getTooltip(){return this.tooltip}applyColour(){}updateEditable(){}updateCollapsed(){this.svgRoot&&(this.sourceBlock.isCollapsed()?this.svgRoot.style.display="none":this.svgRoot.style.display="block",vi(this)&&this.setBubbleVisible(!1))}hideForInsertionMarker(){this.svgRoot&&(this.svgRoot.style.display="none")}isShownWhenCollapsed(){return!1}setOffsetInBlock(e){this.offsetInBlock=e,this.updateSvgRootOffset()}updateSvgRootOffset(){let e;(e=this.svgRoot)==null||e.setAttribute("transform",`translate(${this.offsetInBlock.x}, ${this.offsetInBlock.y})`)}onLocationChange(e){this.workspaceLocation=ae.sum(e,this.offsetInBlock)}onClick(){}isClickableInFlyout(e){return!0}},gg,fg;gg=17,fg=16,i.MutatorIcon$$module$build$src$core$icons$mutator_icon=class extends pg{constructor(e,t){super(t),this.flyoutBlockTypes=e,this.sourceBlock=t,this.saveConnectionsListener=this.updateWorkspacePid=this.rootBlock=this.miniWorkspaceBubble=null}getType(){return i.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE}initView(e){this.svgRoot||(super.initView(e),J(P.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},this.svgRoot),J(P.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},this.svgRoot),J(P.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},this.svgRoot),ke(this.svgRoot,"blockly-icon-mutator"))}dispose(){super.dispose();let e;(e=this.miniWorkspaceBubble)==null||e.dispose()}getWeight(){return i.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT}getSize(){return new oe(gg,gg)}applyColour(){super.applyColour();let e;(e=this.miniWorkspaceBubble)==null||e.setColour(this.sourceBlock.style.colourPrimary);let t;(t=this.miniWorkspaceBubble)==null||t.updateBlockStyles()}updateCollapsed(){super.updateCollapsed(),this.sourceBlock.isCollapsed()&&this.setBubbleVisible(!1)}onLocationChange(e){super.onLocationChange(e);let t;(t=this.miniWorkspaceBubble)==null||t.setAnchorLocation(this.getAnchorLocation())}onClick(){super.onClick(),this.sourceBlock.isEditable()&&this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.miniWorkspaceBubble}setBubbleVisible(e){const t=this;return ee.asyncExecutePromiseGeneratorFunction(function*(){if(t.bubbleIsVisible()!==e){if(yield Bn(),e){t.miniWorkspaceBubble=new Xo(t.getMiniWorkspaceConfig(),t.sourceBlock.workspace,t.getAnchorLocation(),t.getBubbleOwnerRect()),t.applyColour(),t.createRootBlock(),t.addSaveConnectionsListener();let n;(n=t.miniWorkspaceBubble)==null||n.addWorkspaceChangeListener(t.createMiniWorkspaceChangeListener())}else{let n;(n=t.miniWorkspaceBubble)==null||n.dispose(),t.miniWorkspaceBubble=null,t.saveConnectionsListener&&t.sourceBlock.workspace.removeChangeListener(t.saveConnectionsListener),t.saveConnectionsListener=null}ce(new(X(z.BUBBLE_OPEN))(t.sourceBlock,e,"mutator"))}})}getMiniWorkspaceConfig(){let e;const t={disable:!1,media:this.sourceBlock.workspace.options.pathToMedia,rtl:this.sourceBlock.RTL,renderer:this.sourceBlock.workspace.options.renderer,rendererOverrides:(e=this.sourceBlock.workspace.options.rendererOverrides)!=null?e:void 0};return this.flyoutBlockTypes.length&&(t.toolbox={kind:"flyoutToolbox",contents:this.flyoutBlockTypes.map(n=>({kind:"block",type:n}))}),t}getAnchorLocation(){const e=gg/2;return ae.sum(this.workspaceLocation,new ae(e,e))}getBubbleOwnerRect(){const e=this.sourceBlock.getSvgRoot().getBBox();return new ct(e.y,e.y+e.height,e.x,e.x+e.width)}createRootBlock(){if(!this.sourceBlock.decompose)throw Error("Blocks with mutator icons must include a decompose method");this.rootBlock=this.sourceBlock.decompose(this.miniWorkspaceBubble.getWorkspace());for(var e of this.rootBlock.getDescendants(!1))e.queueRender();this.rootBlock.setMovable(!1),this.rootBlock.setDeletable(!1);let t,n,o,a;e=(a=(t=this.miniWorkspaceBubble)==null||(n=t.getWorkspace())==null||(o=n.getFlyout())==null?void 0:o.getWidth())!=null?a:0,this.rootBlock.moveBy(this.rootBlock.RTL?-(e+fg):fg,fg)}addSaveConnectionsListener(){this.sourceBlock.saveConnections&&this.rootBlock&&(this.saveConnectionsListener=()=>{this.sourceBlock.saveConnections&&this.rootBlock&&this.sourceBlock.saveConnections(this.rootBlock)},this.saveConnectionsListener(),this.sourceBlock.workspace.addChangeListener(this.saveConnectionsListener))}createMiniWorkspaceChangeListener(){return e=>{i.MutatorIcon$$module$build$src$core$icons$mutator_icon.isIgnorableMutatorEvent(e)||this.updateWorkspacePid||(this.updateWorkspacePid=setTimeout(()=>{this.updateWorkspacePid=null,this.recomposeSourceBlock()},0))}}static isIgnorableMutatorEvent(e){return e.isUiEvent||k(e)||te(e)&&e.element==="disabled"}recomposeSourceBlock(){if(this.rootBlock){if(!this.sourceBlock.compose)throw Error("Blocks with mutator icons must include a compose method");var e=i.getGroup$$module$build$src$core$events$utils();e||i.setGroup$$module$build$src$core$events$utils(!0);var t=Hi.getExtraBlockState_(this.sourceBlock);this.sourceBlock.compose(this.rootBlock);var n=Hi.getExtraBlockState_(this.sourceBlock);t!==n&&ce(new(X(z.BLOCK_CHANGE))(this.sourceBlock,"mutation",null,t,n)),i.setGroup$$module$build$src$core$events$utils(e)}}getWorkspace(){let e;return(e=this.miniWorkspaceBubble)==null?void 0:e.getWorkspace()}},i.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE=rn.MUTATOR,i.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT=1,i.MutatorIcon$$module$build$src$core$icons$mutator_icon;var za=Object.create(null),mb={allExtensions:za};i.register$$module$build$src$core$extensions("parent_tooltip_when_inline",wu);var di={TEST_ONLY:mb};di.apply=$t,di.buildTooltipForDropdown=i.buildTooltipForDropdown$$module$build$src$core$extensions,di.buildTooltipWithFieldText=i.buildTooltipWithFieldText$$module$build$src$core$extensions,di.isRegistered=Ts,di.register=i.register$$module$build$src$core$extensions,di.registerMixin=i.registerMixin$$module$build$src$core$extensions,di.registerMutator=i.registerMutator$$module$build$src$core$extensions,di.runAfterPageLoad=ch,di.unregister=bo;var Qe;(function(e){e[e.WIN_KEY_FF_LINUX=0]="WIN_KEY_FF_LINUX",e[e.MAC_ENTER=3]="MAC_ENTER",e[e.BACKSPACE=8]="BACKSPACE",e[e.TAB=9]="TAB",e[e.NUM_CENTER=12]="NUM_CENTER",e[e.ENTER=13]="ENTER",e[e.SHIFT=16]="SHIFT",e[e.CTRL=17]="CTRL",e[e.ALT=18]="ALT",e[e.PAUSE=19]="PAUSE",e[e.CAPS_LOCK=20]="CAPS_LOCK",e[e.ESC=27]="ESC",e[e.SPACE=32]="SPACE",e[e.PAGE_UP=33]="PAGE_UP",e[e.PAGE_DOWN=34]="PAGE_DOWN",e[e.END=35]="END",e[e.HOME=36]="HOME",e[e.LEFT=37]="LEFT",e[e.UP=38]="UP",e[e.RIGHT=39]="RIGHT",e[e.DOWN=40]="DOWN",e[e.PLUS_SIGN=43]="PLUS_SIGN",e[e.PRINT_SCREEN=44]="PRINT_SCREEN",e[e.INSERT=45]="INSERT",e[e.DELETE=46]="DELETE",e[e.ZERO=48]="ZERO",e[e.ONE=49]="ONE",e[e.TWO=50]="TWO",e[e.THREE=51]="THREE",e[e.FOUR=52]="FOUR",e[e.FIVE=53]="FIVE",e[e.SIX=54]="SIX",e[e.SEVEN=55]="SEVEN",e[e.EIGHT=56]="EIGHT",e[e.NINE=57]="NINE",e[e.FF_SEMICOLON=59]="FF_SEMICOLON",e[e.FF_EQUALS=61]="FF_EQUALS",e[e.FF_DASH=173]="FF_DASH",e[e.FF_HASH=163]="FF_HASH",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.AT_SIGN=64]="AT_SIGN",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.META=91]="META",e[e.WIN_KEY_RIGHT=92]="WIN_KEY_RIGHT",e[e.CONTEXT_MENU=93]="CONTEXT_MENU",e[e.NUM_ZERO=96]="NUM_ZERO",e[e.NUM_ONE=97]="NUM_ONE",e[e.NUM_TWO=98]="NUM_TWO",e[e.NUM_THREE=99]="NUM_THREE",e[e.NUM_FOUR=100]="NUM_FOUR",e[e.NUM_FIVE=101]="NUM_FIVE",e[e.NUM_SIX=102]="NUM_SIX",e[e.NUM_SEVEN=103]="NUM_SEVEN",e[e.NUM_EIGHT=104]="NUM_EIGHT",e[e.NUM_NINE=105]="NUM_NINE",e[e.NUM_MULTIPLY=106]="NUM_MULTIPLY",e[e.NUM_PLUS=107]="NUM_PLUS",e[e.NUM_MINUS=109]="NUM_MINUS",e[e.NUM_PERIOD=110]="NUM_PERIOD",e[e.NUM_DIVISION=111]="NUM_DIVISION",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.NUMLOCK=144]="NUMLOCK",e[e.SCROLL_LOCK=145]="SCROLL_LOCK",e[e.FIRST_MEDIA_KEY=166]="FIRST_MEDIA_KEY",e[e.LAST_MEDIA_KEY=183]="LAST_MEDIA_KEY",e[e.SEMICOLON=186]="SEMICOLON",e[e.DASH=189]="DASH",e[e.EQUALS=187]="EQUALS",e[e.COMMA=188]="COMMA",e[e.PERIOD=190]="PERIOD",e[e.SLASH=191]="SLASH",e[e.APOSTROPHE=192]="APOSTROPHE",e[e.TILDE=192]="TILDE",e[e.SINGLE_QUOTE=222]="SINGLE_QUOTE",e[e.OPEN_SQUARE_BRACKET=219]="OPEN_SQUARE_BRACKET",e[e.BACKSLASH=220]="BACKSLASH",e[e.CLOSE_SQUARE_BRACKET=221]="CLOSE_SQUARE_BRACKET",e[e.WIN_KEY=224]="WIN_KEY",e[e.MAC_FF_META=224]="MAC_FF_META",e[e.MAC_WK_CMD_LEFT=91]="MAC_WK_CMD_LEFT",e[e.MAC_WK_CMD_RIGHT=93]="MAC_WK_CMD_RIGHT",e[e.WIN_IME=229]="WIN_IME",e[e.VK_NONAME=252]="VK_NONAME",e[e.PHANTOM=255]="PHANTOM"})(Qe||(Qe={}));var Ko={};Ko.arc=Tt,Ko.curve=jt,Ko.line=vl,Ko.lineOnAxis=_e,Ko.lineTo=Wr,Ko.moveBy=mt,Ko.moveTo=Xt,Ko.point=Ae;var qt={};qt.Coordinate=ae,qt.KeyCodes=Qe,qt.Rect=ct,qt.Size=oe,qt.Svg=P,qt.aria=_n,qt.array=Bh,qt.browserEvents=ri,qt.colour=c,qt.deprecation=ba,qt.dom=Zt,qt.extensions=di,qt.idGenerator=kh,qt.math=Ot,qt.object=_m,qt.parsing=h,qt.string=Ul,qt.style=ks,qt.svgMath=ws,qt.svgPaths=Ko,qt.toolbox=In,qt.userAgent=rg,qt.xml=gr;var bm=class extends pt{constructor(e,t,n){super(e,t,n),this.workspace=e,this.anchor=t,this.ownerRect=n,this.resizePointerMoveListener=this.resizePointerUpListener=null,this.textChangeListeners=[],this.sizeChangeListeners=[],this.text="",this.DEFAULT_SIZE=new oe(160+pt.DOUBLE_BORDER,80+pt.DOUBLE_BORDER),this.MIN_SIZE=new oe(45+pt.DOUBLE_BORDER,20+pt.DOUBLE_BORDER),this.editable=!0,ke(this.svgRoot,"blocklyTextInputBubble"),{inputRoot:this.inputRoot,textArea:this.textArea}=this.createEditor(this.contentContainer),this.resizeGroup=this.createResizeHandle(this.svgRoot,e),this.setSize(this.DEFAULT_SIZE,!0)}getText(){return this.text}setText(e){this.text=e,this.textArea.value=e,this.onTextChange()}setEditable(e){(this.editable=e)?this.textArea.removeAttribute("readonly"):this.textArea.setAttribute("readonly","")}isEditable(){return this.editable}addTextChangeListener(e){this.textChangeListeners.push(e)}addSizeChangeListener(e){this.sizeChangeListeners.push(e)}createEditor(e){e=J(P.FOREIGNOBJECT,{x:pt.BORDER_WIDTH,y:pt.BORDER_WIDTH},e);const t=document.createElementNS(es,"body");t.setAttribute("xmlns",es),t.className="blocklyMinimalBody";const n=document.createElementNS(es,"textarea");return n.className="blocklyTextarea blocklyText",n.setAttribute("dir",this.workspace.RTL?"RTL":"LTR"),t.appendChild(n),e.appendChild(t),this.bindTextAreaEvents(n),setTimeout(()=>{n.focus()},0),{inputRoot:e,textArea:n}}bindTextAreaEvents(e){Le(e,"wheel",this,t=>{t.stopPropagation()}),Le(e,"focus",this,this.onStartEdit,!0),Le(e,"change",this,this.onTextChange)}createResizeHandle(e,t){return e=J(P.IMAGE,{class:"blocklyResizeHandle",href:`${t.options.pathToMedia}resize-handle.svg`},e),Le(e,"pointerdown",this,this.onResizePointerDown),e}setSize(e,t=!1){e.width=Math.max(e.width,this.MIN_SIZE.width),e.height=Math.max(e.height,this.MIN_SIZE.height);const n=e.width-pt.DOUBLE_BORDER,o=e.height-pt.DOUBLE_BORDER;this.inputRoot.setAttribute("width",`${n}`),this.inputRoot.setAttribute("height",`${o}`),this.resizeGroup.setAttribute("y",`${o}`),this.workspace.RTL?this.resizeGroup.setAttribute("x",`${-pt.DOUBLE_BORDER}`):this.resizeGroup.setAttribute("x",`${n}`),super.setSize(e,t),this.onSizeChange()}getSize(){return super.getSize()}onResizePointerDown(e){this.bringToFront(),bn(e)||(vu(this.workspace,e,new ae(this.workspace.RTL?-this.getSize().width:this.getSize().width,this.getSize().height)),this.resizePointerUpListener=Le(document,"pointerup",this,this.onResizePointerUp),this.resizePointerMoveListener=Le(document,"pointermove",this,this.onResizePointerMove),this.workspace.hideChaff()),e.stopPropagation()}onResizePointerUp(e){zt(),this.resizePointerUpListener&&(et(this.resizePointerUpListener),this.resizePointerUpListener=null),this.resizePointerMoveListener&&(et(this.resizePointerMoveListener),this.resizePointerMoveListener=null)}onResizePointerMove(e){e=Su(this.workspace,e),this.setSize(new oe(this.workspace.RTL?-e.x:e.x,e.y),!1),this.onSizeChange()}onStartEdit(){this.bringToFront()&&this.textArea.focus()}onTextChange(){this.text=this.textArea.value;for(const e of this.textChangeListeners)e()}onSizeChange(){for(const e of this.sizeChangeListeners)e()}};Rn(`
.blocklyTextInputBubble .blocklyTextarea {
  background-color: var(--commentFillColour);
  border: 0;
  box-sizing: border-box;
  display: block;
  outline: 0;
  padding: 5px;
  resize: none;
  width: 100%;
  height: 100%;
}
`);var yf={};yf.register=Ri,yf.unregister=Ou;var vf=17,ym=160,vm=80,Yo=class extends pg{constructor(e){super(e),this.sourceBlock=e,this.textInputBubble=null,this.text="",this.bubbleSize=new oe(ym,vm),this.bubbleVisiblity=!1}getType(){return Yo.TYPE}initView(e){this.svgRoot||(super.initView(e),J(P.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},this.svgRoot),J(P.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},this.svgRoot),J(P.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},this.svgRoot),ke(this.svgRoot,"blockly-icon-comment"))}dispose(){super.dispose();let e;(e=this.textInputBubble)==null||e.dispose()}getWeight(){return Yo.WEIGHT}getSize(){return new oe(vf,vf)}applyColour(){super.applyColour();const e=this.sourceBlock.style.colourPrimary;let t;(t=this.textInputBubble)==null||t.setColour(e)}updateEditable(){const e=this,t=()=>super.updateEditable;return ee.asyncExecutePromiseGeneratorFunction(function*(){t().call(e),e.bubbleIsVisible()&&(yield e.setBubbleVisible(!1),yield e.setBubbleVisible(!0))})}onLocationChange(e){super.onLocationChange(e),e=this.getAnchorLocation();let t;(t=this.textInputBubble)==null||t.setAnchorLocation(e)}setText(e){const t=this.text;ce(new(X(z.BLOCK_CHANGE))(this.sourceBlock,"comment",null,t,e)),this.text=e;let n;(n=this.textInputBubble)==null||n.setText(this.text)}getText(){return this.text}setBubbleSize(e){this.bubbleSize=e;let t;(t=this.textInputBubble)==null||t.setSize(this.bubbleSize,!0)}getBubbleSize(){return this.bubbleSize}saveState(){return this.text?{text:this.text,pinned:this.bubbleIsVisible(),height:this.bubbleSize.height,width:this.bubbleSize.width}:null}loadState(e){let t;this.text=(t=e.text)!=null?t:"";let n,o;this.bubbleSize=new oe((n=e.width)!=null?n:ym,(o=e.height)!=null?o:vm);let a;this.bubbleVisiblity=(a=e.pinned)!=null?a:!1,this.setBubbleVisible(this.bubbleVisiblity)}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}onTextChange(){if(this.textInputBubble){var e=this.textInputBubble.getText();this.text!==e&&(ce(new(X(z.BLOCK_CHANGE))(this.sourceBlock,"comment",null,this.text,e)),this.text=e)}}onSizeChange(){this.textInputBubble&&(this.bubbleSize=this.textInputBubble.getSize())}bubbleIsVisible(){return this.bubbleVisiblity}setBubbleVisible(e){const t=this;return ee.asyncExecutePromiseGeneratorFunction(function*(){t.bubbleVisiblity!==e&&(t.bubbleVisiblity=e,yield Bn(),!t.sourceBlock.rendered||t.sourceBlock.isInFlyout||t.sourceBlock.isInsertionMarker()||(e?(t.sourceBlock.isEditable()?t.showEditableBubble():t.showNonEditableBubble(),t.applyColour()):t.hideBubble(),ce(new(X(z.BUBBLE_OPEN))(t.sourceBlock,e,"comment"))))})}showEditableBubble(){this.createBubble();let e;(e=this.textInputBubble)==null||e.addTextChangeListener(()=>this.onTextChange());let t;(t=this.textInputBubble)==null||t.addSizeChangeListener(()=>this.onSizeChange())}showNonEditableBubble(){this.createBubble();let e;(e=this.textInputBubble)==null||e.setEditable(!1)}createBubble(){this.textInputBubble=new bm(this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect()),this.textInputBubble.setText(this.getText()),this.textInputBubble.setSize(this.bubbleSize,!0)}hideBubble(){let e;(e=this.textInputBubble)==null||e.dispose(),this.textInputBubble=null}getAnchorLocation(){const e=vf/2;return ae.sum(this.workspaceLocation,new ae(e,e))}getBubbleOwnerRect(){return this.sourceBlock.getBoundingRectangleWithoutChildren()}};Yo.TYPE=rn.COMMENT,Yo.WEIGHT=3,Ri(Yo.TYPE,Yo);var Sm=class extends Error{constructor(e){super(`Tried to append an icon of type ${e.getType()} when an icon of that type already exists on the block. Use getIcon to access the existing icon.`),this.icon=e}},Cm={};Cm.DuplicateIconType=Sm;var Im=class extends pt{constructor(e,t,n,o){super(t,n,o),this.text=e,this.workspace=t,this.anchor=n,this.ownerRect=o,this.paragraph=this.stringToSvg(e,this.contentContainer),this.updateBubbleSize()}getText(){return this.text}setText(e){this.text=e,x(this.paragraph),this.paragraph=this.stringToSvg(e,this.contentContainer),this.updateBubbleSize()}stringToSvg(e,t){return t=this.createParagraph(t),e=this.createSpans(t,e),this.workspace.RTL&&this.rightAlignSpans(t.getBBox().width,e),t}createParagraph(e){return J(P.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:pt.BORDER_WIDTH},e)}createSpans(e,t){return t.split(`
`).map(n=>{const o=J(P.TSPAN,{dy:"1em",x:pt.BORDER_WIDTH},e);return n=document.createTextNode(n),o.appendChild(n),o})}rightAlignSpans(e,t){for(const n of t)n.setAttribute("text-anchor","end"),n.setAttribute("x",`${e+pt.BORDER_WIDTH}`)}updateBubbleSize(){const e=this.paragraph.getBBox();this.setSize(new oe(e.width+2*pt.BORDER_WIDTH,e.height+2*pt.BORDER_WIDTH),!0)}},Sf=17,Jo=class extends pg{constructor(e){super(e),this.sourceBlock=e,this.textMap=new Map,this.textBubble=null}getType(){return Jo.TYPE}initView(e){this.svgRoot||(super.initView(e),J(P.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},this.svgRoot),J(P.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},this.svgRoot),J(P.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},this.svgRoot),ke(this.svgRoot,"blockly-icon-warning"))}dispose(){super.dispose();let e;(e=this.textBubble)==null||e.dispose()}getWeight(){return Jo.WEIGHT}getSize(){return new oe(Sf,Sf)}applyColour(){super.applyColour();let e;(e=this.textBubble)==null||e.setColour(this.sourceBlock.style.colourPrimary)}updateCollapsed(){}isShownWhenCollapsed(){return!0}onLocationChange(e){super.onLocationChange(e);let t;(t=this.textBubble)==null||t.setAnchorLocation(this.getAnchorLocation())}addMessage(e,t){if(this.textMap.get(t)===e)return this;e?this.textMap.set(t,e):this.textMap.delete(t);let n;return(n=this.textBubble)==null||n.setText(this.getText()),this}getText(){return[...this.textMap.values()].join(`
`)}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.textBubble}setBubbleVisible(e){const t=this;return ee.asyncExecutePromiseGeneratorFunction(function*(){if(t.bubbleIsVisible()!==e){if(yield Bn(),e)t.textBubble=new Im(t.getText(),t.sourceBlock.workspace,t.getAnchorLocation(),t.getBubbleOwnerRect()),t.applyColour();else{let n;(n=t.textBubble)==null||n.dispose(),t.textBubble=null}ce(new(X(z.BUBBLE_OPEN))(t.sourceBlock,e,"warning"))}})}getAnchorLocation(){const e=Sf/2;return ae.sum(this.workspaceLocation,new ae(e,e))}getBubbleOwnerRect(){const e=this.sourceBlock.getSvgRoot().getBBox();return new ct(e.y,e.y+e.height,e.x,e.x+e.width)}};Jo.TYPE=rn.WARNING,Jo.WEIGHT=2;var Wl={};Wl.CommentIcon=Yo,Wl.Icon=pg,Wl.IconType=rn,Wl.MutatorIcon=i.MutatorIcon$$module$build$src$core$icons$mutator_icon,Wl.WarningIcon=Jo,Wl.exceptions=Cm,Wl.registry=yf,i.Names$$module$build$src$core$names=class{constructor(e,t){this.db=new Map,this.dbReverse=new Set,this.variableMap=null,this.variablePrefix=t||"",this.reservedWords=new Set(e?e.split(","):[])}reset(){this.db.clear(),this.dbReverse.clear(),this.variableMap=null}setVariableMap(e){this.variableMap=e}getNameForUserVariable(e){return this.variableMap?(e=this.variableMap.getVariableById(e))?e.name:null:(console.warn(`Deprecated call to Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:
Blockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());`),null)}populateVariables(e){e=i.allUsedVarModels$$module$build$src$core$variables(e);for(let t=0;t<e.length;t++)this.getName(e[t].getId(),i.NameType$$module$build$src$core$names.VARIABLE)}populateProcedures(e){throw Error("The implementation of populateProcedures should be monkey-patched in by blockly.ts")}getName(e,t){let n=e;t===i.NameType$$module$build$src$core$names.VARIABLE&&(e=this.getNameForUserVariable(e))&&(n=e),e=n.toLowerCase();const o=t===i.NameType$$module$build$src$core$names.VARIABLE||t===i.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"";this.db.has(t)||this.db.set(t,new Map);const a=this.db.get(t);return a.has(e)?o+a.get(e):(t=this.getDistinctName(n,t),a.set(e,t.substr(o.length)),t)}getUserNames(e){let t;return(e=(t=this.db.get(e))==null?void 0:t.keys())?Array.from(e):[]}getDistinctName(e,t){e=this.safeName(e);let n=null,o,a;for(;this.dbReverse.has(e+((o=n)!=null?o:""))||this.reservedWords.has(e+((a=n)!=null?a:""));)n=n?n+1:2;let f;return e+=(f=n)!=null?f:"",this.dbReverse.add(e),(t===i.NameType$$module$build$src$core$names.VARIABLE||t===i.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"")+e}safeName(e){return e?(e=encodeURI(e.replace(/ /g,"_")).replace(/[^\w]/g,"_"),"0123456789".includes(e[0])&&(e="my_"+e)):e=i.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed",e}static equals(e,t){return e.toLowerCase()===t.toLowerCase()}},function(e){e=e.NameType||(e.NameType={}),e.DEVELOPER_VARIABLE="DEVELOPER_VARIABLE",e.VARIABLE="VARIABLE",e.PROCEDURE="PROCEDURE"}(i.Names$$module$build$src$core$names||(i.Names$$module$build$src$core$names={})),i.NameType$$module$build$src$core$names=i.Names$$module$build$src$core$names.NameType,i.Names$$module$build$src$core$names.DEVELOPER_VARIABLE_TYPE=i.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE,i.NameType$$module$build$src$core$names,i.Names$$module$build$src$core$names;var km=class extends Map{constructor(){super()}set(e,t){return this.get(e)===t?this:(super.set(e,t),Hn(t)&&t.startPublishing(),this)}delete(e){const t=this.get(e);return e=super.delete(e),e&&(Hn(t)&&t.stopPublishing(),e)}clear(){if(this.size)for(const e of this.keys())this.delete(e)}add(e){return this.set(e.getId(),e)}getProcedures(){return[...this.values()]}},$g,Er;$g="PROCEDURE",i.DEFAULT_ARG$$module$build$src$core$procedures="x",Er={CATEGORY_NAME:$g,DEFAULT_ARG:i.DEFAULT_ARG$$module$build$src$core$procedures},Er.ObservableProcedureMap=km,Er.allProcedures=Gn,Er.findLegalName=i.findLegalName$$module$build$src$core$procedures,Er.flyoutCategory=ys,Er.getCallers=Vn,Er.getDefinition=i.getDefinition$$module$build$src$core$procedures,Er.isNameUsed=jr,Er.isProcedureBlock=zr,Er.mutateCallers=i.mutateCallers$$module$build$src$core$procedures,Er.mutatorOpenListener=Ru,Er.rename=i.rename$$module$build$src$core$procedures;var _b=class{constructor(){this.NONE=0,this.FIELD=1,this.HAT=2,this.ICON=4,this.SPACER=8,this.BETWEEN_ROW_SPACER=16,this.IN_ROW_SPACER=32,this.EXTERNAL_VALUE_INPUT=64,this.INPUT=128,this.INLINE_INPUT=256,this.STATEMENT_INPUT=512,this.CONNECTION=1024,this.PREVIOUS_CONNECTION=2048,this.NEXT_CONNECTION=4096,this.OUTPUT_CONNECTION=8192,this.CORNER=16384,this.LEFT_SQUARE_CORNER=32768,this.LEFT_ROUND_CORNER=65536,this.RIGHT_SQUARE_CORNER=131072,this.RIGHT_ROUND_CORNER=262144,this.JAGGED_EDGE=524288,this.ROW=1048576,this.TOP_ROW=2097152,this.BOTTOM_ROW=4194304,this.INPUT_ROW=8388608,this.LEFT_CORNER=this.LEFT_SQUARE_CORNER|this.LEFT_ROUND_CORNER,this.RIGHT_CORNER=this.RIGHT_SQUARE_CORNER|this.RIGHT_ROUND_CORNER,this.nextTypeValue_=16777216}getType(e){return Object.prototype.hasOwnProperty.call(this,e)||(this[e]=this.nextTypeValue_,this.nextTypeValue_<<=1),this[e]}isField(e){return e.type&this.FIELD}isHat(e){return e.type&this.HAT}isIcon(e){return e.type&this.ICON}isSpacer(e){return e.type&this.SPACER}isInRowSpacer(e){return e.type&this.IN_ROW_SPACER}isInput(e){return e.type&this.INPUT}isExternalInput(e){return e.type&this.EXTERNAL_VALUE_INPUT}isInlineInput(e){return e.type&this.INLINE_INPUT}isStatementInput(e){return e.type&this.STATEMENT_INPUT}isPreviousConnection(e){return e.type&this.PREVIOUS_CONNECTION}isNextConnection(e){return e.type&this.NEXT_CONNECTION}isPreviousOrNextConnection(e){return e.type&(this.PREVIOUS_CONNECTION|this.NEXT_CONNECTION)}isLeftRoundedCorner(e){return e.type&this.LEFT_ROUND_CORNER}isRightRoundedCorner(e){return e.type&this.RIGHT_ROUND_CORNER}isLeftSquareCorner(e){return e.type&this.LEFT_SQUARE_CORNER}isRightSquareCorner(e){return e.type&this.RIGHT_SQUARE_CORNER}isCorner(e){return e.type&this.CORNER}isJaggedEdge(e){return e.type&this.JAGGED_EDGE}isRow(e){return e.type&this.ROW}isBetweenRowSpacer(e){return e.type&this.BETWEEN_ROW_SPACER}isTopRow(e){return e.type&this.TOP_ROW}isBottomRow(e){return e.type&this.BOTTOM_ROW}isTopOrBottomRow(e){return e.type&(this.TOP_ROW|this.BOTTOM_ROW)}isInputRow(e){return e.type&this.INPUT_ROW}},M=new _b,Vi=class{constructor(e){this.centerline=this.xPos=this.height=this.width=0,this.constants_=e,this.type=M.NONE,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}},Qh=class{constructor(e){this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasStatement=this.hasExternalInput=!1,this.statementEdge=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=!1,this.align=null,this.constants_=e,this.type=M.ROW,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}getLastInput(){for(let e=this.elements.length-1;0<=e;e--){const t=this.elements[e];if(M.isInput(t))return t}return null}measure(){throw Error("Unexpected attempt to measure a base Row.")}startsWithElemSpacer(){return!0}endsWithElemSpacer(){return!0}getFirstSpacer(){for(let e=0;e<this.elements.length;e++){const t=this.elements[e];if(M.isSpacer(t))return t}return null}getLastSpacer(){for(let e=this.elements.length-1;0<=e;e--){const t=this.elements[e];if(M.isSpacer(t))return t}return null}},Cf=class extends Qh{constructor(e){super(e),this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0,this.type|=M.BOTTOM_ROW}hasLeftSquareCorner(e){return!!e.outputConnection||!!e.getNextBlock()}hasRightSquareCorner(e){return!0}measure(){let e=0,t=0,n=0;for(let o=0;o<this.elements.length;o++){const a=this.elements[o];t+=a.width,M.isSpacer(a)||(M.isNextConnection(a)?n=Math.max(n,a.height):e=Math.max(e,a.height))}this.width=Math.max(this.minWidth,t),this.height=Math.max(this.minHeight,e)+n,this.descenderHeight=n,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},qo=class extends Vi{constructor(e,t){super(e),this.connectionModel=t,this.type|=M.CONNECTION,this.shape=this.constants_.shapeFor(t),this.isDynamicShape="isDynamic"in this.shape&&this.shape.isDynamic,this.highlighted=t.isHighlighted()}},zl=class extends qo{constructor(e,t){super(e,t.connection),this.input=t,this.connectionOffsetY=this.connectionOffsetX=0,this.type|=M.INPUT,this.align=t.align,(this.connectedBlock=t.connection&&t.connection.targetBlock()?t.connection.targetBlock():null)?(e=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=e.width,this.connectedBlockHeight=e.height):this.connectedBlockHeight=this.connectedBlockWidth=0}},mg=class extends zl{constructor(e,t){super(e,t),this.height=0,this.type|=M.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width}},ja=class extends Vi{constructor(e,t,n){super(e),this.field=t,this.parentInput=n,this.isEditable=t.EDITABLE,this.flipRtl=t.getFlipRtl(),this.type|=M.FIELD,e=this.field.getSize(),this.height=e.height,this.width=e.width}},If=class extends Vi{constructor(e){super(e),this.type|=M.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height}},wm=class extends Vi{constructor(e,t){super(e),this.icon=t,this.flipRtl=!1,this.type|=M.ICON,e=t.getSize(),this.height=e.height,this.width=e.width}},is=class extends Vi{constructor(e,t){super(e),this.type=this.type|M.SPACER|M.IN_ROW_SPACER,this.width=t,this.height=this.constants_.SPACER_DEFAULT_HEIGHT}},kf=class extends zl{constructor(e,t){super(e,t),this.type|=M.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY="connectionOffsetY"in this.shape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX="connectionOffsetX"in this.shape?this.shape.connectionOffsetX(this.connectionWidth):0}},Zh=class extends zl{constructor(e,t){super(e,t),this.type|=M.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width}},wf=class extends Qh{constructor(e){super(e),this.connectedBlockWidths=0,this.type|=M.INPUT_ROW}measure(){this.width=this.minWidth,this.height=this.minHeight;let e=0;for(let t=0;t<this.elements.length;t++){const n=this.elements[t];this.width+=n.width,M.isInput(n)&&n instanceof zl&&(M.isStatementInput(n)&&n instanceof Zh?e+=n.connectedBlockWidth:M.isExternalInput(n)&&n instanceof mg&&n.connectedBlockWidth!==0&&(e+=n.connectedBlockWidth-n.connectionWidth)),M.isSpacer(n)||(this.height=Math.max(this.height,n.height))}this.connectedBlockWidths=e,this.widthWithConnectedBlocks=this.width+e}endsWithElemSpacer(){return!this.hasExternalInput&&!this.hasStatement}},Om=class extends Vi{constructor(e){super(e),this.type|=M.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width}},Rm=class extends qo{constructor(e,t){super(e,t),this.type|=M.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},Lm=class extends qo{constructor(e,t){super(e,t),this.connectionOffsetX=0,this.type|=M.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP}},Am=class extends qo{constructor(e,t){super(e,t),this.type|=M.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},ep=class extends Vi{constructor(e,t){super(e),this.type=(t&&t!=="left"?M.RIGHT_ROUND_CORNER:M.LEFT_ROUND_CORNER)|M.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2}},Of=class extends Qh{constructor(e,t,n){super(e),this.height=t,this.width=n,this.precedesStatement=this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.type=this.type|M.SPACER|M.BETWEEN_ROW_SPACER,this.elements=[new is(this.constants_,n)]}measure(){}},tp=class extends Vi{constructor(e,t){super(e),this.type=(t&&t!=="left"?M.RIGHT_SQUARE_CORNER:M.LEFT_SQUARE_CORNER)|M.CORNER,this.width=this.height=this.constants_.NO_PADDING}},Rf=class extends Qh{constructor(e){super(e),this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null,this.type|=M.TOP_ROW}hasLeftSquareCorner(e){const t=(e.hat?e.hat==="cap":this.constants_.ADD_START_HATS)&&!e.outputConnection&&!e.previousConnection,n=e.getPreviousBlock();return!!e.outputConnection||t||(n?n.getNextBlock()===e:!1)}hasRightSquareCorner(e){return!0}measure(){let e=0,t=0,n=0;for(let o=0;o<this.elements.length;o++){const a=this.elements[o];t+=a.width,M.isSpacer(a)||(M.isHat(a)&&a instanceof If?n=Math.max(n,a.ascenderHeight):e=Math.max(e,a.height))}this.width=Math.max(this.minWidth,t),this.height=Math.max(this.minHeight,e)+n,this.capline=this.ascenderHeight=n,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},_g=class{constructor(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.CORNER_RADIUS=8,this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.defs=null,this.embossFilterId="",this.embossFilter=null,this.disabledPatternId="",this.disabledPattern=null,this.debugFilterId="",this.cssNode=this.debugFilter=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2},this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=mt(0,0),this.FIELD_TEXT_BASELINE_CENTER=!0,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2)}init(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()}setTheme(e){this.blockStyles=Object.create(null);const t=e.blockStyles;for(const n in t)this.blockStyles[n]=this.validatedBlockStyle_(t[n]);this.setDynamicProperties_(e)}setDynamicProperties_(e){this.setFontConstants_(e),this.setComponentConstants_(e),this.ADD_START_HATS=e.startHats!==void 0?e.startHats:this.ADD_START_HATS}setFontConstants_(e){e.fontStyle&&e.fontStyle.family&&(this.FIELD_TEXT_FONTFAMILY=e.fontStyle.family),e.fontStyle&&e.fontStyle.weight&&(this.FIELD_TEXT_FONTWEIGHT=e.fontStyle.weight),e.fontStyle&&e.fontStyle.size&&(this.FIELD_TEXT_FONTSIZE=e.fontStyle.size),e=eo("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=e.height,this.FIELD_TEXT_BASELINE=e.baseline}setComponentConstants_(e){this.CURSOR_COLOUR=e.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=e.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=e.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(e.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY}getBlockStyleForColour(e){const t="auto_"+e;return this.blockStyles[t]||(this.blockStyles[t]=this.createBlockStyle_(e)),{style:this.blockStyles[t],name:t}}getBlockStyle(e){return this.blockStyles[e||""]||(e&&e.startsWith("auto_")?this.getBlockStyleForColour(e.substring(5)).style:this.createBlockStyle_("#000000"))}createBlockStyle_(e){return this.validatedBlockStyle_({colourPrimary:e})}validatedBlockStyle_(e){const t={};return e&&Object.assign(t,e),e=$l(t.colourPrimary||"#000"),t.colourPrimary=e.hex,t.colourSecondary=t.colourSecondary?$l(t.colourSecondary).hex:this.generateSecondaryColour_(t.colourPrimary),t.colourTertiary=t.colourTertiary?$l(t.colourTertiary).hex:this.generateTertiaryColour_(t.colourPrimary),t.hat=t.hat||"",t}generateSecondaryColour_(e){return Vr("#fff",e,.6)||e}generateTertiaryColour_(e){return Vr("#fff",e,.3)||e}dispose(){this.embossFilter&&x(this.embossFilter),this.disabledPattern&&x(this.disabledPattern),this.debugFilter&&x(this.debugFilter),this.cssNode=null}makeJaggedTeeth(){const e=this.JAGGED_TEETH_HEIGHT,t=this.JAGGED_TEETH_WIDTH,n=vl([Ae(t,e/4),Ae(2*-t,e/2),Ae(t,e/4)]);return{height:e,width:t,path:n}}makeStartHat(){const e=this.START_HAT_HEIGHT,t=this.START_HAT_WIDTH,n=jt("c",[Ae(30,-e),Ae(70,-e),Ae(t,0)]);return{height:e,width:t,path:n}}makePuzzleTab(){function e(f){f=f?-1:1;const E=-f;var w=n/2;const q=w+2.5,Se=w+.5,Rt=Ae(-t,f*w);return w=Ae(t,f*w),jt("c",[Ae(0,f*q),Ae(-t,E*Se),Rt])+jt("s",[Ae(t,2.5*E),w])}const t=this.TAB_WIDTH,n=this.TAB_HEIGHT,o=e(!0),a=e(!1);return{type:this.SHAPES.PUZZLE,width:t,height:n,pathDown:a,pathUp:o}}makeNotch(){function e(E){return vl([Ae(E*o,n),Ae(3*E,0),Ae(E*o,-n)])}const t=this.NOTCH_WIDTH,n=this.NOTCH_HEIGHT,o=(t-3)/2,a=e(1),f=e(-1);return{type:this.SHAPES.NOTCH,width:t,height:n,pathLeft:a,pathRight:f}}makeInsideCorners(){const e=this.CORNER_RADIUS,t=Tt("a","0 0,0",e,Ae(-e,e)),n=Tt("a","0 0,0",e,Ae(e,e));return{width:e,height:e,pathTop:t,pathBottom:n}}makeOutsideCorners(){const e=this.CORNER_RADIUS,t=mt(0,e)+Tt("a","0 0,1",e,Ae(e,-e)),n=Tt("a","0 0,1",e,Ae(e,e)),o=Tt("a","0 0,1",e,Ae(-e,-e)),a=Tt("a","0 0,1",e,Ae(-e,e));return{topLeft:t,topRight:n,bottomRight:a,bottomLeft:o,rightHeight:e}}shapeFor(e){switch(e.type){case Ie.INPUT_VALUE:case Ie.OUTPUT_VALUE:return this.PUZZLE_TAB;case Ie.PREVIOUS_STATEMENT:case Ie.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}}createDom(e,t,n){this.injectCSS_(t,n),this.defs=J(P.DEFS,{},e),e=J(P.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},this.defs),J(P.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},e),t=J(P.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},e),J(P.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},t),J(P.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},e),J(P.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},e),this.embossFilterId=e.id,this.embossFilter=e,e=J(P.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},this.defs),J(P.RECT,{width:10,height:10,fill:"#aaa"},e),J(P.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},e),this.disabledPatternId=e.id,this.disabledPattern=e,this.createDebugFilter()}createDebugFilter(){if(!this.debugFilter){const e=J(P.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},this.defs),t=J(P.FECOMPONENTTRANSFER,{result:"outBlur"},e);J(P.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},t),J(P.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},e),J(P.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),this.debugFilterId=e.id,this.debugFilter=e}}injectCSS_(e,t){t=this.getCSS_(t),e="blockly-renderer-style-"+e,this.cssNode=document.getElementById(e);const n=t.join(`
`);this.cssNode?this.cssNode.firstChild.textContent=n:(t=document.createElement("style"),t.id=e,e=document.createTextNode(n),t.appendChild(e),document.head.insertBefore(t,document.head.firstChild),this.cssNode=t)}getCSS_(e){return[`${e} .blocklyText, `,`${e} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e} .blocklyText {`,"fill: #fff;","}",`${e} .blocklyNonEditableText>rect,`,`${e} .blocklyEditableText>rect {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"fill-opacity: .6;","stroke: none;","}",`${e} .blocklyNonEditableText>text,`,`${e} .blocklyEditableText>text {`,"fill: #000;","}",`${e} .blocklyFlyoutLabelText {`,"fill: #000;","}",`${e} .blocklyText.blocklyBubbleText {`,"fill: #000;","}",`${e} .blocklyEditableText:not(.editing):hover>rect {`,"stroke: #fff;","stroke-width: 2;","}",`${e} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"}",`${e} .blocklySelected>.blocklyPath {`,"stroke: #fc3;","stroke-width: 3px;","}",`${e} .blocklyHighlightedConnectionPath {`,"stroke: #fc3;","}",`${e} .blocklyReplaceable .blocklyPath {`,"fill-opacity: .5;","}",`${e} .blocklyReplaceable .blocklyPathLight,`,`${e} .blocklyReplaceable .blocklyPathDark {`,"display: none;","}",`${e} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},Tg=class{constructor(e,t){this.inlinePath_=this.outlinePath_="",this.block_=e,this.info_=t,this.topLeft_=e.getRelativeToSurfaceXY(),this.constants_=t.getRenderer().getConstants()}draw(){this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights(),this.block_.pathObject.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),this.recordSizeOnBlock_()}recordSizeOnBlock_(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren,this.block_.childlessWidth=this.info_.width}drawOutline_(){this.drawTop_();for(let e=1;e<this.info_.rows.length-1;e++){const t=this.info_.rows[e];t.hasJaggedEdge?this.drawJaggedEdge_(t):t.hasStatement?this.drawStatementInput_(t):t.hasExternalInput?this.drawValueInput_(t):this.drawRightSideRow_(t)}this.drawBottom_(),this.drawLeft_()}drawTop_(){const e=this.info_.topRow,t=e.elements;this.positionPreviousConnection_(),this.outlinePath_+=mt(e.xPos,this.info_.startY);for(let n=0,o;o=t[n];n++)M.isLeftRoundedCorner(o)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:M.isRightRoundedCorner(o)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:M.isPreviousConnection(o)&&o instanceof qo?this.outlinePath_+=o.shape.pathLeft:M.isHat(o)?this.outlinePath_+=this.constants_.START_HAT.path:M.isSpacer(o)&&(this.outlinePath_+=_e("h",o.width));this.outlinePath_+=_e("v",e.height)}drawJaggedEdge_(e){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+_e("v",e.height-this.constants_.JAGGED_TEETH.height)}drawValueInput_(e){const t=e.getLastInput();this.positionExternalValueConnection_(e);const n=Et(t.shape)?t.shape.pathDown(t.height):t.shape.pathDown;this.outlinePath_+=_e("H",t.xPos+t.width)+n+_e("v",e.height-t.connectionHeight)}drawStatementInput_(e){var t=e.getLastInput();if(t){var n=t.xPos+t.notchOffset+t.shape.width;t=t.shape.pathRight+_e("h",-(t.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var o=e.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=_e("H",n)+t+_e("v",o)+this.constants_.INSIDE_CORNERS.pathBottom+_e("H",e.xPos+e.width),this.positionStatementInputConnection_(e)}}drawRightSideRow_(e){this.outlinePath_+=_e("V",e.yPos+e.height)}drawBottom_(){const e=this.info_.bottomRow,t=e.elements;this.positionNextConnection_();let n=0,o="";for(let a=t.length-1,f;f=t[a];a--)M.isNextConnection(f)&&f instanceof qo?o+=f.shape.pathRight:M.isLeftSquareCorner(f)?o+=_e("H",e.xPos):M.isLeftRoundedCorner(f)?o+=this.constants_.OUTSIDE_CORNERS.bottomLeft:M.isRightRoundedCorner(f)?(o+=this.constants_.OUTSIDE_CORNERS.bottomRight,n=this.constants_.OUTSIDE_CORNERS.rightHeight):M.isSpacer(f)&&(o+=_e("h",-1*f.width));this.outlinePath_+=_e("V",e.baseline-n),this.outlinePath_+=o}drawLeft_(){var e=this.info_.outputConnection;if(this.positionOutputConnection_(),e){const t=e.connectionOffsetY+e.height;e=Et(e.shape)?e.shape.pathUp(e.height):e.shape.pathUp,this.outlinePath_+=_e("V",t)+e}this.outlinePath_+="z"}drawInternals_(){for(let e=0,t;t=this.info_.rows[e];e++)for(let n=0,o;o=t.elements[n];n++)M.isInlineInput(o)?this.drawInlineInput_(o):(M.isIcon(o)||M.isField(o))&&this.layoutField_(o)}layoutField_(e){const t=e.centerline-e.height/2;let n=e.xPos;var o="";this.info_.RTL&&(n=-(n+e.width),e.flipRtl&&(n+=e.width,o="scale(-1 1)")),M.isIcon(e)?(o=e.icon,o.setOffsetInBlock(new ae(n,t)),this.info_.isInsertionMarker&&o.hideForInsertionMarker()):(e=e.field.getSvgRoot(),e.setAttribute("transform","translate("+n+","+t+")"+o),this.info_.isInsertionMarker&&e.setAttribute("display","none"))}drawInlineInput_(e){const t=e.width,n=e.height,o=e.connectionOffsetY,a=e.connectionHeight+o;this.inlinePath_+=Xt(e.xPos+e.connectionWidth,e.centerline-n/2)+_e("v",o)+e.shape.pathDown+_e("v",n-a)+_e("h",t-e.connectionWidth)+_e("v",-n)+"z",this.positionInlineInputConnection_(e)}positionInlineInputConnection_(e){const t=e.centerline-e.height/2;if(e.connectionModel){let n=e.xPos+e.connectionWidth+e.connectionOffsetX;this.info_.RTL&&(n*=-1),e.connectionModel.setOffsetInBlock(n,t+e.connectionOffsetY)}}positionStatementInputConnection_(e){const t=e.getLastInput();if(t!=null&&t.connectionModel){let n=e.xPos+e.statementEdge+t.notchOffset;this.info_.RTL&&(n*=-1),t.connectionModel.setOffsetInBlock(n,e.yPos)}}positionExternalValueConnection_(e){const t=e.getLastInput();if(t&&t.connectionModel){let n=e.xPos+e.width;this.info_.RTL&&(n*=-1),t.connectionModel.setOffsetInBlock(n,e.yPos)}}positionPreviousConnection_(){const e=this.info_.topRow;if(e.connection){const t=e.xPos+e.notchOffset;e.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-t:t,0)}}positionNextConnection_(){const e=this.info_.bottomRow;if(e.connection){const t=e.connection,n=t.xPos;t.connectionModel.setOffsetInBlock(this.info_.RTL?-n:n,e.baseline)}}positionOutputConnection_(){if(this.info_.outputConnection){const e=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-e:e,this.info_.outputConnection.connectionOffsetY)}}updateConnectionHighlights(){for(const e of this.info_.rows)for(const t of e.elements)if(t instanceof qo)if(t.highlighted)this.drawConnectionHighlightPath(t);else{let n,o;(o=(n=this.block_.pathObject).removeConnectionHighlight)==null||o.call(n,t.connectionModel)}}drawConnectionHighlightPath(e){const t=e.connectionModel;e=t.type===Ie.INPUT_VALUE||t.type===Ie.OUTPUT_VALUE?this.getExpressionConnectionHighlightPath(e):this.getStatementConnectionHighlightPath(e);const n=t.getSourceBlock();let o,a;(a=(o=n.pathObject).addConnectionHighlight)==null||a.call(o,t,e,t.getOffsetInBlock(),n.RTL)}getExpressionConnectionHighlightPath(e){let t="";return Et(e.shape)?t=e.shape.pathDown(e.height):kr(e.shape)&&(t=e.shape.pathDown),e=this.constants_.TAB_OFFSET_FROM_TOP,mt(0,-e)+_e("v",e)+t+_e("v",e)}getStatementConnectionHighlightPath(e){if(!dh(e.shape))throw Error("Statement connections should have notch shapes");const t=this.constants_.NOTCH_OFFSET_LEFT-this.constants_.CORNER_RADIUS;return mt(-t,0)+_e("h",t)+e.shape.pathLeft+_e("h",t)}};(function(e){e[e.LEFT=-1]="LEFT",e[e.CENTRE=0]="CENTRE",e[e.RIGHT=1]="RIGHT"})(i.Align$$module$build$src$core$inputs$align||(i.Align$$module$build$src$core$inputs$align={})),i.Align$$module$build$src$core$inputs$align;var fc=class extends g{constructor(e,t,n){super(g.SKIP_SETUP),this.class=null,this.EDITABLE=!1,this.maxDisplayLength=1/0,e!==g.SKIP_SETUP&&(n?this.configure_(n):this.class=t||null,this.setValue(e))}configure_(e){super.configure_(e),e.class&&(this.class=e.class)}initView(){this.createTextElement_(),this.class&&ke(this.getTextElement(),this.class)}doClassValidation_(e){return e==null?null:`${e}`}setClass(e){this.textElement_&&(this.class&&v(this.textElement_,this.class),e&&ke(this.textElement_,e)),this.class=e}static fromJson(e){return new this(Ut(e.text),void 0,e)}};Un("field_label",fc),fc.prototype.DEFAULT_VALUE="";var Xa=class{constructor(e,t){this.name=e,this.sourceBlock=t,this.fieldRow=[],this.align=i.Align$$module$build$src$core$inputs$align.LEFT,this.visible=!0,this.type=i.inputTypes$$module$build$src$core$inputs$input_types.CUSTOM,this.connection=null}getSourceBlock(){return this.sourceBlock}appendField(e,t){return this.insertFieldAt(this.fieldRow.length,e,t),this}insertFieldAt(e,t,n){if(0>e||e>this.fieldRow.length)throw Error("index "+e+" out of bounds.");return(t||t===""&&n)&&(typeof t=="string"&&(t=i.fromJson$$module$build$src$core$field_registry({type:"field_label",text:t})),t.setSourceBlock(this.sourceBlock),this.sourceBlock.initialized&&this.initField(t),t.name=n,t.setVisible(this.isVisible()),t.prefixField&&(e=this.insertFieldAt(e,t.prefixField)),this.fieldRow.splice(e,0,t),e++,t.suffixField&&(e=this.insertFieldAt(e,t.suffixField)),this.sourceBlock.rendered&&this.sourceBlock.queueRender()),e}removeField(e,t){for(let n=0,o;o=this.fieldRow[n];n++)if(o.name===e)return o.dispose(),this.fieldRow.splice(n,1),this.sourceBlock.rendered&&this.sourceBlock.queueRender(),!0;if(t)return!1;throw Error('Field "'+e+'" not found.')}isVisible(){return this.visible}setVisible(e){let t=[];if(this.visible===e)return t;this.visible=e;for(let o=0,a;a=this.fieldRow[o];o++)a.setVisible(e);if(this.connection){var n=this.connection;e?t=n.startTrackingAll():n.stopTrackingAll(),(n=n.targetBlock())&&(n.getSvgRoot().style.display=e?"block":"none")}return t}markDirty(){for(let e=0,t;t=this.fieldRow[e];e++)t.markDirty()}setCheck(e){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(e),this}setAlign(e){return this.align=e,this.sourceBlock.rendered&&this.sourceBlock.queueRender(),this}setShadowDom(e){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(e),this}getShadowDom(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()}init(){for(const e of this.fieldRow)e.init()}initModel(){for(const e of this.fieldRow)e.initModel()}initField(e){this.sourceBlock.rendered?e.init():e.initModel()}dispose(){for(let e=0,t;t=this.fieldRow[e];e++)t.dispose();this.connection&&this.connection.dispose()}makeConnection(e){return this.sourceBlock.makeConnection_(e)}},Wi=class extends Xa{constructor(e,t){super(e,t),this.name=e,this.type=i.inputTypes$$module$build$src$core$inputs$input_types.DUMMY}},Qo=class extends Xa{constructor(e,t){super(e,t),this.name=e,this.type=i.inputTypes$$module$build$src$core$inputs$input_types.END_ROW}},os=class extends Xa{constructor(e,t){if(!e)throw Error("Statement inputs must have a non-empty name");super(e,t),this.name=e,this.type=i.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT,this.connection=this.makeConnection(Ie.NEXT_STATEMENT)}},Dm;i.ValueInput$$module$build$src$core$inputs$value_input=class extends Xa{constructor(e,t){if(!e)throw Error("Value inputs must have a non-empty name");super(e,t),this.name=e,this.type=i.inputTypes$$module$build$src$core$inputs$input_types.VALUE,this.connection=this.makeConnection(Ie.INPUT_VALUE)}},Dm={},Dm.ValueInput=i.ValueInput$$module$build$src$core$inputs$value_input;var np=class{constructor(e,t){this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.startY=this.startX=0,this.renderer_=e,this.block_=t,this.constants_=this.renderer_.getConstants(),this.outputConnection=t.outputConnection?new Lm(this.constants_,t.outputConnection):null,this.isInline=t.getInputsInline()&&!t.isCollapsed(),this.isCollapsed=t.isCollapsed(),this.isInsertionMarker=t.isInsertionMarker(),this.RTL=t.RTL,this.topRow=new Rf(this.constants_),this.bottomRow=new Cf(this.constants_)}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}createRows_(){this.populateTopRow_(),this.rows.push(this.topRow);let e=new wf(this.constants_);this.inputRows.push(e);var t=this.block_.getIcons();for(let n=0,o;o=t[n];n++){const a=new wm(this.constants_,o);this.isCollapsed&&!o.isShownWhenCollapsed()||e.elements.push(a)}t=void 0;for(let n=0,o;o=this.block_.inputList[n];n++)if(o.isVisible()){this.shouldStartNewRow_(o,t)&&(this.rows.push(e),e=new wf(this.constants_),this.inputRows.push(e));for(let a=0,f;f=o.fieldRow[a];a++)e.elements.push(new ja(this.constants_,f,o));this.addInput_(o,e),t=o}this.isCollapsed&&(e.hasJaggedEdge=!0,e.elements.push(new Om(this.constants_))),(e.elements.length||e.hasDummyInput)&&this.rows.push(e),this.populateBottomRow_(),this.rows.push(this.bottomRow)}populateTopRow_(){var e=!!this.block_.previousConnection;const t=(this.block_.hat?this.block_.hat==="cap":this.constants_.ADD_START_HATS)&&!this.outputConnection&&!e;let n=this.topRow.hasLeftSquareCorner(this.block_)?tp:ep;this.topRow.elements.push(new n(this.constants_)),t?(e=new If(this.constants_),this.topRow.elements.push(e),this.topRow.capline=e.ascenderHeight):e&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new Am(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.block_.inputList.length&&this.block_.inputList[0]instanceof os&&!this.block_.isCollapsed()?this.topRow.minHeight=this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.topRow.minHeight=this.constants_.TOP_ROW_MIN_HEIGHT,n=this.topRow.hasRightSquareCorner(this.block_)?tp:ep,this.topRow.elements.push(new n(this.constants_,"right"))}populateBottomRow_(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof os?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new tp(this.constants_)):this.bottomRow.elements.push(new ep(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new Rm(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new tp(this.constants_,"right")):this.bottomRow.elements.push(new ep(this.constants_,"right"))}addInput_(e,t){this.isInline&&e instanceof i.ValueInput$$module$build$src$core$inputs$value_input?(t.elements.push(new kf(this.constants_,e)),t.hasInlineInput=!0):e instanceof os?(t.elements.push(new Zh(this.constants_,e)),t.hasStatement=!0):e instanceof i.ValueInput$$module$build$src$core$inputs$value_input?(t.elements.push(new mg(this.constants_,e)),t.hasExternalInput=!0):(e instanceof Wi||e instanceof Qo)&&(t.minHeight=Math.max(t.minHeight,e.getSourceBlock()&&e.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),t.hasDummyInput=!0),t.align===null&&(t.align=e.align)}shouldStartNewRow_(e,t){return t?t instanceof Qo||e instanceof os||t instanceof os?!0:e instanceof i.ValueInput$$module$build$src$core$inputs$value_input||e instanceof Wi||t instanceof i.ValueInput$$module$build$src$core$inputs$value_input?!this.isInline:!1:!1}addElemSpacing_(){for(let e=0,t;t=this.rows[e];e++){const n=t.elements;if(t.elements=[],t.startsWithElemSpacer()&&t.elements.push(new is(this.constants_,this.getInRowSpacing_(null,n[0]))),n.length){for(let o=0;o<n.length-1;o++){t.elements.push(n[o]);const a=this.getInRowSpacing_(n[o],n[o+1]);t.elements.push(new is(this.constants_,a))}t.elements.push(n[n.length-1]),t.endsWithElemSpacer()&&t.elements.push(new is(this.constants_,this.getInRowSpacing_(n[n.length-1],null)))}}}getInRowSpacing_(e,t){if(!e&&t&&M.isStatementInput(t))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(e&&M.isInput(e)&&!t){if(M.isExternalInput(e))return this.constants_.NO_PADDING;if(M.isInlineInput(e))return this.constants_.LARGE_PADDING;if(M.isStatementInput(e))return this.constants_.NO_PADDING}return e&&M.isLeftSquareCorner(e)&&t&&(M.isPreviousConnection(t)||M.isNextConnection(t))?t.notchOffset:e&&M.isLeftRoundedCorner(e)&&t&&(M.isPreviousConnection(t)||M.isNextConnection(t))?t.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}computeBounds_(){let e=0,t=0,n=0;for(let a=0,f;f=this.rows[a];a++){if(f.measure(),t=Math.max(t,f.width),f.hasStatement){var o=f.getLastInput();let E,w;o=f.width-((w=(E=o)==null?void 0:E.width)!=null?w:0),e=Math.max(e,o)}n=Math.max(n,f.widthWithConnectedBlocks)}this.statementEdge=e,this.width=t;for(let a=0,f;f=this.rows[a];a++)f.hasStatement&&(f.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(t,n),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)}alignRowElements_(){for(let t=0,n;n=this.rows[t];t++)if(n.hasStatement)this.alignStatementRow_(n);else{var e=n.width;e=this.getDesiredRowWidth_(n)-e,0<e&&this.addAlignmentPadding_(n,e),M.isTopOrBottomRow(n)&&(n.widthWithConnectedBlocks=n.width)}}getDesiredRowWidth_(e){return this.width-this.startX}addAlignmentPadding_(e,t){const n=e.getFirstSpacer(),o=e.getLastSpacer();if((e.hasExternalInput||e.hasStatement)&&(e.widthWithConnectedBlocks+=t),e.align===i.Align$$module$build$src$core$inputs$align.LEFT&&o)o.width+=t;else if(e.align===i.Align$$module$build$src$core$inputs$align.CENTRE&&n&&o)n.width+=t/2,o.width+=t/2;else if(e.align===i.Align$$module$build$src$core$inputs$align.RIGHT&&n)n.width+=t;else if(o)o.width+=t;else return;e.width+=t}alignStatementRow_(e){const t=e.getLastInput();if(t){var n=e.width-t.width,o=this.statementEdge;n=o-n,0<n&&this.addAlignmentPadding_(e,n),n=e.width,o=this.getDesiredRowWidth_(e),t.width+=o-n,t.height=Math.max(t.height,e.height),e.width+=o-n,e.widthWithConnectedBlocks=Math.max(e.width,this.statementEdge+e.connectedBlockWidths)}}addRowSpacing_(){const e=this.rows;this.rows=[];for(let t=0;t<e.length;t++)this.rows.push(e[t]),t!==e.length-1&&this.rows.push(this.makeSpacerRow_(e[t],e[t+1]))}makeSpacerRow_(e,t){var n=this.getSpacerRowHeight_(e,t);const o=this.getSpacerRowWidth_(e,t);return n=new Of(this.constants_,n,o),e.hasStatement&&(n.followsStatement=!0),t.hasStatement&&(n.precedesStatement=!0),n}getSpacerRowWidth_(e,t){return this.width-this.startX}getSpacerRowHeight_(e,t){return this.constants_.MEDIUM_PADDING}getElemCenterline_(e,t){return M.isSpacer(t)?e.yPos+t.height/2:M.isBottomRow(e)?(e=e.yPos+e.height-e.descenderHeight,M.isNextConnection(t)?e+t.height/2:e-t.height/2):M.isTopRow(e)?M.isHat(t)?e.capline-t.height/2:e.capline+t.height/2:e.yPos+e.height/2}recordElemPositions_(e){let t=e.xPos;for(let n=0,o;o=e.elements[n];n++)M.isSpacer(o)&&(o.height=e.height),o.xPos=t,o.centerline=this.getElemCenterline_(e,o),t+=o.width}finalize_(){let e=0,t=0;for(let n=0,o;o=this.rows[n];n++)o.yPos=t,o.xPos=this.startX,t+=o.height,e=Math.max(e,o.widthWithConnectedBlocks),this.recordElemPositions_(o);if(this.outputConnection&&this.block_.nextConnection){const n=this.block_.nextConnection.targetBlock();n&&(e=Math.max(e,n.getHeightWidth().width))}this.widthWithChildren=e+this.startX,this.height=t,this.startY=this.topRow.capline,this.bottomRow.baseline=t-this.bottomRow.descenderHeight}getMeasureableForConnection(e){let t;if(((t=this.outputConnection)==null?void 0:t.connectionModel)===e)return this.outputConnection;for(const n of this.rows)for(const o of n.elements)if(o instanceof qo&&o.connectionModel===e)return o;return null}},Lf=class extends Ar{constructor(e){if(super(e),this.type=z.BLOCK_DELETE,e){if(e.getParent())throw Error("Connected blocks cannot be deleted.");e.isShadow()&&(this.recordUndo=!1),this.oldXml=Js(e),this.ids=Xe(e),this.wasShadow=e.isShadow(),this.oldJson=yn(e,{addCoordinates:!0})}}toJson(){const e=super.toJson();if(!this.oldXml)throw Error("The old block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(this.wasShadow===void 0)throw Error("Whether the block was a shadow is undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.oldXml=Fn(this.oldXml),e.ids=this.ids,e.wasShadow=this.wasShadow,e.oldJson=this.oldJson,this.recordUndo||(e.recordUndo=this.recordUndo),e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new Lf),t.oldXml=i.textToDom$$module$build$src$core$utils$xml(e.oldXml),t.ids=e.ids,t.wasShadow=e.wasShadow||t.oldXml.tagName.toLowerCase()==="shadow",t.oldJson=e.oldJson,e.recordUndo!==void 0&&(t.recordUndo=e.recordUndo),t}run(e){const t=this.getEventWorkspace_();if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(e)for(e=0;e<this.ids.length;e++){const n=this.ids[e],o=t.getBlockById(n);o?o.dispose(!1):n===this.blockId&&console.warn("Can't delete non-existent block: "+n)}else gs(this.oldJson,t)}};d(ne.EVENT,z.BLOCK_DELETE,Lf);var it=class{constructor(e,t){this.type=t,this.targetConnection=null,this.disposed=!1,this.shadowDom=this.check=null,this.y=this.x=0,this.shadowState=null,this.sourceBlock_=e}connect_(e){const t=Ie.INPUT_VALUE,n=this.getSourceBlock();var o=e.getSourceBlock();e.isConnected()&&e.disconnectInternal(!1);let a;if(this.isConnected()){const E=this.stashShadowState(),w=this.targetBlock();w.isShadow()?w.dispose(!1):(this.disconnectInternal(),a=w),this.applyShadowState(E)}let f;Re()&&(f=new(X(z.BLOCK_MOVE))(o),f.setReason(["connect"])),hh(this,e),o.setParent(n),f&&(f.recordNew(),ce(f)),a&&(e=this.type===t?a.outputConnection:a.previousConnection)&&((o=it.getConnectionForOrphanedConnection(o,e))?e.connect(o):e.onFailedConnect(this))}dispose(){if(this.isConnected()){this.isSuperior()&&this.setShadowStateInternal();const e=this.targetBlock();e&&!e.isDeadOrDying()&&e.unplug()}this.disposed=!0}getSourceBlock(){return this.sourceBlock_}isSuperior(){return this.type===Ie.INPUT_VALUE||this.type===Ie.NEXT_STATEMENT}isConnected(){return!!this.targetConnection}getConnectionChecker(){return this.sourceBlock_.workspace.connectionChecker}onFailedConnect(e){}connect(e){if(this.targetConnection===e)return!0;if(this.getConnectionChecker().canConnect(this,e,!1)){const t=i.getGroup$$module$build$src$core$events$utils();t||i.setGroup$$module$build$src$core$events$utils(!0),this.isSuperior()?this.connect_(e):e.connect_(this),i.setGroup$$module$build$src$core$events$utils(t)}return this.isConnected()}disconnect(){this.disconnectInternal()}disconnectInternal(e=!0){const{parentConnection:t,childConnection:n}=this.getParentAndChildConnections();if(!t||!n)throw Error("Source connection not connected.");const o=i.getGroup$$module$build$src$core$events$utils();o||i.setGroup$$module$build$src$core$events$utils(!0);let a;Re()&&(a=new(X(z.BLOCK_MOVE))(n.getSourceBlock()),a.setReason(["disconnect"]));const f=this.targetConnection;f&&(f.targetConnection=null),this.targetConnection=null,e&&n.getSourceBlock().setParent(null),a&&(a.recordNew(),ce(a)),n.getSourceBlock().isShadow()||t.respawnShadow_(),i.setGroup$$module$build$src$core$events$utils(o)}getParentAndChildConnections(){return this.targetConnection?this.isSuperior()?{parentConnection:this,childConnection:this.targetConnection}:{parentConnection:this.targetConnection,childConnection:this}:{}}respawnShadow_(){this.createShadowBlock(!0)}reconnect(e,t){if(this.getSourceBlock().isDeadOrDying())return!1;var n;return t=(n=e.getInput(t))==null?void 0:n.connection,n=this.targetBlock(),n&&n!==e||!t||t.targetConnection===this?!1:(t.isConnected()&&t.disconnect(),t.connect(this),!0)}targetBlock(){if(this.isConnected()){let e,t;return(t=(e=this.targetConnection)==null?void 0:e.getSourceBlock())!=null?t:null}return null}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(e){return e?(Array.isArray(e)||(e=[e]),this.check=e,this.onCheckChanged_()):this.check=null,this}getCheck(){return this.check}setShadowDom(e){this.setShadowStateInternal({shadowDom:e})}getShadowDom(e){return e&&this.targetBlock().isShadow()?Cr(this.targetBlock()):this.shadowDom}setShadowState(e){this.setShadowStateInternal({shadowState:e})}getShadowState(e){return e&&this.targetBlock()&&this.targetBlock().isShadow()?yn(this.targetBlock()):this.shadowState}neighbours(e){return[]}getParentInput(){let e=null;const t=this.sourceBlock_.inputList;for(let n=0;n<t.length;n++)if(t[n].connection===this){e=t[n];break}return e}toString(){const e=this.sourceBlock_;if(!e)return"Orphan Connection";if(e.outputConnection===this)var t="Output Connection of ";else if(e.previousConnection===this)t="Previous Connection of ";else if(e.nextConnection===this)t="Next Connection of ";else{t=null;for(let n=0,o;o=e.inputList[n];n++)if(o.connection===this){t=o;break}if(t)t='Input "'+t.name+'" connection on ';else return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection"}return t+e.toDevString()}stashShadowState(){const e=this.getShadowDom(!0),t=this.getShadowState(!0);return this.shadowState=this.shadowDom=null,{shadowDom:e,shadowState:t}}applyShadowState({shadowDom:e,shadowState:t}){this.shadowDom=e,this.shadowState=t}setShadowStateInternal({shadowDom:e=null,shadowState:t=null}={}){this.shadowDom=e,this.shadowState=t,this.getSourceBlock().isDeadOrDying()||((e=this.targetBlock())?e.isShadow()?(e.dispose(!1),this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock())):(e=this.createShadowBlock(!1),this.serializeShadow(e),e&&e.dispose(!1)):(this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock())))}createShadowBlock(e){var t=this.getSourceBlock();const n=this.getShadowState(),o=this.getShadowDom();if(t.isDeadOrDying()||!n&&!o)return null;if(n)return t=ur(n,t.workspace,{parentConnection:e?this:void 0,isShadow:!0,recordUndo:!1});if(o){if(t=_s(o,t.workspace),e)if(this.type===Ie.INPUT_VALUE){if(!t.outputConnection)throw Error("Shadow block is missing an output connection");if(!this.connect(t.outputConnection))throw Error("Could not connect shadow block to connection")}else if(this.type===Ie.NEXT_STATEMENT){if(!t.previousConnection)throw Error("Shadow block is missing previous connection");if(!this.connect(t.previousConnection))throw Error("Could not connect shadow block to connection")}else throw Error("Cannot connect a shadow block to a previous/output connection");return t}return null}serializeShadow(e){e&&(this.shadowDom=Cr(e),this.shadowState=yn(e))}static getConnectionForOrphanedConnection(e,t){if(t.type===Ie.OUTPUT_VALUE)return la(e,t.getSourceBlock());e=e.lastConnectionInStack(!0);const n=t.getConnectionChecker();return e&&n.canConnect(t,e,!1)?e:null}};it.CAN_CONNECT=0,it.REASON_SELF_CONNECTION=1,it.REASON_WRONG_TYPE=2,it.REASON_TARGET_NULL=3,it.REASON_CHECKS_FAILED=4,it.REASON_DIFFERENT_WORKSPACES=5,it.REASON_SHADOW_PARENT=6,it.REASON_DRAG_CHECKS_FAILED=7,it.REASON_PREVIOUS_AND_OUTPUT=8;var jl=class{constructor(e,t,n){if(this.data=null,this.disposed=!1,this.hue=null,this.colour_="#000000",this.styleName_="",this.suppressPrefixSuffix=!1,this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.icons=[],this.disabledReasons=new Set,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable=this.movable=this.deletable=!0,this.collapsed_=this.shadow=!1,this.outputShape_=null,this.rendered=this.isInsertionMarker_=this.initialized=this.disposing=!1,this.onchangeWrapper=this.helpUrl=null,this.statementInputCount=0,this.workspace=e,this.id=n&&!e.getBlockById(n)?n:B(),e.setBlockById(this.id,this),this.xy=new ae(0,0),this.isInFlyout=e.isFlyout,this.isInMutator=e.isMutator,this.RTL=e.RTL,t){if(this.type=t,n=Wn[t],!n||typeof n!="object")throw TypeError("Invalid block definition for type: "+t);Object.assign(this,n)}e.addTopBlock(this),e.addTypedBlock(this),new.target===jl&&this.doInit_()}doInit_(){const e=i.getGroup$$module$build$src$core$events$utils();e||i.setGroup$$module$build$src$core$events$utils(!0);const t=$e();try{typeof this.init=="function"&&(i.setRecordUndo$$module$build$src$core$events$utils(!1),this.init(),i.setRecordUndo$$module$build$src$core$events$utils(t)),Re()&&ce(new(X(z.BLOCK_CREATE))(this))}finally{i.setGroup$$module$build$src$core$events$utils(e),i.setRecordUndo$$module$build$src$core$events$utils(t)}this.inputsInlineDefault=this.inputsInline,typeof this.onchange=="function"&&this.setOnChange(this.onchange)}dispose(e=!1){this.disposing=!0,this.onchangeWrapper&&this.workspace.removeChangeListener(this.onchangeWrapper),this.unplug(e),Re()&&ce(new(X(z.BLOCK_DELETE))(this)),this.workspace.removeTopBlock(this),this.disposeInternal()}disposeInternal(){this.disposing=!0,this.onchangeWrapper&&this.workspace.removeChangeListener(this.onchangeWrapper),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),typeof this.destroy=="function"&&this.destroy(),this.childBlocks_.forEach(e=>e.disposeInternal()),this.inputList.forEach(e=>e.dispose()),this.inputList.length=0,this.getConnections_(!0).forEach(e=>e.dispose()),this.disposed=!0}isDeadOrDying(){return this.disposing||this.disposed}initModel(){if(!this.initialized){for(const e of this.inputList)e.initModel();this.initialized=!0}}unplug(e){this.outputConnection&&this.unplugFromRow(e),this.previousConnection&&this.unplugFromStack(e)}unplugFromRow(e){let t=null,n;(n=this.outputConnection)!=null&&n.isConnected()&&(t=this.outputConnection.targetConnection,this.outputConnection.disconnect()),t&&e&&(e=this.getOnlyValueConnection())&&e.isConnected()&&!e.targetBlock().isShadow()&&(e=e.targetConnection,e==null||e.disconnect(),this.workspace.connectionChecker.canConnect(e,t,!1)?t.connect(e):e==null||e.onFailedConnect(t))}getOnlyValueConnection(){let e=null;for(let t=0;t<this.inputList.length;t++){const n=this.inputList[t].connection;if(n&&n.type===Ie.INPUT_VALUE&&n.targetConnection){if(e)return null;e=n}}return e}unplugFromStack(e){let t=null;var n;if((n=this.previousConnection)!=null&&n.isConnected()&&(t=this.previousConnection.targetConnection,this.previousConnection.disconnect()),n=this.getNextBlock(),e&&n&&!n.isShadow()){let o,a;e=(a=(o=this.nextConnection)==null?void 0:o.targetConnection)!=null?a:null,e==null||e.disconnect(),t&&this.workspace.connectionChecker.canConnect(t,e,!1)&&t.connect(e)}}getConnections_(e){e=[],this.outputConnection&&e.push(this.outputConnection),this.previousConnection&&e.push(this.previousConnection),this.nextConnection&&e.push(this.nextConnection);for(let t=0,n;n=this.inputList[t];t++)n.connection&&e.push(n.connection);return e}lastConnectionInStack(e){let t=this.nextConnection;for(;t;){const n=t.targetBlock();if(!n||e&&n.isShadow())return t;t=n.nextConnection}return null}bumpNeighbours(){}getParent(){return this.parentBlock_}getInputWithBlock(e){for(let t=0,n;n=this.inputList[t];t++)if(n.connection&&n.connection.targetBlock()===e)return n;return null}getSurroundParent(){let e=this,t;do if(t=e,e=e.getParent(),!e)return null;while(e.getNextBlock()===t);return e}getNextBlock(){return this.nextConnection&&this.nextConnection.targetBlock()}getPreviousBlock(){return this.previousConnection&&this.previousConnection.targetBlock()}getRootBlock(){let e,t=this;do e=t,t=e.parentBlock_;while(t);return e}getTopStackBlock(){let e=this,t;do t=e.getPreviousBlock();while(t&&t.getNextBlock()===e&&(e=t));return e}getChildren(e){if(!e)return this.childBlocks_;e=[];for(let n=0,o;o=this.inputList[n];n++)if(o.connection){var t=o.connection.targetBlock();t&&e.push(t)}return(t=this.getNextBlock())&&e.push(t),e}setParent(e){if(e!==this.parentBlock_){var t=this.previousConnection&&this.previousConnection.targetBlock()||this.outputConnection&&this.outputConnection.targetBlock(),n=!!t;if(n&&e&&t!==e)throw Error("Block connected to superior one that is not new parent.");if(!n&&e)throw Error("Block not connected to new parent.");if(n&&!e)throw Error("Cannot set parent to null while block is still connected to superior block.");this.parentBlock_?Bt(this.parentBlock_.childBlocks_,this):this.workspace.removeTopBlock(this),(this.parentBlock_=e)?e.childBlocks_.push(this):this.workspace.addTopBlock(this)}}getDescendants(e){const t=[this],n=this.getChildren(e);for(let o,a=0;o=n[a];a++)t.push(...o.getDescendants(e));return t}isDeletable(){return this.deletable&&!this.shadow&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnDeletable(){return this.deletable}setDeletable(e){this.deletable=e}isMovable(){return this.movable&&!this.shadow&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnMovable(){return this.movable}setMovable(e){this.movable=e}isDuplicatable(){return this.workspace.hasBlockLimits()?this.workspace.isCapacityAvailable(kt(this,!0)):!0}isShadow(){return this.shadow}setShadow(e){this.shadow=e}isInsertionMarker(){return this.isInsertionMarker_}setInsertionMarker(e){this.isInsertionMarker_=e}isEditable(){return this.editable&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnEditable(){return this.editable}setEditable(e){this.editable=e;for(let t=0,n;n=this.inputList[t];t++)for(let o=0,a;a=n.fieldRow[o];o++)a.updateEditable()}isDisposed(){return this.disposed}isSimpleReporter(){if(!this.outputConnection)return!1;for(const e of this.inputList)if(e.connection||1<e.fieldRow.length)return!1;return!0}getMatchingConnection(e,t){const n=this.getConnections_(!0);if(e=e.getConnections_(!0),n.length!==e.length)throw Error("Connection lists did not match in length.");for(let o=0;o<e.length;o++)if(e[o]===t)return n[o];return null}setHelpUrl(e){this.helpUrl=e}setTooltip(e){this.tooltip=e}getTooltip(){return ho(this)}getColour(){return this.colour_}getStyleName(){return this.styleName_}getHue(){return this.hue}setColour(e){e=$l(e),this.hue=e.hue,this.colour_=e.hex}setStyle(e){this.styleName_=e}setOnChange(e){if(e&&typeof e!="function")throw Error("onchange must be a function.");this.onchangeWrapper&&this.workspace.removeChangeListener(this.onchangeWrapper),this.onchange=e,this.onchangeWrapper=e.bind(this),this.workspace.addChangeListener(this.onchangeWrapper)}getField(e){if(typeof e!="string")throw TypeError("Block.prototype.getField expects a string with the field name but received "+(e===void 0?"nothing":e+" of type "+typeof e)+" instead");for(let t=0,n;n=this.inputList[t];t++)for(let o=0,a;a=n.fieldRow[o];o++)if(a.name===e)return a;return null}getVars(){const e=[];for(let t=0,n;n=this.inputList[t];t++)for(let o=0,a;a=n.fieldRow[o];o++)a.referencesVariables()&&e.push(a.getValue());return e}getVarModels(){const e=[];for(let t=0,n;n=this.inputList[t];t++)for(let o=0,a;a=n.fieldRow[o];o++)if(a.referencesVariables()){const f=this.workspace.getVariableById(a.getValue());f&&e.push(f)}return e}updateVarName(e){for(let t=0,n;n=this.inputList[t];t++)for(let o=0,a;a=n.fieldRow[o];o++)a.referencesVariables()&&e.getId()===a.getValue()&&a.refreshVariableName()}renameVarById(e,t){for(let n=0,o;o=this.inputList[n];n++)for(let a=0,f;f=o.fieldRow[a];a++)f.referencesVariables()&&e===f.getValue()&&f.setValue(t)}getFieldValue(e){return(e=this.getField(e))?e.getValue():null}setFieldValue(e,t){const n=this.getField(t);if(!n)throw Error('Field "'+t+'" not found.');n.setValue(e)}setPreviousStatement(e,t){if(e)t===void 0&&(t=null),this.previousConnection||(this.previousConnection=this.makeConnection_(Ie.PREVIOUS_STATEMENT)),this.previousConnection.setCheck(t);else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}}setNextStatement(e,t){if(e)t===void 0&&(t=null),this.nextConnection||(this.nextConnection=this.makeConnection_(Ie.NEXT_STATEMENT)),this.nextConnection.setCheck(t);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}}setOutput(e,t){if(e)t===void 0&&(t=null),this.outputConnection||(this.outputConnection=this.makeConnection_(Ie.OUTPUT_VALUE)),this.outputConnection.setCheck(t);else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}}setInputsInline(e){this.inputsInline!==e&&(ce(new(X(z.BLOCK_CHANGE))(this,"inline",null,this.inputsInline,e)),this.inputsInline=e)}getInputsInline(){if(this.inputsInline!==void 0)return this.inputsInline;for(var e=1;e<this.inputList.length;e++)if(this.inputList[e-1]instanceof Wi&&this.inputList[e]instanceof Wi)return!1;for(e=1;e<this.inputList.length;e++)if(this.inputList[e-1]instanceof i.ValueInput$$module$build$src$core$inputs$value_input&&this.inputList[e]instanceof Wi)return!0;for(e=0;e<this.inputList.length;e++)if(this.inputList[e]instanceof Qo)return!0;return!1}setOutputShape(e){this.outputShape_=e}getOutputShape(){return this.outputShape_}isEnabled(){return this.disabledReasons.size===0}get disabled(){return R("disabled","v11","v12","the isEnabled or hasDisabledReason methods of Block"),this.hasDisabledReason(kn)}set disabled(e){R("disabled","v11","v12","the setDisabledReason method of Block"),this.setDisabledReason(e,kn)}setEnabled(e){R("setEnabled","v11","v12","the setDisabledReason method of Block"),this.setDisabledReason(!e,kn)}setDisabledReason(e,t){e||this.workspace.options.disable||!this.hasDisabledReason(kn)||t==kn||this.setDisabledReason(!1,kn),this.disabledReasons.has(t)!==e&&(e?this.disabledReasons.add(t):this.disabledReasons.delete(t),e=new(X(z.BLOCK_CHANGE))(this,"disabled",null,!e,e),e.setDisabledReason(t),ce(e))}getInheritedDisabled(){let e=this.getSurroundParent();for(;e;){if(!e.isEnabled())return!0;e=e.getSurroundParent()}return!1}hasDisabledReason(e){return this.disabledReasons.has(e)}getDisabledReasons(){return this.disabledReasons}isCollapsed(){return this.collapsed_}setCollapsed(e){this.collapsed_!==e&&(ce(new(X(z.BLOCK_CHANGE))(this,"collapsed",null,this.collapsed_,e)),this.collapsed_=e)}toString(e,t){t=this.toTokens(t);for(let o=2;o<t.length;o++)t[o-2]==="("&&t[o]===")"&&(t[o-2]=t[o-1],t.splice(o-1,2));let n="";return t=t.reduce((o,a)=>(o=o+(n==="("||a===")"?"":" ")+a,n=a[a.length-1],o),""),t=t.trim()||"???",e&&t.length>e&&(t=t.substring(0,e-3)+"..."),t}toTokens(e="?"){const t=[];for(const o of this.inputList)if(o.name!=mr){for(const a of o.fieldRow)t.push(a.getText());if(o.connection){const a=o.connection.targetBlock();if(a){var n=o.connection;let f=n.getCheck();!f&&n.targetConnection&&(f=n.targetConnection.getCheck()),(n=!!f&&(f.includes("Boolean")||f.includes("Number")))&&t.push("("),t.push(...a.toTokens(e)),n&&t.push(")")}else t.push(e)}}return t}appendValueInput(e){return this.appendInput(new i.ValueInput$$module$build$src$core$inputs$value_input(e,this))}appendStatementInput(e){return this.statementInputCount++,this.appendInput(new os(e,this))}appendDummyInput(e=""){return this.appendInput(new Wi(e,this))}appendEndRowInput(e=""){return this.appendInput(new Qo(e,this))}appendInput(e){return this.inputList.push(e),e}appendInputFromRegistry(e,t){return(e=S(ne.INPUT,e,!1))?this.appendInput(new e(t,this)):null}jsonInit(e){var t=e.type?'Block "'+e.type+'": ':"";if(e.output&&e.previousStatement)throw Error(t+"Must not have both an output and a previousStatement.");for(var n=0;e["args"+n];){if(e["message"+n]===void 0)throw Error(t+`args${n} must have a corresponding message (message${n}).`);n++}if(e.style&&e.style.hat&&(this.hat=e.style.hat,e.style=null),e.style&&e.colour)throw Error(t+"Must not have both a colour and a style.");for(e.style?this.jsonInitStyle(e,t):this.jsonInitColour(e,t),n=0;e["message"+n]!==void 0;)this.interpolate(e["message"+n],e["args"+n]||[],e["implicitAlign"+n]||e["lastDummyAlign"+n],t),n++;if(e.inputsInline!==void 0&&(i.disable$$module$build$src$core$events$utils(),this.setInputsInline(e.inputsInline),i.enable$$module$build$src$core$events$utils()),e.output!==void 0&&this.setOutput(!0,e.output),e.outputShape!==void 0&&this.setOutputShape(e.outputShape),e.previousStatement!==void 0&&this.setPreviousStatement(!0,e.previousStatement),e.nextStatement!==void 0&&this.setNextStatement(!0,e.nextStatement),e.tooltip!==void 0&&(n=Ut(e.tooltip),this.setTooltip(n)),e.enableContextMenu!==void 0&&(this.contextMenu=!!e.enableContextMenu),e.suppressPrefixSuffix!==void 0&&(this.suppressPrefixSuffix=!!e.suppressPrefixSuffix),e.helpUrl!==void 0&&(n=Ut(e.helpUrl),this.setHelpUrl(n)),typeof e.extensions=="string"&&(console.warn(t+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+e.type+"' block."),e.extensions=[e.extensions]),e.mutator!==void 0&&$t(e.mutator,this,!0),e=e.extensions,Array.isArray(e))for(t=0;t<e.length;t++)$t(e[t],this,!1)}jsonInitColour(e,t){if("colour"in e)if(e.colour===void 0)console.warn(t+"Undefined colour value.");else{e=e.colour;try{this.setColour(e)}catch{console.warn(t+"Illegal colour value: ",e)}}}jsonInitStyle(e,t){e=e.style;try{this.setStyle(e)}catch{console.warn(t+"Style does not exist: ",e)}}mixin(e,t){if(t!==void 0&&typeof t!="boolean")throw Error("opt_disableCheck must be a boolean if provided");if(!t){t=[];for(const n in e)this[n]!==void 0&&t.push(n);if(t.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(t))}Object.assign(this,e)}interpolate(e,t,n,o){e=Vc(e),this.validateTokens(e,t.length),t=this.interpolateArguments(e,t,n),n=[];for(let a=0,f;f=t[a];a++)if(this.isInputKeyword(f.type)){if(e=this.inputFromJson(f,o)){for(let E=0,w;w=n[E];E++)e.appendField(w[0],w[1]);n.length=0}}else(e=this.fieldFromJson(f))&&n.push([e,f.name])}validateTokens(e,t){const n=[];let o=0;for(let a=0;a<e.length;a++){const f=e[a];if(typeof f=="number"){if(1>f||f>t)throw Error('Block "'+this.type+'": Message index %'+f+" out of range.");if(n[f])throw Error('Block "'+this.type+'": Message index %'+f+" duplicated.");n[f]=!0,o++}}if(o!==t)throw Error('Block "'+this.type+'": Message does not reference all '+t+" arg(s).")}interpolateArguments(e,t,n){const o=[];for(let f=0;f<e.length;f++){var a=e[f];if(typeof a=="number"&&(a=t[a-1]),typeof a=="string"){if(a===`
`)a={type:"input_end_row"},n&&(a.align=n);else if(a=this.stringToFieldJson(a),!a)continue}o.push(a)}return(e=o.length)&&!this.isInputKeyword(o[e-1].type)&&(e={type:"input_dummy"},n&&(e.align=n),o.push(e)),o}fieldFromJson(e){const t=i.fromJson$$module$build$src$core$field_registry(e);return!t&&e.alt?typeof e.alt=="string"?(e=this.stringToFieldJson(e.alt))?this.fieldFromJson(e):null:this.fieldFromJson(e.alt):t}inputFromJson(e,t){var n={LEFT:i.Align$$module$build$src$core$inputs$align.LEFT,RIGHT:i.Align$$module$build$src$core$inputs$align.RIGHT,CENTRE:i.Align$$module$build$src$core$inputs$align.CENTRE,CENTER:i.Align$$module$build$src$core$inputs$align.CENTRE};let o;switch(e.type){case"input_value":o=this.appendValueInput(e.name);break;case"input_statement":o=this.appendStatementInput(e.name);break;case"input_dummy":o=this.appendDummyInput(e.name);break;case"input_end_row":o=this.appendEndRowInput(e.name);break;default:o=this.appendInputFromRegistry(e.type,e.name)}return o?(e.check&&o.setCheck(e.check),e.align&&(n=n[e.align.toUpperCase()],n===void 0?console.warn(t+"Illegal align value: ",e.align):o.setAlign(n)),o):null}isInputKeyword(e){return e==="input_value"||e==="input_statement"||e==="input_dummy"||e==="input_end_row"||y(ne.INPUT,e)}stringToFieldJson(e){return(e=e.trim())?{type:"field_label",text:e}:null}moveInputBefore(e,t){if(e!==t){var n=-1,o=t?-1:this.inputList.length;for(let a=0,f;f=this.inputList[a];a++)if(f.name===e){if(n=a,o!==-1)break}else if(t&&f.name===t&&(o=a,n!==-1))break;if(n===-1)throw Error('Named input "'+e+'" not found.');if(o===-1)throw Error('Reference input "'+t+'" not found.');this.moveNumberedInputBefore(n,o)}}moveNumberedInputBefore(e,t){if(e===t)throw Error("Can't move input to itself.");if(e>=this.inputList.length)throw RangeError("Input index "+e+" out of bounds.");if(t>this.inputList.length)throw RangeError("Reference input "+t+" out of bounds.");const n=this.inputList[e];this.inputList.splice(e,1),e<t&&t--,this.inputList.splice(t,0,n)}removeInput(e,t){for(let n=0,o;o=this.inputList[n];n++)if(o.name===e)return o instanceof os&&this.statementInputCount--,o.dispose(),this.inputList.splice(n,1),!0;if(t)return!1;throw Error("Input not found: "+e)}getInput(e){for(let t=0,n;n=this.inputList[t];t++)if(n.name===e)return n;return null}getInputTargetBlock(e){return(e=this.getInput(e))&&e.connection&&e.connection.targetBlock()}getCommentText(){let e,t;return(t=(e=this.getIcon(rn.COMMENT))==null?void 0:e.getText())!=null?t:null}setCommentText(e){var t;let n;const o=(n=(t=this.getIcon(rn.COMMENT))==null?void 0:t.getText())!=null?n:null;if(o!==e){if(e!==null){if(t=this.getIcon(rn.COMMENT),!t){if(t=S(ne.ICON,rn.COMMENT.toString(),!1),!t)throw Error("No comment icon class is registered, so a comment cannot be set");if(t=new t(this),!Lu(t))throw Error("The class registered as a comment icon does not conform to the ICommentIcon interface");t=this.addIcon(t)}i.disable$$module$build$src$core$events$utils(),t.setText(e),i.enable$$module$build$src$core$events$utils()}else this.removeIcon(rn.COMMENT);ce(new(X(z.BLOCK_CHANGE))(this,"comment",null,o,e))}}setWarningText(e,t){}setMutator(e){}addIcon(e){if(this.hasIcon(e.getType()))throw new Sm(e);return this.icons.push(e),this.icons.sort((t,n)=>t.getWeight()-n.getWeight()),e}removeIcon(e){if(!this.hasIcon(e))return!1;let t;return(t=this.getIcon(e))==null||t.dispose(),this.icons=this.icons.filter(n=>!n.getType().equals(e)),!0}hasIcon(e){return this.icons.some(t=>t.getType().equals(e))}getIcon(e){return e instanceof rn?this.icons.find(t=>t.getType().equals(e)):this.icons.find(t=>t.getType().toString()===e)}getIcons(){return[...this.icons]}getRelativeToSurfaceXY(){return this.xy}moveBy(e,t,n){if(this.parentBlock_)throw Error("Block has parent");const o=new(X(z.BLOCK_MOVE))(this);n&&o.setReason(n),this.xy.translate(e,t),o.recordNew(),ce(o)}makeConnection_(e){return new it(this,e)}allInputsFilled(e){if(e===void 0&&(e=!0),!e&&this.isShadow())return!1;for(let n=0,o;o=this.inputList[n];n++)if(o.connection){var t=o.connection.targetBlock();if(!t||!t.allInputsFilled(e))return!1}return(t=this.getNextBlock())?t.allInputsFilled(e):!0}toDevString(){let e=this.type?'"'+this.type+'" block':"Block";return this.id&&(e+=' (id="'+this.id+'")'),e}};jl.COLLAPSED_INPUT_NAME=mr,jl.COLLAPSED_FIELD_NAME=Bo;var Ms=class{constructor(e,t,n,o){this.workspace=e,this.targetWorkspace=t,this.isFlyoutLabel=o,this.onMouseUpWrapper=null,this.height=this.width=0,this.cursorSvg=this.svgText=this.svgGroup=null,this.text=n.text,this.position=new ae(0,0),this.callbackKey=n.callbackKey||n.callbackkey,this.cssClass=n["web-class"]||null,this.info=n}createDom(){var e=this.isFlyoutLabel?"blocklyFlyoutLabel":"blocklyFlyoutButton";this.cssClass&&(e+=" "+this.cssClass),this.svgGroup=J(P.G,{class:e},this.workspace.getCanvas());let t;this.isFlyoutLabel||(t=J(P.RECT,{class:"blocklyFlyoutButtonShadow",rx:Ms.BORDER_RADIUS,ry:Ms.BORDER_RADIUS,x:1,y:1},this.svgGroup)),e=J(P.RECT,{class:this.isFlyoutLabel?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:Ms.BORDER_RADIUS,ry:Ms.BORDER_RADIUS},this.svgGroup);const n=J(P.TEXT,{class:this.isFlyoutLabel?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup);var o=Ut(this.text);this.workspace.RTL&&(o+="‏"),n.textContent=o,this.isFlyoutLabel&&(this.svgText=n,this.workspace.getThemeManager().subscribe(this.svgText,"flyoutForegroundColour","fill"));const a=An(n,"fontSize"),f=An(n,"fontWeight"),E=An(n,"fontFamily");if(this.width=Hr(n,a,f,E),o=eo(o,a,f,E),this.height=o.height,!this.isFlyoutLabel){this.width+=2*Ms.TEXT_MARGIN_X,this.height+=2*Ms.TEXT_MARGIN_Y;let w;(w=t)==null||w.setAttribute("width",String(this.width));let q;(q=t)==null||q.setAttribute("height",String(this.height))}return e.setAttribute("width",String(this.width)),e.setAttribute("height",String(this.height)),n.setAttribute("x",String(this.width/2)),n.setAttribute("y",String(this.height/2-o.height/2+o.baseline)),this.updateTransform(),this.onMouseUpWrapper=Le(this.svgGroup,"pointerup",this,this.onMouseUp),this.svgGroup}show(){this.updateTransform(),this.svgGroup.setAttribute("display","block")}updateTransform(){this.svgGroup.setAttribute("transform","translate("+this.position.x+","+this.position.y+")")}moveTo(e,t){this.position.x=e,this.position.y=t,this.updateTransform()}isLabel(){return this.isFlyoutLabel}getPosition(){return this.position}getButtonText(){return this.text}getTargetWorkspace(){return this.targetWorkspace}getWorkspace(){return this.workspace}dispose(){this.onMouseUpWrapper&&et(this.onMouseUpWrapper),this.svgGroup&&x(this.svgGroup),this.svgText&&this.workspace.getThemeManager().unsubscribe(this.svgText)}setCursorSvg(e){e?this.svgGroup&&(this.svgGroup.appendChild(e),this.cursorSvg=e):this.cursorSvg=null}setMarkerSvg(){throw Error("Attempted to set a marker on a button.")}onMouseUp(e){(e=this.targetWorkspace.getGesture(e))&&e.cancel(),this.isFlyoutLabel&&this.callbackKey?console.warn("Labels should not have callbacks. Label text: "+this.text):this.isFlyoutLabel||this.callbackKey&&this.targetWorkspace.getButtonCallback(this.callbackKey)?this.isFlyoutLabel||(e=this.targetWorkspace.getButtonCallback(this.callbackKey))&&e(this):console.warn("Buttons should have callbacks. Button text: "+this.text)}};Ms.TEXT_MARGIN_X=5,Ms.TEXT_MARGIN_Y=2,Ms.BORDER_RADIUS=4,Rn(`
.blocklyFlyoutButton {
  fill: #888;
  cursor: default;
}

.blocklyFlyoutButtonShadow {
  fill: #666;
}

.blocklyFlyoutButton:hover {
  fill: #aaa;
}

.blocklyFlyoutLabel {
  cursor: default;
}

.blocklyFlyoutLabelBackground {
  opacity: 0;
}
`);var Z=class{constructor(e,t,n){if(this.wsCoordinate=null,!t)throw Error("Cannot create a node without a location.");this.type=e,this.isConnectionLocation=Z.isConnectionType(e),this.location=t,this.processParams(n||null)}processParams(e){e&&e.wsCoordinate&&(this.wsCoordinate=e.wsCoordinate)}getLocation(){return this.location}getType(){return this.type}getWsCoordinate(){return this.wsCoordinate}isConnection(){return this.isConnectionLocation}findNextForInput(){var e=this.location.getParentInput();const t=e.getSourceBlock();for(e=t.inputList.indexOf(e),e+=1;e<t.inputList.length;e++){const n=t.inputList[e],o=n.fieldRow;for(let a=0;a<o.length;a++){const f=o[a];if(f.isClickable()||Z.NAVIGATE_ALL_FIELDS)return Z.createFieldNode(f)}if(n.connection)return Z.createInputNode(n)}return null}findNextForField(){var e=this.location,t=e.getParentInput();const n=e.getSourceBlock();if(!n)throw Error("The current AST location is not associated with a block");var o=n.inputList.indexOf(t);for(e=t.fieldRow.indexOf(e)+1;o<n.inputList.length;o++){t=n.inputList[o];const a=t.fieldRow;for(;e<a.length;){if(a[e].isClickable()||Z.NAVIGATE_ALL_FIELDS)return Z.createFieldNode(a[e]);e++}if(e=0,t.connection)return Z.createInputNode(t)}return null}findPrevForInput(){const e=this.location.getParentInput(),t=e.getSourceBlock();for(var n=t.inputList.indexOf(e);0<=n;n--){var o=t.inputList[n];if(o.connection&&o!==e)return Z.createInputNode(o);o=o.fieldRow;for(let a=o.length-1;0<=a;a--){const f=o[a];if(f.isClickable()||Z.NAVIGATE_ALL_FIELDS)return Z.createFieldNode(f)}}return null}findPrevForField(){var e=this.location;const t=e.getParentInput(),n=e.getSourceBlock();if(!n)throw Error("The current AST location is not associated with a block");var o=n.inputList.indexOf(t);for(e=t.fieldRow.indexOf(e)-1;0<=o;o--){var a=n.inputList[o];if(a.connection&&a!==t)return Z.createInputNode(a);for(a=a.fieldRow;-1<e;){if(a[e].isClickable()||Z.NAVIGATE_ALL_FIELDS)return Z.createFieldNode(a[e]);e--}0<=o-1&&(e=n.inputList[o-1].fieldRow.length-1)}return null}navigateBetweenStacks(e){var t=this.getLocation();if(t.getSourceBlock){var n=t.getSourceBlock();n&&(t=n)}if(!t||t.isDeadOrDying())return null;if(t.workspace.isFlyout)return this.navigateFlyoutContents(e);n=t.getRootBlock(),t=n.workspace.getTopBlocks(!0);for(let o=0;o<t.length;o++)if(n.id===t[o].id)return e=o+(e?1:-1),e===-1||e===t.length?null:Z.createStackNode(t[e]);throw Error("Couldn't find "+(e?"next":"previous")+" stack?!")}navigateFlyoutContents(e){let t;switch(this.getType()){case Z.types.STACK:t=this.getLocation();var n=t.workspace.targetWorkspace;break;case Z.types.BUTTON:t=this.getLocation(),n=t.getTargetWorkspace();break;default:return null}return n=n.getFlyout(),n&&(e=this.findNextLocationInFlyout(n.getContents(),t,e))?e.type==="button"&&e.button?Z.createButtonNode(e.button):e.type==="block"&&e.block?Z.createStackNode(e.block):null:null}findNextLocationInFlyout(e,t,n){const o=e.findIndex(a=>t instanceof jl&&a.block===t||t instanceof Ms&&a.button===t);return 0>o?null:(n=n?o+1:o-1,n===-1||n===e.length?null:e[n])}findTopASTNodeForBlock(e){const t=Sl(e);return t?Z.createConnectionNode(t):Z.createBlockNode(e)}getOutAstNodeForBlock(e){if(!e)return null;e=e.getTopStackBlock();const t=Sl(e);return t&&t.targetConnection&&t.targetConnection.getParentInput()?Z.createInputNode(t.targetConnection.getParentInput()):Z.createStackNode(e)}findFirstFieldOrInput(e){e=e.inputList;for(let t=0;t<e.length;t++){const n=e[t],o=n.fieldRow;for(let a=0;a<o.length;a++){const f=o[a];if(f.isClickable()||Z.NAVIGATE_ALL_FIELDS)return Z.createFieldNode(f)}if(n.connection)return Z.createInputNode(n)}return null}getSourceBlock(){return this.getType()===Z.types.BLOCK?this.getLocation():this.getType()===Z.types.STACK?this.getLocation():this.getType()===Z.types.WORKSPACE||this.getType()===Z.types.BUTTON?null:this.getLocation().getSourceBlock()}next(){switch(this.type){case Z.types.STACK:return this.navigateBetweenStacks(!0);case Z.types.OUTPUT:return Z.createBlockNode(this.location.getSourceBlock());case Z.types.FIELD:return this.findNextForField();case Z.types.INPUT:return this.findNextForInput();case Z.types.BLOCK:const e=this.location.nextConnection;if(!e)break;return Z.createConnectionNode(e);case Z.types.PREVIOUS:return Z.createBlockNode(this.location.getSourceBlock());case Z.types.NEXT:return Z.createConnectionNode(this.location.targetConnection);case Z.types.BUTTON:return this.navigateFlyoutContents(!0)}return null}in(){switch(this.type){case Z.types.WORKSPACE:const e=this.location.getTopBlocks(!0);if(0<e.length)return Z.createStackNode(e[0]);break;case Z.types.STACK:return this.findTopASTNodeForBlock(this.location);case Z.types.BLOCK:return this.findFirstFieldOrInput(this.location);case Z.types.INPUT:return Z.createConnectionNode(this.location.targetConnection)}return null}prev(){switch(this.type){case Z.types.STACK:return this.navigateBetweenStacks(!1);case Z.types.FIELD:return this.findPrevForField();case Z.types.INPUT:return this.findPrevForInput();case Z.types.BLOCK:var e=Sl(this.location);if(!e)break;return Z.createConnectionNode(e);case Z.types.PREVIOUS:if((e=this.location.targetConnection)&&!e.getParentInput())return Z.createConnectionNode(e);break;case Z.types.NEXT:return Z.createBlockNode(this.location.getSourceBlock());case Z.types.BUTTON:return this.navigateFlyoutContents(!1)}return null}out(){switch(this.type){case Z.types.STACK:var e=this.location,t=e.getRelativeToSurfaceXY();return t=new ae(t.x,t.y+Z.DEFAULT_OFFSET_Y),Z.createWorkspaceNode(e.workspace,t);case Z.types.OUTPUT:return e=this.location,(t=e.targetConnection)?Z.createConnectionNode(t):Z.createStackNode(e.getSourceBlock());case Z.types.FIELD:if(e=this.location.getSourceBlock(),!e)throw Error("The current AST location is not associated with a block");return Z.createBlockNode(e);case Z.types.INPUT:return Z.createBlockNode(this.location.getSourceBlock());case Z.types.BLOCK:return this.getOutAstNodeForBlock(this.location);case Z.types.PREVIOUS:return this.getOutAstNodeForBlock(this.location.getSourceBlock());case Z.types.NEXT:return this.getOutAstNodeForBlock(this.location.getSourceBlock())}return null}static isConnectionType(e){switch(e){case Z.types.PREVIOUS:case Z.types.NEXT:case Z.types.INPUT:case Z.types.OUTPUT:return!0}return!1}static createFieldNode(e){return e?new Z(Z.types.FIELD,e):null}static createConnectionNode(e){if(!e)return null;const t=e.type;return t===Ie.INPUT_VALUE||t===Ie.NEXT_STATEMENT&&e.getParentInput()?Z.createInputNode(e.getParentInput()):t===Ie.NEXT_STATEMENT?new Z(Z.types.NEXT,e):t===Ie.OUTPUT_VALUE?new Z(Z.types.OUTPUT,e):t===Ie.PREVIOUS_STATEMENT?new Z(Z.types.PREVIOUS,e):null}static createInputNode(e){return e&&e.connection?new Z(Z.types.INPUT,e.connection):null}static createBlockNode(e){return e?new Z(Z.types.BLOCK,e):null}static createStackNode(e){return e?new Z(Z.types.STACK,e):null}static createButtonNode(e){return e?new Z(Z.types.BUTTON,e):null}static createWorkspaceNode(e,t){return t&&e?new Z(Z.types.WORKSPACE,e,{wsCoordinate:t}):null}static createTopNode(e){const t=Sl(e);return t?Z.createConnectionNode(t):Z.createBlockNode(e)}};Z.NAVIGATE_ALL_FIELDS=!1,Z.DEFAULT_OFFSET_Y=-20,function(e){e=e.types||(e.types={}),e.FIELD="field",e.BLOCK="block",e.INPUT="input",e.OUTPUT="output",e.NEXT="next",e.PREVIOUS="previous",e.STACK="stack",e.WORKSPACE="workspace",e.BUTTON="button"}(Z);var Af=class extends Rr{constructor(e,t,n,o){let a=e?e.workspace.id:void 0;o&&o.getType()===Z.types.WORKSPACE&&(a=o.getLocation().id),super(a),this.type=z.MARKER_MOVE,this.blockId=e==null?void 0:e.id,this.oldNode=n||void 0,this.newNode=o,this.isCursor=t}toJson(){const e=super.toJson();if(this.isCursor===void 0)throw Error("Whether this is a cursor event or not is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newNode)throw Error("The new node is undefined. Either pass a node to the constructor, or call fromJson");return e.isCursor=this.isCursor,e.blockId=this.blockId,e.oldNode=this.oldNode,e.newNode=this.newNode,e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new Af),t.isCursor=e.isCursor,t.blockId=e.blockId,t.oldNode=e.oldNode,t.newNode=e.newNode,t}};d(ne.EVENT,z.MARKER_MOVE,Af);var Tb="blocklyCursor",Eb="blocklyMarker",bb=.75,Df=class{constructor(e,t,n){this.workspace=e,this.marker=n,this.markerSvgRect_=this.markerSvgLine_=this.markerInput_=this.markerBlock_=this.svgGroup_=this.markerSvg_=this.currentMarkerSvg=this.parent=null,this.constants_=t,e=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=n.colour||e}getSvgRoot(){return this.svgGroup_}getMarker(){return this.marker}isCursor(){return this.marker.type==="cursor"}createDom(){const e=this.isCursor()?Tb:Eb;return this.svgGroup_=J(P.G,{class:e}),this.createDomInternal_(),this.svgGroup_}setParent_(e){this.isCursor()?(this.parent&&this.parent.setCursorSvg(null),e.setCursorSvg(this.getSvgRoot())):(this.parent&&this.parent.setMarkerSvg(null),e.setMarkerSvg(this.getSvgRoot())),this.parent=e}draw(e,t){if(t){this.constants_=this.workspace.getRenderer().getConstants();var n=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker.colour||n,this.applyColour_(t),this.showAtLocation_(t),this.fireMarkerEvent(e,t),e=this.currentMarkerSvg.childNodes[0],e!==void 0&&e.beginElement&&e.beginElement()}else this.hide()}showAtLocation_(e){const t=e.getLocation().type;e.getType()===Z.types.BLOCK?this.showWithBlock_(e):e.getType()===Z.types.OUTPUT?this.showWithOutput_(e):t===Ie.INPUT_VALUE?this.showWithInput_(e):t===Ie.NEXT_STATEMENT?this.showWithNext_(e):e.getType()===Z.types.PREVIOUS?this.showWithPrevious_(e):e.getType()===Z.types.FIELD?this.showWithField_(e):e.getType()===Z.types.WORKSPACE?this.showWithCoordinates_(e):e.getType()===Z.types.STACK?this.showWithStack_(e):e.getType()===Z.types.BUTTON&&this.showWithButton_(e)}showWithBlockPrevOutput(e){e=e.getSourceBlock();const t=e.width;var n=e.height,o=n*bb;const a=this.constants_.CURSOR_BLOCK_PADDING;e.previousConnection?(n=this.constants_.shapeFor(e.previousConnection),this.positionPrevious_(t,a,o,n)):e.outputConnection?(o=this.constants_.shapeFor(e.outputConnection),this.positionOutput_(t,n,o)):this.positionBlock_(t,a,o),this.setParent_(e),this.showCurrent_()}showWithBlock_(e){this.showWithBlockPrevOutput(e)}showWithPrevious_(e){this.showWithBlockPrevOutput(e)}showWithOutput_(e){this.showWithBlockPrevOutput(e)}showWithCoordinates_(e){var t=e.getWsCoordinate();e=t.x,t=t.y,this.workspace.RTL&&(e-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(e,t,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace),this.showCurrent_()}showWithField_(e){e=e.getLocation();const t=e.getSize().width,n=e.getSize().height;this.positionRect_(0,0,t,n),this.setParent_(e),this.showCurrent_()}showWithInput_(e){e=e.getLocation();const t=e.getSourceBlock();this.positionInput_(e),this.setParent_(t),this.showCurrent_()}showWithNext_(e){var t=e.getLocation();e=t.getSourceBlock();let n=0;t=t.getOffsetInBlock().y;const o=e.getHeightWidth().width;this.workspace.RTL&&(n=-o),this.positionLine_(n,t,o),this.setParent_(e),this.showCurrent_()}showWithStack_(e){e=e.getLocation();var t=e.getHeightWidth();const n=t.width+this.constants_.CURSOR_STACK_PADDING;t=t.height+this.constants_.CURSOR_STACK_PADDING;const o=-this.constants_.CURSOR_STACK_PADDING/2,a=-this.constants_.CURSOR_STACK_PADDING/2;let f=o;this.workspace.RTL&&(f=-(n+o)),this.positionRect_(f,a,n,t),this.setParent_(e),this.showCurrent_()}showWithButton_(e){e=e.getLocation();const t=e.width+this.constants_.CURSOR_STACK_PADDING,n=e.height+this.constants_.CURSOR_STACK_PADDING,o=-this.constants_.CURSOR_STACK_PADDING/2,a=-this.constants_.CURSOR_STACK_PADDING/2;let f=o;this.workspace.RTL&&(f=-(t+o)),this.positionRect_(f,a,t,n),this.setParent_(e),this.showCurrent_()}showCurrent_(){this.hide(),this.currentMarkerSvg&&(this.currentMarkerSvg.style.display="")}positionBlock_(e,t,n){if(e=mt(-t,n)+_e("V",-t)+_e("H",e+2*t)+_e("V",n),!this.markerBlock_)throw Error("createDom should be called before positioning the marker");this.markerBlock_.setAttribute("d",e),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionInput_(e){const t=e.getOffsetInBlock().x,n=e.getOffsetInBlock().y;e=Xt(0,0)+this.constants_.shapeFor(e).pathDown,this.markerInput_.setAttribute("d",e),this.markerInput_.setAttribute("transform","translate("+t+","+n+")"+(this.workspace.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_}positionLine_(e,t,n){if(!this.markerSvgLine_)throw Error("createDom should be called before positioning the line");this.markerSvgLine_.setAttribute("x",`${e}`),this.markerSvgLine_.setAttribute("y",`${t}`),this.markerSvgLine_.setAttribute("width",`${n}`),this.currentMarkerSvg=this.markerSvgLine_}positionOutput_(e,t,n){if(!this.markerBlock_)throw Error("createDom should be called before positioning the output");e=mt(e,0)+_e("h",-(e-n.width))+_e("v",this.constants_.TAB_OFFSET_FROM_TOP)+n.pathDown+_e("V",t)+_e("H",e),this.markerBlock_.setAttribute("d",e),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionPrevious_(e,t,n,o){if(!this.markerBlock_)throw Error("createDom should be called before positioning the previous connection marker");e=mt(-t,n)+_e("V",-t)+_e("H",this.constants_.NOTCH_OFFSET_LEFT)+o.pathLeft+_e("H",e+2*t)+_e("V",n),this.markerBlock_.setAttribute("d",e),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionRect_(e,t,n,o){if(!this.markerSvgRect_)throw Error("createDom should be called before positioning the rect");this.markerSvgRect_.setAttribute("x",`${e}`),this.markerSvgRect_.setAttribute("y",`${t}`),this.markerSvgRect_.setAttribute("width",`${n}`),this.markerSvgRect_.setAttribute("height",`${o}`),this.currentMarkerSvg=this.markerSvgRect_}flipRtl(e){e.setAttribute("transform","scale(-1 1)")}hide(){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before hiding the marker");this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"}fireMarkerEvent(e,t){const n=t.getSourceBlock();e=new(X(z.MARKER_MOVE))(n,this.isCursor(),e,t),ce(e)}getBlinkProperties_(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}}createDomInternal_(){if(this.markerSvg_=J(P.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=J(P.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.markerSvg_),this.markerSvgRect_=J(P.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10},this.markerSvg_),this.markerInput_=J(P.PATH,{transform:""},this.markerSvg_),this.markerBlock_=J(P.PATH,{transform:"",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.hide(),this.isCursor()){const e=this.getBlinkProperties_();J(P.ANIMATE,e,this.markerSvgLine_),J(P.ANIMATE,e,this.markerInput_),J(P.ANIMATE,Object.assign({},e,{attributeName:"stroke"}),this.markerBlock_)}return this.markerSvg_}applyColour_(e){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before applying color to the markerj");this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(e=this.colour_+";transparent;transparent;",this.markerSvgLine_.firstElementChild.setAttribute("values",e),this.markerInput_.firstElementChild.setAttribute("values",e),this.markerBlock_.firstElementChild.setAttribute("values",e))}dispose(){this.svgGroup_&&x(this.svgGroup_)}},Eg=class{constructor(e,t,n){this.markerSvg=this.cursorSvg=null,this.connectionHighlights=new WeakMap,this.highlightOffsets=new WeakMap,this.constants=n,this.style=t,this.svgRoot=e,this.svgPath=J(P.PATH,{class:"blocklyPath"},this.svgRoot)}setPath(e){this.svgPath.setAttribute("d",e)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)")}setCursorSvg(e){e?(this.svgRoot.appendChild(e),this.cursorSvg=e):this.cursorSvg=null}setMarkerSvg(e){e?(this.cursorSvg?this.svgRoot.insertBefore(e,this.cursorSvg):this.svgRoot.appendChild(e),this.markerSvg=e):this.markerSvg=null}applyColour(e){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(e.isShadow()),this.updateDisabled_(!e.isEnabled()||e.getInheritedDisabled())}setStyle(e){this.style=e}setClass_(e,t){e&&(t?ke(this.svgRoot,e):v(this.svgRoot,e))}updateHighlighted(e){e?this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"):this.svgPath.setAttribute("filter","none")}updateShadow_(e){e&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))}updateDisabled_(e){this.setClass_("blocklyDisabled",e),e&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")}updateSelected(e){this.setClass_("blocklySelected",e)}updateDraggingDelete(e){this.setClass_("blocklyDraggingDelete",e)}updateInsertionMarker(e){this.setClass_("blocklyInsertionMarker",e)}updateMovable(e){this.setClass_("blocklyDraggable",e)}updateReplacementFade(e){this.setClass_("blocklyReplaceable",e)}updateShapeForInputHighlight(e,t){}addConnectionHighlight(e,t,n,o){if(this.connectionHighlights.has(e)){if(this.currentHighlightMatchesNew(e,t,n))return;this.removeConnectionHighlight(e)}t=J(P.PATH,{class:"blocklyHighlightedConnectionPath",d:t,transform:`translate(${n.x}, ${n.y})`+(o?" scale(-1 1)":"")},this.svgRoot),this.connectionHighlights.set(e,t)}currentHighlightMatchesNew(e,t,n){let o;const a=(o=this.connectionHighlights.get(e))==null?void 0:o.getAttribute("d");return e=this.highlightOffsets.get(e),a===t&&ae.equals(e,n)}removeConnectionHighlight(e){const t=this.connectionHighlights.get(e);t&&(x(t),this.connectionHighlights.delete(e))}},hi=class{constructor(e){this.activeCandidate=this.lastMarker=this.lastOnStack=null,this.wouldDeleteBlock=!1,this.fadedBlock=this.highlightedBlock=this.markerConnection=null,i.setSelected$$module$build$src$core$common(e),this.topBlock=e,this.workspace=e.workspace,this.firstMarker=this.createMarkerBlock(this.topBlock),this.availableConnections=this.initAvailableConnections(),this.lastOnStack&&(this.lastMarker=this.createMarkerBlock(this.lastOnStack.getSourceBlock()))}dispose(){this.availableConnections.length=0,this.disposeInsertionMarker(this.firstMarker),this.disposeInsertionMarker(this.lastMarker)}updateAvailableConnections(){this.availableConnections=this.initAvailableConnections()}wouldConnectBlock(){return!!this.activeCandidate}applyConnections(){if(this.activeCandidate){i.disable$$module$build$src$core$events$utils(),this.hidePreview(),i.enable$$module$build$src$core$events$utils();var{local:e,closest:t}=this.activeCandidate;e.connect(t);var n=e.isSuperior()?t:e,o=this.topBlock.getRootBlock();Bn().then(()=>{Ir(n.getSourceBlock()),setTimeout(()=>{o.bringToFront()},0)})}}update(e,t){const n=this.getCandidate(e);((this.wouldDeleteBlock=this.shouldDelete(!!n,t))||this.shouldUpdatePreviews(n,e))&&(i.disable$$module$build$src$core$events$utils(),this.maybeHidePreview(n),this.maybeShowPreview(n),i.enable$$module$build$src$core$events$utils())}createMarkerBlock(e){i.disable$$module$build$src$core$events$utils();let t;try{const n=yn(e,{addCoordinates:!1,addInputBlocks:!1,addNextBlocks:!1,doFullSerialization:!1});if(!n)throw Error(`Failed to serialize source block. ${e.toDevString()}`);t=gs(n,this.workspace);for(const o of t.getDescendants(!1))o.setInsertionMarker(!0);t.initSvg(),t.getSvgRoot().setAttribute("visibility","hidden")}finally{i.enable$$module$build$src$core$events$utils()}return t}initAvailableConnections(){const e=this.topBlock.getConnections_(!1),t=this.topBlock.lastConnectionInStack(!0);return t&&t!==this.topBlock.nextConnection&&(e.push(t),this.lastOnStack=t),e}shouldUpdatePreviews(e,t){if(!e)return!!this.activeCandidate;if(!this.activeCandidate)return!0;const{local:n,closest:o}=this.activeCandidate;if(o===e.closest&&n===e.local)return!1;const a=n.x+t.x-o.x;return t=n.y+t.y-o.y,e.radius<Math.sqrt(a*a+t*t)-i.config$$module$build$src$core$config.currentConnectionPreference}getCandidate(e){this.markerConnection&&this.markerConnection.isConnected()||this.updateAvailableConnections();let t=this.getStartRadius(),n=null;for(let o=0;o<this.availableConnections.length;o++){const a=this.availableConnections[o],f=a.closest(t,e);f.connection&&(n={closest:f.connection,local:a,radius:f.radius},t=f.radius)}return n}getStartRadius(){return this.activeCandidate?i.config$$module$build$src$core$config.connectingSnapRadius:i.config$$module$build$src$core$config.snapRadius}shouldDelete(e,t){return t&&this.workspace.getComponentManager().hasCapability(t.id,vt.Capability.DELETE_AREA)?t.wouldDelete(this.topBlock):!1}maybeShowPreview(e){if(!this.wouldDeleteBlock&&e){var t=e.closest,n;t===((n=this.activeCandidate)==null?void 0:n.closest)||t.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.activeCandidate=e,this.showPreview(this.activeCandidate))}}showPreview(e){const t=this.workspace.getRenderer();switch(t.getConnectionPreviewMethod(e.closest,e.local,this.topBlock)){case hi.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline(e);break;case hi.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker(e);break;case hi.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade(e)}t.shouldHighlightConnection(e.closest)&&e.closest.highlight()}maybeHidePreview(e){if(!e)this.hidePreview();else if(this.activeCandidate){const t=this.activeCandidate.local!==e.local;(this.activeCandidate.closest!==e.closest||t||this.wouldDeleteBlock)&&this.hidePreview()}this.activeCandidate=this.markerConnection=null}hidePreview(){let e;const t=(e=this.activeCandidate)==null?void 0:e.closest;t&&t.targetBlock()&&this.workspace.getRenderer().shouldHighlightConnection(t)&&t.unhighlight(),this.hideReplacementFade(),this.hideInsertionInputOutline(),this.hideInsertionMarker()}showInsertionMarker(e){const{local:t,closest:n}=e;let o=(e=this.lastOnStack&&t===this.lastOnStack)?this.lastMarker:this.firstMarker;if(!o)throw Error("Cannot show the insertion marker because there is no insertion marker block");let a;try{a=o.getMatchingConnection(t.getSourceBlock(),t)}catch{if(e&&this.lastOnStack?(this.disposeInsertionMarker(this.lastMarker),o=this.lastMarker=this.createMarkerBlock(this.lastOnStack.getSourceBlock())):(this.disposeInsertionMarker(this.firstMarker),o=this.firstMarker=this.createMarkerBlock(this.topBlock)),!o)throw Error("Cannot show the insertion marker because there is no insertion marker block");a=o.getMatchingConnection(t.getSourceBlock(),t)}if(!a)throw Error("Cannot show the insertion marker because there is no associated connection");if(a===this.markerConnection)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");o.queueRender(),Sr(),a.connect(n);const f={x:n.x-a.x,y:n.y-a.y},E=a.getOffsetInBlock().clone(),w=a;Bn().then(()=>{let q;(q=o)==null||q.positionNearConnection(w,f,E);let Se;(Se=o)==null||Se.getSvgRoot().setAttribute("visibility","visible")}),this.markerConnection=a}hideInsertionMarker(){if(this.markerConnection){var e=this.markerConnection,t=e.getSourceBlock(),n=t.outputConnection,o;if((o=t.previousConnection)!=null&&o.targetConnection||n!=null&&n.targetConnection)t.unplug(!0);else{let a;(a=e.targetBlock())==null||a.unplug(!1)}if(e.targetConnection)throw Error("markerConnection still connected at the end of disconnectInsertionMarker");this.markerConnection=null,(e=t.getSvgRoot())&&e.setAttribute("visibility","hidden")}}showInsertionInputOutline(e){e=e.closest,this.highlightedBlock=e.getSourceBlock(),this.highlightedBlock.highlightShapeForInput(e,!0)}hideInsertionInputOutline(){if(this.highlightedBlock){if(!this.activeCandidate)throw Error("Cannot hide the insertion marker outline because there is no active candidate");this.highlightedBlock.highlightShapeForInput(this.activeCandidate.closest,!1),this.highlightedBlock=null}}showReplacementFade(e){if(this.fadedBlock=e.closest.targetBlock(),!this.fadedBlock)throw Error("Cannot show the replacement fade because the closest connection does not have a target block");this.fadedBlock.fadeForReplacement(!0)}hideReplacementFade(){this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null)}getInsertionMarkers(){const e=[];return this.firstMarker&&e.push(this.firstMarker),this.lastMarker&&e.push(this.lastMarker),e}disposeInsertionMarker(e){if(e){i.disable$$module$build$src$core$events$utils();try{e.dispose()}finally{i.enable$$module$build$src$core$events$utils()}}}};(function(e){e=e.PREVIEW_TYPE||(e.PREVIEW_TYPE={}),e[e.INSERTION_MARKER=0]="INSERTION_MARKER",e[e.INPUT_OUTLINE=1]="INPUT_OUTLINE",e[e.REPLACEMENT_FADE=2]="REPLACEMENT_FADE"})(hi),hi.PREVIEW_TYPE;var bg=class{constructor(e){this.overrides=null,this.name=e}getClassName(){return this.name+"-renderer"}init(e,t){this.constants_=this.makeConstants_(),t&&(this.overrides=t,Object.assign(this.constants_,t)),this.constants_.setTheme(e),this.constants_.init()}createDom(e,t){this.constants_.createDom(e,this.name+"-"+t.name,"."+this.getClassName()+"."+t.getClassName())}refreshDom(e,t){const n=this.getConstants();n.dispose(),this.constants_=this.makeConstants_(),this.overrides&&Object.assign(this.constants_,this.overrides),this.constants_.randomIdentifier=n.randomIdentifier,this.constants_.setTheme(t),this.constants_.init(),this.createDom(e,t)}dispose(){this.constants_&&this.constants_.dispose()}makeConstants_(){return new _g}makeRenderInfo_(e){return new np(this,e)}makeDrawer_(e,t){return new Tg(e,t)}makeMarkerDrawer(e,t){return new Df(e,this.getConstants(),t)}makePathObject(e,t){return new Eg(e,t,this.constants_)}getConstants(){return this.constants_}shouldHighlightConnection(e){return!0}orphanCanConnectAtEnd(e,t,n){return!!it.getConnectionForOrphanedConnection(e,n===Ie.OUTPUT_VALUE?t.outputConnection:t.previousConnection)}getConnectionPreviewMethod(e,t,n){return R("getConnectionPreviewMethod","v10","v12","an IConnectionPreviewer, if it fulfills your use case."),t.type===Ie.OUTPUT_VALUE||t.type===Ie.PREVIOUS_STATEMENT?!e.isConnected()||this.orphanCanConnectAtEnd(n,e.targetBlock(),t.type)?hi.PREVIEW_TYPE.INSERTION_MARKER:hi.PREVIEW_TYPE.REPLACEMENT_FADE:hi.PREVIEW_TYPE.INSERTION_MARKER}render(e){const t=this.makeRenderInfo_(e);t.measure(),this.makeDrawer_(e,t).draw()}},at={};at.BottomRow=Cf,at.Connection=qo,at.ConstantProvider=_g,at.Drawer=Tg,at.ExternalValueInput=mg,at.Field=ja,at.Hat=If,at.Icon=wm,at.InRowSpacer=is,at.InlineInput=kf,at.InputConnection=zl,at.InputRow=wf,at.JaggedEdge=Om,at.MarkerSvg=Df,at.Measurable=Vi,at.NextConnection=Rm,at.OutputConnection=Lm,at.PathObject=Eg,at.PreviousConnection=Am,at.RenderInfo=np,at.Renderer=bg,at.RoundCorner=ep,at.Row=Qh,at.SpacerRow=Of,at.SquareCorner=tp,at.StatementInput=Zh,at.TopRow=Rf,at.Types=M,at.init=ph,at.register=vs,at.unregister=ca;var Mm=class{constructor(e,t){this.workspace=e,this.theme=t,this.subscribedWorkspaces=[],this.componentDB=new Map}getTheme(){return this.theme}setTheme(e){var t=this.theme;this.theme=e,(e=this.workspace.getInjectionDiv())&&(t&&(t=t.getClassName())&&v(e,t),(t=this.theme.getClassName())&&ke(e,t));for(let n=0,o;o=this.subscribedWorkspaces[n];n++)o.refreshTheme();for(const[n,o]of this.componentDB)for(const a of o){e=a.element,t=a.propertyName;const f=this.theme&&this.theme.getComponentStyle(n);e.style.setProperty(t,f||"")}for(const n of this.subscribedWorkspaces)n.hideChaff()}subscribeWorkspace(e){this.subscribedWorkspaces.push(e)}unsubscribeWorkspace(e){if(!Bt(this.subscribedWorkspaces,e))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.")}subscribe(e,t,n){this.componentDB.has(t)||this.componentDB.set(t,[]),this.componentDB.get(t).push({element:e,propertyName:n}),t=this.theme&&this.theme.getComponentStyle(t),e.style.setProperty(n,t||"")}unsubscribe(e){if(e)for(const[t,n]of this.componentDB){for(let o=n.length-1;0<=o;o--)n[o].element===e&&n.splice(o,1);n.length||this.componentDB.delete(t)}}dispose(){this.subscribedWorkspaces.length=0,this.componentDB.clear()}},Mf="VARIABLE_DYNAMIC",Ka={CATEGORY_NAME:Mf};Ka.flyoutCategory=Au,Ka.flyoutCategoryBlocks=Li,Ka.onCreateVariableButtonClick_Colour=aa,Ka.onCreateVariableButtonClick_Number=Cl,Ka.onCreateVariableButtonClick_String=yo;var Nm=30,$c=[];$c[Ie.INPUT_VALUE]=Ie.OUTPUT_VALUE,$c[Ie.OUTPUT_VALUE]=Ie.INPUT_VALUE,$c[Ie.NEXT_STATEMENT]=Ie.PREVIOUS_STATEMENT,$c[Ie.PREVIOUS_STATEMENT]=Ie.NEXT_STATEMENT;var Nf="RENAME_VARIABLE_ID",xf="DELETE_VARIABLE_ID",xm=class{canConnect(e,t,n,o){return this.canConnectWithReason(e,t,n,o)===it.CAN_CONNECT}canConnectWithReason(e,t,n,o){const a=this.doSafetyChecks(e,t);return a!==it.CAN_CONNECT?a:this.doTypeChecks(e,t)?n&&!this.doDragChecks(e,t,o||0)?it.REASON_DRAG_CHECKS_FAILED:it.CAN_CONNECT:it.REASON_CHECKS_FAILED}getErrorMessage(e,t,n){switch(e){case it.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case it.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case it.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case it.REASON_TARGET_NULL:return"Target connection is null.";case it.REASON_CHECKS_FAILED:return"Connection checks failed. "+(t+" expected "+t.getCheck()+", found "+n.getCheck());case it.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case it.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";case it.REASON_PREVIOUS_AND_OUTPUT:return"Block would have an output and a previous connection.";default:return"Unknown connection failure: this should never happen!"}}doSafetyChecks(e,t){if(!e||!t)return it.REASON_TARGET_NULL;let n,o,a;return e.isSuperior()?(n=e.getSourceBlock(),o=t.getSourceBlock(),a=t):(o=e.getSourceBlock(),n=t.getSourceBlock(),a=e,e=t),n===o?it.REASON_SELF_CONNECTION:a.type!==$c[e.type]?it.REASON_WRONG_TYPE:n.workspace!==o.workspace?it.REASON_DIFFERENT_WORKSPACES:n.isShadow()&&!o.isShadow()?it.REASON_SHADOW_PARENT:a.type===Ie.OUTPUT_VALUE&&o.previousConnection&&o.previousConnection.isConnected()||a.type===Ie.PREVIOUS_STATEMENT&&o.outputConnection&&o.outputConnection.isConnected()?it.REASON_PREVIOUS_AND_OUTPUT:it.CAN_CONNECT}doTypeChecks(e,t){if(e=e.getCheck(),t=t.getCheck(),!e||!t)return!0;for(let n=0;n<e.length;n++)if(t.includes(e[n]))return!0;return!1}doDragChecks(e,t,n){if(e.distanceFrom(t)>n||t.getSourceBlock().isInsertionMarker())return!1;switch(t.type){case Ie.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(e,t);case Ie.OUTPUT_VALUE:if(t.isConnected()&&!t.targetBlock().isInsertionMarker()||e.isConnected())return!1;break;case Ie.INPUT_VALUE:if(t.isConnected()&&!t.targetBlock().isMovable()&&!t.targetBlock().isShadow())return!1;break;case Ie.NEXT_STATEMENT:if(t.isConnected()&&!e.getSourceBlock().nextConnection&&!t.targetBlock().isShadow()&&t.targetBlock().nextConnection||t.targetBlock()&&!t.targetBlock().isMovable()&&!t.targetBlock().isShadow())return!1;break;default:return!1}return!zn.includes(t)}canConnectToPrevious_(e,t){return e.targetConnection||zn.includes(t)?!1:t.targetConnection?(e=t.targetBlock(),e.isInsertionMarker()?!e.getPreviousBlock():!1):!0}};d(ne.CONNECTION_CHECKER,hr,xm);var Pf=class extends ic{constructor(e){super(e),this.type=z.VAR_DELETE,e&&(this.varType=e.type,this.varName=e.name)}toJson(){const e=super.toJson();if(this.varType===void 0)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return e.varType=this.varType,e.varName=this.varName,e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new Pf),t.varType=e.varType,t.varName=e.varName,t}run(e){const t=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");e?t.deleteVariableById(this.varId):t.createVariable(this.varName,this.varType,this.varId)}};d(ne.EVENT,z.VAR_DELETE,Pf);var Bf=class extends ic{constructor(e,t){super(e),this.type=z.VAR_RENAME,e&&(this.oldName=e.name,this.newName=typeof t>"u"?"":t)}toJson(){const e=super.toJson();if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");return e.oldName=this.oldName,e.newName=this.newName,e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new Bf),t.oldName=e.oldName,t.newName=e.newName,t}run(e){const t=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");e?t.renameVariableById(this.varId,this.newName):t.renameVariableById(this.varId,this.oldName)}};d(ne.EVENT,z.VAR_RENAME,Bf);var Ff=class{constructor(e){this.workspace=e,this.variableMap=new Map}clear(){for(const e of this.variableMap.values())for(;0<e.length;)this.deleteVariable(e[0]);if(this.variableMap.size!==0)throw Error("Non-empty variable map")}renameVariable(e,t){if(e.name!==t){var n=this.getVariable(t,e.type),o=this.workspace.getAllBlocks(!1),a=i.getGroup$$module$build$src$core$events$utils();a||i.setGroup$$module$build$src$core$events$utils(!0);try{n&&n.getId()!==e.getId()?this.renameVariableWithConflict(e,t,n,o):this.renameVariableAndUses(e,t,o)}finally{i.setGroup$$module$build$src$core$events$utils(a)}}}renameVariableById(e,t){const n=this.getVariableById(e);if(!n)throw Error("Tried to rename a variable that didn't exist. ID: "+e);this.renameVariable(n,t)}renameVariableAndUses(e,t,n){for(ce(new(X(z.VAR_RENAME))(e,t)),e.name=t,t=0;t<n.length;t++)n[t].updateVarName(e)}renameVariableWithConflict(e,t,n,o){const a=e.type;for(t!==n.name&&this.renameVariableAndUses(n,t,o),t=0;t<o.length;t++)o[t].renameVarById(e.getId(),n.getId());ce(new(X(z.VAR_DELETE))(e)),Bt(this.variableMap.get(a),e)}createVariable(e,t,n){var o=this.getVariable(e,t);if(o){if(n&&o.getId()!==n)throw Error('Variable "'+e+'" is already in use and its id is "'+o.getId()+'" which conflicts with the passed in id, "'+n+'".');return o}if(n&&this.getVariableById(n))throw Error('Variable id, "'+n+'", is already in use.');return o=n||B(),t=t||"",o=new Fl(this.workspace,e,t,o),e=this.variableMap.get(t)||[],e.push(o),this.variableMap.delete(t),this.variableMap.set(t,e),ce(new(X(z.VAR_CREATE))(o)),o}deleteVariable(e){const t=e.getId(),n=this.variableMap.get(e.type);if(n){for(let o=0;o<n.length;o++)if(n[o].getId()===t){n.splice(o,1),ce(new(X(z.VAR_DELETE))(e)),n.length===0&&this.variableMap.delete(e.type);break}}}deleteVariableById(e){const t=this.getVariableById(e);if(t){var n=t.name;const o=this.getVariableUsesById(e);for(let a=0,f;f=o[a];a++)if(f.type==="procedures_defnoreturn"||f.type==="procedures_defreturn"){e=String(f.getFieldValue("NAME")),n=i.Msg$$module$build$src$core$msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",n).replace("%2",e),ru(n);return}1<o.length?(n=i.Msg$$module$build$src$core$msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(o.length)).replace("%2",n),ot(n,a=>{a&&t&&this.deleteVariableInternal(t,o)})):this.deleteVariableInternal(t,o)}else console.warn("Can't delete non-existent variable: "+e)}deleteVariableInternal(e,t){const n=i.getGroup$$module$build$src$core$events$utils();n||i.setGroup$$module$build$src$core$events$utils(!0);try{for(let o=0;o<t.length;o++)t[o].dispose(!0);this.deleteVariable(e)}finally{i.setGroup$$module$build$src$core$events$utils(n)}}getVariable(e,t){if(t=this.variableMap.get(t||"")){for(let n=0,o;o=t[n];n++)if(i.Names$$module$build$src$core$names.equals(o.name,e))return o}return null}getVariableById(e){for(const t of this.variableMap.values())for(const n of t)if(n.getId()===e)return n;return null}getVariablesOfType(e){return(e=this.variableMap.get(e||""))?e.slice():[]}getVariableTypes(e){const t=new Set(this.variableMap.keys());if(e&&e.getPotentialVariableMap())for(const n of e.getPotentialVariableMap().variableMap.keys())t.add(n);return t.has("")||t.add(""),Array.from(t.values())}getAllVariables(){let e=[];for(const t of this.variableMap.values())e=e.concat(t);return e}getAllVariableNames(){return Array.from(this.variableMap.values()).flat().map(e=>e.name)}getVariableUsesById(e){const t=[],n=this.workspace.getAllBlocks(!1);for(let o=0;o<n.length;o++){const a=n[o].getVarModels();if(a)for(let f=0;f<a.length;f++)a[f].getId()===e&&t.push(n[o])}return t}},Ya=class{get isFlyout(){return this.internalIsFlyout}get isMutator(){return this.internalIsMutator}constructor(e){this.isClearing=this.internalIsMutator=this.internalIsFlyout=this.rendered=!1,this.MAX_UNDO=1024,this.connectionDBList=[],this.topBlocks=[],this.topComments=[],this.commentDB=new Map,this.listeners=[],this.undoStack_=[],this.redoStack_=[],this.blockDB=new Map,this.typedBlocksDB=new Map,this.procedureMap=new km,this.potentialVariableMap=null,this.id=B(),se(this),this.options=e||new Ds({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(D(ne.CONNECTION_CHECKER,this.options,!0))(this),this.variableMap=new Ff(this)}dispose(){this.listeners.length=0,this.clear(),We(this)}sortObjects(e,t){const n=Math.sin(Si(Ya.SCAN_ANGLE))*(this.RTL?-1:1);return e=e.getRelativeToSurfaceXY(),t=t.getRelativeToSurfaceXY(),e.y+n*e.x-(t.y+n*t.x)}addTopBlock(e){this.topBlocks.push(e)}removeTopBlock(e){if(!Bt(this.topBlocks,e))throw Error("Block not present in workspace's list of top-most blocks.")}getTopBlocks(e=!1){const t=[].concat(this.topBlocks);return e&&1<t.length&&t.sort(this.sortObjects.bind(this)),t}addTypedBlock(e){this.typedBlocksDB.has(e.type)||this.typedBlocksDB.set(e.type,[]),this.typedBlocksDB.get(e.type).push(e)}removeTypedBlock(e){Bt(this.typedBlocksDB.get(e.type),e),this.typedBlocksDB.get(e.type).length||this.typedBlocksDB.delete(e.type)}getBlocksByType(e,t=!1){return this.typedBlocksDB.has(e)?(e=this.typedBlocksDB.get(e).slice(0),t&&e&&1<e.length&&e.sort(this.sortObjects.bind(this)),e.filter(n=>!n.isInsertionMarker())):[]}addTopComment(e){this.topComments.push(e),this.commentDB.has(e.id)&&console.warn('Overriding an existing comment on this workspace, with id "'+e.id+'"'),this.commentDB.set(e.id,e)}removeTopComment(e){if(!Bt(this.topComments,e))throw Error("Comment not present in workspace's list of top-most comments.");this.commentDB.delete(e.id)}getTopComments(e=!1){const t=[].concat(this.topComments);return e&&1<t.length&&t.sort(this.sortObjects.bind(this)),t}getAllBlocks(e=!1){if(e){var t=this.getTopBlocks(!0);e=[];for(let n=0;n<t.length;n++)e.push(...t[n].getDescendants(!0))}else for(e=this.getTopBlocks(!1),t=0;t<e.length;t++)e.push(...e[t].getChildren(!1));return e.filter(n=>!n.isInsertionMarker())}clear(){this.isClearing=!0;try{const e=i.getGroup$$module$build$src$core$events$utils();for(e||i.setGroup$$module$build$src$core$events$utils(!0);this.topBlocks.length;)this.topBlocks[0].dispose(!1);for(;this.topComments.length;)this.topComments[this.topComments.length-1].dispose();i.setGroup$$module$build$src$core$events$utils(e),this.variableMap.clear(),this.potentialVariableMap&&this.potentialVariableMap.clear()}finally{this.isClearing=!1}}renameVariableById(e,t){this.variableMap.renameVariableById(e,t)}createVariable(e,t,n){return this.variableMap.createVariable(e,t,n)}getVariableUsesById(e){return this.variableMap.getVariableUsesById(e)}deleteVariableById(e){this.variableMap.deleteVariableById(e)}getVariable(e,t){return this.variableMap.getVariable(e,t)}getVariableById(e){return this.variableMap.getVariableById(e)}getVariablesOfType(e){return this.variableMap.getVariablesOfType(e)}getVariableTypes(){return this.variableMap.getVariableTypes(this)}getAllVariables(){return this.variableMap.getAllVariables()}getAllVariableNames(){return this.variableMap.getAllVariableNames()}getWidth(){return 0}newBlock(e,t){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}newComment(e){throw Error("The implementation of newComment should be monkey-patched in by blockly.ts")}remainingCapacity(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length}remainingCapacityOfType(e){return this.options.maxInstances?(this.options.maxInstances[e]!==void 0?this.options.maxInstances[e]:1/0)-this.getBlocksByType(e,!1).length:1/0}isCapacityAvailable(e){if(!this.hasBlockLimits())return!0;let t=0;for(const n in e){if(e[n]>this.remainingCapacityOfType(n))return!1;t+=e[n]}return!(t>this.remainingCapacity())}hasBlockLimits(){return this.options.maxBlocks!==1/0||!!this.options.maxInstances}getUndoStack(){return this.undoStack_}getRedoStack(){return this.redoStack_}undo(e){var t=e?this.redoStack_:this.undoStack_,n=e?this.undoStack_:this.redoStack_;const o=t.pop();if(o){for(var a=[o];t.length&&o.group&&o.group===t[t.length-1].group;){const f=t.pop();f&&a.push(f)}for(t=0;t<a.length;t++)n.push(a[t]);i.setRecordUndo$$module$build$src$core$events$utils(!1);try{for(n=0;n<a.length;n++)a[n].run(e)}finally{i.setRecordUndo$$module$build$src$core$events$utils(!0)}}}clearUndo(){this.undoStack_.length=0,this.redoStack_.length=0,Me()}addChangeListener(e){return this.listeners.push(e),e}removeChangeListener(e){Bt(this.listeners,e)}fireChangeListener(e){if(e.recordUndo)for(this.undoStack_.push(e),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(let t=0;t<this.listeners.length;t++)(0,this.listeners[t])(e)}getBlockById(e){return this.blockDB.get(e)||null}setBlockById(e,t){this.blockDB.set(e,t)}removeBlockById(e){this.blockDB.delete(e)}getCommentById(e){let t;return(t=this.commentDB.get(e))!=null?t:null}allInputsFilled(e){const t=this.getTopBlocks(!1);for(let n=0;n<t.length;n++)if(!t[n].allInputsFilled(e))return!1;return!0}getPotentialVariableMap(){return this.potentialVariableMap}createPotentialVariableMap(){this.potentialVariableMap=new Ff(this)}getVariableMap(){return this.variableMap}setVariableMap(e){this.variableMap=e}getProcedureMap(){return this.procedureMap}getRootWorkspace(){let e=null;const t=this.options.parentWorkspace;return this.isFlyout?t&&t.options&&(e=t.options.parentWorkspace):t&&(e=t),e}static getById(e){return Ee(e)}static getAll(){return H()}};Ya.SCAN_ANGLE=3;var yb=100,Pm=class{constructor(e){this.parentWorkspace=e,this.sounds=new Map,this.lastSound=null,this.muted=!1}dispose(){this.sounds.clear()}load(e,t){if(e.length){try{var n=new globalThis.Audio}catch{return}for(let a=0;a<e.length;a++){const f=e[a],E=f.match(/\.(\w+)$/);if(E&&n.canPlayType("audio/"+E[1])){var o=new globalThis.Audio(f);break}}o&&this.sounds.set(t,o)}}preload(){for(const e of this.sounds.values()){e.volume=.01;const t=e.play();if(t!==void 0?t.then(e.pause).catch(function(){}):e.pause(),Ku||Ph)break}}play(e,t){if(!this.muted){var n=this.sounds.get(e);n?(e=new Date,this.lastSound!==null&&e.getTime()-this.lastSound.getTime()<yb||(this.lastSound=e,n=Ku||Xu?n:n.cloneNode(),n.volume=t===void 0?1:t,n.play())):this.parentWorkspace&&this.parentWorkspace.getAudioManager().play(e,t)}}setMuted(e){this.muted=e}getMuted(){return this.muted}},vb=20,Ns=class extends Ya{constructor(e){super(e),this.resizeHandlerWrapper=null,this.resizesEnabled=this.visible=this.rendered=!0,this.startScrollY=this.startScrollX=this.scrollY=this.scrollX=0,this.oldScale=this.scale=1,this.oldLeft=this.oldTop=0,this.inverseScreenCTM=this.targetWorkspace=this.dummyWheelListener=this.configureContextMenu=this.lastRecordedPageScroll=this.injectionDiv=this.currentGesture_=this.toolbox=this.flyout=this.scrollbar=this.trashcan=null,this.inverseScreenCTMDirty=!0,this.highlightedBlocks=[],this.toolboxCategoryCallbacks=new Map,this.flyoutButtonCallbacks=new Map,this.cachedParentSvg=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements=[],this.dragTargetAreas=[],this.zoomControls_=this.layerManager=null,this.metricsManager=new(D(ne.METRICS_MANAGER,e,!0))(this),this.getMetrics=e.getMetrics||this.metricsManager.getMetrics.bind(this.metricsManager),this.setMetrics=e.setMetrics||Ns.setTopLevelWorkspaceMetrics,this.componentManager=new vt,this.connectionDBList=Wa.init(this.connectionChecker),this.audioManager=new Pm(e.parentWorkspace),this.grid=this.options.gridPattern?new bf(this.options.gridPattern,e.gridOptions):null,this.markerManager=new Wo(this),io&&this.registerToolboxCategoryCallback(oc,io),Au&&this.registerToolboxCategoryCallback(Mf,Au),Er&&ys&&(this.registerToolboxCategoryCallback($g,ys),this.addChangeListener(Ru)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new Mm(this,this.options.theme||dg),this.themeManager_.subscribeWorkspace(this);let t;this.renderer=ph(this.options.renderer||"geras",this.getTheme(),(t=this.options.rendererOverrides)!=null?t:void 0),this.cachedParentSvgSize=new oe(0,0)}getMarkerManager(){return this.markerManager}getMetricsManager(){return this.metricsManager}setMetricsManager(e){this.metricsManager=e,this.getMetrics=this.metricsManager.getMetrics.bind(this.metricsManager)}getComponentManager(){return this.componentManager}setCursorSvg(e){this.markerManager.setCursorSvg(e)}setMarkerSvg(e){this.markerManager.setMarkerSvg(e)}getMarker(e){return this.markerManager?this.markerManager.getMarker(e):null}getCursor(){return this.markerManager?this.markerManager.getCursor():null}getRenderer(){return this.renderer}getThemeManager(){return this.themeManager_}getTheme(){return this.themeManager_.getTheme()}setTheme(e){e||(e=dg),this.themeManager_.setTheme(e)}refreshTheme(){this.svgGroup_&&this.renderer.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles(this.getAllBlocks(!1).filter(t=>!!t.getStyleName())),this.refreshToolboxSelection(),this.toolbox&&this.toolbox.refreshTheme(),this.isVisible()&&this.setVisible(!0);const e=new(X(z.THEME_CHANGE))(this.getTheme().name,this.id);ce(e)}updateBlockStyles(e){for(let t=0,n;n=e[t];t++){const o=n.getStyleName();o&&n.setStyle(o)}}getInverseScreenCTM(){if(this.inverseScreenCTMDirty){const e=this.getParentSvg().getScreenCTM();e&&(this.inverseScreenCTM=e.inverse(),this.inverseScreenCTMDirty=!1)}return this.inverseScreenCTM}updateInverseScreenCTM(){this.inverseScreenCTMDirty=!0}isVisible(){return this.visible}getSvgXY(e){let t=0,n=0,o=1;(this.getCanvas().contains(e)||this.getBubbleCanvas().contains(e))&&(o=this.scale);do{const a=ut(e);(e===this.getCanvas()||e===this.getBubbleCanvas())&&(o=1),t+=a.x*o,n+=a.y*o,e=e.parentNode}while(e&&e!==this.getParentSvg()&&e!==this.getInjectionDiv());return new ae(t,n)}getCachedParentSvgSize(){const e=this.cachedParentSvgSize;return new oe(e.width,e.height)}getOriginOffsetInPixels(){return lt(this.getCanvas())}getInjectionDiv(){if(!this.injectionDiv){let e=this.svgGroup_;for(;e;){if((" "+(e.getAttribute("class")||"")+" ").includes(" injectionDiv ")){this.injectionDiv=e;break}e=e.parentNode}}return this.injectionDiv}getSvgGroup(){return this.svgGroup_}getBlockCanvas(){return this.getCanvas()}setResizeHandlerWrapper(e){this.resizeHandlerWrapper=e}createDom(e,t){return this.injectionDiv||(this.injectionDiv=t??null),this.svgGroup_=J(P.G,{class:"blocklyWorkspace"}),e&&(this.svgBackground_=J(P.RECT,{height:"100%",width:"100%",class:e},this.svgGroup_),e==="blocklyMainBackground"&&this.grid?this.svgBackground_.style.fill="url(#"+this.grid.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.layerManager=new gb(this),this.svgBlockCanvas_=this.layerManager.getBlockLayer(),this.svgBubbleCanvas_=this.layerManager.getBubbleLayer(),this.isFlyout||(Le(this.svgGroup_,"pointerdown",this,this.onMouseDown,!1),this.dummyWheelListener=()=>{},document.body.addEventListener("wheel",this.dummyWheelListener),Le(this.svgGroup_,"wheel",this,this.onMouseWheel)),this.options.hasCategories&&(this.toolbox=new(D(ne.TOOLBOX,this.options,!0))(this)),this.grid&&this.grid.update(this.scale),this.recordDragTargets(),(e=D(ne.CURSOR,this.options))&&this.markerManager.setCursor(new e),this.renderer.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_}dispose(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&x(this.svgGroup_),this.toolbox&&(this.toolbox.dispose(),this.toolbox=null),this.flyout&&(this.flyout.dispose(),this.flyout=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&this.zoomControls_.dispose(),this.audioManager&&this.audioManager.dispose(),this.grid&&(this.grid=null),this.renderer.dispose(),this.markerManager&&this.markerManager.dispose(),super.dispose(),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||this.themeManager_.dispose()),this.connectionDBList.length=0,this.toolboxCategoryCallbacks.clear(),this.flyoutButtonCallbacks.clear(),!this.options.parentWorkspace){const e=this.getParentSvg();e&&e.parentNode&&x(e.parentNode)}this.resizeHandlerWrapper&&(et(this.resizeHandlerWrapper),this.resizeHandlerWrapper=null),this.dummyWheelListener&&(document.body.removeEventListener("wheel",this.dummyWheelListener),this.dummyWheelListener=null)}addTrashcan(){this.trashcan=Ns.newTrashcan(this);const e=this.trashcan.createDom();this.svgGroup_.insertBefore(e,this.getCanvas())}static newTrashcan(e){throw Error("The implementation of newTrashcan should be monkey-patched in by blockly.ts")}addZoomControls(){this.zoomControls_=new ig(this);const e=this.zoomControls_.createDom();this.svgGroup_.appendChild(e)}addFlyout(e){const t=new Ds({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return t.toolboxPosition=this.options.toolboxPosition,this.flyout=this.horizontalLayout?new(D(ne.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(t):new(D(ne.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(t),this.flyout.autoClose=!1,this.flyout.getWorkspace().setVisible(!0),this.flyout.createDom(e)}getFlyout(e){return this.flyout||e?this.flyout:this.toolbox?this.toolbox.getFlyout():null}getToolbox(){return this.toolbox}updateScreenCalculations(){this.updateInverseScreenCTM(),this.recordDragTargets()}resizeContents(){this.resizesEnabled&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())}resize(){this.toolbox&&this.toolbox.position(),this.flyout&&this.flyout.position();const e=this.componentManager.getComponents(vt.Capability.POSITIONABLE,!0),t=this.getMetricsManager().getUiMetrics(),n=[];for(let o=0,a;a=e[o];o++){a.position(t,n);const f=a.getBoundingRectangle();f&&n.push(f)}this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations()}updateScreenCalculationsIfScrolled(){const e=Mt();ae.equals(this.lastRecordedPageScroll,e)||(this.lastRecordedPageScroll=e,this.updateScreenCalculations())}getLayerManager(){return this.layerManager}getCanvas(){return this.layerManager.getBlockLayer()}setCachedParentSvgSize(e,t){const n=this.getParentSvg();e!=null&&(this.cachedParentSvgSize.width=e,n.setAttribute("data-cached-width",`${e}`)),t!=null&&(this.cachedParentSvgSize.height=t,n.setAttribute("data-cached-height",`${t}`))}getBubbleCanvas(){return this.layerManager.getBubbleLayer()}getParentSvg(){if(!this.cachedParentSvg){let e=this.svgGroup_;for(;e;){if(e.tagName==="svg"){this.cachedParentSvg=e;break}e=e.parentNode}}return this.cachedParentSvg}maybeFireViewportChangeEvent(){if(Re()){var e=this.scale,t=-this.scrollY,n=-this.scrollX;if(!(e===this.oldScale&&1>Math.abs(t-this.oldTop)&&1>Math.abs(n-this.oldLeft))){var o=new(X(z.VIEWPORT_CHANGE))(t,n,e,this.id,this.oldScale);this.oldScale=e,this.oldTop=t,this.oldLeft=n,ce(o)}}}translate(e,t){let n;(n=this.layerManager)==null||n.translateLayers(new ae(e,t),this.scale);let o;(o=this.grid)==null||o.moveTo(e,t),this.maybeFireViewportChangeEvent()}getWidth(){const e=this.getMetrics();return e?e.viewWidth/this.scale:0}setVisible(e){this.visible=e,this.svgGroup_&&(this.scrollbar&&this.scrollbar.setContainerVisible(e),this.getFlyout()&&this.getFlyout().setContainerVisible(e),this.getParentSvg().style.display=e?"block":"none",this.toolbox&&this.toolbox.setVisible(e),e||this.hideChaff(!0))}render(){const e=this.getAllBlocks(!1);for(let t=e.length-1;0<=t;t--)e[t].queueRender();this.getTopBlocks().flatMap(t=>t.getDescendants(!1)).filter(t=>t.isInsertionMarker()).forEach(t=>t.queueRender()),Bn().then(()=>void this.markerManager.updateMarkers())}highlightBlock(e,t){if(t===void 0){for(let n=0,o;o=this.highlightedBlocks[n];n++)o.setHighlighted(!1);this.highlightedBlocks.length=0}(e=e?this.getBlockById(e):null)&&((t=t===void 0||t)?this.highlightedBlocks.includes(e)||this.highlightedBlocks.push(e):Bt(this.highlightedBlocks,e),e.setHighlighted(t))}refreshToolboxSelection(){const e=this.isFlyout?this.targetWorkspace:this;e&&!e.currentGesture_&&e.toolbox&&e.toolbox.getFlyout()&&e.toolbox.refreshSelection()}renameVariableById(e,t){super.renameVariableById(e,t),this.refreshToolboxSelection()}deleteVariableById(e){super.deleteVariableById(e),this.refreshToolboxSelection()}createVariable(e,t,n){return e=super.createVariable(e,t,n),this.refreshToolboxSelection(),e}recordDragTargets(){const e=this.componentManager.getComponents(vt.Capability.DRAG_TARGET,!0);this.dragTargetAreas=[];for(let t=0,n;n=e[t];t++){const o=n.getClientRect();o&&this.dragTargetAreas.push({component:n,clientRect:o})}}newBlock(e,t){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}newComment(e){throw Error("The implementation of newComment should be monkey-patched in by blockly.ts")}getDragTarget(e){for(let t=0,n;n=this.dragTargetAreas[t];t++)if(n.clientRect.contains(e.clientX,e.clientY))return n.component;return null}onMouseDown(e){const t=this.getGesture(e);t&&t.handleWsStart(e,this)}startDrag(e,t){vu(this,e,t)}moveDrag(e){return Su(this,e)}isDragging(){return this.currentGesture_!==null&&this.currentGesture_.isDragging()}isDraggable(){return this.options.moveOptions&&this.options.moveOptions.drag}isMovable(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch}isMovableHorizontally(){const e=!!this.scrollbar;return this.isMovable()&&(!e||e&&this.scrollbar.canScrollHorizontally())}isMovableVertically(){const e=!!this.scrollbar;return this.isMovable()&&(!e||e&&this.scrollbar.canScrollVertically())}onMouseWheel(e){if(jo.inProgress())e.preventDefault(),e.stopPropagation();else{var t=this.options.zoomOptions&&this.options.zoomOptions.wheel,n=this.options.moveOptions&&this.options.moveOptions.wheel;if(t||n){var o=br(e);if(Yu)var a=e.metaKey;t&&(e.ctrlKey||a||!n)?(o=-o.y/50,t=dn(e,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(t.x,t.y,o)):(t=this.scrollX-o.x,n=this.scrollY-o.y,e.shiftKey&&!o.x&&(t=this.scrollX-o.y,n=this.scrollY),this.scroll(t,n)),e.preventDefault()}}}getBlocksBoundingBox(){const e=this.getTopBoundedElements();if(!e.length)return new ct(0,0,0,0);const t=e[0].getBoundingRectangle();for(let o=1;o<e.length;o++){var n=e[o];n.isInsertionMarker&&n.isInsertionMarker()||(n=n.getBoundingRectangle(),n.top<t.top&&(t.top=n.top),n.bottom>t.bottom&&(t.bottom=n.bottom),n.left<t.left&&(t.left=n.left),n.right>t.right&&(t.right=n.right))}return t}cleanUp(){this.setResizesEnabled(!1),i.setGroup$$module$build$src$core$events$utils(!0);var e=this.getTopBlocks(!0),t=e.filter(f=>f.isMovable());const n=e.filter(f=>!f.isMovable()).map(f=>f.getBoundingRectangle());e=function(f){for(const E of n)if(f.intersects(E))return E;return null};var o=0;const a=this.renderer.getConstants().MIN_BLOCK_HEIGHT;for(const f of t){for(t=f.getBoundingRectangle(),f.moveBy(-t.left,o-t.top,["cleanup"]),f.snapToGrid(),t=f.getBoundingRectangle(),o=e(t);o!=null;)o=o.top+o.getHeight()+a,f.moveBy(0,o-t.top,["cleanup"]),f.snapToGrid(),t=f.getBoundingRectangle(),o=e(t);o=f.getRelativeToSurfaceXY().y+f.getHeightWidth().height+a}i.setGroup$$module$build$src$core$events$utils(!1),this.setResizesEnabled(!0)}showContextMenu(e){if(!this.options.readOnly&&!this.isFlyout){var t=O.registry.getContextMenuOptions(O.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(t,e),ml(e,t,this.RTL,this)}}updateToolbox(e){if(e=Ql(e)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(eu(e)){if(!this.toolbox)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=e,this.toolbox.render(e)}else{if(!this.flyout)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=e,this.flyout.show(e)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")}markFocused(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(je(this),this.getParentSvg().focus({preventScroll:!0}))}zoom(e,t,n){n=Math.pow(this.options.zoomOptions.scaleSpeed,n);const o=this.scale*n;if(this.scale!==o){o>this.options.zoomOptions.maxScale?n=this.options.zoomOptions.maxScale/this.scale:o<this.options.zoomOptions.minScale&&(n=this.options.zoomOptions.minScale/this.scale);var a=this.getCanvas().getCTM(),f=this.getParentSvg().createSVGPoint();f.x=e,f.y=t,f=f.matrixTransform(a.inverse()),e=f.x,t=f.y,a=a.translate(e*(1-n),t*(1-n)).scale(n),this.scrollX=a.e,this.scrollY=a.f,this.setScale(o)}}zoomCenter(e){var t=this.getMetrics();let n;this.flyout?(n=t.svgWidth?t.svgWidth/2:0,t=t.svgHeight?t.svgHeight/2:0):(n=t.viewWidth/2+t.absoluteLeft,t=t.viewHeight/2+t.absoluteTop),this.zoom(n,t,e)}zoomToFit(){if(this.isMovable()){var e=this.getMetrics(),t=e.viewWidth;e=e.viewHeight;var n=this.getBlocksBoundingBox(),o=2*vb,a=n.right-n.left+o;if(n=n.bottom-n.top+o,a){this.flyout&&(this.horizontalLayout?(e+=this.flyout.getHeight(),n+=this.flyout.getHeight()/this.scale):(t+=this.flyout.getWidth(),a+=this.flyout.getWidth()/this.scale)),t/=a,e/=n,i.disable$$module$build$src$core$events$utils();try{this.setScale(Math.min(t,e)),this.scrollCenter()}finally{i.enable$$module$build$src$core$events$utils()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}beginCanvasTransition(){ke(this.getCanvas(),"blocklyCanvasTransitioning"),ke(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}endCanvasTransition(){v(this.getCanvas(),"blocklyCanvasTransitioning"),v(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}scrollCenter(){if(this.isMovable()){var e=this.getMetrics(),t=(e.scrollWidth-e.viewWidth)/2,n=(e.scrollHeight-e.viewHeight)/2;t=-t-e.scrollLeft,n=-n-e.scrollTop,this.scroll(t,n)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}centerOnBlock(e,t){if(this.isMovable()){var n=e?this.getBlockById(e):null;if(n){e=n.getRelativeToSurfaceXY(),n=t?{height:n.height,width:n.width}:n.getHeightWidth();var o=this.scale;t=(e.x+(this.RTL?-1:1)*n.width/2)*o,e=(e.y+n.height/2)*o,n=this.getMetrics(),this.scroll(-(t-n.viewWidth/2),-(e-n.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}setScale(e){this.options.zoomOptions.maxScale&&e>this.options.zoomOptions.maxScale?e=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&e<this.options.zoomOptions.minScale&&(e=this.options.zoomOptions.minScale),this.scale=e,this.hideChaff(!1),(e=this.getFlyout(!1))&&e.isVisible()&&(e.reflow(),this.recordDragTargets()),this.grid&&this.grid.update(this.scale),e=this.getMetrics(),this.scrollX-=e.absoluteLeft,this.scrollY-=e.absoluteTop,e.viewLeft+=e.absoluteLeft,e.viewTop+=e.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout?this.scrollbar.resizeView(e):this.scrollbar.resizeContent(e))}getScale(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale}scroll(e,t){this.hideChaff(!0);const n=this.getMetrics();e=Math.min(e,-n.scrollLeft),t=Math.min(t,-n.scrollTop);const o=n.scrollTop+Math.max(0,n.scrollHeight-n.viewHeight);e=Math.max(e,-(n.scrollLeft+Math.max(0,n.scrollWidth-n.viewWidth))),t=Math.max(t,-o),this.scrollX=e,this.scrollY=t,this.scrollbar&&this.scrollbar.set(-(e+n.scrollLeft),-(t+n.scrollTop),!1),e+=n.absoluteLeft,t+=n.absoluteTop,this.translate(e,t)}getBlockById(e){return super.getBlockById(e)}getAllBlocks(e=!1){return super.getAllBlocks(e)}getTopBlocks(e=!1){return super.getTopBlocks(e)}addTopBlock(e){this.addTopBoundedElement(e),super.addTopBlock(e)}removeTopBlock(e){this.removeTopBoundedElement(e),super.removeTopBlock(e)}addTopComment(e){this.addTopBoundedElement(e),super.addTopComment(e)}removeTopComment(e){this.removeTopBoundedElement(e),super.removeTopComment(e)}getRootWorkspace(){return super.getRootWorkspace()}addTopBoundedElement(e){this.topBoundedElements.push(e)}removeTopBoundedElement(e){Bt(this.topBoundedElements,e)}getTopBoundedElements(){return[].concat(this.topBoundedElements)}setResizesEnabled(e){const t=!this.resizesEnabled&&e;this.resizesEnabled=e,t&&this.resizeContents()}clear(){this.setResizesEnabled(!1),super.clear(),this.topBoundedElements=[],this.setResizesEnabled(!0)}registerButtonCallback(e,t){if(typeof t!="function")throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks.set(e,t)}getButtonCallback(e){let t;return(t=this.flyoutButtonCallbacks.get(e))!=null?t:null}removeButtonCallback(e){this.flyoutButtonCallbacks.delete(e)}registerToolboxCategoryCallback(e,t){if(typeof t!="function")throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks.set(e,t)}getToolboxCategoryCallback(e){return this.toolboxCategoryCallbacks.get(e)||null}removeToolboxCategoryCallback(e){this.toolboxCategoryCallbacks.delete(e)}getGesture(e){const t=e.type==="pointerdown",n=this.currentGesture_;return n?t&&n.hasStarted()?(console.warn("Tried to start the same gesture twice."),n.cancel(),null):n:t?this.currentGesture_=new jo(e,this):null}clearGesture(){this.currentGesture_=null}cancelCurrentGesture(){this.currentGesture_&&this.currentGesture_.cancel()}getAudioManager(){return this.audioManager}getGrid(){return this.grid}hideChaff(e=!1){Ks(),ms(this),fs(),this.hideComponents(e)}hideComponents(e=!1){this.getComponentManager().getComponents(vt.Capability.AUTOHIDEABLE,!0).forEach(t=>t.autoHide(e))}static setTopLevelWorkspaceMetrics(e){const t=this.getMetrics();typeof e.x=="number"&&(this.scrollX=-(t.scrollLeft+(t.scrollWidth-t.viewWidth)*e.x)),typeof e.y=="number"&&(this.scrollY=-(t.scrollTop+(t.scrollHeight-t.viewHeight)*e.y)),this.translate(this.scrollX+t.absoluteLeft,this.scrollY+t.absoluteTop)}},Uf=class extends Rr{constructor(e,t,n){super(n),this.type=z.SELECTED,this.oldElementId=e??void 0,this.newElementId=t??void 0}toJson(){const e=super.toJson();return e.oldElementId=this.oldElementId,e.newElementId=this.newElementId,e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new Uf),t.oldElementId=e.oldElementId,t.newElementId=e.newElementId,t}};d(ne.EVENT,z.SELECTED,Uf);var rp=class{paste(e,t,n){if(!t.isCapacityAvailable(e.typeCounts))return null;n&&(e.blockState.x=n.x,e.blockState.y=n.y),n=n||new ae(e.blockState.x||0,e.blockState.y||0),i.disable$$module$build$src$core$events$utils();let o;try{o=gs(e.blockState,t),gh(o,n)}finally{i.enable$$module$build$src$core$events$utils()}return o&&(Re()&&!o.isShadow()&&ce(new(X(z.BLOCK_CREATE))(o)),i.setSelected$$module$build$src$core$common(o),o)}};rp.TYPE="block",lr(rp.TYPE,new rp);var yg={};yg.bumpIntoBounds=Xr,yg.bumpIntoBoundsHandler=Nu,yg.bumpTopObjectsIntoBounds=Il;var Bm=class{constructor(e){this.block=e,this.connectionPreviewer=this.connectionCandidate=this.startLoc=this.startChildConn=this.startParentConn=null,this.dragging=!1,this.dragOffset=new ae(0,0),this.inGroup=!1,this.workspace=e.workspace}isMovable(){if(this.block.isShadow()){let e,t;return(t=(e=this.block.getParent())==null?void 0:e.isMovable())!=null?t:!1}return this.block.isOwnMovable()&&!this.block.isDeadOrDying()&&!this.workspace.options.readOnly&&!this.block.isInFlyout}startDrag(e){if(this.block.isShadow())this.startDraggingShadow(e);else{this.dragging=!0,(this.inGroup=!!i.getGroup$$module$build$src$core$events$utils())||i.setGroup$$module$build$src$core$events$utils(!0),this.fireDragStartEvent(),this.startLoc=this.block.getRelativeToSurfaceXY(),this.connectionCandidate=null,this.connectionPreviewer=new(D(ne.CONNECTION_PREVIEWER,this.workspace.options))(this.block),Ln(),this.workspace.setResizesEnabled(!1),yl(),e=!!e&&(e.altKey||e.ctrlKey||e.metaKey),this.shouldDisconnect(e)&&this.disconnectBlock(e),this.block.setDragging(!0);var t;(t=this.workspace.getLayerManager())==null||t.moveToDragLayer(this.block)}}startDraggingShadow(e){const t=this.block.getParent();if(!t)throw Error("Tried to drag a shadow block with no parent. Shadow blocks should always have parents.");this.dragOffset=ae.difference(t.getRelativeToSurfaceXY(),this.block.getRelativeToSurfaceXY()),t.startDrag(e)}shouldDisconnect(e){return!!(this.block.getParent()||e&&this.block.nextConnection&&this.block.nextConnection.targetBlock())}disconnectBlock(e){let t,n,o;if(this.startParentConn=(o=(t=this.block.outputConnection)==null?void 0:t.targetConnection)!=null?o:(n=this.block.previousConnection)==null?void 0:n.targetConnection,e){let a;this.startChildConn=(a=this.block.nextConnection)==null?void 0:a.targetConnection}this.block.unplug(e),Cu(this.block)}fireDragStartEvent(){const e=new(X(z.BLOCK_DRAG))(this.block,!0,this.block.getDescendants(!1));ce(e)}fireDragEndEvent(){const e=new(X(z.BLOCK_DRAG))(this.block,!1,this.block.getDescendants(!1));ce(e)}fireMoveEvent(){if(!this.block.isDeadOrDying()){var e=new(X(z.BLOCK_MOVE))(this.block);e.setReason(["drag"]),e.oldCoordinate=this.startLoc,e.recordNew(),ce(e)}}drag(e){if(this.block.isShadow()){let t;(t=this.block.getParent())==null||t.drag(ae.sum(e,this.dragOffset))}else this.block.moveDuringDrag(e),this.updateConnectionPreview(this.block,ae.difference(e,this.startLoc))}updateConnectionPreview(e,t){var n=this.connectionCandidate;const o=this.getConnectionCandidate(e,t);if(o){this.connectionCandidate=t=n&&this.currCandidateIsBetter(n,t,o)?n:o;var{local:a,neighbour:f}=t;t=a.type===Ie.OUTPUT_VALUE||a.type===Ie.PREVIOUS_STATEMENT,n=f.isConnected()&&!f.targetBlock().isInsertionMarker(),t&&n&&!this.orphanCanConnectAtEnd(e,f.targetBlock(),a.type)?this.connectionPreviewer.previewReplacement(a,f,f.targetBlock()):this.connectionPreviewer.previewConnection(a,f)}else this.connectionPreviewer.hidePreview(),this.connectionCandidate=null}orphanCanConnectAtEnd(e,t,n){return!!it.getConnectionForOrphanedConnection(e,n===Ie.OUTPUT_VALUE?t.outputConnection:t.previousConnection)}currCandidateIsBetter(e,t,n){const{local:o,neighbour:a}=e;e=new ae(o.x,o.y);const f=new ae(a.x,a.y);return t=ae.distance(ae.sum(e,t),f),n.distance>t-i.config$$module$build$src$core$config.currentConnectionPreference}getConnectionCandidate(e,t){e=this.getLocalConnections(e);let n=this.connectionCandidate?i.config$$module$build$src$core$config.connectingSnapRadius:i.config$$module$build$src$core$config.snapRadius,o=null;for(const a of e){const{connection:f,radius:E}=a.closest(n,t);f&&(o={local:a,neighbour:f,distance:E},n=E)}return o}getLocalConnections(e){const t=e.getConnections_(!1),n=e.lastConnectionInStack(!0);return n&&n!==e.nextConnection&&t.push(n),t}endDrag(e){if(this.block.isShadow()){let t;(t=this.block.getParent())==null||t.endDrag(e)}else{if(this.fireDragEndEvent(),this.fireMoveEvent(),Ur(),yl(),this.connectionPreviewer.hidePreview(),!this.block.isDeadOrDying()&&this.dragging){let t;(t=this.workspace.getLayerManager())==null||t.moveOffDragLayer(this.block,W),this.block.setDragging(!1)}this.connectionCandidate?(this.applyConnections(this.connectionCandidate),this.disposeStep()):this.block.queueRender().then(()=>this.disposeStep()),this.inGroup||i.setGroup$$module$build$src$core$events$utils(!1)}}disposeStep(){this.block.snapToGrid(),this.connectionPreviewer.dispose(),this.workspace.setResizesEnabled(!0)}applyConnections(e){const{local:t,neighbour:n}=e;t.connect(n);const o=t.isSuperior()?n:t,a=this.block.getRootBlock();Bn().then(()=>{Ir(o.getSourceBlock()),setTimeout(()=>{a.bringToFront()},0)})}revertDrag(){if(this.block.isShadow()){let t;(t=this.block.getParent())==null||t.revertDrag()}else{var e;if((e=this.startChildConn)==null||e.connect(this.block.nextConnection),this.startParentConn)switch(this.startParentConn.type){case Ie.INPUT_VALUE:this.startParentConn.connect(this.block.outputConnection);break;case Ie.NEXT_STATEMENT:this.startParentConn.connect(this.block.previousConnection)}else{this.block.moveTo(this.startLoc,["drag"]);let t;(t=this.workspace.getLayerManager())==null||t.moveOffDragLayer(this.block,W),Xr(this.workspace,this.workspace.getMetricsManager().getScrollMetrics(!0),this.block)}this.startParentConn=this.startChildConn=null,this.connectionPreviewer.hidePreview(),this.connectionCandidate=null,this.block.setDragging(!1),this.dragging=!1}}},Fm=class{constructor(){this.drawer=this.curNode=this.colour=null,this.type="marker"}setDrawer(e){this.drawer=e}getDrawer(){return this.drawer}getCurNode(){return this.curNode}setCurNode(e){const t=this.curNode;this.curNode=e,this.drawer&&this.drawer.draw(t,this.curNode)}draw(){this.drawer&&this.drawer.draw(this.curNode,this.curNode)}hide(){this.drawer&&this.drawer.hide()}dispose(){this.getDrawer()&&this.getDrawer().dispose()}},Hf=class extends Fm{constructor(){super(),this.type="cursor"}next(){var e=this.getCurNode();if(!e)return null;for(e=e.next();e&&e.next()&&(e.getType()===Z.types.NEXT||e.getType()===Z.types.BLOCK);)e=e.next();return e&&this.setCurNode(e),e}in(){var e=this.getCurNode();if(!e)return null;(e.getType()===Z.types.PREVIOUS||e.getType()===Z.types.OUTPUT)&&(e=e.next());let t,n;return(e=(n=(t=e)==null?void 0:t.in())!=null?n:null)&&this.setCurNode(e),e}prev(){var e=this.getCurNode();if(!e)return null;for(e=e.prev();e&&e.prev()&&(e.getType()===Z.types.NEXT||e.getType()===Z.types.BLOCK);)e=e.prev();return e&&this.setCurNode(e),e}out(){var e=this.getCurNode();return e?((e=e.out())&&e.getType()===Z.types.BLOCK&&(e=e.prev()||e),e&&this.setCurNode(e),e):null}};d(ne.CURSOR,hr,Hf);var sp=class extends Hf{constructor(){super()}next(){var e=this.getCurNode();return e?((e=this.getNextNode_(e,this.validNode_))&&this.setCurNode(e),e):null}in(){return this.next()}prev(){var e=this.getCurNode();return e?((e=this.getPreviousNode_(e,this.validNode_))&&this.setCurNode(e),e):null}out(){return this.prev()}getNextNode_(e,t){if(!e)return null;const n=e.in()||e.next();return t(n)?n:n?this.getNextNode_(n,t):(e=this.findSiblingOrParent(e.out()),t(e)?e:e?this.getNextNode_(e,t):null)}getPreviousNode_(e,t){if(!e)return null;let n=e.prev();return n=n?this.getRightMostChild(n):e.out(),t(n)?n:n?this.getPreviousNode_(n,t):null}validNode_(e){let t=!1;return e=e&&e.getType(),(e===Z.types.OUTPUT||e===Z.types.INPUT||e===Z.types.FIELD||e===Z.types.NEXT||e===Z.types.PREVIOUS||e===Z.types.WORKSPACE)&&(t=!0),t}findSiblingOrParent(e){if(!e)return null;const t=e.next();return t||this.findSiblingOrParent(e.out())}getRightMostChild(e){if(!e.in())return e;for(e=e.in();e&&e.next();)e=e.next();return this.getRightMostChild(e)}};sp.registrationName="basicCursor",d(ne.CURSOR,sp.registrationName,sp);var Um=class extends sp{validNode_(e){let t=!1;const n=e&&e.getType();return e&&(e=e.getLocation(),n===Z.types.FIELD&&e&&e.isTabNavigable()&&e.isClickable()&&(t=!0)),t}},Hm=10,Mr=class extends it{constructor(e,t){super(e,t),this.highlighted=!1,this.targetConnection=null,this.db=e.workspace.connectionDBList[t],this.dbOpposite=e.workspace.connectionDBList[$c[t]],this.offsetInBlock=new ae(0,0),this.trackedState=Mr.TrackedState.WILL_TRACK}dispose(){super.dispose(),this.trackedState===Mr.TrackedState.TRACKED&&this.db.removeConnection(this,this.y);let e,t;(t=(e=this.sourceBlock_.pathObject).removeConnectionHighlight)==null||t.call(e,this)}getSourceBlock(){return super.getSourceBlock()}targetBlock(){return super.targetBlock()}distanceFrom(e){const t=this.x-e.x;return e=this.y-e.y,Math.sqrt(t*t+e*e)}bumpAwayFrom(e,t=!1){if(!this.sourceBlock_.workspace.isDragging()){var n=i.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*Hm),o=i.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*Hm),a=e.sourceBlock_.getRootBlock(),f=this.sourceBlock_.getRootBlock();if(!a.isInFlyout&&!f.isInFlyout){var E=!0;if(f.isMovable())a.isMovable()&&t&&(o=-o);else if(a.isMovable())E=!1,n=-n,o=-o;else return;t=E?e:this,e=E?this:e,a=E?f:a,(f=Be()===a)||a.addSelect(),a.RTL&&(n=-n),a.moveBy(t.x+n-e.x,t.y+o-e.y,["bump"]),f||a.removeSelect()}}}moveTo(e,t){let n=!1;return this.trackedState===Mr.TrackedState.WILL_TRACK?(this.db.addConnection(this,t),this.trackedState=Mr.TrackedState.TRACKED,n=!0):this.trackedState===Mr.TrackedState.TRACKED&&(this.db.removeConnection(this,this.y),this.db.addConnection(this,t),n=!0),this.x=e,this.y=t,n}moveBy(e,t){return this.moveTo(this.x+e,this.y+t)}moveToOffset(e){return this.moveTo(e.x+this.offsetInBlock.x,e.y+this.offsetInBlock.y)}setOffsetInBlock(e,t){this.offsetInBlock.x=e,this.offsetInBlock.y=t}getOffsetInBlock(){return this.offsetInBlock}tightenEfficiently(){var e=this.targetConnection;const t=this.targetBlock();e&&t&&(e=ae.difference(this.offsetInBlock,e.offsetInBlock),t.translate(e.x,e.y))}closest(e,t){return this.dbOpposite.searchForClosest(this,e,t)}highlight(){this.highlighted=!0,this.getSourceBlock().queueRender()}unhighlight(){this.highlighted=!1,this.getSourceBlock().queueRender()}isHighlighted(){return this.highlighted}setTracking(e){e&&this.trackedState===Mr.TrackedState.TRACKED||!e&&this.trackedState===Mr.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(e?(this.db.addConnection(this,this.y),this.trackedState=Mr.TrackedState.TRACKED):(this.trackedState===Mr.TrackedState.TRACKED&&this.db.removeConnection(this,this.y),this.trackedState=Mr.TrackedState.UNTRACKED))}stopTrackingAll(){if(this.setTracking(!1),this.targetConnection){const e=this.targetBlock().getDescendants(!1);for(let t=0;t<e.length;t++){const n=e[t],o=n.getConnections_(!0);for(let a=0;a<o.length;a++)o[a].setTracking(!1);for(const a of n.getIcons())vi(a)&&a.setBubbleVisible(!1)}}}startTrackingAll(){this.setTracking(!0);let e=[];if(this.type!==Ie.INPUT_VALUE&&this.type!==Ie.NEXT_STATEMENT)return e;const t=this.targetBlock();if(t){let n;t.isCollapsed()?(n=[],t.outputConnection&&n.push(t.outputConnection),t.nextConnection&&n.push(t.nextConnection),t.previousConnection&&n.push(t.previousConnection)):n=t.getConnections_(!0);for(let o=0;o<n.length;o++)e.push(...n[o].startTrackingAll());e.length||(e=[t])}return e}onFailedConnect(e){const t=this.getSourceBlock();if($e()){const n=i.getGroup$$module$build$src$core$events$utils();setTimeout((function(){t.isDisposed()||t.getParent()||(i.setGroup$$module$build$src$core$events$utils(n),this.bumpAwayFrom(e),i.setGroup$$module$build$src$core$events$utils(!1))}).bind(this),i.config$$module$build$src$core$config.bumpDelay)}}disconnectInternal(e=!0){const{parentConnection:t,childConnection:n}=this.getParentAndChildConnections();if(t&&n){var o=i.getGroup$$module$build$src$core$events$utils();o||i.setGroup$$module$build$src$core$events$utils(!0);var a=t.getSourceBlock(),f=n.getSourceBlock();super.disconnectInternal(e),a.queueRender(),f.updateDisabled(),f.queueRender(),f.getSvgRoot().style.display="block",i.setGroup$$module$build$src$core$events$utils(o)}}respawnShadow_(){super.respawnShadow_();const e=this.targetBlock();e&&(e.initSvg(),e.queueRender())}neighbours(e){return this.dbOpposite.getNeighbours(this,e)}connect_(e){super.connect_(e);var t=this.getSourceBlock();e=e.getSourceBlock(),t.updateDisabled(),e.updateDisabled(),e.queueRender(),(t=t.getInputWithBlock(e))&&(t=t.isVisible(),e.getSvgRoot().style.display=t?"block":"none")}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(e){return super.setCheck(e),this.sourceBlock_.queueRender(),this}};(function(e){e=e.TrackedState||(e.TrackedState={}),e[e.WILL_TRACK=-1]="WILL_TRACK",e[e.UNTRACKED=0]="UNTRACKED",e[e.TRACKED=1]="TRACKED"})(Mr),Mr.TrackedState;var xs=class extends jl{constructor(e,t,n){if(super(e,t,n),this.childlessWidth=this.width=this.height=0,this.warningTextDb=new Map,this.mutator=null,this.rendered=!0,this.visuallyDisabled=!1,this.translation="",this.dragging=!1,this.relativeCoords=new ae(0,0),this.dragStrategy=new Bm(this),!e.rendered)throw TypeError("Cannot create a rendered block in a headless workspace");this.workspace=e,this.svgGroup=J(P.G,{}),this.style=e.getRenderer().getConstants().getBlockStyle(null),this.pathObject=e.getRenderer().makePathObject(this.svgGroup,this.style),e=this.pathObject.svgPath,e.tooltip=this,gl(e),this.svgGroup.setAttribute("data-id",this.id),this.doInit_()}initSvg(){if(!this.initialized){for(var e of this.inputList)e.init();for(const t of this.getIcons())t.initView(this.createIconPointerDownListener(t)),t.updateEditable();this.applyColour(),this.pathObject.updateMovable(this.isMovable()||this.isInFlyout),e=this.getSvgRoot(),!this.workspace.options.readOnly&&e&&Le(e,"pointerdown",this,this.onMouseDown),e.parentNode||this.workspace.getCanvas().appendChild(e),this.initialized=!0}}getColourSecondary(){return this.style.colourSecondary}getColourTertiary(){return this.style.colourTertiary}select(){if(this.isShadow()){let e;(e=this.getParent())==null||e.select()}else this.addSelect()}unselect(){if(this.isShadow()){let e;(e=this.getParent())==null||e.unselect()}else this.removeSelect()}setParent(e){const t=this.parentBlock_;if(e!==t){Ln(),super.setParent(e),Ur();var n=this.getSvgRoot();if(!this.workspace.isClearing&&n){var o=this.getRelativeToSurfaceXY();e?e.getSvgRoot().appendChild(n):t&&((e=this.workspace.getCanvas().querySelector(".blocklyDragging"))?this.workspace.getCanvas().insertBefore(n,e):this.workspace.getCanvas().appendChild(n),this.translate(o.x,o.y)),this.applyColour()}}}getRelativeToSurfaceXY(){const e=this.workspace.getLayerManager();if(!e)throw Error("Cannot calculate position because the workspace has not been appended");let t=0,n=0,o=this.getSvgRoot();if(o)do{const a=ut(o);t+=a.x,n+=a.y,o=o.parentNode}while(o&&!e.hasLayer(o));return new ae(t,n)}moveBy(e,t,n){if(this.parentBlock_)throw Error("Block has parent");const o=Re();let a=null;o&&(a=new(X(z.BLOCK_MOVE))(this),n&&a.setReason(n)),e=new ae(e,t),t=this.getRelativeToSurfaceXY(),e=ae.sum(t,e),this.translate(e.x,e.y),this.updateComponentLocations(e),o&&a&&(a.recordNew(),ce(a)),this.workspace.resizeContents()}translate(e,t){this.translation=`translate(${e}, ${t})`,this.relativeCoords=new ae(e,t),this.getSvgRoot().setAttribute("transform",this.getTranslation())}getTranslation(){return this.translation}moveTo(e,t){const n=this.getRelativeToSurfaceXY();this.moveBy(e.x-n.x,e.y-n.y,t)}moveDuringDrag(e){this.translate(e.x,e.y),this.getSvgRoot().setAttribute("transform",this.getTranslation()),this.updateComponentLocations(e)}snapToGrid(){if(!this.isDeadOrDying()&&!this.getParent()&&!this.isInFlyout){var e=this.workspace.getGrid();if(e!=null&&e.shouldSnap()){var t=this.getRelativeToSurfaceXY();e=e.alignXY(t),e!==t&&this.moveTo(e,["snap"])}}}getBoundingRectangle(){return this.getBoundingRectangleWithDimensions(this.getHeightWidth())}getBoundingRectangleWithoutChildren(){return this.getBoundingRectangleWithDimensions({height:this.height,width:this.childlessWidth})}getBoundingRectangleWithDimensions(e){const t=this.getRelativeToSurfaceXY();let n,o;return this.RTL?(n=t.x-e.width,o=t.x):(n=t.x,o=t.x+e.width),new ct(t.y,t.y+e.height,n,o)}markDirty(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(let e=0,t;t=this.inputList[e];e++)t.markDirty()}setCollapsed(e){this.collapsed_!==e&&(super.setCollapsed(e),this.updateCollapsed())}updateCollapsed(){var e=this.isCollapsed();const t=mr,n=Bo;for(let a=0,f;f=this.inputList[a];a++)f.name!==t&&f.setVisible(!e);for(var o of this.getIcons())o.updateCollapsed();e?(e=this.toString(Nm),(o=this.getField(n))?o.setValue(e):(this.getInput(t)||this.appendDummyInput(t)).appendField(new fc(e),n)):(this.updateDisabled(),this.removeInput(t))}tab(e,t){const n=new Um;n.setCurNode(Z.createFieldNode(e)),e=n.getCurNode(),t?n.next():n.prev(),(t=n.getCurNode())&&t!==e&&(t.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(t))}onMouseDown(e){const t=this.workspace.getGesture(e);t&&t.handleBlockStart(e,this)}showHelp(){const e=typeof this.helpUrl=="function"?this.helpUrl():this.helpUrl;e&&window.open(e)}generateContextMenu(){if(this.workspace.options.readOnly||!this.contextMenu)return null;const e=O.registry.getContextMenuOptions(O.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(e),e}showContextMenu(e){const t=this.generateContextMenu();t&&t.length&&(ml(e,t,this.RTL,this.workspace),Kc(this))}updateComponentLocations(e){this.dragging||this.updateConnectionLocations(e),this.updateIconLocations(e),this.updateFieldLocations(e);for(const t of this.getChildren(!1))t.updateComponentLocations(ae.sum(e,t.relativeCoords))}updateConnectionLocations(e){for(const t of this.getConnections_(!1))t.moveToOffset(e)}updateIconLocations(e){for(const t of this.getIcons())t.onLocationChange(e)}updateFieldLocations(e){for(const t of this.inputList)for(const n of t.fieldRow)n.onLocationChange(e)}setDragging(e){(this.dragging=e)?(this.translation="",zn.push(...this.getConnections_(!0)),ke(this.svgGroup,"blocklyDragging")):(zn.length=0,v(this.svgGroup,"blocklyDragging"));for(let t=0;t<this.childBlocks_.length;t++)this.childBlocks_[t].setDragging(e)}setMovable(e){super.setMovable(e),this.pathObject.updateMovable(e)}setEditable(e){super.setEditable(e),e=this.getIcons();for(let t=0;t<e.length;t++)e[t].updateEditable()}setShadow(e){super.setShadow(e),this.applyColour()}setInsertionMarker(e){this.isInsertionMarker_!==e&&(this.isInsertionMarker_=e)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))}getSvgRoot(){return this.svgGroup}dispose(e,t){if(this.disposing=!0,go(),yu(),t&&(this.unplug(e),cr(this)),t=Be(),t instanceof jl){let n=t;for(;n!==null;)n===this&&t.unselect(),n=n.getParent()}super.dispose(!!e),x(this.svgGroup)}disposeInternal(){this.disposing=!0,super.disposeInternal(),Be()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),[...this.warningTextDb.values()].forEach(e=>clearTimeout(e)),this.warningTextDb.clear(),this.getIcons().forEach(e=>e.dispose())}checkAndDelete(){this.workspace.isFlyout||(i.setGroup$$module$build$src$core$events$utils(!0),this.workspace.hideChaff(),this.outputConnection?this.dispose(!1,!0):this.dispose(!0,!0),i.setGroup$$module$build$src$core$events$utils(!1))}toCopyData(){return this.isInsertionMarker_?null:{paster:rp.TYPE,blockState:yn(this,{addCoordinates:!0,addNextBlocks:!1}),typeCounts:kt(this,!0)}}applyColour(){this.pathObject.applyColour(this);const e=this.getIcons();for(let t=0;t<e.length;t++)e[t].applyColour();for(let t=0,n;n=this.inputList[t];t++)for(let o=0,a;a=n.fieldRow[o];o++)a.applyColour()}updateDisabled(){const e=!this.isEnabled()||this.getInheritedDisabled();if(this.visuallyDisabled===e){let t;(t=this.getNextBlock())==null||t.updateDisabled()}else{this.applyColour(),this.visuallyDisabled=e;for(const t of this.getChildren(!1))t.updateDisabled()}}setWarningText(e,t=""){if(t)this.warningTextDb.has(t)&&(clearTimeout(this.warningTextDb.get(t)),this.warningTextDb.delete(t));else{for(var n of this.warningTextDb.values())clearTimeout(n);this.warningTextDb.clear()}if(this.workspace.isDragging())this.warningTextDb.set(t,setTimeout(()=>{this.isDeadOrDying()||(this.warningTextDb.delete(t),this.setWarningText(e,t))},100));else if(this.isInFlyout&&(e=null),n=this.getIcon(Jo.TYPE),e){let o=this.getSurroundParent(),a=null;for(;o;)o.isCollapsed()&&(a=o),o=o.getSurroundParent();a&&a.setWarningText(i.Msg$$module$build$src$core$msg.COLLAPSED_WARNINGS_WARNING,xs.COLLAPSED_WARNING_ID),n?n.addMessage(e,t):this.addIcon(new Jo(this).addMessage(e,t))}else n&&(t?(n.addMessage("",t),n.getText()||this.removeIcon(Jo.TYPE)):this.removeIcon(Jo.TYPE))}setMutator(e){this.removeIcon(i.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE),e&&this.addIcon(e)}addIcon(e){return super.addIcon(e),e instanceof i.MutatorIcon$$module$build$src$core$icons$mutator_icon&&(this.mutator=e),e.initView(this.createIconPointerDownListener(e)),e.applyColour(),e.updateEditable(),this.queueRender(),e}createIconPointerDownListener(e){return t=>{this.isDeadOrDying()||(t=this.workspace.getGesture(t))&&t.setStartIcon(e)}}removeIcon(e){const t=super.removeIcon(e);return e.equals(i.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE)&&(this.mutator=null),this.queueRender(),t}setEnabled(e){R("setEnabled","v11","v12","the setDisabledReason method of BlockSvg");const t=this.isEnabled();super.setEnabled(e),this.isEnabled()===t||this.getInheritedDisabled()||this.updateDisabled()}setDisabledReason(e,t){const n=this.isEnabled();super.setDisabledReason(e,t),this.isEnabled()===n||this.getInheritedDisabled()||this.updateDisabled()}setHighlighted(e){this.pathObject.updateHighlighted(e)}addSelect(){this.pathObject.updateSelected(!0)}removeSelect(){this.pathObject.updateSelected(!1)}setDeleteStyle(e){this.pathObject.updateDraggingDelete(e)}getColour(){return this.style.colourPrimary}setColour(e){super.setColour(e),e=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(e.style),this.style=e.style,this.styleName_=e.name,this.applyColour()}setStyle(e){const t=this.workspace.getRenderer().getConstants().getBlockStyle(e);if(this.styleName_=e,t)this.hat=t.hat,this.pathObject.setStyle(t),this.colour_=t.colourPrimary,this.style=t,this.applyColour();else throw Error("Invalid style name: "+e)}bringToFront(e=!1){let t=this;if(!t.isDeadOrDying())do{const n=t.getSvgRoot(),o=n.parentNode,a=o.childNodes;if(a[a.length-1]!==n&&o.appendChild(n),e)break;t=t.getParent()}while(t)}setPreviousStatement(e,t){super.setPreviousStatement(e,t),this.queueRender()}setNextStatement(e,t){super.setNextStatement(e,t),this.queueRender()}setOutput(e,t){super.setOutput(e,t),this.queueRender()}setInputsInline(e){super.setInputsInline(e),this.queueRender()}removeInput(e,t){return e=super.removeInput(e,t),this.queueRender(),e}moveNumberedInputBefore(e,t){super.moveNumberedInputBefore(e,t),this.queueRender()}appendInput(e){return super.appendInput(e),this.queueRender(),e}setConnectionTracking(e){if(this.previousConnection&&this.previousConnection.setTracking(e),this.outputConnection&&this.outputConnection.setTracking(e),this.nextConnection){this.nextConnection.setTracking(e);var t=this.nextConnection.targetBlock();t&&t.setConnectionTracking(e)}if(!this.collapsed_)for(t=0;t<this.inputList.length;t++){var n=this.inputList[t].connection;n&&(n.setTracking(e),(n=n.targetBlock())&&n.setConnectionTracking(e))}}getConnections_(e){const t=[];if(this.outputConnection&&t.push(this.outputConnection),this.previousConnection&&t.push(this.previousConnection),this.nextConnection&&t.push(this.nextConnection),e||!this.collapsed_)for(let n=0,o;o=this.inputList[n];n++)o.connection&&t.push(o.connection);return t}lastConnectionInStack(e){return super.lastConnectionInStack(e)}getMatchingConnection(e,t){return super.getMatchingConnection(e,t)}makeConnection_(e){return new Mr(this,e)}getNextBlock(){return super.getNextBlock()}getPreviousBlock(){return super.getPreviousBlock()}bumpNeighbours(){const e=this.getRootBlock();if(!(this.isDeadOrDying()||this.workspace.isDragging()||e.isInFlyout))for(const t of this.getConnections_(!1)){if(t.isSuperior()){let n;(n=t.targetBlock())==null||n.bumpNeighbours()}for(const n of t.neighbours(i.config$$module$build$src$core$config.snapRadius))n.getSourceBlock().getRootBlock()!==e&&(t.isConnected()&&n.isConnected()||(t.isSuperior()?n.bumpAwayFrom(t,!1):t.bumpAwayFrom(n,!0)))}}scheduleSnapAndBump(){this.snapToGrid(),this.bumpNeighbours()}positionNearConnection(e,t,n){if(e.type===Ie.NEXT_STATEMENT||e.type===Ie.INPUT_VALUE){let o=t.x;t=t.y,o+=n.x-e.getOffsetInBlock().x,t+=n.y-e.getOffsetInBlock().y,this.moveBy(o,t)}}getChildren(e){return super.getChildren(e)}queueRender(){return ll(this)}render(){this.queueRender(),Sr()}renderEfficiently(){Ln(),this.isCollapsed()&&this.updateCollapsed(),this.isEnabled()||this.updateDisabled(),this.workspace.getRenderer().render(this),this.tightenChildrenEfficiently(),Ur(),this.updateMarkers_()}tightenChildrenEfficiently(){for(const e of this.inputList){const t=e.connection;t&&t.tightenEfficiently()}this.nextConnection&&this.nextConnection.tightenEfficiently()}updateMarkers_(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(Wo.LOCAL_MARKER).draw();for(const e of this.inputList)for(const t of e.fieldRow)t.updateMarkers_()}setCursorSvg(e){this.pathObject.setCursorSvg(e)}setMarkerSvg(e){this.pathObject.setMarkerSvg(e)}getHeightWidth(){let e=this.height,t=this.width;var n=this.getNextBlock();if(n){n=n.getHeightWidth();const o=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;e+=n.height-o,t=Math.max(t,n.width)}return{height:e,width:t}}fadeForReplacement(e){this.pathObject.updateReplacementFade(e)}highlightShapeForInput(e,t){this.pathObject.updateShapeForInputHighlight(e,t)}setDragStrategy(e){this.dragStrategy=e}isMovable(){return this.dragStrategy.isMovable()}startDrag(e){this.dragStrategy.startDrag(e)}drag(e,t){this.dragStrategy.drag(e,t)}endDrag(e){this.dragStrategy.endDrag(e)}revertDrag(){this.dragStrategy.revertDrag()}toFlyoutInfo(){const e=Object.assign({},{kind:"BLOCK"},yn(this)),t=new Set(["id","height","width","pinned","enabled"]),n=function(o){for(const a in o)t.has(a)?delete o[a]:typeof o[a]=="object"&&n(o[a])};return n(e),[e]}};xs.INLINE=-1,xs.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_";var Gm=class{constructor(){}onDragEnter(e){}onDragOver(e){}onDragExit(e){}onDrop(e){}getClientRect(){return null}shouldPreventMove(e){return!1}},vg=class extends Gm{constructor(){super(),this.wouldDelete_=!1}wouldDelete(e){return e instanceof xs?(e=!e.getParent()&&e.isDeletable(),this.updateWouldDelete_(e)):this.updateWouldDelete_(tr(e)&&e.isDeletable()),this.wouldDelete_}updateWouldDelete_(e){this.wouldDelete_=e}},Gf=class extends Rr{constructor(e,t){super(t),this.type=z.TRASHCAN_OPEN,this.isOpen=e}toJson(){const e=super.toJson();if(this.isOpen===void 0)throw Error("Whether this is already open or not is undefined. Either pass a value to the constructor, or call fromJson");return e.isOpen=this.isOpen,e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new Gf),t.isOpen=e.isOpen,t}};d(ne.EVENT,z.TRASHCAN_OPEN,Gf);var Vm=class extends vg{constructor(e){super(),this.workspace=e,this.id="trashcan",this.contents=[],this.flyout=null,this.isLidOpen=!1,this.minOpenness=0,this.lidTask=this.svgLid=this.svgGroup=null,this.top=this.left=this.lidOpen=0,this.initialized=!1,0>=this.workspace.options.maxTrashcanContents||(e=new Ds({scrollbars:!0,parentWorkspace:this.workspace,rtl:this.workspace.RTL,oneBasedIndex:this.workspace.options.oneBasedIndex,renderer:this.workspace.options.renderer,rendererOverrides:this.workspace.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace.horizontalLayout?(e.toolboxPosition=this.workspace.toolboxPosition===Fe.TOP?Fe.BOTTOM:Fe.TOP,this.flyout=new(D(ne.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace.options,!0))(e)):(e.toolboxPosition=this.workspace.toolboxPosition===Fe.RIGHT?Fe.LEFT:Fe.RIGHT,this.flyout=new(D(ne.FLYOUTS_VERTICAL_TOOLBOX,this.workspace.options,!0))(e)),this.workspace.addChangeListener(this.onDelete.bind(this)))}createDom(){this.svgGroup=J(P.G,{class:"blocklyTrash"});let e;const t=String(Math.random()).substring(2);e=J(P.CLIPPATH,{id:"blocklyTrashBodyClipPath"+t},this.svgGroup),J(P.RECT,{width:Ja,height:Sg,y:qa},e);const n=J(P.IMAGE,{width:Mn.width,x:-0,height:Mn.height,y:-32,"clip-path":"url(#blocklyTrashBodyClipPath"+t+")"},this.svgGroup);return n.setAttributeNS(rr,"xlink:href",this.workspace.options.pathToMedia+Mn.url),e=J(P.CLIPPATH,{id:"blocklyTrashLidClipPath"+t},this.svgGroup),J(P.RECT,{width:Ja,height:qa},e),this.svgLid=J(P.IMAGE,{width:Mn.width,x:-0,height:Mn.height,y:-32,"clip-path":"url(#blocklyTrashLidClipPath"+t+")"},this.svgGroup),this.svgLid.setAttributeNS(rr,"xlink:href",this.workspace.options.pathToMedia+Mn.url),nt(this.svgGroup,"pointerdown",this,this.blockMouseDownWhenOpenable),nt(this.svgGroup,"pointerup",this,this.click),nt(n,"pointerover",this,this.mouseOver),nt(n,"pointerout",this,this.mouseOut),this.animateLid(),this.svgGroup}init(){0<this.workspace.options.maxTrashcanContents&&(fe(this.flyout.createDom(P.SVG),this.workspace.getParentSvg()),this.flyout.init(this.workspace)),this.workspace.getComponentManager().addComponent({component:this,weight:vt.ComponentWeight.TRASHCAN_WEIGHT,capabilities:[vt.Capability.AUTOHIDEABLE,vt.Capability.DELETE_AREA,vt.Capability.DRAG_TARGET,vt.Capability.POSITIONABLE]}),this.initialized=!0,this.setLidOpen(!1)}dispose(){this.workspace.getComponentManager().removeComponent("trashcan"),this.svgGroup&&x(this.svgGroup),this.lidTask&&clearTimeout(this.lidTask)}hasContents(){return!!this.contents.length}contentsIsOpen(){return!!this.flyout&&this.flyout.isVisible()}openFlyout(){if(!this.contentsIsOpen()){var e=this.contents.map(function(n){return JSON.parse(n)}),t=this.workspace.getParentSvg().style;t.cursor="wait",setTimeout(()=>{let n;(n=this.flyout)==null||n.show(e),t.cursor="";let o;(o=this.workspace.scrollbar)==null||o.setVisible(!1)},10),this.fireUiEvent(!0)}}closeFlyout(){if(this.contentsIsOpen()){var e;(e=this.flyout)==null||e.hide();var t;(t=this.workspace.scrollbar)==null||t.setVisible(!0),this.fireUiEvent(!1),this.workspace.recordDragTargets()}}autoHide(e){!e&&this.flyout&&this.closeFlyout()}emptyContents(){this.hasContents()&&(this.contents.length=0,this.setMinOpenness(0),this.closeFlyout())}position(e,t){if(this.initialized){var n=ol(this.workspace,e);e=Cc(n,new oe(Ja,Sg+qa),Sb,Wm,e,this.workspace),t=nu(e,Wm,n.vertical===si.TOP?ii.DOWN:ii.UP,t),this.top=t.top,this.left=t.left;var o;(o=this.svgGroup)==null||o.setAttribute("transform","translate("+this.left+","+this.top+")")}}getBoundingRectangle(){return new ct(this.top,this.top+Sg+qa,this.left,this.left+Ja)}getClientRect(){if(!this.svgGroup)return null;var e=this.svgGroup.getBoundingClientRect();const t=e.top+Ib-Cg;return e=e.left+Cb-Cg,new ct(t,t+qa+Sg+2*Cg,e,e+Ja+2*Cg)}onDragOver(e){this.setLidOpen(this.wouldDelete_)}onDragExit(e){this.setLidOpen(!1)}onDrop(e){setTimeout(this.setLidOpen.bind(this,!1),100)}setLidOpen(e){this.isLidOpen!==e&&(this.lidTask&&clearTimeout(this.lidTask),this.isLidOpen=e,this.animateLid())}animateLid(){const e=Ob;var t=1/(e+1);this.lidOpen+=this.isLidOpen?t:-t,this.lidOpen=Math.min(Math.max(this.lidOpen,this.minOpenness),1),this.setLidAngle(this.lidOpen*jm),t=zm+this.lidOpen*(Rb-zm),this.svgGroup&&(this.svgGroup.style.opacity=`${t}`),this.lidOpen>this.minOpenness&&1>this.lidOpen&&(this.lidTask=setTimeout(this.animateLid.bind(this),wb/e))}setLidAngle(e){const t=this.workspace.toolboxPosition===Fe.RIGHT||this.workspace.horizontalLayout&&this.workspace.RTL;let n;(n=this.svgLid)==null||n.setAttribute("transform","rotate("+(t?-e:e)+","+(t?4:Ja-4)+","+(qa-2)+")")}setMinOpenness(e){this.minOpenness=e,this.isLidOpen||this.setLidAngle(e*jm)}closeLid(){this.setLidOpen(!1)}click(){this.hasContents()&&!this.workspace.isDragging()&&this.openFlyout()}fireUiEvent(e){e=new(X(z.TRASHCAN_OPEN))(e,this.workspace.id),ce(e)}blockMouseDownWhenOpenable(e){!this.contentsIsOpen()&&this.hasContents()&&e.stopPropagation()}mouseOver(){this.hasContents()&&this.setLidOpen(!0)}mouseOut(){this.setLidOpen(!1)}onDelete(e){if(!(0>=this.workspace.options.maxTrashcanContents||!K(e)||e.wasShadow)){if(!e.oldJson)throw Error("Encountered a delete event without proper oldJson");if(e=JSON.stringify(this.cleanBlockJson(e.oldJson)),!this.contents.includes(e)){for(this.contents.unshift(e);this.contents.length>this.workspace.options.maxTrashcanContents;)this.contents.pop();this.setMinOpenness(kb)}}}cleanBlockJson(e){function t(n){if(n){if(delete n.id,delete n.x,delete n.y,delete n.enabled,delete n.disabledReasons,n.icons&&n.icons.comment){var o=n.icons.comment;delete o.height,delete o.width,delete o.pinned}o=n.inputs;for(var a in o){var f=o[a];const E=f.block;f=f.shadow,E&&t(E),f&&t(f)}n.next&&(a=n.next,n=a.block,a=a.shadow,n&&t(n),a&&t(a))}}return e=JSON.parse(JSON.stringify(e)),t(e),Object.assign({},{kind:"BLOCK"},e)}},Ja=47,Sg=44,qa=16,Wm=20,Sb=20,Cg=10,Cb=0,Ib=32,kb=.1,wb=80,Ob=4,zm=.4,Rb=.8,jm=45,dt=class{constructor(){this.shortcuts=new Map,this.keyMap=new Map,this.reset()}reset(){this.shortcuts.clear(),this.keyMap.clear()}register(e,t){if(this.shortcuts.get(e.name)&&!t)throw Error(`Shortcut named "${e.name}" already exists.`);if(this.shortcuts.set(e.name,e),t=e.keyCodes,t!=null&&t.length)for(const n of t)this.addKeyMapping(n,e.name,!!e.allowCollision)}unregister(e){return this.shortcuts.get(e)?(this.removeAllKeyMappings(e),this.shortcuts.delete(e),!0):(console.warn(`Keyboard shortcut named "${e}" not found.`),!1)}addKeyMapping(e,t,n){e=`${e}`;const o=this.keyMap.get(e);if(o&&!n)throw Error(`Shortcut named "${t}" collides with shortcuts "${o}"`);o&&n?o.unshift(t):this.keyMap.set(e,[t])}removeKeyMapping(e,t,n){const o=this.keyMap.get(e);if(!o)return n||console.warn(`No keyboard shortcut named "${t}" registered with key code "${e}"`),!1;const a=o.indexOf(t);return-1<a?(o.splice(a,1),o.length===0&&this.keyMap.delete(e),!0):(n||console.warn(`No keyboard shortcut named "${t}" registered with key code "${e}"`),!1)}removeAllKeyMappings(e){for(const t of this.keyMap.keys())this.removeKeyMapping(t,e,!0)}setKeyMap(e){this.keyMap.clear();for(const t in e)this.keyMap.set(t,e[t])}getKeyMap(){const e=Object.create(null);for(const[t,n]of this.keyMap)e[t]=n;return e}getRegistry(){const e=Object.create(null);for(const[t,n]of this.shortcuts)e[t]=n;return dr(Object.create(null),e)}onKeyDown(e,t){var n=this.serializeKeyEvent(t);if(n=this.getShortcutNamesByKeyCode(n),!n)return!1;for(const o of n){if(n=this.shortcuts.get(o),!n||n.preconditionFn&&!n.preconditionFn(e))continue;let a,f;if((f=(a=n).callback)!=null&&f.call(a,e,t,n))return!0}return!1}getShortcutNamesByKeyCode(e){return this.keyMap.get(e)||[]}getKeyCodesByShortcutName(e){const t=[];for(const[n,o]of this.keyMap)-1<o.indexOf(e)&&t.push(n);return t}serializeKeyEvent(e){let t="";for(const n in dt.modifierKeys)e.getModifierState(n)&&(t!==""&&(t+="+"),t+=n);return t!==""&&e.keyCode?t+="+"+e.keyCode:e.keyCode&&(t=String(e.keyCode)),t}checkModifiers(e){for(const t of e)if(!(t in dt.modifierKeys))throw Error(t+" is not a valid modifier key.")}createSerializedKey(e,t){let n="";if(t){this.checkModifiers(t);for(const o in dt.modifierKeys)t.includes(dt.modifierKeys[o])&&(n!==""&&(n+="+"),n+=o)}return n!==""&&e?n+="+"+e:e&&(n=`${e}`),n}};dt.registry=new dt,function(e){e=e.modifierKeys||(e.modifierKeys={}),e[e.Shift=16]="Shift",e[e.Control=17]="Control",e[e.Alt=18]="Alt",e[e.Meta=91]="Meta"}(dt);var Vf=null,Wf=null,Lb={duplicateInternal:ha,copyInternal:vo},ip={};ip.BlockPaster=rp,ip.TEST_ONLY=Lb,ip.paste=cn,ip.registry=xi;var zi;(function(e){e.ESCAPE="escape",e.DELETE="delete",e.COPY="copy",e.CUT="cut",e.PASTE="paste",e.UNDO="undo",e.REDO="redo"})(zi||(zi={}));var Xl=null,Kl=null,Qa=null;ga();var ji={};ji.names=zi,ji.registerCopy=xu,ji.registerCut=pa,ji.registerDefaultShortcuts=ga,ji.registerDelete=Ss,ji.registerEscape=Kr,ji.registerPaste=Yr,ji.registerRedo=wl,ji.registerUndo=Cs;var Ab=class{constructor(e,t){this.procedureModelClass=e,this.parameterModelClass=t,this.priority=Ma}save(e){return e=e.getProcedureMap().getProcedures().map(t=>Ol(t)),e.length?e:null}load(e,t){const n=t.getProcedureMap();for(const o of e)n.add(fa(this.procedureModelClass,this.parameterModelClass,o,t))}clear(e){e.getProcedureMap().clear()}},Ig={};Ig.ProcedureSerializer=Ab,Ig.loadProcedure=fa,Ig.saveProcedure=Ol;var Xm=class{constructor(){this.priority=ec}save(e){const t=[];for(const n of e.getAllVariables())e={name:n.name,id:n.getId()},n.type&&(e.type=n.type),t.push(e);return t.length?t:null}load(e,t){for(const n of e)t.createVariable(n.name,n.type,n.id)}clear(e){e.getVariableMap().clear()}};_i("variables",new Xm);var Km={};Km.VariableSerializer=Xm;var zf={};zf.load=Jr,zf.save=Rl;var Db={blocks:ns,exceptions:Ui,priorities:$n,procedures:Ig,registry:Kt,variables:Km,workspaceComments:Nn,workspaces:zf},jf=class{constructor(e,t,n,o,a){this.workspace=e,this.oldHostMetrics=this.corner_=this.vScroll=this.hScroll=null,t=t===void 0?!0:t,n=n===void 0?!0:n;const f=t&&n;t&&(this.hScroll=new Nt(e,!0,f,o,a)),n&&(this.vScroll=new Nt(e,!1,f,o,a)),f&&(this.corner_=J(P.RECT,{height:Nt.scrollbarThickness,width:Nt.scrollbarThickness,class:"blocklyScrollbarBackground"}),fe(this.corner_,e.getBubbleCanvas()))}dispose(){x(this.corner_),this.oldHostMetrics=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)}resize(){const e=this.workspace.getMetrics();if(e){var t=!1,n=!1;if(this.oldHostMetrics&&this.oldHostMetrics.viewWidth===e.viewWidth&&this.oldHostMetrics.viewHeight===e.viewHeight&&this.oldHostMetrics.absoluteTop===e.absoluteTop&&this.oldHostMetrics.absoluteLeft===e.absoluteLeft?(this.oldHostMetrics&&this.oldHostMetrics.scrollWidth===e.scrollWidth&&this.oldHostMetrics.viewLeft===e.viewLeft&&this.oldHostMetrics.scrollLeft===e.scrollLeft||(t=!0),this.oldHostMetrics&&this.oldHostMetrics.scrollHeight===e.scrollHeight&&this.oldHostMetrics.viewTop===e.viewTop&&this.oldHostMetrics.scrollTop===e.scrollTop||(n=!0)):n=t=!0,t||n){try{i.disable$$module$build$src$core$events$utils(),this.hScroll&&t&&this.hScroll.resize(e),this.vScroll&&n&&this.vScroll.resize(e)}finally{i.enable$$module$build$src$core$events$utils()}this.workspace.maybeFireViewportChangeEvent()}if(this.hScroll&&this.vScroll){if(!this.oldHostMetrics||this.oldHostMetrics.viewWidth!==e.viewWidth||this.oldHostMetrics.absoluteLeft!==e.absoluteLeft){let o;(o=this.corner_)==null||o.setAttribute("x",String(this.vScroll.position.x))}if(!this.oldHostMetrics||this.oldHostMetrics.viewHeight!==e.viewHeight||this.oldHostMetrics.absoluteTop!==e.absoluteTop){let o;(o=this.corner_)==null||o.setAttribute("y",String(this.hScroll.position.y))}}this.oldHostMetrics=e}}canScrollHorizontally(){return!!this.hScroll}canScrollVertically(){return!!this.vScroll}setOrigin(e,t){this.hScroll&&this.hScroll.setOrigin(e,t),this.vScroll&&this.vScroll.setOrigin(e,t)}set(e,t,n){this.hScroll&&this.hScroll.set(e,!1),this.vScroll&&this.vScroll.set(t,!1),(n||n===void 0)&&(e={},this.hScroll&&(e.x=this.hScroll.getRatio_()),this.vScroll&&(e.y=this.vScroll.getRatio_()),this.workspace.setMetrics(e))}setX(e){this.hScroll&&this.hScroll.set(e,!0)}setY(e){this.vScroll&&this.vScroll.set(e,!0)}setContainerVisible(e){this.hScroll&&this.hScroll.setContainerVisible(e),this.vScroll&&this.vScroll.setContainerVisible(e)}isVisible(){let e=!1;return this.hScroll&&(e=this.hScroll.isVisible()),this.vScroll&&(e=e||this.vScroll.isVisible()),e}setVisible(e){this.hScroll&&this.hScroll.setVisibleInternal(e),this.vScroll&&this.vScroll.setVisibleInternal(e)}resizeContent(e){this.hScroll&&this.hScroll.resizeContentHorizontal(e),this.vScroll&&this.vScroll.resizeContentVertical(e)}resizeView(e){this.hScroll&&this.hScroll.resizeViewHorizontal(e),this.vScroll&&this.vScroll.resizeViewVertical(e)}},Xf=class{constructor(e){this.workspace_=e}getDimensionsPx_(e){let t=0,n=0;return e&&(t=e.getWidth(),n=e.getHeight()),new oe(t,n)}getFlyoutMetrics(e){return e=this.getDimensionsPx_(this.workspace_.getFlyout(e)),{width:e.width,height:e.height,position:this.workspace_.toolboxPosition}}getToolboxMetrics(){const e=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:e.width,height:e.height,position:this.workspace_.toolboxPosition}}getSvgMetrics(){return this.workspace_.getCachedParentSvgSize()}getAbsoluteMetrics(){let e=0,t=0;const n=this.getToolboxMetrics(),o=this.getFlyoutMetrics(),a=!!this.workspace_.getToolbox();var f;const E=!((f=this.workspace_.getFlyout())!=null&&f.autoClose);f=a?n.position:o.position;const w=f===Fe.TOP;return f===Fe.LEFT&&(a&&(e+=n.width),E&&(e+=o.width)),w&&(a&&(t+=n.height),E&&(t+=o.height)),{top:t,left:e}}getViewMetrics(e){e=e?this.workspace_.scale:1;const t=this.getSvgMetrics(),n=this.getToolboxMetrics(),o=this.getFlyoutMetrics(),a=!!this.workspace_.getToolbox();var f;const E=!((f=this.workspace_.getFlyout())!=null&&f.autoClose);f=a?n.position:o.position;const w=f===Fe.LEFT||f===Fe.RIGHT;return(f===Fe.TOP||f===Fe.BOTTOM)&&(a&&(t.height-=n.height),E&&(t.height-=o.height)),w&&(a&&(t.width-=n.width),E&&(t.width-=o.width)),{height:t.height/e,width:t.width/e,top:-this.workspace_.scrollY/e,left:-this.workspace_.scrollX/e}}getContentMetrics(e){e=e?1:this.workspace_.scale;const t=this.workspace_.getBlocksBoundingBox();return{height:(t.bottom-t.top)*e,width:(t.right-t.left)*e,top:t.top*e,left:t.left*e}}hasFixedEdges(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()}getComputedFixedEdges_(e){if(!this.hasFixedEdges())return{};const t=this.workspace_.isMovableHorizontally(),n=this.workspace_.isMovableVertically();e=e||this.getViewMetrics(!1);const o={};return n||(o.top=e.top,o.bottom=e.top+e.height),t||(o.left=e.left,o.right=e.left+e.width),o}getPaddedContent_(e,t){const n=t.top+t.height,o=t.left+t.width,a=e.width;e=e.height;const f=a/2,E=e/2;return{top:Math.min(t.top-E,n-e),bottom:Math.max(n+E,t.top+e),left:Math.min(t.left-f,o-a),right:Math.max(o+f,t.left+a)}}getScrollMetrics(e,t,n){e=e?this.workspace_.scale:1,t=t||this.getViewMetrics(!1);var o=n||this.getContentMetrics();n=this.getComputedFixedEdges_(t),t=this.getPaddedContent_(t,o),o=n.top!==void 0?n.top:t.top;const a=n.left!==void 0?n.left:t.left;return{top:o/e,left:a/e,width:((n.right!==void 0?n.right:t.right)-a)/e,height:((n.bottom!==void 0?n.bottom:t.bottom)-o)/e}}getUiMetrics(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}}getMetrics(){const e=this.getToolboxMetrics(),t=this.getFlyoutMetrics(!0),n=this.getSvgMetrics(),o=this.getAbsoluteMetrics(),a=this.getViewMetrics(),f=this.getContentMetrics(),E=this.getScrollMetrics(!1,a,f);return{contentHeight:f.height,contentWidth:f.width,contentTop:f.top,contentLeft:f.left,scrollHeight:E.height,scrollWidth:E.width,scrollTop:E.top,scrollLeft:E.left,viewHeight:a.height,viewWidth:a.width,viewTop:a.top,viewLeft:a.left,absoluteTop:o.top,absoluteLeft:o.left,svgHeight:n.height,svgWidth:n.width,toolboxWidth:e.width,toolboxHeight:e.height,toolboxPosition:e.position,flyoutWidth:t.width,flyoutHeight:t.height}}};d(ne.METRICS_MANAGER,hr,Xf),"Blockly"in globalThis||(globalThis.Blockly={Msg:xa});var Ym=class extends _g{constructor(){super(),this.GRID_UNIT=4,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter=null,this.replacementGlowFilterId="",this.SQUARED=this.ROUNDED=this.HEXAGONAL=this.replacementGlowFilter=null,this.SMALL_PADDING=this.GRID_UNIT,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_DEFAULT_WIDTH=6*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=8*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT}setFontConstants_(e){super.setFontConstants_(e),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING}init(){super.init(),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth}setDynamicProperties_(e){super.setDynamicProperties_(e),this.SELECTED_GLOW_COLOUR=e.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;const t=Number(e.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=t&&!isNaN(t)?t:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=e.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(e=Number(e.getComponentStyle("replacementGlowSize")))&&!isNaN(e)?e:this.REPLACEMENT_GLOW_SIZE}dispose(){super.dispose(),this.selectedGlowFilter&&x(this.selectedGlowFilter),this.replacementGlowFilter&&x(this.replacementGlowFilter)}makeStartHat(){const e=this.START_HAT_HEIGHT,t=this.START_HAT_WIDTH,n=jt("c",[Ae(25,-e),Ae(71,-e),Ae(t,0)]);return{height:e,width:t,path:n}}makeHexagonal(){function e(n,o,a){var f=n/2;return f=f>t?t:f,a=a?-1:1,n=(o?-1:1)*n/2,Wr(-a*f,n)+Wr(a*f,n)}const t=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width(n){return n/=2,n>t?t:n},height(n){return n},connectionOffsetY(n){return n/2},connectionOffsetX(n){return-n},pathDown(n){return e(n,!1,!1)},pathUp(n){return e(n,!0,!1)},pathRightDown(n){return e(n,!1,!0)},pathRightUp(n){return e(n,!1,!0)}}}makeRounded(){function e(o,a,f){const E=o>n?o-n:0;o=(o>n?n:o)/2;const w=f===a?"0":"1";return Tt("a","0 0,"+w,o,Ae((f?1:-1)*o,(a?-1:1)*o))+_e("v",(a?-1:1)*E)+Tt("a","0 0,"+w,o,Ae((f?-1:1)*o,(a?-1:1)*o))}const t=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,n=2*t;return{type:this.SHAPES.ROUND,isDynamic:!0,width(o){return o/=2,o>t?t:o},height(o){return o},connectionOffsetY(o){return o/2},connectionOffsetX(o){return-o},pathDown(o){return e(o,!1,!1)},pathUp(o){return e(o,!0,!1)},pathRightDown(o){return e(o,!1,!0)},pathRightUp(o){return e(o,!1,!0)}}}makeSquared(){function e(n,o,a){n-=2*t;const f=a===o?"0":"1";return Tt("a","0 0,"+f,t,Ae((a?1:-1)*t,(o?-1:1)*t))+_e("v",(o?-1:1)*n)+Tt("a","0 0,"+f,t,Ae((a?-1:1)*t,(o?-1:1)*t))}const t=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width(n){return t},height(n){return n},connectionOffsetY(n){return n/2},connectionOffsetX(n){return-n},pathDown(n){return e(n,!1,!1)},pathUp(n){return e(n,!0,!1)},pathRightDown(n){return e(n,!1,!0)},pathRightUp(n){return e(n,!1,!0)}}}shapeFor(e){let t=e.getCheck();switch(!t&&e.targetConnection&&(t=e.targetConnection.getCheck()),e.type){case Ie.INPUT_VALUE:case Ie.OUTPUT_VALUE:if(e=e.getSourceBlock().getOutputShape(),e!==null)switch(e){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return t&&t.includes("Boolean")?this.HEXAGONAL:t&&t.includes("Number")?this.ROUNDED:(t&&t.includes("String"),this.ROUNDED);case Ie.PREVIOUS_STATEMENT:case Ie.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}}makeNotch(){function e(Se){return jt("c",[Ae(Se*a/2,0),Ae(Se*a*3/4,E/2),Ae(Se*a,E)])+vl([Ae(Se*a,f)])+jt("c",[Ae(Se*a/4,E/2),Ae(Se*a/2,E),Ae(Se*a,E)])+_e("h",Se*o)+jt("c",[Ae(Se*a/2,0),Ae(Se*a*3/4,-(E/2)),Ae(Se*a,-E)])+vl([Ae(Se*a,-f)])+jt("c",[Ae(Se*a/4,-(E/2)),Ae(Se*a/2,-E),Ae(Se*a,-E)])}const t=this.NOTCH_WIDTH,n=this.NOTCH_HEIGHT,o=t/3,a=o/3,f=n/2,E=f/2,w=e(1),q=e(-1);return{type:this.SHAPES.NOTCH,width:t,height:n,pathLeft:w,pathRight:q}}makeInsideCorners(){const e=this.CORNER_RADIUS,t=Tt("a","0 0,0",e,Ae(-e,e)),n=Tt("a","0 0,1",e,Ae(-e,e)),o=Tt("a","0 0,0",e,Ae(e,e)),a=Tt("a","0 0,1",e,Ae(e,e));return{width:e,height:e,pathTop:t,pathBottom:o,rightWidth:e,rightHeight:e,pathTopRight:n,pathBottomRight:a}}generateSecondaryColour_(e){return Vr("#000",e,.15)||e}generateTertiaryColour_(e){return Vr("#000",e,.25)||e}createDom(e,t,n){super.createDom(e,t,n),e=J(P.DEFS,{},e),t=J(P.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),J(P.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},t),n=J(P.FECOMPONENTTRANSFER,{result:"outBlur"},t),J(P.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),J(P.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},t),J(P.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),this.selectedGlowFilterId=t.id,this.selectedGlowFilter=t,e=J(P.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),J(P.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},e),t=J(P.FECOMPONENTTRANSFER,{result:"outBlur"},e),J(P.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},t),J(P.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},e),J(P.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),J(P.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},e),this.replacementGlowFilterId=e.id,this.replacementGlowFilter=e}getCSS_(e){return[`${e} .blocklyText,`,`${e} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e} .blocklyTextInputBubble textarea {`,"font-weight: normal;","}",`${e} .blocklyText {`,"fill: #fff;","}",`${e} .blocklyNonEditableText>rect:not(.blocklyDropdownRect),`,`${e} .blocklyEditableText>rect:not(.blocklyDropdownRect) {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"}",`${e} .blocklyNonEditableText>text,`,`${e} .blocklyEditableText>text,`,`${e} .blocklyNonEditableText>g>text,`,`${e} .blocklyEditableText>g>text {`,"fill: #575E75;","}",`${e} .blocklyFlyoutLabelText {`,"fill: #575E75;","}",`${e} .blocklyText.blocklyBubbleText {`,"fill: #575E75;","}",`${e} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>rect,",`${e} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",`${e} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"color: #575E75;","}",`${e} .blocklyDropdownText {`,"fill: #fff !important;","}",`${e}.blocklyWidgetDiv .goog-menuitem,`,`${e}.blocklyDropDownDiv .goog-menuitem {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e}.blocklyDropDownDiv .goog-menuitem-content {`,"color: #fff;","}",`${e} .blocklyHighlightedConnectionPath {`,`stroke: ${this.SELECTED_GLOW_COLOUR};`,"}",`${e} .blocklyDisabled > .blocklyOutlinePath {`,`fill: url(#blocklyDisabledPattern${this.randomIdentifier})`,"}",`${e} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},Jm=class extends Tg{constructor(e,t){super(e,t)}draw(){const e=this.block_.pathObject;e.beginDrawing(),this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights(),e.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&e.flipRTL(),this.recordSizeOnBlock_(),this.info_.outputConnection&&(e.outputShapeType=this.info_.outputConnection.shape.type),e.endDrawing()}drawOutline_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):super.drawOutline_()}drawLeft_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():super.drawLeft_()}drawRightSideRow_(e){if(!(0>=e.height)){if(M.isSpacer(e)){const o=e.precedesStatement;var t=e.followsStatement;if(o||t){const a=this.constants_.INSIDE_CORNERS;var n=a.rightHeight;n=e.height-(o?n:0),t=t?a.pathBottomRight:"",e=0<n?_e("V",e.yPos+n):"",this.outlinePath_+=t+e+(o?a.pathTopRight:"");return}}this.outlinePath_+=_e("V",e.yPos+e.height)}}drawRightDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)}drawLeftDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"}drawFlatTop_(){const e=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=mt(e.xPos,this.info_.startY),this.outlinePath_+=_e("h",e.width)}drawFlatBottom_(){const e=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=_e("V",e.baseline),this.outlinePath_+=_e("h",-e.width)}drawInlineInput_(e){this.positionInlineInputConnection_(e);const t=e.input.name;e.connectedBlock||this.info_.isInsertionMarker||(e=Xt(e.xPos+e.connectionWidth,e.centerline-e.height/2)+this.getInlineInputPath(e),this.block_.pathObject.setOutlinePath(t,e))}getInlineInputPath(e){const t=e.width-2*e.connectionWidth,n=e.height;return _e("h",t)+e.shape.pathRightDown(n)+_e("h",-t)+e.shape.pathUp(n)+"z"}drawStatementInput_(e){var t=e.getLastInput();const n=t.xPos+t.notchOffset+t.shape.width,o=this.constants_.INSIDE_CORNERS,a=t.shape.pathRight+_e("h",-(t.notchOffset-o.width))+o.pathTop,f=e.height-2*o.height;t=o.pathBottom+_e("h",t.notchOffset-o.width)+(t.connectedBottomNextConnection?"":t.shape.pathLeft),this.outlinePath_+=_e("H",n)+a+_e("v",f)+t+_e("H",e.xPos+e.width),this.positionStatementInputConnection_(e)}drawConnectionHighlightPath(e){const t=e.connectionModel;if(t.type===Ie.NEXT_STATEMENT||t.type===Ie.PREVIOUS_STATEMENT||t.type===Ie.OUTPUT_VALUE&&!e.isDynamicShape)super.drawConnectionHighlightPath(e);else{e=t.type===Ie.INPUT_VALUE?Xt(e.connectionWidth,-e.height/2)+this.getInlineInputPath(e):Xt(e.width,-e.height/2)+e.shape.pathDown(e.height);var n=t.getSourceBlock(),o,a;(a=(o=n.pathObject).addConnectionHighlight)==null||a.call(o,t,e,t.getOffsetInBlock(),n.RTL)}}},mc=class extends g{constructor(e,t,n,o,a,f,E){if(super(g.SKIP_SETUP),this.imageElement=this.clickHandler=null,this.flipRtl=this.isDirty_=this.EDITABLE=!1,this.altText="",n=Number(Ut(n)),t=Number(Ut(t)),isNaN(n)||isNaN(t))throw Error("Height and width values of an image field must cast to numbers.");if(0>=n||0>=t)throw Error("Height and width values of an image field must be greater than 0.");this.size_=new oe(t,n+mc.Y_PADDING),this.imageHeight=n,typeof a=="function"&&(this.clickHandler=a),e!==g.SKIP_SETUP&&(E?this.configure_(E):(this.flipRtl=!!f,this.altText=Ut(o)||""),this.setValue(Ut(e)))}configure_(e){super.configure_(e),e.flipRtl&&(this.flipRtl=e.flipRtl),e.alt&&(this.altText=Ut(e.alt))}initView(){this.imageElement=J(P.IMAGE,{height:this.imageHeight+"px",width:this.size_.width+"px",alt:this.altText},this.fieldGroup_),this.imageElement.setAttributeNS(rr,"xlink:href",this.value_),this.clickHandler&&(this.imageElement.style.cursor="pointer")}updateSize_(){}doClassValidation_(e){return typeof e!="string"?null:e}doValueUpdate_(e){this.value_=e,this.imageElement&&this.imageElement.setAttributeNS(rr,"xlink:href",this.value_)}getFlipRtl(){return this.flipRtl}setAlt(e){e!==this.altText&&(this.altText=e||"",this.imageElement&&this.imageElement.setAttribute("alt",this.altText))}showEditor_(){this.clickHandler&&this.clickHandler(this)}setOnClickHandler(e){this.clickHandler=e}getText_(){return this.altText}static fromJson(e){if(!e.src||!e.width||!e.height)throw Error("src, width, and height values for an image field arerequired. The width and height must be non-zero.");return new this(e.src,e.width,e.height,void 0,void 0,void 0,e)}};mc.Y_PADDING=1,Un("field_image",mc),mc.prototype.DEFAULT_VALUE="";var kg=class extends g{constructor(e,t,n){super(g.SKIP_SETUP),this.spellcheck_=!0,this.htmlInput_=null,this.isTextValid_=this.isBeingEdited_=!1,this.onKeyInputWrapper=this.onKeyDownWrapper=this.valueWhenEditorWasOpened_=null,this.fullBlockClickTarget_=!1,this.workspace_=null,this.SERIALIZABLE=!0,this.CURSOR="text",e!==g.SKIP_SETUP&&(n&&this.configure_(n),this.setValue(e),t&&this.setValidator(t))}configure_(e){super.configure_(e),e.spellcheck!==void 0&&(this.spellcheck_=e.spellcheck)}initView(){if(!this.getSourceBlock())throw new $;super.initView(),this.isFullBlockField()&&(this.clickTarget_=this.sourceBlock_.getSvgRoot())}isFullBlockField(){const e=this.getSourceBlock();if(!e)throw new $;let t;return this.fullBlockClickTarget_=!((t=this.getConstants())==null||!t.FULL_BLOCK_FIELDS)&&e.isSimpleReporter()}doValueInvalid_(e,t=!0){this.isBeingEdited_&&(this.isDirty_=!0,this.isTextValid_=!1,e=this.value_,this.value_=this.valueWhenEditorWasOpened_,this.sourceBlock_&&Re()&&this.value_!==e&&t&&ce(new(X(z.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,e,this.value_)))}doValueUpdate_(e){this.isTextValid_=this.isDirty_=!0,this.value_=e}applyColour(){const e=this.getSourceBlock();if(!e)throw new $;this.getConstants().FULL_BLOCK_FIELDS&&this.fieldGroup_&&(!this.isFullBlockField()&&this.borderRect_?(this.borderRect_.style.display="block",this.borderRect_.setAttribute("stroke",e.style.colourTertiary)):(this.borderRect_.style.display="none",e.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR)))}getSize(){let e;return(e=this.getConstants())!=null&&e.FULL_BLOCK_FIELDS&&(this.render_(),this.isDirty_=!1),super.getSize()}onLocationChange(){this.isBeingEdited_&&this.resizeEditor_()}render_(){if(super.render_(),this.isBeingEdited_){var e=this.htmlInput_;this.isTextValid_?(v(e,"blocklyInvalidInput"),hn(e,Gt.INVALID,!1)):(ke(e,"blocklyInvalidInput"),hn(e,Gt.INVALID,!0))}if(e=this.getSourceBlock(),!e)throw new $;this.getConstants().FULL_BLOCK_FIELDS&&e.applyColour()}setSpellcheck(e){e!==this.spellcheck_&&(this.spellcheck_=e,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))}showEditor_(e,t=!1){this.workspace_=this.sourceBlock_.workspace,!t&&this.workspace_.options.modalInputs&&(Oa||Xu||Ku)?this.showPromptEditor():this.showInlineEditor(t)}showPromptEditor(){cl(i.Msg$$module$build$src$core$msg.CHANGE_VALUE_TITLE,this.getText(),e=>{e!==null&&this.setValue(this.getValueFromEditorText_(e)),this.onFinishEditing_(this.value_)})}showInlineEditor(e){const t=this.getSourceBlock();if(!t)throw new $;Ii(this,t.RTL,this.widgetDispose_.bind(this),this.workspace_),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,this.valueWhenEditorWasOpened_=this.value_,e||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())}widgetCreate_(){var e=this.getSourceBlock();if(!e)throw new $;i.setGroup$$module$build$src$core$events$utils(!0);const t=$o();var n=this.getClickTarget_();if(!n)throw Error("A click target has not been set.");ke(n,"editing"),n=document.createElement("input"),n.className="blocklyHtmlInput",n.setAttribute("spellcheck",this.spellcheck_);const o=this.workspace_.getScale();var a=this.getConstants().FIELD_TEXT_FONTSIZE*o+"pt";return t.style.fontSize=a,n.style.fontSize=a,a=kg.BORDERRADIUS*o+"px",this.isFullBlockField()&&(a=this.getScaledBBox(),a=(a.bottom-a.top)/2+"px",e=e.getParent()?e.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary,n.style.border=1*o+"px solid "+e,t.style.borderRadius=a,t.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(t.style.boxShadow="rgba(255, 255, 255, 0.3) 0 0 0 "+4*o+"px")),n.style.borderRadius=a,t.appendChild(n),n.value=n.defaultValue=this.getEditorText_(this.value_),n.setAttribute("data-untyped-default-value",String(this.value_)),this.resizeEditor_(),this.bindInputEvents_(n),n}widgetDispose_(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_(this.value_),this.sourceBlock_&&Re()&&this.valueWhenEditorWasOpened_!==null&&this.valueWhenEditorWasOpened_!==this.value_&&(ce(new(X(z.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,this.valueWhenEditorWasOpened_,this.value_)),this.valueWhenEditorWasOpened_=null),i.setGroup$$module$build$src$core$events$utils(!1),this.unbindInputEvents_();var e=$o().style;if(e.width="auto",e.height="auto",e.fontSize="",e.transition="",e.boxShadow="",this.htmlInput_=null,e=this.getClickTarget_(),!e)throw Error("A click target has not been set.");v(e,"editing")}onFinishEditing_(e){}bindInputEvents_(e){this.onKeyDownWrapper=Le(e,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper=Le(e,"input",this,this.onHtmlInputChange)}unbindInputEvents_(){this.onKeyDownWrapper&&(et(this.onKeyDownWrapper),this.onKeyDownWrapper=null),this.onKeyInputWrapper&&(et(this.onKeyInputWrapper),this.onKeyInputWrapper=null)}onHtmlInputKeyDown_(e){e.key==="Enter"?($s(this),fs()):e.key==="Escape"?(this.setValue(this.htmlInput_.getAttribute("data-untyped-default-value"),!1),$s(this),fs()):e.key==="Tab"&&($s(this),fs(),this.sourceBlock_.tab(this,!e.shiftKey),e.preventDefault())}onHtmlInputChange(e){e=this.value_,this.setValue(this.getValueFromEditorText_(this.htmlInput_.value),!1),this.sourceBlock_&&Re()&&this.value_!==e&&ce(new(X(z.BLOCK_FIELD_INTERMEDIATE_CHANGE))(this.sourceBlock_,this.name||null,e,this.value_))}setEditorValue_(e,t=!0){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(e)),this.setValue(e,t)}resizeEditor_(){Bn().then(()=>{const e=this.getSourceBlock();if(!e)throw new $;const t=$o(),n=this.getScaledBBox();t.style.width=n.right-n.left+"px",t.style.height=n.bottom-n.top+"px";const o=n.top;t.style.left=`${e.RTL?n.right-t.offsetWidth:n.left}px`,t.style.top=`${o}px`})}repositionForWindowResize(){let e;const t=(e=this.getSourceBlock())==null?void 0:e.getRootBlock();return t instanceof xs?(Xr(this.workspace_,this.workspace_.getMetricsManager().getViewMetrics(!0),t)||this.resizeEditor_(),!0):!1}isTabNavigable(){return!0}getText_(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null}getEditorText_(e){return`${e}`}getValueFromEditorText_(e){return e}};kg.BORDERRADIUS=4;var wg=class extends kg{constructor(e,t,n){super(e,t,n)}doClassValidation_(e){return e===void 0?null:`${e}`}static fromJson(e){return new this(Ut(e.text),void 0,e)}};Un("field_input",wg),wg.prototype.DEFAULT_VALUE="";var qm=class extends Cf{constructor(e){super(e)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(e){return!!e.outputConnection}hasRightSquareCorner(e){return!!e.outputConnection&&!e.statementInputCount&&!e.nextConnection}},Og=class extends Zh{constructor(e,t){if(super(e,t),this.connectedBottomNextConnection=!1,this.connectedBlock){for(e=this.connectedBlock;t=e.getNextBlock();)e=t;e.nextConnection||(this.height=this.connectedBlockHeight,this.connectedBottomNextConnection=!0)}}},Qm=class extends Vi{constructor(e){super(e),this.width=this.height=0,this.type|=M.getType("RIGHT_CONNECTION")}},Zm=class extends Rf{constructor(e){super(e)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(e){const t=(e.hat?e.hat==="cap":this.constants_.ADD_START_HATS)&&!e.outputConnection&&!e.previousConnection;return!!e.outputConnection||t}hasRightSquareCorner(e){return!!e.outputConnection&&!e.statementInputCount&&!e.nextConnection}},e_=class extends np{constructor(e,t){super(e,t),this.isInline=!0,this.renderer_=e,this.constants_=this.renderer_.getConstants(),this.topRow=new Zm(this.constants_),this.bottomRow=new qm(this.constants_),this.isMultiRow=!t.getInputsInline()||t.isCollapsed(),this.hasStatementInput=0<t.statementInputCount,this.rightSide=this.outputConnection?new Qm(this.constants_):null,this.rightAlignedDummyInputs=new WeakMap}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}shouldStartNewRow_(e,t){return t?t instanceof Qo||e instanceof os||t instanceof os?!0:e instanceof i.ValueInput$$module$build$src$core$inputs$value_input||e instanceof Wi||e instanceof Qo?!this.isInline||this.isMultiRow:!1:!1}getDesiredRowWidth_(e){return e.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):super.getDesiredRowWidth_(e)}getInRowSpacing_(e,t){return e&&t||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!e&&t&&M.isStatementInput(t)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:e&&M.isLeftRoundedCorner(e)&&t&&(M.isPreviousConnection(t)||M.isNextConnection(t))?t.notchOffset-this.constants_.CORNER_RADIUS:e&&M.isLeftSquareCorner(e)&&t&&M.isHat(t)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING}getSpacerRowHeight_(e,t){if(M.isTopRow(e)&&M.isBottomRow(t))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;const n=M.isInputRow(e)&&e.hasStatement,o=M.isInputRow(t)&&t.hasStatement;return o||n?(e=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),o&&n?Math.max(e,this.constants_.DUMMY_INPUT_MIN_HEIGHT):e):M.isTopRow(e)?e.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):M.isBottomRow(t)?this.outputConnection?!t.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}getSpacerRowWidth_(e,t){const n=this.width-this.startX;return M.isInputRow(e)&&e.hasStatement||M.isInputRow(t)&&t.hasStatement?Math.max(n,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):n}getElemCenterline_(e,t){if(e.hasStatement&&!M.isSpacer(t)&&!M.isStatementInput(t))return e.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(M.isInlineInput(t)&&t instanceof zl){const n=t.connectedBlock;if(n&&n.outputConnection&&n.nextConnection)return e.yPos+n.height/2}return super.getElemCenterline_(e,t)}addInput_(e,t){if((e instanceof Wi||e instanceof Qo)&&t.hasDummyInput&&t.align===i.Align$$module$build$src$core$inputs$align.LEFT&&e.align===i.Align$$module$build$src$core$inputs$align.RIGHT)this.rightAlignedDummyInputs.set(t,e);else if(e instanceof os){t.elements.push(new Og(this.constants_,e)),t.hasStatement=!0,t.align===null&&(t.align=e.align);return}super.addInput_(e,t)}addAlignmentPadding_(e,t){if(this.rightAlignedDummyInputs.get(e)){let n;for(let o=0;o<e.elements.length;o++){const a=e.elements[o];if(M.isSpacer(a)&&(n=a),M.isField(a)&&a instanceof ja&&a.parentInput===this.rightAlignedDummyInputs.get(e))break}if(n){n.width+=t,e.width+=t;return}}super.addAlignmentPadding_(e,t)}adjustXPosition_(){const e=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH;let t=e;for(let a=2;a<this.rows.length-1;a+=2){var n=this.rows[a-1];const f=this.rows[a];var o=this.rows[a+1];if(n=a===2?!!this.topRow.hasPreviousConnection:!!n.followsStatement,o=a+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!o.precedesStatement,M.isInputRow(f)&&f.hasStatement){f.measure();let E,w;t=f.width-((w=(E=f.getLastInput())==null?void 0:E.width)!=null?w:0)+e}else if(n&&(a===2||o)&&M.isInputRow(f)&&!f.hasStatement){o=f.xPos,n=null;for(let E=0;E<f.elements.length;E++){const w=f.elements[E];M.isSpacer(w)&&(n=w),n&&(M.isField(w)||M.isInput(w))&&o<t&&!(M.isField(w)&&w instanceof ja&&(w.field instanceof fc||w.field instanceof mc))&&(n.width+=t-o),o+=w.width}}}}finalizeOutputConnection_(){if(this.outputConnection&&this.outputConnection.isDynamicShape){var e=this.outputConnection.shape;if("isDynamic"in e&&e.isDynamic){for(var t=0,n=0;n<this.rows.length;n++){const o=this.rows[n];o.yPos=t,t+=o.height}this.height=t,n=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height,t=e.height(n),n=e.width(n),this.outputConnection.height=t,this.outputConnection.width=n,this.outputConnection.startX=n,this.outputConnection.connectionOffsetY=e.connectionOffsetY(t),this.outputConnection.connectionOffsetX=e.connectionOffsetX(n),e=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(e=n,this.rightSide.height=t,this.rightSide.width=e,this.rightSide.centerline=t/2,this.rightSide.xPos=this.width+e),this.startX=n,this.width+=n+e,this.widthWithChildren+=n+e}}}finalizeHorizontalAlignment_(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var e=0,t=0;t<this.rows.length;t++){var n=this.rows[t];if(!M.isInputRow(n))continue;e=n.elements[n.elements.length-2];let o=this.getNegativeSpacing_(n.elements[1]),a=this.getNegativeSpacing_(e);e=o+a;const f=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-e<f&&(e=this.width-f,o=e/2,a=e/2),n.elements.unshift(new is(this.constants_,-o)),n.elements.push(new is(this.constants_,-a))}if(e)for(this.width-=e,this.widthWithChildren-=e,this.rightSide.xPos-=e,t=0;t<this.rows.length;t++)n=this.rows[t],M.isTopOrBottomRow(n)&&(n.elements[1].width-=e),n.width-=e,n.widthWithConnectedBlocks-=e}}getNegativeSpacing_(e){if(!e||!this.outputConnection)return 0;const t=this.outputConnection.width;var n=this.outputConnection.shape.type;const o=this.constants_;if(1<this.inputRows.length)switch(n){case o.SHAPES.ROUND:return n=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,n=this.height/2>n?n:this.height/2,t-n*(1-Math.sin(Math.acos((n-this.constants_.SMALL_PADDING)/n)));default:return 0}if(M.isInlineInput(e)&&e instanceof zl){const a=e.connectedBlock;return e=a?a.pathObject.outputShapeType:e.shape.type,e==null||a&&a.outputConnection&&(a.statementInputCount||a.nextConnection)||n===o.SHAPES.HEXAGONAL&&n!==e?0:t-this.constants_.SHAPE_IN_SHAPE_PADDING[n][e]}return M.isField(e)&&e instanceof ja?n===o.SHAPES.ROUND&&e.field instanceof wg?t-2.75*o.GRID_UNIT:t-this.constants_.SHAPE_IN_SHAPE_PADDING[n][0]:M.isIcon(e)?this.constants_.SMALL_PADDING:0}finalizeVerticalAlignment_(){if(!this.outputConnection)for(let o=2;o<this.rows.length-1;o+=2){const a=this.rows[o-1],f=this.rows[o],E=this.rows[o+1];var e=o===2,t=o+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!E.precedesStatement;if(e?this.topRow.hasPreviousConnection:a.followsStatement){var n=f.elements[1];if(n=f.elements.length===3&&n instanceof ja&&(n.field instanceof fc||n.field instanceof mc),!e&&n)a.height-=this.constants_.SMALL_PADDING,E.height-=this.constants_.SMALL_PADDING,f.height-=this.constants_.MEDIUM_PADDING;else if(!e&&!t)a.height+=this.constants_.SMALL_PADDING;else if(t){for(e=!1,t=0;t<f.elements.length;t++)if(n=f.elements[t],n instanceof zl&&M.isInlineInput(n)&&n.connectedBlock&&!n.connectedBlock.isShadow()&&40<=n.connectedBlock.getHeightWidth().height){e=!0;break}e&&(a.height-=this.constants_.SMALL_PADDING,E.height-=this.constants_.SMALL_PADDING)}}}}finalize_(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),super.finalize_(),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)}},t_=class extends Df{constructor(e,t,n){super(e,t,n),this.markerCircle=null}showWithInputOutput(e){const t=e.getSourceBlock();e=e.getLocation().getOffsetInBlock(),this.positionCircle(e.x,e.y),this.setParent_(t),this.showCurrent_()}showWithOutput_(e){this.showWithInputOutput(e)}showWithInput_(e){this.showWithInputOutput(e)}showWithBlock_(e){e=e.getLocation();const t=e.getHeightWidth();this.positionRect_(0,0,t.width,t.height),this.setParent_(e),this.showCurrent_()}positionCircle(e,t){let n;(n=this.markerCircle)==null||n.setAttribute("cx",`${e}`);let o;(o=this.markerCircle)==null||o.setAttribute("cy",`${t}`),this.currentMarkerSvg=this.markerCircle}hide(){super.hide(),this.markerCircle&&(this.markerCircle.style.display="none")}createDomInternal_(){if(super.createDomInternal_(),this.markerCircle=J(P.CIRCLE,{r:this.constants_.CURSOR_RADIUS,"stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.hide(),this.isCursor()){const e=this.getBlinkProperties_();J(P.ANIMATE,e,this.markerCircle)}return this.markerSvg_}applyColour_(e){super.applyColour_(e);let t;(t=this.markerCircle)==null||t.setAttribute("fill",this.colour_);let n;if((n=this.markerCircle)==null||n.setAttribute("stroke",this.colour_),this.isCursor()){e=this.colour_+";transparent;transparent;";let o;(o=this.markerCircle)==null||o.firstElementChild.setAttribute("values",e)}}},n_=class extends Eg{constructor(e,t,n){super(e,t,n),this.svgPathSelected=null,this.outlines=new Map,this.remainingOutlines=new Set,this.outputShapeType=null,this.constants=n}setPath(e){super.setPath(e),this.svgPathSelected&&this.svgPathSelected.setAttribute("d",e)}applyColour(e){super.applyColour(e);const t=e.getParent();e.isShadow()&&t&&this.svgPath.setAttribute("stroke",t.style.colourTertiary);for(const n of this.outlines.values())n.setAttribute("fill",this.style.colourTertiary)}flipRTL(){super.flipRTL();for(const e of this.outlines.values())e.setAttribute("transform","scale(-1 1)")}updateSelected(e){this.setClass_("blocklySelected",e),e?this.svgPathSelected||(this.svgPathSelected=this.svgPath.cloneNode(!0),this.svgPathSelected.setAttribute("fill","none"),this.svgPathSelected.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected)):this.svgPathSelected&&(this.svgRoot.removeChild(this.svgPathSelected),this.svgPathSelected=null)}updateReplacementFade(e){this.setClass_("blocklyReplaceable",e),e?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")}updateShapeForInputHighlight(e,t){e=e.getParentInput().name,(e=this.getOutlinePath(e))&&(t?e.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):e.removeAttribute("filter"))}beginDrawing(){this.remainingOutlines.clear();for(const e of this.outlines.keys())this.remainingOutlines.add(e)}endDrawing(){if(this.remainingOutlines.size)for(const e of this.remainingOutlines)this.removeOutlinePath(e);this.remainingOutlines.clear()}setOutlinePath(e,t){e=this.getOutlinePath(e),e.setAttribute("d",t),e.setAttribute("fill",this.style.colourTertiary)}getOutlinePath(e){return this.outlines.has(e)||this.outlines.set(e,J(P.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines.delete(e),this.outlines.get(e)}removeOutlinePath(e){let t,n;(t=this.outlines.get(e))==null||(n=t.parentNode)==null||n.removeChild(this.outlines.get(e)),this.outlines.delete(e)}},Kf=class extends bg{constructor(e){super(e)}makeConstants_(){return new Ym}makeRenderInfo_(e){return new e_(this,e)}makeDrawer_(e,t){return new Jm(e,t)}makeMarkerDrawer(e,t){return new t_(e,this.getConstants(),t)}makePathObject(e,t){return new n_(e,t,this.getConstants())}getConstants(){return this.constants_}getConnectionPreviewMethod(e,t,n){return R("getConnectionPreviewMethod","v10","v12","an IConnectionPreviewer, if it fulfills your use case."),t.type===Ie.OUTPUT_VALUE?e.isConnected()?hi.PREVIEW_TYPE.REPLACEMENT_FADE:hi.PREVIEW_TYPE.INPUT_OUTLINE:super.getConnectionPreviewMethod(e,t,n)}};vs("zelos",Kf);var r_=class{constructor(e){this.staticConn=this.draggedConn=this.markerConn=this.fadedBlock=null,this.workspace=e.workspace}previewReplacement(e,t,n){i.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.fadedBlock=n,n.fadeForReplacement(!0),this.workspace.getRenderer().shouldHighlightConnection(t)&&(t.highlight(),this.staticConn=t)}finally{i.enable$$module$build$src$core$events$utils()}}previewConnection(e,t){if(e!==this.draggedConn||t!==this.staticConn){i.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.shouldUseMarkerPreview(e,t)&&(this.markerConn=this.previewMarker(e,t)),this.workspace.getRenderer().shouldHighlightConnection(t)&&t.highlight(),this.draggedConn=e,this.staticConn=t}finally{i.enable$$module$build$src$core$events$utils()}}}shouldUseMarkerPreview(e,t){return t.type===Ie.PREVIOUS_STATEMENT||t.type===Ie.NEXT_STATEMENT||!(this.workspace.getRenderer()instanceof Kf)}previewMarker(e,t){const n=e.getSourceBlock(),o=this.createInsertionMarker(n),a=this.getMatchingConnection(n,o,e);if(!a)return null;o.queueRender(),Sr(),a.connect(t);const f={x:t.x-a.x,y:t.y-a.y},E=a.getOffsetInBlock().clone();return Bn().then(()=>{if(!o.isDeadOrDying()){i.disable$$module$build$src$core$events$utils();try{o==null||o.positionNearConnection(a,f,E),o==null||o.getSvgRoot().setAttribute("visibility","visible")}finally{i.enable$$module$build$src$core$events$utils()}}}),a}createInsertionMarker(e){const t=yn(e,{addCoordinates:!1,addInputBlocks:!1,addNextBlocks:!1,doFullSerialization:!1});if(!t)throw Error(`Failed to serialize source block. ${e.toDevString()}`);e=gs(t,this.workspace);for(const n of e.getDescendants(!1))n.setInsertionMarker(!0);return e.initSvg(),e.getSvgRoot().setAttribute("visibility","hidden"),e}getMatchingConnection(e,t,n){if(e=e.getConnections_(!0),t=t.getConnections_(!0),e.length!==t.length)return null;for(let o=0;o<e.length;o++)if(e[o]===n)return t[o];return null}hidePreview(){i.disable$$module$build$src$core$events$utils();try{this.staticConn&&(this.staticConn.unhighlight(),this.staticConn=null),this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null),this.markerConn&&(this.hideInsertionMarker(this.markerConn),this.draggedConn=this.markerConn=null)}finally{i.enable$$module$build$src$core$events$utils()}}hideInsertionMarker(e){const t=e.getSourceBlock(),n=t.outputConnection;let o;if((o=t.previousConnection)!=null&&o.targetConnection||n!=null&&n.targetConnection)t.unplug(!0);else{let a;(a=e.targetBlock())==null||a.unplug(!1)}t.dispose()}dispose(){this.hidePreview()}};d(ne.CONNECTION_PREVIEWER,hr,r_);var Yl={};Yl.Align=i.Align$$module$build$src$core$inputs$align,Yl.DummyInput=Wi,Yl.EndRowInput=Qo,Yl.Input=Xa,Yl.StatementInput=os,Yl.ValueInput=i.ValueInput$$module$build$src$core$inputs$value_input,Yl.inputTypes=i.inputTypes$$module$build$src$core$inputs$input_types;var s_=!1,i_;i.CodeGenerator$$module$build$src$core$generator=class{constructor(e){this.forBlock=Object.create(null),this.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",this.STATEMENT_SUFFIX=this.STATEMENT_PREFIX=this.INFINITE_LOOP_TRAP=null,this.INDENT="  ",this.COMMENT_WRAP=60,this.ORDER_OVERRIDES=[],this.isInitialized=null,this.RESERVED_WORDS_="",this.definitions_=Object.create(null),this.functionNames_=Object.create(null),this.nameDB_=void 0,this.name_=e,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")}workspaceToCode(e){e||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),e=Pe());var t=[];this.init(e),e=e.getTopBlocks(!0);for(let n=0,o;o=e[n];n++){let a=this.blockToCode(o);Array.isArray(a)&&(a=a[0]),a&&(o.outputConnection&&(a=this.scrubNakedValue(a),this.STATEMENT_PREFIX&&!o.suppressPrefixSuffix&&(a=this.injectId(this.STATEMENT_PREFIX,o)+a),this.STATEMENT_SUFFIX&&!o.suppressPrefixSuffix&&(a+=this.injectId(this.STATEMENT_SUFFIX,o))),t.push(a))}return t=t.join(`
`),t=this.finish(t),t=t.replace(/^\s+\n/,""),t=t.replace(/\n\s+$/,`
`),t=t.replace(/[ \t]+\n/g,`
`)}prefixLines(e,t){return t+e.replace(/(?!\n$)\n/g,`
`+t)}allNestedComments(e){const t=[];e=e.getDescendants(!0);for(let n=0;n<e.length;n++){const o=e[n].getCommentText();o&&t.push(o)}return t.length&&t.push(""),t.join(`
`)}blockToCode(e,t){if(this.isInitialized===!1&&console.warn("CodeGenerator init was not called before blockToCode was called."),!e)return"";if(!e.isEnabled())return t?"":this.blockToCode(e.getNextBlock());if(e.isInsertionMarker())return t?"":this.blockToCode(e.getChildren(!1)[0]);var n=this.forBlock[e.type];if(typeof n!="function")throw Error(`${this.name_} generator does not know how to generate code for block type "${e.type}".`);if(n=n.call(e,e,this),Array.isArray(n)){if(!e.outputConnection)throw TypeError("Expecting string from statement block: "+e.type);return[this.scrub_(e,n[0],t),n[1]]}if(typeof n=="string")return this.STATEMENT_PREFIX&&!e.suppressPrefixSuffix&&(n=this.injectId(this.STATEMENT_PREFIX,e)+n),this.STATEMENT_SUFFIX&&!e.suppressPrefixSuffix&&(n+=this.injectId(this.STATEMENT_SUFFIX,e)),this.scrub_(e,n,t);if(n===null)return"";throw SyntaxError("Invalid code generated: "+n)}valueToCode(e,t,n){if(isNaN(n))throw TypeError("Expecting valid order from block: "+e.type);var o=e.getInputTargetBlock(t);if(!o&&!e.getInput(t))throw ReferenceError(`Input "${t}" doesn't exist on "${e.type}"`);if(!o||(t=this.blockToCode(o),t===""))return"";if(!Array.isArray(t))throw TypeError(`Expecting tuple from value block: ${o.type} See developers.google.com/blockly/guides/create-custom-blocks/generating-code for more information`);if(e=t[0],t=t[1],isNaN(t))throw TypeError("Expecting valid order from value block: "+o.type);if(!e)return"";o=!1;var a=Math.floor(n);const f=Math.floor(t);if(a<=f&&(a!==f||a!==0&&a!==99)){for(o=!0,a=0;a<this.ORDER_OVERRIDES.length;a++)if(this.ORDER_OVERRIDES[a][0]===n&&this.ORDER_OVERRIDES[a][1]===t){o=!1;break}}return o&&(e="("+e+")"),e}statementToCode(e,t){const n=e.getInputTargetBlock(t);if(!n&&!e.getInput(t))throw ReferenceError(`Input "${t}" doesn't exist on "${e.type}"`);if(e=this.blockToCode(n),typeof e!="string")throw TypeError("Expecting code from statement block: "+(n&&n.type));return e&&(e=this.prefixLines(e,this.INDENT)),e}addLoopTrap(e,t){return this.INFINITE_LOOP_TRAP&&(e=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,t),this.INDENT)+e),this.STATEMENT_SUFFIX&&!t.suppressPrefixSuffix&&(e=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,t),this.INDENT)+e),this.STATEMENT_PREFIX&&!t.suppressPrefixSuffix&&(e+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,t),this.INDENT)),e}injectId(e,t){return t=t.id.replace(/\$/g,"$$$$"),e.replace(/%1/g,"'"+t+"'")}addReservedWords(e){this.RESERVED_WORDS_+=e+","}provideFunction_(e,t){if(!this.definitions_[e]){const n=this.nameDB_.getDistinctName(e,i.NameType$$module$build$src$core$names.PROCEDURE);this.functionNames_[e]=n,Array.isArray(t)&&(t=t.join(`
`)),t=t.trim().replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,n);let o;for(;o!==t;)o=t,t=t.replace(/^(( {2})*) {2}/gm,"$1\0");t=t.replace(/\0/g,this.INDENT),this.definitions_[e]=t}return this.functionNames_[e]}getVariableName(e){return this.getName(e,i.NameType$$module$build$src$core$names.VARIABLE)}getProcedureName(e){return this.getName(e,i.NameType$$module$build$src$core$names.PROCEDURE)}getName(e,t){if(!this.nameDB_)throw Error("Name database is not defined. You must initialize `nameDB_` in your generator class and call `init` first.");return this.nameDB_.getName(e,t)}init(e){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)}scrub_(e,t,n){return t}finish(e){return this.definitions_=Object.create(null),this.functionNames_=Object.create(null),e}scrubNakedValue(e){return e}},i_={},i_.CodeGenerator=i.CodeGenerator$$module$build$src$core$generator;var o_=class extends Xf{constructor(e,t){super(e),this.flyout_=t}getBoundingBox(){let e;try{e=this.workspace_.getCanvas().getBBox()}catch{e={height:0,y:0,width:0,x:0}}return e}getContentMetrics(e){const t=this.getBoundingBox();return e=e?1:this.workspace_.scale,{height:t.height*e,width:t.width*e,top:t.y*e,left:t.x*e}}getScrollMetrics(e,t,n){return t=n||this.getContentMetrics(),n=this.flyout_.MARGIN*this.workspace_.scale,e=e?this.workspace_.scale:1,{height:(t.height+2*n)/e,width:(t.width+t.left+n)/e,top:0,left:0}}},Za;(function(e){e.BLOCK="block",e.BUTTON="button"})(Za||(Za={}));var Mb="WORKSPACE_AT_BLOCK_CAPACITY",Rg=class extends vg{constructor(e){super(),this.horizontalLayout=!1,this.boundEvents=[],this.filterWrapper=this.reflowWrapper=null,this.mats=[],this.buttons_=[],this.contents=[],this.listeners=[],this.permanentlyDisabled=[],this.recycledBlocks=[],this.autoClose=!0,this.visible=!1,this.containerVisible=!0,this.CORNER_RADIUS=8,this.SCROLLBAR_MARGIN=2.5,this.height_=this.width_=0,this.dragAngleRange_=70,this.svgGroup_=this.svgBackground_=null,e.setMetrics=this.setMetrics_.bind(this),this.workspace_=new Ns(e),this.workspace_.setMetricsManager(new o_(this.workspace_,this)),this.workspace_.internalIsFlyout=!0,this.workspace_.setVisible(this.visible),this.id=B(),this.RTL=!!e.RTL,this.toolboxPosition_=e.toolboxPosition,this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.rectMap_=new WeakMap,this.MARGIN=this.CORNER_RADIUS,this.GAP_X=3*this.MARGIN,this.GAP_Y=3*this.MARGIN}createDom(e){return this.svgGroup_=J(e,{class:"blocklyFlyout"}),this.svgGroup_.style.display="none",this.svgBackground_=J(P.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_}init(e){this.targetWorkspace=e,this.workspace_.targetWorkspace=e,this.workspace_.scrollbar=new jf(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),this.boundEvents.push(Le(this.svgGroup_,"wheel",this,this.wheel_)),this.filterWrapper=this.filterForCapacity.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper),this.boundEvents.push(Le(this.svgBackground_,"pointerdown",this,this.onMouseDown)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),e.getComponentManager().addComponent({component:this,weight:vt.ComponentWeight.FLYOUT_WEIGHT,capabilities:[vt.Capability.AUTOHIDEABLE,vt.Capability.DELETE_AREA,vt.Capability.DRAG_TARGET]})}dispose(){this.hide(),this.targetWorkspace.getComponentManager().removeComponent(this.id);for(const e of this.boundEvents)et(e);this.boundEvents.length=0,this.filterWrapper&&this.targetWorkspace.removeChangeListener(this.filterWrapper),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.dispose()),this.svgGroup_&&x(this.svgGroup_)}getWidth(){return this.width_}getHeight(){return this.height_}getFlyoutScale(){return this.targetWorkspace.scale}getWorkspace(){return this.workspace_}setAutoClose(e){this.autoClose=e,this.targetWorkspace.recordDragTargets(),this.targetWorkspace.resizeContents()}autoHide(e){!e&&this.targetWorkspace.getFlyout(!0)===this&&this.autoClose&&this.hide()}getTargetWorkspace(){return this.targetWorkspace}isVisible(){return this.visible}setVisible(e){const t=e!==this.isVisible();this.visible=e,t&&(this.autoClose||this.targetWorkspace.recordDragTargets(),this.updateDisplay())}setContainerVisible(e){const t=e!==this.containerVisible;this.containerVisible=e,t&&this.updateDisplay()}getContents(){return this.contents}setContents(e){this.contents=e}updateDisplay(){let e;e=this.containerVisible?this.isVisible():!1,this.svgGroup_&&(this.svgGroup_.style.display=e?"block":"none");let t;(t=this.workspace_.scrollbar)==null||t.setContainerVisible(e)}positionAt_(e,t,n,o){let a;(a=this.svgGroup_)==null||a.setAttribute("width",`${e}`);let f;(f=this.svgGroup_)==null||f.setAttribute("height",`${t}`),this.workspace_.setCachedParentSvgSize(e,t),this.svgGroup_&&ht(this.svgGroup_,"translate("+n+"px,"+o+"px)"),(e=this.workspace_.scrollbar)&&(e.setOrigin(n,o),e.resize(),e.hScroll&&e.hScroll.setPosition(e.hScroll.position.x,e.hScroll.position.y),e.vScroll&&e.vScroll.setPosition(e.vScroll.position.x,e.vScroll.position.y))}hide(){if(this.isVisible()){this.setVisible(!1);for(const e of this.listeners)et(e);this.listeners.length=0,this.reflowWrapper&&(this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowWrapper=null)}}show(e){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks(),typeof e=="string"&&(e=this.getDynamicCategoryContents(e)),this.setVisible(!0),e=Zl(e),e=this.createFlyoutInfo(e),Sr(this.workspace_),this.setContents(e.contents),this.layout_(e.contents,e.gaps),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity(),this.position(),this.reflowWrapper=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper),this.emptyRecycledBlocks()}createFlyoutInfo(e){const t=[],n=[];this.permanentlyDisabled.length=0;const o=this.horizontalLayout?this.GAP_X:this.GAP_Y;for(const a of e){if("custom"in a){e=this.getDynamicCategoryContents(a.custom),e=Zl(e);const{contents:f,gaps:E}=this.createFlyoutInfo(e);t.push(...f),n.push(...E)}switch(a.kind.toUpperCase()){case"BLOCK":e=a;const f=this.createFlyoutBlock(e);t.push({type:Za.BLOCK,block:f}),this.addBlockGap(e,n,o);break;case"SEP":this.addSeparatorGap(a,n,o);break;case"LABEL":e=this.createButton(a,!0),t.push({type:Za.BUTTON,button:e}),n.push(o);break;case"BUTTON":e=this.createButton(a,!1),t.push({type:Za.BUTTON,button:e}),n.push(o)}}return{contents:t,gaps:n}}getDynamicCategoryContents(e){if(e=this.workspace_.targetWorkspace.getToolboxCategoryCallback(e),typeof e!="function")throw TypeError("Couldn't find a callback function when opening a toolbox category.");return e(this.workspace_.targetWorkspace)}createButton(e,t){return new Ms(this.workspace_,this.targetWorkspace,e,t)}createFlyoutBlock(e){let t;return e.blockxml?(e=typeof e.blockxml=="string"?i.textToDom$$module$build$src$core$utils$xml(e.blockxml):e.blockxml,(t=this.getRecycledBlock(e.getAttribute("type")))||(t=_s(e,this.workspace_))):(t=this.getRecycledBlock(e.type),t||(e.enabled===void 0&&(e.enabled=e.disabled!=="true"&&e.disabled!==!0),e.disabledReasons===void 0&&e.enabled===!1&&(e.disabledReasons=[kn]),t=ur(e,this.workspace_))),t.isEnabled()||this.permanentlyDisabled.push(t),t}getRecycledBlock(e){let t=-1;for(let n=0;n<this.recycledBlocks.length;n++)if(this.recycledBlocks[n].type===e){t=n;break}return t===-1?void 0:this.recycledBlocks.splice(t,1)[0]}addBlockGap(e,t,n){let o;e.gap?o=parseInt(String(e.gap)):e.blockxml&&(e=typeof e.blockxml=="string"?i.textToDom$$module$build$src$core$utils$xml(e.blockxml):e.blockxml,o=parseInt(e.getAttribute("gap"))),t.push(!o||isNaN(o)?n:o)}addSeparatorGap(e,t,n){e=parseInt(String(e.gap)),!isNaN(e)&&0<t.length?t[t.length-1]=e:t.push(n)}clearOldBlocks(){var e=this.workspace_.getTopBlocks(!1);for(let n=0,o;o=e[n];n++)this.blockIsRecyclable_(o)?this.recycleBlock(o):o.dispose(!1,!1);for(e=0;e<this.mats.length;e++){const n=this.mats[e];n&&(Pc(n),x(n))}this.mats.length=0;for(let n=0,o;o=this.buttons_[n];n++)o.dispose();this.buttons_.length=0;let t;(t=this.workspace_.getPotentialVariableMap())==null||t.clear()}emptyRecycledBlocks(){for(let e=0;e<this.recycledBlocks.length;e++)this.recycledBlocks[e].dispose();this.recycledBlocks=[]}blockIsRecyclable_(e){return!1}recycleBlock(e){const t=e.getRelativeToSurfaceXY();e.moveBy(-t.x,-t.y),this.recycledBlocks.push(e)}addBlockListeners_(e,t,n){this.listeners.push(Le(e,"pointerdown",null,this.blockMouseDown(t))),this.listeners.push(Le(n,"pointerdown",null,this.blockMouseDown(t))),this.listeners.push(nt(e,"pointerenter",t,()=>{this.targetWorkspace.isDragging()||t.addSelect()})),this.listeners.push(nt(e,"pointerleave",t,()=>{this.targetWorkspace.isDragging()||t.removeSelect()})),this.listeners.push(nt(n,"pointerenter",t,()=>{this.targetWorkspace.isDragging()||t.addSelect()})),this.listeners.push(nt(n,"pointerleave",t,()=>{this.targetWorkspace.isDragging()||t.removeSelect()}))}blockMouseDown(e){return t=>{const n=this.targetWorkspace.getGesture(t);n&&(n.setStartBlock(e),n.handleFlyoutStart(t,this))}}onMouseDown(e){const t=this.targetWorkspace.getGesture(e);t&&t.handleFlyoutStart(e,this)}isBlockCreatable(e){return e.isEnabled()}createBlock(e){let t=null;i.disable$$module$build$src$core$events$utils();var n=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{t=this.placeNewBlock(e)}finally{i.enable$$module$build$src$core$events$utils()}if(this.targetWorkspace.hideChaff(),e=iu(this.targetWorkspace,n),Re()){for(i.setGroup$$module$build$src$core$events$utils(!0),n=0;n<e.length;n++){const o=e[n];ce(new(X(z.VAR_CREATE))(o))}ce(new(X(z.BLOCK_CREATE))(t))}return this.autoClose?this.hide():this.filterForCapacity(),t}initFlyoutButton_(e,t,n){const o=e.createDom();e.moveTo(t,n),e.show(),this.listeners.push(Le(o,"pointerdown",this,this.onMouseDown)),this.buttons_.push(e)}createRect_(e,t,n,o,a){return t=J(P.RECT,{"fill-opacity":0,x:t,y:n,height:o.height,width:o.width}),t.tooltip=e,gl(t),this.workspace_.getCanvas().insertBefore(t,e.getSvgRoot()),this.rectMap_.set(e,t),this.mats[a]=t}moveRectToBlock_(e,t){const n=t.getHeightWidth();e.setAttribute("width",String(n.width)),e.setAttribute("height",String(n.height)),t=t.getRelativeToSurfaceXY(),e.setAttribute("y",String(t.y)),e.setAttribute("x",String(this.RTL?t.x-n.width:t.x))}filterForCapacity(){const e=this.workspace_.getTopBlocks(!1);for(let t=0,n;n=e[t];t++)if(!this.permanentlyDisabled.includes(n)){const o=this.targetWorkspace.isCapacityAvailable(kt(n));for(;n;)n.setDisabledReason(!o,Mb),n=n.getNextBlock()}}reflow(){this.reflowWrapper&&this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowInternal_(),this.reflowWrapper&&this.workspace_.addChangeListener(this.reflowWrapper)}isScrollable(){return this.workspace_.scrollbar?this.workspace_.scrollbar.isVisible():!1}placeNewBlock(e){var t=this.targetWorkspace;if(!e.getSvgRoot())throw Error("oldBlock is not rendered");const n=this.serializeBlock(e);return t.setResizesEnabled(!1),t=gs(n,t),this.positionNewBlock(e,t),t}serializeBlock(e){return yn(e)}positionNewBlock(e,t){const n=this.targetWorkspace;var o=n.getOriginOffsetInPixels(),a=this.workspace_.getOriginOffsetInPixels();e=e.getRelativeToSurfaceXY(),e.scale(this.workspace_.scale),a=ae.sum(a,e),o=ae.difference(a,o),o.scale(1/n.scale),t.moveTo(new ae(o.x,o.y))}};Rg.FlyoutItemType=Za;var Yf=class extends Rg{constructor(e){super(e)}setMetrics_(e){if(this.isVisible()){var t=this.workspace_.getMetricsManager(),n=t.getScrollMetrics(),o=t.getViewMetrics();t=t.getAbsoluteMetrics(),typeof e.y=="number"&&(this.workspace_.scrollY=-(n.top+(n.height-o.height)*e.y)),this.workspace_.translate(this.workspace_.scrollX+t.left,this.workspace_.scrollY+t.top)}}getX(){if(!this.isVisible())return 0;var e=this.targetWorkspace.getMetricsManager();const t=e.getAbsoluteMetrics(),n=e.getViewMetrics();return e=e.getToolboxMetrics(),this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_===Fe.LEFT?e.width:n.width-this.width_:this.toolboxPosition_===Fe.LEFT?0:n.width:this.toolboxPosition_===Fe.LEFT?0:n.width+t.left-this.width_}getY(){return 0}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var e=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=e.height,this.setBackgroundPath(this.width_-this.CORNER_RADIUS,e.height-2*this.CORNER_RADIUS),e=this.getX();var t=this.getY();this.positionAt_(this.width_,this.height_,e,t)}}setBackgroundPath(e,t){const n=this.toolboxPosition_===Fe.RIGHT;var o=e+this.CORNER_RADIUS;o=["M "+(n?o:0)+",0"],o.push("h",n?-e:e),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,n?0:1,n?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),o.push("v",Math.max(0,t)),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,n?0:1,n?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),o.push("h",n?e:-e),o.push("z"),this.svgBackground_.setAttribute("d",o.join(" "))}scrollToStart(){let e;(e=this.workspace_.scrollbar)==null||e.setY(0)}wheel_(e){var t=br(e);if(t.y){const n=this.workspace_.getMetricsManager(),o=n.getScrollMetrics();t=n.getViewMetrics().top-o.top+t.y;let a;(a=this.workspace_.scrollbar)==null||a.setY(t),ms(this.workspace_),fs()}e.preventDefault(),e.stopPropagation()}layout_(e,t){this.workspace_.scale=this.targetWorkspace.scale;var n=this.MARGIN;const o=this.RTL?n:n+this.tabWidth_;for(let w=0,q;q=e[w];w++)if(q.type==="block"){var a=q.block;if(!a)continue;var f=a.getDescendants(!1);for(let Rt=0,Ct;Ct=f[Rt];Rt++)Ct.isInFlyout=!0;f=a.getSvgRoot();const Se=a.getHeightWidth();var E=a.outputConnection?o-this.tabWidth_:o;a.moveBy(E,n),E=this.createRect_(a,this.RTL?E-Se.width:E,n,Se,w),this.addBlockListeners_(f,a,E),n+=Se.height+t[w]}else q.type==="button"&&(a=q.button,this.initFlyoutButton_(a,o,n),n+=a.height+t[w])}isDragTowardWorkspace(e){e=Math.atan2(e.y,e.x)/Math.PI*180;const t=this.dragAngleRange_;return e<t&&e>-t||e<-180+t||e>180-t}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const e=this.svgGroup_.getBoundingClientRect(),t=e.left;return this.toolboxPosition_===Fe.LEFT?new ct(-1e9,1e9,-1e9,t+e.width):new ct(-1e9,1e9,t,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let e=0;var t=this.workspace_.getTopBlocks(!1);for(let o=0,a;a=t[o];o++){var n=a.getHeightWidth().width;a.outputConnection&&(n-=this.tabWidth_),e=Math.max(e,n)}for(let o=0,a;a=this.buttons_[o];o++)e=Math.max(e,a.width);if(e+=1.5*this.MARGIN+this.tabWidth_,e*=this.workspace_.scale,e+=Nt.scrollbarThickness,this.width_!==e){for(let o=0,a;a=t[o];o++){if(this.RTL){n=a.getRelativeToSurfaceXY().x;let f=e/this.workspace_.scale-this.MARGIN;a.outputConnection||(f-=this.tabWidth_),a.moveBy(f-n,0)}this.rectMap_.has(a)&&this.moveRectToBlock_(this.rectMap_.get(a),a)}if(this.RTL)for(let o=0,a;a=this.buttons_[o];o++)t=a.getPosition().y,a.moveTo(e/this.workspace_.scale-a.width-this.MARGIN-this.tabWidth_,t);this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==Fe.LEFT||this.targetWorkspace.translate(this.targetWorkspace.scrollX+e,this.targetWorkspace.scrollY),this.width_=e,this.position(),this.targetWorkspace.resizeContents(),this.targetWorkspace.recordDragTargets()}}};Yf.registryName="verticalFlyout",d(ne.FLYOUTS_VERTICAL_TOOLBOX,hr,Yf);var l_=class extends Rg{constructor(e){super(e),this.horizontalLayout=!0}setMetrics_(e){if(this.isVisible()){var t=this.workspace_.getMetricsManager(),n=t.getScrollMetrics(),o=t.getViewMetrics();t=t.getAbsoluteMetrics(),typeof e.x=="number"&&(this.workspace_.scrollX=-(n.left+(n.width-o.width)*e.x)),this.workspace_.translate(this.workspace_.scrollX+t.left,this.workspace_.scrollY+t.top)}}getX(){return 0}getY(){if(!this.isVisible())return 0;var e=this.targetWorkspace.getMetricsManager();const t=e.getAbsoluteMetrics(),n=e.getViewMetrics();e=e.getToolboxMetrics();const o=this.toolboxPosition_===Fe.TOP;return this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?o?e.height:n.height-this.height_:o?0:n.height:o?0:n.height+t.top-this.height_}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var e=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=e.width,this.setBackgroundPath(e.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),e=this.getX();var t=this.getY();this.positionAt_(this.width_,this.height_,e,t)}}setBackgroundPath(e,t){const n=this.toolboxPosition_===Fe.TOP,o=["M 0,"+(n?0:this.CORNER_RADIUS)];n?(o.push("h",e+2*this.CORNER_RADIUS),o.push("v",t),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),o.push("h",-e),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),o.push("h",e),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),o.push("v",t),o.push("h",-e-2*this.CORNER_RADIUS)),o.push("z"),this.svgBackground_.setAttribute("d",o.join(" "))}scrollToStart(){let e;(e=this.workspace_.scrollbar)==null||e.setX(this.RTL?1/0:0)}wheel_(e){var t=br(e);if(t=t.x||t.y){const n=this.workspace_.getMetricsManager(),o=n.getScrollMetrics();t=n.getViewMetrics().left-o.left+t;let a;(a=this.workspace_.scrollbar)==null||a.setX(t),ms(this.workspace_),fs()}e.preventDefault(),e.stopPropagation()}layout_(e,t){this.workspace_.scale=this.targetWorkspace.scale;const n=this.MARGIN;let o=n+this.tabWidth_;this.RTL&&(e=e.reverse());for(let w=0,q;q=e[w];w++)if(q.type==="block"){var a=q.block;if(a==null)continue;var f=a.getDescendants(!1);for(let Rt=0,Ct;Ct=f[Rt];Rt++)Ct.isInFlyout=!0;f=a.getSvgRoot();const Se=a.getHeightWidth();var E=a.outputConnection?this.tabWidth_:0;E=this.RTL?o+Se.width:o-E,a.moveBy(E,n),E=this.createRect_(a,E,n,Se,w),o+=Se.width+t[w],this.addBlockListeners_(f,a,E)}else q.type==="button"&&(a=q.button,this.initFlyoutButton_(a,o,n),o+=a.width+t[w])}isDragTowardWorkspace(e){e=Math.atan2(e.y,e.x)/Math.PI*180;const t=this.dragAngleRange_;return e<90+t&&e>90-t||e>-90-t&&e<-90+t}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const e=this.svgGroup_.getBoundingClientRect(),t=e.top;return this.toolboxPosition_===Fe.TOP?new ct(-1e9,t+e.height,-1e9,1e9):new ct(t,1e9,-1e9,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let e=0;const t=this.workspace_.getTopBlocks(!1);for(let o=0,a;a=t[o];o++)e=Math.max(e,a.getHeightWidth().height);const n=this.buttons_;for(let o=0,a;a=n[o];o++)e=Math.max(e,a.height);if(e+=1.5*this.MARGIN,e*=this.workspace_.scale,e+=Nt.scrollbarThickness,this.height_!==e){for(let o=0,a;a=t[o];o++)this.rectMap_.has(a)&&this.moveRectToBlock_(this.rectMap_.get(a),a);this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==Fe.TOP||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+e),this.height_=e,this.position(),this.targetWorkspace.resizeContents(),this.targetWorkspace.recordDragTargets()}}};d(ne.FLYOUTS_HORIZONTAL_TOOLBOX,hr,l_);var op=class extends Dr{constructor(e,t,n,o,a){super(g.SKIP_SETUP),this.defaultType="",this.variableTypes=[],this.variable=null,this.SERIALIZABLE=!0,this.menuGenerator_=op.dropdownCreate,this.defaultVariableName=typeof e=="string"?e:"",this.size_=new oe(0,0),e!==g.SKIP_SETUP&&(a?this.configure_(a):this.setTypes(n,o),t&&this.setValidator(t))}configure_(e){super.configure_(e),this.setTypes(e.variableTypes,e.defaultType)}initModel(){var e=this.getSourceBlock();if(!e)throw new $;this.variable||(e=i.getOrCreateVariablePackage$$module$build$src$core$variables(e.workspace,null,this.defaultVariableName,this.defaultType),this.doValueUpdate_(e.getId()))}shouldAddBorderRect_(){const e=this.getSourceBlock();if(!e)throw new $;return super.shouldAddBorderRect_()&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||e.type!=="variables_get")}fromXml(e){var t=this.getSourceBlock();if(!t)throw new $;const n=e.getAttribute("id"),o=e.textContent,a=e.getAttribute("variabletype")||e.getAttribute("variableType")||"";if(t=i.getOrCreateVariablePackage$$module$build$src$core$variables(t.workspace,n,o,a),a!==null&&a!==t.type)throw Error("Serialized variable type with id '"+t.getId()+"' had type "+t.type+", and does not match variable field that references it: "+Fn(e)+".");this.setValue(t.getId())}toXml(e){return this.initModel(),e.id=this.variable.getId(),e.textContent=this.variable.name,this.variable.type&&e.setAttribute("variabletype",this.variable.type),e}saveState(e){var t=this.saveLegacyState(op);return t!==null||(this.initModel(),t={id:this.variable.getId()},e&&(t.name=this.variable.name,t.type=this.variable.type)),t}loadState(e){const t=this.getSourceBlock();if(!t)throw new $;this.loadLegacyState(op,e)||(e=i.getOrCreateVariablePackage$$module$build$src$core$variables(t.workspace,e.id||null,e.name,e.type||""),this.setValue(e.getId()))}setSourceBlock(e){if(e.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");super.setSourceBlock(e)}getValue(){return this.variable?this.variable.getId():null}getText(){return this.variable?this.variable.name:""}getVariable(){return this.variable}getValidator(){return this.variable?this.validator_:null}doClassValidation_(e){if(e===null)return null;var t=this.getSourceBlock();if(!t)throw new $;return t=i.getVariable$$module$build$src$core$variables(t.workspace,e),t?(t=t.type,this.typeIsAllowed(t)?e:(console.warn("Variable type doesn't match this field!  Type was "+t),null)):(console.warn("Variable id doesn't point to a real variable! ID was "+e),null)}doValueUpdate_(e){const t=this.getSourceBlock();if(!t)throw new $;this.variable=i.getVariable$$module$build$src$core$variables(t.workspace,e),super.doValueUpdate_(e)}typeIsAllowed(e){const t=this.getVariableTypes();if(!t)return!0;for(let n=0;n<t.length;n++)if(e===t[n])return!0;return!1}getVariableTypes(){var e=this.variableTypes;if(e===null&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())return this.sourceBlock_.workspace.getVariableTypes();if(e=e||[""],e.length===0)throw e=this.getText(),Error("'variableTypes' of field variable "+e+" was an empty list");return e}setTypes(e=null,t=""){if(Array.isArray(e)){let n=!1;for(let o=0;o<e.length;o++)e[o]===t&&(n=!0);if(!n)throw Error("Invalid default type '"+t+"' in the definition of a FieldVariable")}else if(e!==null)throw Error("'variableTypes' was not an array in the definition of a FieldVariable");this.defaultType=t,this.variableTypes=e}refreshVariableName(){this.forceRerender()}onItemSelected_(e,t){if(e=t.getValue(),this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()){if(e===Nf){i.renameVariable$$module$build$src$core$variables(this.sourceBlock_.workspace,this.variable);return}if(e===xf){this.sourceBlock_.workspace.deleteVariableById(this.variable.getId());return}}this.setValue(e)}referencesVariables(){return!0}static fromJson(e){return new this(Ut(e.variable),void 0,void 0,void 0,e)}static dropdownCreate(){if(!this.variable)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");const e=this.getText();let t=[];if(this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())for(var n=this.getVariableTypes(),o=0;o<n.length;o++){const a=this.sourceBlock_.workspace.getVariablesOfType(n[o]);t=t.concat(a)}for(t.sort(Fl.compareByName),n=[],o=0;o<t.length;o++)n[o]=[t[o].name,t[o].getId()];return n.push([i.Msg$$module$build$src$core$msg.RENAME_VARIABLE,Nf]),i.Msg$$module$build$src$core$msg.DELETE_VARIABLE&&n.push([i.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",e),xf]),n}};Un("field_variable",op);var Jf=class extends kg{constructor(e,t,n,o,a,f){super(g.SKIP_SETUP),this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces=null,this.spellcheck_=!1,e!==g.SKIP_SETUP&&(f?this.configure_(f):this.setConstraints(t,n,o),this.setValue(e),a&&this.setValidator(a))}configure_(e){super.configure_(e),this.setMinInternal(e.min),this.setMaxInternal(e.max),this.setPrecisionInternal(e.precision)}setConstraints(e,t,n){this.setMinInternal(e),this.setMaxInternal(t),this.setPrecisionInternal(n),this.setValue(this.getValue())}setMin(e){this.setMinInternal(e),this.setValue(this.getValue())}setMinInternal(e){e==null?this.min_=-1/0:(e=Number(e),isNaN(e)||(this.min_=e))}getMin(){return this.min_}setMax(e){this.setMaxInternal(e),this.setValue(this.getValue())}setMaxInternal(e){e==null?this.max_=1/0:(e=Number(e),isNaN(e)||(this.max_=e))}getMax(){return this.max_}setPrecision(e){this.setPrecisionInternal(e),this.setValue(this.getValue())}setPrecisionInternal(e){this.precision_=Number(e)||0;let t=String(this.precision_);t.includes("e")&&(t=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));const n=t.indexOf(".");this.decimalPlaces=n===-1?e?0:null:t.length-n-1}getPrecision(){return this.precision_}doClassValidation_(e){return e===null||(e=`${e}`.replace(/O/gi,"0"),e=e.replace(/,/g,""),e=e.replace(/infinity/i,"Infinity"),e=Number(e||0),isNaN(e))?null:(e=Math.min(Math.max(e,this.min_),this.max_),this.precision_&&isFinite(e)&&(e=Math.round(e/this.precision_)*this.precision_),this.decimalPlaces!==null&&(e=Number(e.toFixed(this.decimalPlaces))),e)}widgetCreate_(){const e=super.widgetCreate_();return-1/0<this.min_&&(e.min=`${this.min_}`,hn(e,Gt.VALUEMIN,this.min_)),1/0>this.max_&&(e.max=`${this.max_}`,hn(e,Gt.VALUEMAX,this.max_)),e}static fromJson(e){return new this(e.value,void 0,void 0,void 0,void 0,e)}};Un("field_number",Jf),Jf.prototype.DEFAULT_VALUE=0;var u_=class extends fc{constructor(e,t,n){super(String(e??""),t,n),this.EDITABLE=!1,this.SERIALIZABLE=!0}static fromJson(e){return new this(Ut(e.text),void 0,e)}};Un("field_label_serializable",u_);var _c=class extends g{constructor(e,t,n){super(g.SKIP_SETUP),this.SERIALIZABLE=!0,this.CURSOR="default",this.value_=this.value_,this.checkChar=_c.CHECK_CHAR,e!==g.SKIP_SETUP&&(n&&this.configure_(n),this.setValue(e),t&&this.setValidator(t))}configure_(e){super.configure_(e),e.checkCharacter&&(this.checkChar=e.checkCharacter)}saveState(){const e=this.saveLegacyState(_c);return e!==null?e:this.getValueBoolean()}initView(){super.initView();const e=this.getTextElement();ke(e,"blocklyCheckbox"),e.style.display=this.value_?"block":"none"}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)}getDisplayText_(){return this.checkChar}setCheckCharacter(e){this.checkChar=e||_c.CHECK_CHAR,this.forceRerender()}showEditor_(){this.setValue(!this.value_)}doClassValidation_(e){return e===!0||e==="TRUE"?"TRUE":e===!1||e==="FALSE"?"FALSE":null}doValueUpdate_(e){this.value_=this.convertValueToBool(e),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")}getValue(){return this.value_?"TRUE":"FALSE"}getValueBoolean(){return this.value_}getText(){return String(this.convertValueToBool(this.value_))}convertValueToBool(e){return typeof e=="string"?e==="TRUE":!!e}static fromJson(e){return new this(e.checked,void 0,e)}};_c.CHECK_CHAR="✓",Un("field_checkbox",_c),_c.prototype.DEFAULT_VALUE=!1;var c_=class{constructor(e,t){this.draggable=e,this.workspace=t,this.dragTarget=null,this.startLoc=e.getRelativeToSurfaceXY()}onDragStart(e){this.draggable.startDrag(e)}onDrag(e,t){this.moveDraggable(e,t),t=this.getRoot(this.draggable),tr(t)&&t.setDeleteStyle(this.wouldDeleteDraggable(e,t)),this.updateDragTarget(e)}updateDragTarget(e){e=this.workspace.getDragTarget(e);const t=this.getRoot(this.draggable);if(this.dragTarget!==e){let n;(n=this.dragTarget)==null||n.onDragExit(t),e==null||e.onDragEnter(t)}e==null||e.onDragOver(t),this.dragTarget=e}moveDraggable(e,t){t=this.pixelsToWorkspaceUnits(t),t=ae.sum(this.startLoc,t),this.draggable.drag(t,e)}wouldDeleteDraggable(e,t){return(e=this.workspace.getDragTarget(e))&&this.workspace.getComponentManager().hasCapability(e.id,vt.Capability.DELETE_AREA)?e.wouldDelete(t):!1}onDragEnd(e){const t=i.getGroup$$module$build$src$core$events$utils();var n=this.workspace.getDragTarget(e);const o=this.getRoot(this.draggable);if(n){let a;(a=this.dragTarget)==null||a.onDrop(o)}this.shouldReturnToStart(e,o)&&this.draggable.revertDrag(),(n=tr(o)&&this.wouldDeleteDraggable(e,o))&&this.draggable instanceof xs&&cr(this.draggable.getRootBlock()),this.draggable.endDrag(e),n&&tr(o)&&(e=i.getGroup$$module$build$src$core$events$utils(),i.setGroup$$module$build$src$core$events$utils(t),o.dispose(),i.setGroup$$module$build$src$core$events$utils(e))}getRoot(e){return e instanceof xs?e.getRootBlock():e}shouldReturnToStart(e,t){return(e=this.workspace.getDragTarget(e))?e.shouldPreventMove(t):!1}pixelsToWorkspaceUnits(e){return e=new ae(e.x/this.workspace.scale,e.y/this.workspace.scale),this.workspace.isMutator&&e.scale(1/this.workspace.options.parentWorkspace.scale),e}};d(ne.BLOCK_DRAGGER,hr,c_);var lp={};lp.BlockDragStrategy=Bm,lp.BubbleDragStrategy=Em,lp.CommentDragStrategy=Ue,lp.Dragger=c_;var qf=class extends Rr{constructor(e,t,n){super(e?e.workspace.id:void 0),this.type=z.BLOCK_DRAG,e&&(this.blockId=e.id,this.isStart=t,this.blocks=n)}toJson(){const e=super.toJson();if(this.isStart===void 0)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");if(this.blockId===void 0)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return e.isStart=this.isStart,e.blockId=this.blockId,e.blocks=this.blocks,e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new qf),t.isStart=e.isStart,t.blockId=e.blockId,t.blocks=e.blocks,t}};d(ne.EVENT,z.BLOCK_DRAG,qf);var Qf=class extends Ar{constructor(e,t,n,o){super(e),this.type=z.BLOCK_FIELD_INTERMEDIATE_CHANGE,this.recordUndo=!1,e&&(this.name=t,this.oldValue=n,this.newValue=o)}toJson(){const e=super.toJson();if(!this.name)throw Error("The changed field name is undefined. Either pass a name to the constructor, or call fromJson.");return e.name=this.name,e.oldValue=this.oldValue,e.newValue=this.newValue,e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new Qf),t.name=e.name,t.oldValue=e.oldValue,t.newValue=e.newValue,t}isNull(){return this.oldValue===this.newValue}run(e){var t=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(t=t.getBlockById(this.blockId),!t)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");e=e?this.newValue:this.oldValue,(t=t.getField(this.name))?t.setValue(e):console.warn("Can't set non-existent field: "+this.name)}};d(ne.EVENT,z.BLOCK_FIELD_INTERMEDIATE_CHANGE,Qf);var Zf=class extends Ar{constructor(e){super(e),this.type=z.BLOCK_MOVE,e&&(e.isShadow()&&(this.recordUndo=!1),e=this.currentLocation(),this.oldParentId=e.parentId,this.oldInputName=e.inputName,this.oldCoordinate=e.coordinate)}toJson(){const e=super.toJson();return e.oldParentId=this.oldParentId,e.oldInputName=this.oldInputName,this.oldCoordinate&&(e.oldCoordinate=`${Math.round(this.oldCoordinate.x)}, ${Math.round(this.oldCoordinate.y)}`),e.newParentId=this.newParentId,e.newInputName=this.newInputName,this.newCoordinate&&(e.newCoordinate=`${Math.round(this.newCoordinate.x)}, ${Math.round(this.newCoordinate.y)}`),this.reason&&(e.reason=this.reason),this.recordUndo||(e.recordUndo=this.recordUndo),e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new Zf),t.oldParentId=e.oldParentId,t.oldInputName=e.oldInputName,e.oldCoordinate&&(n=e.oldCoordinate.split(","),t.oldCoordinate=new ae(Number(n[0]),Number(n[1]))),t.newParentId=e.newParentId,t.newInputName=e.newInputName,e.newCoordinate&&(n=e.newCoordinate.split(","),t.newCoordinate=new ae(Number(n[0]),Number(n[1]))),e.reason!==void 0&&(t.reason=e.reason),e.recordUndo!==void 0&&(t.recordUndo=e.recordUndo),t}recordNew(){const e=this.currentLocation();this.newParentId=e.parentId,this.newInputName=e.inputName,this.newCoordinate=e.coordinate}setReason(e){this.reason=e}currentLocation(){var e=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var t=e.getBlockById(this.blockId);if(!t)throw Error("The block associated with the block move event could not be found");e={};const n=t.getParent();return n?(e.parentId=n.id,(t=n.getInputWithBlock(t))&&(e.inputName=t.name)):e.coordinate=t.getRelativeToSurfaceXY(),e}isNull(){return this.oldParentId===this.newParentId&&this.oldInputName===this.newInputName&&ae.equals(this.oldCoordinate,this.newCoordinate)}run(e){var t=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var n=t.getBlockById(this.blockId);if(n){var o=e?this.newParentId:this.oldParentId,a=e?this.newInputName:this.oldInputName;if(e=e?this.newCoordinate:this.oldCoordinate,o){var f=t.getBlockById(o);if(!f){console.warn("Can't connect to non-existent block: "+o);return}}if(n.getParent()&&n.unplug(),e)a=n.getRelativeToSurfaceXY(),n.moveBy(e.x-a.x,e.y-a.y,this.reason);else{t=n.outputConnection,(!t||n.previousConnection&&n.previousConnection.isConnected())&&(t=n.previousConnection);let E,w;n=(w=t)==null?void 0:w.type,a?(n=f.getInput(a))&&(E=n.connection):n===Ie.PREVIOUS_STATEMENT&&(E=f.nextConnection),E&&t?t.connect(E):console.warn("Can't connect to non-existent input: "+a)}}else console.warn("Can't move non-existent block: "+this.blockId)}};d(ne.EVENT,z.BLOCK_MOVE,Zf);var e$=class extends Rr{constructor(e,t,n){super(e?e.workspace.id:void 0),this.type=z.BUBBLE_OPEN,e&&(this.blockId=e.id,this.isOpen=t,this.bubbleType=n)}toJson(){const e=super.toJson();if(this.isOpen===void 0)throw Error("Whether this event is for opening the bubble is undefined. Either pass the value to the constructor, or call fromJson");if(!this.bubbleType)throw Error("The type of bubble is undefined. Either pass the value to the constructor, or call fromJson");return e.isOpen=this.isOpen,e.bubbleType=this.bubbleType,e.blockId=this.blockId||"",e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new e$),t.isOpen=e.isOpen,t.bubbleType=e.bubbleType,t.blockId=e.blockId,t}},t$;(function(e){e.MUTATOR="mutator",e.COMMENT="comment",e.WARNING="warning"})(t$||(t$={})),d(ne.EVENT,z.BUBBLE_OPEN,e$);var Xi=class extends Oo{constructor(e){super(),this.isBlank=!e,e&&(this.commentId=e.id,this.workspaceId=e.workspace.id,this.group=i.getGroup$$module$build$src$core$events$utils(),this.recordUndo=$e())}toJson(){const e=super.toJson();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");return e.commentId=this.commentId,e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new Xi),t.commentId=e.commentId,t}static CommentCreateDeleteHelper(e,t){const n=e.getEventWorkspace_();if(t){if(!e.json)throw Error("Encountered a comment event without proper json");Ti(e.json,n)}else{if(!e.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(t=n.getCommentById(e.commentId))?t.dispose():console.warn("Can't delete non-existent comment: "+e.commentId)}}},n$=class extends Xi{constructor(e,t,n){super(e),this.type=z.COMMENT_CHANGE,e&&(this.oldContents_=typeof t>"u"?"":t,this.newContents_=typeof n>"u"?"":n)}toJson(){const e=super.toJson();if(!this.oldContents_)throw Error("The old contents is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newContents_)throw Error("The new contents is undefined. Either pass a value to the constructor, or call fromJson");return e.oldContents=this.oldContents_,e.newContents=this.newContents_,e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new n$),t.oldContents_=e.oldContents,t.newContents_=e.newContents,t}isNull(){return this.oldContents_===this.newContents_}run(e){var t=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(t=t.getCommentById(this.commentId)){var n=e?this.newContents_:this.oldContents_;if(n===void 0)throw Error(e?"The new contents is undefined. Either pass a value to the constructor, or call fromJson":"The old contents is undefined. Either pass a value to the constructor, or call fromJson");t.setText(n)}else console.warn("Can't change non-existent comment: "+this.commentId)}};d(ne.EVENT,z.COMMENT_CHANGE,n$);var r$=class extends Xi{constructor(e,t){super(e),this.newCollapsed=t,this.type=z.COMMENT_COLLAPSE}toJson(){const e=super.toJson();if(this.newCollapsed===void 0)throw Error("The new collapse value undefined. Either call recordNew, or call fromJson");return e.newCollapsed=this.newCollapsed,e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new r$),t.newCollapsed=e.newCollapsed,t}run(e){var t=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(t=t.getCommentById(this.commentId))?t.setCollapsed(e?!!this.newCollapsed:!this.newCollapsed):console.warn("Can't collapse or uncollapse non-existent comment: "+this.commentId)}};d(ne.EVENT,z.COMMENT_COLLAPSE,r$);var s$=class extends Xi{constructor(e){super(e),this.type=z.COMMENT_CREATE,e&&(this.xml=To(e),this.json=no(e,{addCoordinates:!0}))}toJson(){const e=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.json)throw Error("The comment JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.xml=Fn(this.xml),e.json=this.json,e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new s$),t.xml=i.textToDom$$module$build$src$core$utils$xml(e.xml),t.json=e.json,t}run(e){Xi.CommentCreateDeleteHelper(this,e)}};d(ne.EVENT,z.COMMENT_CREATE,s$);var i$=class extends Xi{constructor(e){super(e),this.type=z.COMMENT_DELETE,e&&(this.xml=To(e),this.json=no(e,{addCoordinates:!0}))}run(e){Xi.CommentCreateDeleteHelper(this,!e)}toJson(){const e=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.json)throw Error("The comment JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.xml=Fn(this.xml),e.json=this.json,e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new i$),t.xml=i.textToDom$$module$build$src$core$utils$xml(e.xml),t.json=e.json,t}};d(ne.EVENT,z.COMMENT_DELETE,i$);var o$=class extends Rr{constructor(e,t){super(e?e.workspace.id:void 0),this.type=z.COMMENT_DRAG,e&&(this.commentId=e.id,this.isStart=t)}toJson(){const e=super.toJson();if(this.isStart===void 0)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");if(this.commentId===void 0)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");return e.isStart=this.isStart,e.commentId=this.commentId,e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new o$),t.isStart=e.isStart,t.commentId=e.commentId,t}};d(ne.EVENT,z.COMMENT_DRAG,o$);var l$=class extends Xi{constructor(e){super(e),this.type=z.COMMENT_MOVE,e&&(this.comment_=e,this.oldCoordinate_=e.getRelativeToSurfaceXY())}recordNew(){if(this.newCoordinate_)throw Error("Tried to record the new position of a comment on the same event twice.");if(!this.comment_)throw Error("The comment is undefined. Pass a comment to the constructor if you want to use the record functionality");this.newCoordinate_=this.comment_.getRelativeToSurfaceXY()}setReason(e){this.reason=e}setOldCoordinate(e){this.oldCoordinate_=e}toJson(){const e=super.toJson();if(!this.oldCoordinate_)throw Error("The old comment position is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newCoordinate_)throw Error("The new comment position is undefined. Either call recordNew, or call fromJson");return e.oldCoordinate=`${Math.round(this.oldCoordinate_.x)}, ${Math.round(this.oldCoordinate_.y)}`,e.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y),e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new l$),n=e.oldCoordinate.split(","),t.oldCoordinate_=new ae(Number(n[0]),Number(n[1])),n=e.newCoordinate.split(","),t.newCoordinate_=new ae(Number(n[0]),Number(n[1])),t}isNull(){return ae.equals(this.oldCoordinate_,this.newCoordinate_)}run(e){var t=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(t=t.getCommentById(this.commentId)){if(e=e?this.newCoordinate_:this.oldCoordinate_,!e)throw Error("Either oldCoordinate_ or newCoordinate_ is undefined. Either pass a comment to the constructor and call recordNew, or call fromJson");t.moveTo(e)}else console.warn("Can't move non-existent comment: "+this.commentId)}};d(ne.EVENT,z.COMMENT_MOVE,l$);var u$=class extends Xi{constructor(e){super(e),this.type=z.COMMENT_RESIZE,e&&(this.oldSize=e.getSize())}recordCurrentSizeAsNewSize(){if(this.newSize)throw Error("Tried to record the new size of a comment on the same event twice.");var e=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(e=e.getCommentById(this.commentId),!e)throw Error("The comment associated with the comment resize event could not be found");this.newSize=e.getSize()}toJson(){const e=super.toJson();if(!this.oldSize)throw Error("The old comment size is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newSize)throw Error("The new comment size is undefined. Either call recordCurrentSizeAsNewSize, or call fromJson");return e.oldWidth=Math.round(this.oldSize.width),e.oldHeight=Math.round(this.oldSize.height),e.newWidth=Math.round(this.newSize.width),e.newHeight=Math.round(this.newSize.height),e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new u$),t.oldSize=new oe(e.oldWidth,e.oldHeight),t.newSize=new oe(e.newWidth,e.newHeight),t}isNull(){return oe.equals(this.oldSize,this.newSize)}run(e){var t=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(t=t.getCommentById(this.commentId)){if(e=e?this.newSize:this.oldSize,!e)throw Error("Either oldSize or newSize is undefined. Either pass a comment to the constructor and call recordCurrentSizeAsNewSize, or call fromJson");t.setSize(e)}else console.warn("Can't resize non-existent comment: "+this.commentId)}};d(ne.EVENT,z.COMMENT_RESIZE,u$);var c$=class extends Rr{constructor(e,t,n){super(n),this.type=z.TOOLBOX_ITEM_SELECT,this.oldItem=e??void 0,this.newItem=t??void 0}toJson(){const e=super.toJson();return e.oldItem=this.oldItem,e.newItem=this.newItem,e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new c$),t.oldItem=e.oldItem,t.newItem=e.newItem,t}};d(ne.EVENT,z.TOOLBOX_ITEM_SELECT,c$);var a_=class extends Oo{constructor(e){super(),this.isBlank=!0,this.recordUndo=!1,this.type=z.FINISHED_LOADING,this.isBlank=!!e,e&&(this.workspaceId=e.id)}};d(ne.EVENT,z.FINISHED_LOADING,a_);var d_,h_,p_,g_,f_,$_,m_,__,T_,E_,b_,y_,v_,S_,C_,I_,k_,w_,O_,R_,L_,A_,D_,M_,N_,ye;i.BLOCK_CHANGE$$module$build$src$core$events$events=z.BLOCK_CHANGE,i.BLOCK_CREATE$$module$build$src$core$events$events=z.BLOCK_CREATE,i.BLOCK_DELETE$$module$build$src$core$events$events=z.BLOCK_DELETE,d_=z.BLOCK_DRAG,i.BLOCK_MOVE$$module$build$src$core$events$events=z.BLOCK_MOVE,h_=z.BLOCK_FIELD_INTERMEDIATE_CHANGE,p_=z.BUBBLE_OPEN,g_=z.BLOCK_CHANGE,f_=z.CLICK,$_=z.COMMENT_CHANGE,m_=z.COMMENT_CREATE,__=z.COMMENT_DELETE,T_=z.COMMENT_MOVE,E_=z.COMMENT_RESIZE,b_=z.COMMENT_DRAG,y_=z.BLOCK_CREATE,v_=z.BLOCK_DELETE,S_=z.FINISHED_LOADING,C_=z.MARKER_MOVE,I_=z.BLOCK_MOVE,k_=z.SELECTED,w_=z.THEME_CHANGE,O_=z.TOOLBOX_ITEM_SELECT,R_=z.TRASHCAN_OPEN,L_=z.UI,A_=z.VAR_CREATE,D_=z.VAR_DELETE,M_=z.VAR_RENAME,N_=z.VIEWPORT_CHANGE,ye={},ye.Abstract=Oo,ye.BLOCK_CHANGE=i.BLOCK_CHANGE$$module$build$src$core$events$events,ye.BLOCK_CREATE=i.BLOCK_CREATE$$module$build$src$core$events$events,ye.BLOCK_DELETE=i.BLOCK_DELETE$$module$build$src$core$events$events,ye.BLOCK_DRAG=d_,ye.BLOCK_FIELD_INTERMEDIATE_CHANGE=h_,ye.BLOCK_MOVE=i.BLOCK_MOVE$$module$build$src$core$events$events,ye.BUBBLE_OPEN=p_,ye.BUMP_EVENTS=vh,ye.BlockBase=Ar,ye.BlockChange=Hi,ye.BlockCreate=Yh,ye.BlockDelete=Lf,ye.BlockDrag=qf,ye.BlockFieldIntermediateChange=Qf,ye.BlockMove=Zf,ye.BubbleOpen=e$,ye.BubbleType=t$,ye.CHANGE=g_,ye.CLICK=f_,ye.COMMENT_CHANGE=$_,ye.COMMENT_CREATE=m_,ye.COMMENT_DELETE=__,ye.COMMENT_DRAG=b_,ye.COMMENT_MOVE=T_,ye.COMMENT_RESIZE=E_,ye.CREATE=y_,ye.Click=Sa,ye.ClickTarget=zu,ye.CommentBase=Xi,ye.CommentChange=n$,ye.CommentCollapse=r$,ye.CommentCreate=s$,ye.CommentDelete=i$,ye.CommentDrag=o$,ye.CommentMove=l$,ye.CommentResize=u$,ye.DELETE=v_,ye.FINISHED_LOADING=S_,ye.FinishedLoading=a_,ye.MARKER_MOVE=C_,ye.MOVE=I_,ye.MarkerMove=Af,ye.SELECTED=k_,ye.Selected=Uf,ye.THEME_CHANGE=w_,ye.TOOLBOX_ITEM_SELECT=O_,ye.TRASHCAN_OPEN=R_,ye.ThemeChange=Tf,ye.ToolboxItemSelect=c$,ye.TrashcanOpen=Gf,ye.UI=L_,ye.UiBase=Rr,ye.VAR_CREATE=A_,ye.VAR_DELETE=D_,ye.VAR_RENAME=M_,ye.VIEWPORT_CHANGE=N_,ye.VarBase=ic,ye.VarCreate=Ls,ye.VarDelete=Pf,ye.VarRename=Bf,ye.ViewportChange=Ef,ye.clearPendingUndo=Me,ye.disable=i.disable$$module$build$src$core$events$utils,ye.disableOrphans=xe,ye.enable=i.enable$$module$build$src$core$events$utils,ye.filter=Ce,ye.fire=ce,ye.fromJson=Ye,ye.get=X,ye.getDescendantIds=Xe,ye.getGroup=i.getGroup$$module$build$src$core$events$utils,ye.getRecordUndo=$e,ye.isEnabled=Re,ye.setGroup=i.setGroup$$module$build$src$core$events$utils,ye.setRecordUndo=i.setRecordUndo$$module$build$src$core$events$utils;var pi={};pi.BottomRow=qm,pi.ConstantProvider=Ym,pi.Drawer=Jm,pi.MarkerSvg=t_,pi.PathObject=n_,pi.RenderInfo=e_,pi.Renderer=Kf,pi.RightConnectionShape=Qm,pi.StatementInput=Og,pi.TopRow=Zm,Ea();var On={};On.registerCleanup=Pu,On.registerCollapse=Ml,On.registerCollapseExpandBlock=pn,On.registerComment=Co,On.registerCommentCreate=Io,On.registerCommentDelete=wr,On.registerCommentDuplicate=nr,On.registerCommentOptions=mh,On.registerDefaultOptions=Ea,On.registerDelete=Gu,On.registerDeleteAll=tn,On.registerDisable=Hu,On.registerDuplicate=So,On.registerExpand=Fu,On.registerHelp=Vu,On.registerInline=$h,On.registerRedo=Dl,On.registerUndo=wt;var Lg={};Lg.CommentView=Ve,Lg.RenderedWorkspaceComment=tt,Lg.WorkspaceComment=en;var up={};up.Bubble=pt,up.MiniWorkspaceBubble=Xo,up.TextBubble=Im,up.TextInputBubble=bm;var x_=class extends _g{constructor(){super(),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2}getCSS_(e){return super.getCSS_(e).concat([`${e} .blocklyInsertionMarker>.blocklyPathLight,`,`${e} .blocklyInsertionMarker>.blocklyPathDark {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"])}},P_=class{constructor(e){this.inlineSteps_=this.steps_="",this.info_=e,this.RTL_=this.info_.RTL,e=e.getRenderer(),this.constants_=e.getConstants(),this.highlightConstants_=e.getHighlightConstants(),this.highlightOffset=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH}getPath(){return this.steps_+`
`+this.inlineSteps_}drawTopCorner(e){this.steps_+=mt(e.xPos,this.info_.startY);for(let t=0,n;n=e.elements[t];t++)M.isLeftSquareCorner(n)?this.steps_+=this.highlightConstants_.START_POINT:M.isLeftRoundedCorner(n)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):M.isPreviousConnection(n)?this.steps_+=this.notchPaths_.pathLeft:M.isHat(n)?this.steps_+=this.startPaths_.path(this.RTL_):M.isSpacer(n)&&n.width!==0&&(this.steps_+=_e("H",n.xPos+n.width-this.highlightOffset));this.steps_+=_e("H",e.xPos+e.width-this.highlightOffset)}drawJaggedEdge_(e){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+_e("v",e.height-this.jaggedTeethPaths_.height-this.highlightOffset))}drawValueInput(e){const t=e.getLastInput();if(this.RTL_){const n=e.height-t.connectionHeight;this.steps_+=Xt(t.xPos+t.width-this.highlightOffset,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+_e("v",n)}else this.steps_+=Xt(t.xPos+t.width,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)}drawStatementInput(e){const t=e.getLastInput();if(t)if(this.RTL_){const n=e.height-2*this.insideCornerPaths_.height;this.steps_+=Xt(t.xPos,e.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+_e("v",n)+this.insideCornerPaths_.pathBottom(this.RTL_)+Wr(e.width-t.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=Xt(t.xPos,e.yPos+e.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+Wr(e.width-t.xPos-this.insideCornerPaths_.width,0)}drawRightSideRow(e){const t=e.xPos+e.width-this.highlightOffset;e instanceof Of&&e.followsStatement&&(this.steps_+=_e("H",t)),this.RTL_&&(this.steps_+=_e("H",t),e.height>this.highlightOffset&&(this.steps_+=_e("V",e.yPos+e.height-this.highlightOffset)))}drawBottomRow(e){if(this.RTL_)this.steps_+=_e("V",e.baseline-this.highlightOffset);else{const t=this.info_.bottomRow.elements[0];M.isLeftSquareCorner(t)?this.steps_+=Xt(e.xPos+this.highlightOffset,e.baseline-this.highlightOffset):M.isLeftRoundedCorner(t)&&(this.steps_+=Xt(e.xPos,e.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}}drawLeft(){var e=this.info_.outputConnection;e&&(e=e.connectionOffsetY+e.height,this.RTL_?this.steps_+=Xt(this.info_.startX,e):(this.steps_+=Xt(this.info_.startX+this.highlightOffset,this.info_.bottomRow.baseline-this.highlightOffset),this.steps_+=_e("V",e)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(e=this.info_.topRow,M.isLeftRoundedCorner(e.elements[0])?this.steps_+=_e("V",this.outsideCornerPaths_.height):this.steps_+=_e("V",e.capline+this.highlightOffset))}drawInlineInput(e){const t=this.highlightOffset,n=e.xPos+e.connectionWidth;var o=e.centerline-e.height/2;const a=e.width-e.connectionWidth,f=o+t;this.RTL_?(o=e.connectionOffsetY-t,e=e.height-(e.connectionOffsetY+e.connectionHeight)+t,this.inlineSteps_+=Xt(n-t,f)+_e("v",o)+this.puzzleTabPaths_.pathDown(this.RTL_)+_e("v",e)+_e("h",a)):this.inlineSteps_+=Xt(e.xPos+e.width+t,f)+_e("v",e.height)+_e("h",-a)+Xt(n,o+e.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)}},B_=class extends Tg{constructor(e,t){super(e,t),this.highlighter_=new P_(t)}draw(){this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights();const e=this.block_.pathObject;e.setPath(this.outlinePath_+`
`+this.inlinePath_),e.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&e.flipRTL(),this.recordSizeOnBlock_()}drawTop_(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),super.drawTop_()}drawJaggedEdge_(e){this.highlighter_.drawJaggedEdge_(e),super.drawJaggedEdge_(e)}drawValueInput_(e){this.highlighter_.drawValueInput(e),super.drawValueInput_(e)}drawStatementInput_(e){this.highlighter_.drawStatementInput(e),super.drawStatementInput_(e)}drawRightSideRow_(e){this.highlighter_.drawRightSideRow(e),this.outlinePath_+=_e("H",e.xPos+e.width)+_e("V",e.yPos+e.height)}drawBottom_(){this.highlighter_.drawBottomRow(this.info_.bottomRow),super.drawBottom_()}drawLeft_(){this.highlighter_.drawLeft(),super.drawLeft_()}drawInlineInput_(e){this.highlighter_.drawInlineInput(e),super.drawInlineInput_(e)}positionInlineInputConnection_(e){const t=e.centerline-e.height/2;if(e.connectionModel){let n=e.xPos+e.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(n*=-1),e.connectionModel.setOffsetInBlock(n,t+e.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}}positionStatementInputConnection_(e){const t=e.getLastInput();if(t!=null&&t.connectionModel){let n=e.xPos+e.statementEdge+t.notchOffset;n=this.info_.RTL?-1*n:n+this.constants_.DARK_PATH_OFFSET,t.connectionModel.setOffsetInBlock(n,e.yPos+this.constants_.DARK_PATH_OFFSET)}}positionExternalValueConnection_(e){const t=e.getLastInput();if(t&&t.connectionModel){let n=e.xPos+e.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(n*=-1),t.connectionModel.setOffsetInBlock(n,e.yPos)}}positionNextConnection_(){const e=this.info_.bottomRow;if(e.connection){const t=e.connection,n=t.xPos;t.connectionModel.setOffsetInBlock((this.info_.RTL?-n:n)+this.constants_.DARK_PATH_OFFSET/2,e.baseline+this.constants_.DARK_PATH_OFFSET)}}},F_=class{constructor(e){this.OFFSET=.5,this.constantProvider=e,this.START_POINT=mt(this.OFFSET,this.OFFSET)}init(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()}makeInsideCorner(){const e=this.constantProvider.CORNER_RADIUS,t=this.OFFSET,n=(1-Math.SQRT1_2)*(e+t)-t,o=mt(n,n)+Tt("a","0 0,0",e,Ae(-n-t,e-n)),a=Tt("a","0 0,0",e+t,Ae(e+t,e+t)),f=mt(n,-n)+Tt("a","0 0,0",e+t,Ae(e-n,n+t));return{width:e+t,height:e,pathTop(E){return E?o:""},pathBottom(E){return E?a:f}}}makeOutsideCorner(){const e=this.constantProvider.CORNER_RADIUS,t=this.OFFSET,n=(1-Math.SQRT1_2)*(e-t)+t,o=mt(n,n)+Tt("a","0 0,1",e-t,Ae(e-n,-n+t)),a=mt(t,e)+Tt("a","0 0,1",e-t,Ae(e,-e+t)),f=-n,E=mt(n,f)+Tt("a","0 0,1",e-t,Ae(-n+t,-f-e));return{height:e,topLeft(w){return w?o:a},bottomLeft(){return E}}}makePuzzleTab(){const e=this.constantProvider.TAB_WIDTH,t=this.constantProvider.TAB_HEIGHT,n=mt(-2,-t+3.4)+Wr(-.45*e,-2.1),o=_e("v",2.5)+mt(.97*-e,2.5)+jt("q",[Ae(.05*-e,10),Ae(.3*e,9.5)])+mt(.67*e,-1.9)+_e("v",2.5),a=_e("v",-1.5)+mt(-.92*e,-.5)+jt("q",[Ae(-.19*e,-5.5),Ae(0,-11)])+mt(.92*e,1),f=mt(-5,t-.7)+Wr(.46*e,-2.1);return{width:e,height:t,pathUp(E){return E?n:a},pathDown(E){return E?o:f}}}makeNotch(){return{pathLeft:_e("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}}makeJaggedTeeth(){return{pathLeft:Wr(5.1,2.6)+mt(-10.2,6.8)+Wr(5.1,2.6),height:12,width:10.2}}makeStartHat(){const e=this.constantProvider.START_HAT.height,t=mt(25,-8.7)+jt("c",[Ae(29.7,-6.2),Ae(57.2,-.5),Ae(75,8.7)]),n=jt("c",[Ae(17.8,-9.2),Ae(45.3,-14.9),Ae(75,-8.7)])+Xt(100.5,e+.5);return{path(o){return o?t:n}}}},U_=class extends kf{constructor(e,t){super(e,t),this.constants_=e,this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)}},H_=class extends Zh{constructor(e,t){super(e,t),this.constants_=e,this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)}},G_=class extends np{constructor(e,t){super(e,t),this.renderer_=e}getRenderer(){return this.renderer_}populateBottomRow_(){super.populateBottomRow_(),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof os||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)}addInput_(e,t){this.isInline&&e instanceof i.ValueInput$$module$build$src$core$inputs$value_input?(t.elements.push(new U_(this.constants_,e)),t.hasInlineInput=!0):e instanceof os?(t.elements.push(new H_(this.constants_,e)),t.hasStatement=!0):e instanceof i.ValueInput$$module$build$src$core$inputs$value_input?(t.elements.push(new mg(this.constants_,e)),t.hasExternalInput=!0):(e instanceof Wi||e instanceof Qo)&&(t.minHeight=Math.max(t.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),t.hasDummyInput=!0),this.isInline||t.align!==null||(t.align=e.align)}addElemSpacing_(){let e=!1;for(let n=0,o;o=this.rows[n];n++)o.hasExternalInput&&(e=!0);for(let n=0,o;o=this.rows[n];n++){var t=o.elements;if(o.elements=[],o.startsWithElemSpacer()&&o.elements.push(new is(this.constants_,this.getInRowSpacing_(null,t[0]))),t.length){for(let a=0;a<t.length-1;a++){o.elements.push(t[a]);const f=this.getInRowSpacing_(t[a],t[a+1]);o.elements.push(new is(this.constants_,f))}o.elements.push(t[t.length-1]),o.endsWithElemSpacer()&&(t=this.getInRowSpacing_(t[t.length-1],null),e&&o.hasDummyInput&&(t+=this.constants_.TAB_WIDTH),o.elements.push(new is(this.constants_,t)))}}}getInRowSpacing_(e,t){if(!e)return t&&M.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:t&&M.isInlineInput(t)?this.constants_.MEDIUM_LARGE_PADDING:t&&M.isStatementInput(t)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!M.isInput(e)&&(!t||M.isStatementInput(t)))return M.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:M.isIcon(e)?2*this.constants_.LARGE_PADDING+1:M.isHat(e)?this.constants_.NO_PADDING:M.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:M.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:M.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(M.isInput(e)&&!t){if(M.isExternalInput(e))return this.constants_.NO_PADDING;if(M.isInlineInput(e))return this.constants_.LARGE_PADDING;if(M.isStatementInput(e))return this.constants_.NO_PADDING}if(!M.isInput(e)&&t&&M.isInput(t)){if(M.isField(e)&&e.isEditable){if(M.isInlineInput(t)||M.isExternalInput(t))return this.constants_.SMALL_PADDING}else{if(M.isInlineInput(t)||M.isExternalInput(t))return this.constants_.MEDIUM_LARGE_PADDING;if(M.isStatementInput(t))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(M.isIcon(e)&&t&&!M.isInput(t))return this.constants_.LARGE_PADDING;if(M.isInlineInput(e)&&t&&M.isField(t))return t.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(M.isLeftSquareCorner(e)&&t){if(M.isHat(t))return this.constants_.NO_PADDING;if(M.isPreviousConnection(t))return t.notchOffset;if(M.isNextConnection(t))return t.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(M.isLeftRoundedCorner(e)&&t){if(M.isPreviousConnection(t))return t.notchOffset-this.constants_.CORNER_RADIUS;if(M.isNextConnection(t))return t.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return M.isField(e)&&t&&M.isField(t)&&e.isEditable===t.isEditable||t&&M.isJaggedEdge(t)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(e,t){return M.isTopRow(e)&&M.isBottomRow(t)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:M.isTopRow(e)||M.isBottomRow(t)?this.constants_.NO_PADDING:e.hasExternalInput&&t.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&t.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&t.hasStatement||!e.hasStatement&&t.hasDummyInput||e.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(e,t){if(M.isSpacer(t))return e.yPos+t.height/2;if(M.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,M.isNextConnection(t)?e+t.height/2:e-t.height/2;if(M.isTopRow(e))return M.isHat(t)?e.capline-t.height/2:e.capline+t.height/2;let n=e.yPos;return M.isField(t)||M.isIcon(t)?(n+=t.height/2,(e.hasInlineInput||e.hasStatement)&&t.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=e.height&&(n+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):n=M.isInlineInput(t)?n+t.height/2:n+e.height/2,n}alignRowElements_(){if(this.isInline){var e=0,t=new WeakMap,n=null;for(let o=this.rows.length-1,a;a=this.rows[o];o--)t.set(a,e),M.isInputRow(a)&&(a.hasStatement&&this.alignStatementRow_(a),n&&n.hasStatement&&a.width<n.width?t.set(a,n.width):e=a.hasStatement?a.width:Math.max(e,a.width),n=a);e=0;for(let o=0,a;a=this.rows[o];o++)a.hasStatement?e=this.getDesiredRowWidth_(a):M.isSpacer(a)?a.width=Math.max(e,t.get(a)):(n=a.width,e=Math.max(e,t.get(a))-n,0<e&&this.addAlignmentPadding_(a,e),e=a.width)}else super.alignRowElements_()}getDesiredRowWidth_(e){return this.isInline&&e.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:super.getDesiredRowWidth_(e)}finalize_(){let e=0,t=0;for(let o=0,a;a=this.rows[o];o++){a.yPos=t,a.xPos=this.startX,t+=a.height,e=Math.max(e,a.widthWithConnectedBlocks);var n=t-this.topRow.ascenderHeight;a===this.bottomRow&&n<this.constants_.MIN_BLOCK_HEIGHT&&(n=this.constants_.MIN_BLOCK_HEIGHT-n,this.bottomRow.height+=n,t+=n),this.recordElemPositions_(a)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(n=this.block_.nextConnection.targetBlock())&&(e=Math.max(e,n.getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=t-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=t+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline}},V_=class extends Eg{constructor(e,t,n){super(e,t,n),this.constants=n,this.colourDark="#000000",this.svgPathDark=J(P.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"}),this.svgRoot.insertBefore(this.svgPathDark,this.svgPath),this.svgPathLight=J(P.PATH,{class:"blocklyPathLight"},this.svgRoot)}setPath(e){this.svgPath.setAttribute("d",e),this.svgPathDark.setAttribute("d",e)}setHighlightPath(e){this.svgPathLight.setAttribute("d",e)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")}applyColour(e){if(this.svgPathLight.style.display="",this.svgPathDark.style.display="",!this.style.colourTertiary)throw Error("The renderer did not properly initialize the tertiary colour of the block style");this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),super.applyColour(e),this.svgPath.setAttribute("stroke","none")}setStyle(e){this.style=e,this.colourDark=Vr("#000",this.style.colourPrimary,.2)||this.colourDark}updateHighlighted(e){e?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")}updateShadow_(e){if(e){if(this.svgPathLight.style.display="none",!this.style.colourSecondary)throw Error("The renderer did not properly initialize the secondary colour of the block style block style");this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary)}}updateDisabled_(e){super.updateDisabled_(e),e&&this.svgPath.setAttribute("stroke","none")}},W_=class extends bg{constructor(e){super(e),this.highlightConstants=null}init(e,t){super.init(e,t),this.highlightConstants=this.makeHighlightConstants_(),this.highlightConstants.init()}refreshDom(e,t){super.refreshDom(e,t),this.getHighlightConstants().init()}makeConstants_(){return new x_}makeRenderInfo_(e){return new G_(this,e)}makeDrawer_(e,t){return new B_(e,t)}makePathObject(e,t){return new V_(e,t,this.getConstants())}makeHighlightConstants_(){return new F_(this.getConstants())}getHighlightConstants(){if(!this.highlightConstants)throw Error("Cannot access the highlight constants because init has not been called");return this.highlightConstants}};vs("geras",W_);var Ki={};Ki.ConstantProvider=x_,Ki.Drawer=B_,Ki.HighlightConstantProvider=F_,Ki.Highlighter=P_,Ki.InlineInput=U_,Ki.PathObject=V_,Ki.RenderInfo=G_,Ki.Renderer=W_,Ki.StatementInput=H_;var z_=class extends np{constructor(e,t){super(e,t)}getRenderer(){return this.renderer_}addElemSpacing_(){let e=!1;for(var t=0;t<this.rows.length;t++)if(this.rows[t].hasExternalInput){e=!0;break}for(t=0;t<this.rows.length;t++){const o=this.rows[t];var n=o.elements;if(o.elements=[],o.startsWithElemSpacer()&&o.elements.push(new is(this.constants_,this.getInRowSpacing_(null,n[0]))),n.length){for(let a=0;a<n.length-1;a++){o.elements.push(n[a]);const f=this.getInRowSpacing_(n[a],n[a+1]);o.elements.push(new is(this.constants_,f))}o.elements.push(n[n.length-1]),o.endsWithElemSpacer()&&(n=this.getInRowSpacing_(n[n.length-1],null),e&&o.hasDummyInput&&(n+=this.constants_.TAB_WIDTH),o.elements.push(new is(this.constants_,n)))}}}getInRowSpacing_(e,t){if(!e)return t&&M.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:t&&M.isInlineInput(t)?this.constants_.MEDIUM_LARGE_PADDING:t&&M.isStatementInput(t)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!M.isInput(e)&&!t)return M.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:M.isIcon(e)?2*this.constants_.LARGE_PADDING+1:M.isHat(e)?this.constants_.NO_PADDING:M.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:M.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:M.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(M.isInput(e)&&!t){if(M.isExternalInput(e))return this.constants_.NO_PADDING;if(M.isInlineInput(e))return this.constants_.LARGE_PADDING;if(M.isStatementInput(e))return this.constants_.NO_PADDING}if(!M.isInput(e)&&t&&M.isInput(t)){if(M.isField(e)&&e.isEditable){if(M.isInlineInput(t)||M.isExternalInput(t))return this.constants_.SMALL_PADDING}else{if(M.isInlineInput(t)||M.isExternalInput(t))return this.constants_.MEDIUM_LARGE_PADDING;if(M.isStatementInput(t))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(M.isIcon(e)&&t&&!M.isInput(t))return this.constants_.LARGE_PADDING;if(M.isInlineInput(e)&&t&&M.isField(t))return t.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(M.isLeftSquareCorner(e)&&t){if(M.isHat(t))return this.constants_.NO_PADDING;if(M.isPreviousConnection(t)||M.isNextConnection(t))return t.notchOffset}return M.isLeftRoundedCorner(e)&&t?t.notchOffset-this.constants_.CORNER_RADIUS:M.isField(e)&&t&&M.isField(t)&&e.isEditable===t.isEditable||t&&M.isJaggedEdge(t)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(e,t){return M.isTopRow(e)&&M.isBottomRow(t)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:M.isTopRow(e)||M.isBottomRow(t)?this.constants_.NO_PADDING:e.hasExternalInput&&t.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&t.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&t.hasStatement||e.hasDummyInput||t.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(e,t){if(M.isSpacer(t))return e.yPos+t.height/2;if(M.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,M.isNextConnection(t)?e+t.height/2:e-t.height/2;if(M.isTopRow(e))return M.isHat(t)?e.capline-t.height/2:e.capline+t.height/2;let n=e.yPos;return n=M.isField(t)&&e.hasStatement?n+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+t.height/2):n+e.height/2}finalize_(){let e=0,t=0;for(var n=0;n<this.rows.length;n++){const a=this.rows[n];a.yPos=t,a.xPos=this.startX,t+=a.height,e=Math.max(e,a.widthWithConnectedBlocks);var o=t-this.topRow.ascenderHeight;a===this.bottomRow&&o<this.constants_.MIN_BLOCK_HEIGHT&&(o=this.constants_.MIN_BLOCK_HEIGHT-o,this.bottomRow.height+=o,t+=o),this.recordElemPositions_(a)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(n=this.block_.nextConnection.targetBlock())&&(e=Math.max(e,n.getHeightWidth().width)),this.bottomRow.baseline=t-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX,this.height=t,this.startY=this.topRow.capline}},j_=class extends bg{constructor(e){super(e)}makeRenderInfo_(e){return new z_(this,e)}};vs("thrasos",j_);var a$={};a$.RenderInfo=z_,a$.Renderer=j_;var Nb={colour_blocks:{colourPrimary:"#CF63CF",colourSecondary:"#C94FC9",colourTertiary:"#BD42BD"},list_blocks:{colourPrimary:"#9966FF",colourSecondary:"#855CD6",colourTertiary:"#774DCB"},logic_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC"},loop_blocks:{colourPrimary:"#0fBD8C",colourSecondary:"#0DA57A",colourTertiary:"#0B8E69"},math_blocks:{colourPrimary:"#59C059",colourSecondary:"#46B946",colourTertiary:"#389438"},procedure_blocks:{colourPrimary:"#FF6680",colourSecondary:"#FF4D6A",colourTertiary:"#FF3355"},text_blocks:{colourPrimary:"#FFBF00",colourSecondary:"#E6AC00",colourTertiary:"#CC9900"},variable_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},variable_dynamic_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},hat_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC",hat:"cap"}},xb={colour_category:{colour:"#CF63CF"},list_category:{colour:"#9966FF"},logic_category:{colour:"#4C97FF"},loop_category:{colour:"#0fBD8C"},math_category:{colour:"#59C059"},procedure_category:{colour:"#FF6680"},text_category:{colour:"#FFBF00"},variable_category:{colour:"#FF8C1A"},variable_dynamic_category:{colour:"#FF8C1A"}},Pb=new gc("zelos",Nb,xb),Bb={Classic:dg,Zelos:Pb},d$=class{constructor(e,t,n){this.id_=e.toolboxitemid||V(),this.level_=(this.parent_=n||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=e,this.parentToolbox_=t,this.workspace_=this.parentToolbox_.getWorkspace()}init(){}getDiv(){return null}getClickTarget(){return null}getId(){return this.id_}getParent(){return null}getLevel(){return this.level_}isSelectable(){return!1}isCollapsible(){return!1}dispose(){}setVisible_(e){}},gi=class extends d${constructor(e,t,n){super(e,t,n),this.colour_=this.name_="",this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.cssConfig_=this.makeDefaultCssConfig_()}init(){this.parseCategoryDef_(this.toolboxItemDef_),this.parseContents_(this.toolboxItemDef_),this.createDom_(),this.toolboxItemDef_.hidden==="true"&&this.hide()}makeDefaultCssConfig_(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}}parseContents_(e){if("custom"in e)this.flyoutItems_=e.custom;else if(e=e.contents)for(let t=0;t<e.length;t++){const n=e[t];Array.isArray(this.flyoutItems_)&&this.flyoutItems_.push(n)}}parseCategoryDef_(e){this.name_="name"in e?Ut(e.name):"",this.colour_=this.getColour_(e),Object.assign(this.cssConfig_,e.cssconfig||e.cssConfig)}createDom_(){this.htmlDiv_=this.createContainer_(),Ei(this.htmlDiv_,$r.TREEITEM),hn(this.htmlDiv_,Gt.SELECTED,!1),hn(this.htmlDiv_,Gt.LEVEL,this.level_+1),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),Ei(this.iconDom_,$r.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_);const e=this.labelDom_.getAttribute("id");return e&&hn(this.htmlDiv_,Gt.LABELLEDBY,e),this.addColourBorder_(this.colour_),this.htmlDiv_}createContainer_(){const e=document.createElement("div"),t=this.cssConfig_.container;return t&&ke(e,t),e}createRowContainer_(){const e=document.createElement("div");var t=this.cssConfig_.row;return t&&ke(e,t),t=`${gi.nestedPadding*this.getLevel()}px`,this.workspace_.RTL?e.style.paddingRight=t:e.style.paddingLeft=t,e}createRowContentsContainer_(){const e=document.createElement("div"),t=this.cssConfig_.rowcontentcontainer;return t&&ke(e,t),e}createIconDom_(){const e=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const t=this.cssConfig_.icon;t&&ke(e,t)}return e.style.display="inline-block",e}createLabelDom_(e){const t=document.createElement("span");return t.setAttribute("id",this.getId()+".label"),t.textContent=e,(e=this.cssConfig_.label)&&ke(t,e),t}refreshTheme(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)}addColourBorder_(e){e&&(e=gi.borderWidth+"px solid "+(e||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=e:this.rowDiv_.style.borderLeft=e)}getColour_(e){const t=e.categorystyle||e.categoryStyle;if((e=e.colour)&&t)console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour');else{if(t)return this.getColourfromStyle(t);if(e)return this.parseColour(e)}return""}getColourfromStyle(e){var t=this.workspace_.getTheme();if(e&&t){if((t=t.categoryStyles[e])&&t.colour)return this.parseColour(t.colour);console.warn('Style "'+e+'" must exist and contain a colour value')}return""}getClickTarget(){return this.rowDiv_}parseColour(e){if(e=Ut(e),e==null||e==="")return"";var t=Number(e);return isNaN(t)?(t=fo(e))?t:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+e),""):Gc(t)}openIcon_(e){if(e){var t=this.cssConfig_.closedicon;t&&_(e,t),(t=this.cssConfig_.openicon)&&ke(e,t)}}closeIcon_(e){if(e){var t=this.cssConfig_.openicon;t&&_(e,t),(t=this.cssConfig_.closedicon)&&ke(e,t)}}setVisible_(e){this.htmlDiv_.style.display=e?"block":"none",this.isHidden_=!e,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}hide(){this.setVisible_(!1)}show(){this.setVisible_(!0)}isVisible(){return!this.isHidden_&&this.allAncestorsExpanded_()}allAncestorsExpanded_(){let e=this;for(;e.getParent();)if(e=e.getParent(),!e.isExpanded())return!1;return!0}isSelectable(){return this.isVisible()&&!this.isDisabled_}onClick(e){}setSelected(e){if(this.rowDiv_){var t=this.cssConfig_.selected;if(e){const n=this.parseColour(gi.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||n,t&&ke(this.rowDiv_,t)}else this.rowDiv_.style.backgroundColor="",t&&v(this.rowDiv_,t);hn(this.htmlDiv_,Gt.SELECTED,e)}}setDisabled(e){this.isDisabled_=e,this.getDiv().setAttribute("disabled",`${e}`),e?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")}getName(){return this.name_}getParent(){return this.parent_}getDiv(){return this.htmlDiv_}getContents(){return this.flyoutItems_}updateFlyoutContents(e){this.flyoutItems_=[],this.toolboxItemDef_=typeof e=="string"?{kind:this.toolboxItemDef_.kind,custom:e,id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden}:{kind:this.toolboxItemDef_.kind,name:"name"in this.toolboxItemDef_?this.toolboxItemDef_.name:"",contents:Zl(e),id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden},this.parseContents_(this.toolboxItemDef_)}dispose(){x(this.htmlDiv_)}};gi.registrationName="category",gi.nestedPadding=19,gi.borderWidth=8,gi.defaultBackgroundColour="#57e",Rn(`
.blocklyTreeRow:not(.blocklyTreeSelected):hover {
  background-color: rgba(255, 255, 255, .2);
}

.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {
  margin: 1px 5px 1px 0;
}

.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {
  margin: 1px 0 1px 5px;
}

.blocklyTreeRow {
  height: 22px;
  line-height: 22px;
  margin-bottom: 3px;
  padding-right: 8px;
  white-space: nowrap;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {
  margin-left: 8px;
  padding-right: 0;
}

.blocklyTreeIcon {
  background-image: url(<<<PATH>>>/sprites.png);
  height: 16px;
  vertical-align: middle;
  visibility: hidden;
  width: 16px;
}

.blocklyTreeIconClosed {
  background-position: -32px -1px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {
  background-position: 0 -1px;
}

.blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: -32px -17px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: 0 -17px;
}

.blocklyTreeIconOpen {
  background-position: -16px -1px;
}

.blocklyTreeSelected>.blocklyTreeIconOpen {
  background-position: -16px -17px;
}

.blocklyTreeLabel {
  cursor: default;
  font: 16px sans-serif;
  padding: 0 3px;
  vertical-align: middle;
}

.blocklyToolboxDelete .blocklyTreeLabel {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyTreeSelected .blocklyTreeLabel {
  color: #fff;
}
`),d(ne.TOOLBOX_ITEM,gi.registrationName,gi);var cp=class extends d${constructor(e,t){super(e,t),this.cssConfig_={container:"blocklyTreeSeparator"},this.htmlDiv=null,Object.assign(this.cssConfig_,e.cssconfig||e.cssConfig)}init(){this.createDom_()}createDom_(){const e=document.createElement("div"),t=this.cssConfig_.container;return t&&ke(e,t),this.htmlDiv=e}getDiv(){return this.htmlDiv}dispose(){x(this.htmlDiv)}};cp.registrationName="sep",Rn(`
.blocklyTreeSeparator {
  border-bottom: solid #e5e5e5 1px;
  height: 0;
  margin: 5px 0;
}

.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {
  border-right: solid #e5e5e5 1px;
  border-bottom: none;
  height: auto;
  margin: 0 5px 0 5px;
  padding: 5px 0;
  width: 0;
}
`),d(ne.TOOLBOX_ITEM,cp.registrationName,cp);var ed=class extends gi{constructor(e,t,n){super(e,t,n),this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[]}makeDefaultCssConfig_(){const e=super.makeDefaultCssConfig_();return e.contents="blocklyToolboxContents",e}parseContents_(e){if("custom"in e)this.flyoutItems_=e.custom;else{const t=e.contents;if(t){this.flyoutItems_=[],e=!0;for(let n=0;n<t.length;n++){const o=t[n];!y(ne.TOOLBOX_ITEM,o.kind)||o.kind.toLowerCase()===cp.registrationName&&e?(this.flyoutItems_.push(o),e=!0):(this.createToolboxItem(o),e=!1)}}}}createToolboxItem(e){let t=e.kind;t.toUpperCase()==="CATEGORY"&&tu(e)&&(t=ed.registrationName),e=new(S(ne.TOOLBOX_ITEM,t))(e,this.parentToolbox_,this),this.toolboxItems_.push(e)}init(){super.init(),this.setExpanded(this.toolboxItemDef_.expanded==="true"||this.toolboxItemDef_.expanded===!0)}createDom_(){super.createDom_();const e=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(e),Ei(this.subcategoriesDiv_,$r.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.closeIcon_(this.iconDom_),hn(this.htmlDiv_,Gt.EXPANDED,!1),this.htmlDiv_}createIconDom_(){const e=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const t=this.cssConfig_.icon;t&&ke(e,t),e.style.visibility="visible"}return e.style.display="inline-block",e}createSubCategoriesDom_(e){const t=document.createElement("div");t.style.display="none";var n=this.cssConfig_.contents;for(n&&ke(t,n),n=0;n<e.length;n++){const o=e[n];o.init();const a=o.getDiv();if(t.appendChild(a),o.getClickTarget){let f;(f=o.getClickTarget())==null||f.setAttribute("id",o.getId())}}return t}setExpanded(e){if(this.expanded_!==e){if(this.expanded_=e)this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_);else{let t;(t=this.parentToolbox_.getFlyout())==null||t.setVisible(!1),this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)}hn(this.htmlDiv_,Gt.EXPANDED,e),this.parentToolbox_.handleToolboxItemResize()}}setVisible_(e){this.htmlDiv_.style.display=e?"block":"none";const t=this.getChildToolboxItems();for(let n=0;n<t.length;n++)t[n].setVisible_(e);this.isHidden_=!e,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}isExpanded(){return this.expanded_}isCollapsible(){return!0}onClick(e){this.toggleExpanded()}toggleExpanded(){this.setExpanded(!this.expanded_)}getDiv(){return this.htmlDiv_}getChildToolboxItems(){return this.toolboxItems_}};ed.registrationName="collapsibleCategory",d(ne.TOOLBOX_ITEM,ed.registrationName,ed);var X_=class extends vg{constructor(e){super(),this.id="toolbox",this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.previouslySelectedItem_=this.selectedItem_=this.flyout=null,this.boundEvents_=[],this.workspace_=e,this.toolboxDef_=e.options.languageTree||{contents:[]},this.horizontalLayout=e.options.horizontalLayout,this.RTL=e.options.RTL,this.contentMap_=Object.create(null),this.toolboxPosition=e.options.toolboxPosition}onShortcut(e){return!1}init(){var e=this.workspace_;const t=e.getParentSvg();this.flyout=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),fe(this.flyout.createDom("svg"),t),this.setVisible(!0),this.flyout.init(e),this.render(this.toolboxDef_),e=e.getThemeManager(),e.subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),e.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:vt.ComponentWeight.TOOLBOX_WEIGHT,capabilities:[vt.Capability.AUTOHIDEABLE,vt.Capability.DELETE_AREA,vt.Capability.DRAG_TARGET]})}createDom_(e){e=e.getParentSvg();const t=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,Ei(this.contentsDiv_,$r.TREE),t.appendChild(this.contentsDiv_),e.parentNode.insertBefore(t,e),this.attachEvents_(t,this.contentsDiv_),t}createContainer_(){const e=document.createElement("div");return e.setAttribute("layout",this.isHorizontal()?"h":"v"),ke(e,"blocklyToolboxDiv"),e.setAttribute("dir",this.RTL?"RTL":"LTR"),e}createContentsContainer_(){const e=document.createElement("div");return ke(e,"blocklyToolboxContents"),this.isHorizontal()&&(e.style.flexDirection="row"),e}attachEvents_(e,t){e=Le(e,"pointerdown",this,this.onClick_,!1),this.boundEvents_.push(e),t=Le(t,"keydown",this,this.onKeyDown_,!1),this.boundEvents_.push(t)}onClick_(e){if(bn(e)||e.target===this.HtmlDiv)Pe().hideChaff(!1);else{var t=e.target.getAttribute("id");t&&(t=this.getToolboxItemById(t),t.isSelectable()&&(this.setSelectedItem(t),t.onClick(e))),Pe().hideChaff(!0)}zt()}onKeyDown_(e){let t=!1;switch(e.key){case"ArrowDown":t=this.selectNext();break;case"ArrowUp":t=this.selectPrevious();break;case"ArrowLeft":t=this.selectParent();break;case"ArrowRight":t=this.selectChild();break;case"Enter":case" ":this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),t=!0);break;default:t=!1}!t&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(t=this.selectedItem_.onKeyDown(e)),t&&e.preventDefault()}createFlyout_(){const e=this.workspace_,t=new Ds({parentWorkspace:e,rtl:e.RTL,oneBasedIndex:e.options.oneBasedIndex,horizontalLayout:e.horizontalLayout,renderer:e.options.renderer,rendererOverrides:e.options.rendererOverrides,move:{scrollbars:!0}});return t.toolboxPosition=e.options.toolboxPosition,new(e.horizontalLayout?D(ne.FLYOUTS_HORIZONTAL_TOOLBOX,e.options,!0):D(ne.FLYOUTS_VERTICAL_TOOLBOX,e.options,!0))(t)}render(e){this.toolboxDef_=e;for(let t=0;t<this.contents_.length;t++){const n=this.contents_[t];n&&n.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(e.contents),this.position(),this.handleToolboxItemResize()}renderContents_(e){const t=document.createDocumentFragment();for(let n=0;n<e.length;n++)this.createToolboxItem(e[n],t);this.contentsDiv_.appendChild(t)}createToolboxItem(e,t){var n=e.kind;n.toUpperCase()==="CATEGORY"&&tu(e)&&(n=ed.registrationName),(n=S(ne.TOOLBOX_ITEM,n.toLowerCase()))&&(e=new n(e,this),e.init(),this.addToolboxItem_(e),(n=e.getDiv())&&t.appendChild(n),e.getClickTarget()&&e.getClickTarget().setAttribute("id",e.getId()))}addToolboxItem_(e){if(this.contents_.push(e),this.contentMap_[e.getId()]=e,e.isCollapsible()){e=e.getChildToolboxItems();for(let t=0;t<e.length;t++)this.addToolboxItem_(e[t])}}getToolboxItems(){return this.contents_}addStyle(e){e&&this.HtmlDiv&&ke(this.HtmlDiv,e)}removeStyle(e){e&&this.HtmlDiv&&v(this.HtmlDiv,e)}getClientRect(){if(!this.HtmlDiv||!this.isVisible_)return null;var e=this.HtmlDiv.getBoundingClientRect();const t=e.top,n=t+e.height,o=e.left;return e=o+e.width,this.toolboxPosition===Fe.TOP?new ct(-1e7,n,-1e7,1e7):this.toolboxPosition===Fe.BOTTOM?new ct(t,1e7,-1e7,1e7):this.toolboxPosition===Fe.LEFT?new ct(-1e7,1e7,-1e7,e):new ct(-1e7,1e7,o,1e7)}wouldDelete(e){return e instanceof xs?this.updateWouldDelete_(!e.getParent()&&e.isDeletable()):this.updateWouldDelete_(tr(e)&&e.isDeletable()),this.wouldDelete_}onDragEnter(e){this.updateCursorDeleteStyle_(!0)}onDragExit(e){this.updateCursorDeleteStyle_(!1)}onDrop(e){this.updateCursorDeleteStyle_(!1)}updateWouldDelete_(e){e!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=e,this.updateCursorDeleteStyle_(!0))}updateCursorDeleteStyle_(e){const t=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";e?this.addStyle(t):this.removeStyle(t)}getToolboxItemById(e){return this.contentMap_[e]||null}getWidth(){return this.width_}getHeight(){return this.height_}getFlyout(){return this.flyout}getWorkspace(){return this.workspace_}getSelectedItem(){return this.selectedItem_}getPreviouslySelectedItem(){return this.previouslySelectedItem_}isHorizontal(){return this.horizontalLayout}position(){const e=this.workspace_.getMetrics(),t=this.HtmlDiv;t&&(this.horizontalLayout?(t.style.left="0",t.style.height="auto",t.style.width="100%",this.height_=t.offsetHeight,this.width_=e.viewWidth,this.toolboxPosition===Fe.TOP?t.style.top="0":t.style.bottom="0"):(this.toolboxPosition===Fe.RIGHT?t.style.right="0":t.style.left="0",t.style.height="100%",this.width_=t.offsetWidth,this.height_=e.viewHeight),this.flyout.position())}handleToolboxItemResize(){const e=this.workspace_,t=this.HtmlDiv.getBoundingClientRect();e.translate(this.toolboxPosition===Fe.LEFT?e.scrollX+t.width:e.scrollX,this.toolboxPosition===Fe.TOP?e.scrollY+t.height:e.scrollY),qe(e)}clearSelection(){this.setSelectedItem(null)}refreshTheme(){for(let e=0;e<this.contents_.length;e++){const t=this.contents_[e];t.refreshTheme&&t.refreshTheme()}}refreshSelection(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout.show(this.selectedItem_.getContents())}setVisible(e){this.isVisible_!==e&&(this.HtmlDiv.style.display=e?"block":"none",this.isVisible_=e,this.workspace_.recordDragTargets())}autoHide(e){!e&&this.flyout&&this.flyout.autoClose&&this.clearSelection()}setSelectedItem(e){const t=this.selectedItem_;!e&&!t||e&&!bh(e)||(this.shouldDeselectItem_(t,e)&&t!==null&&this.deselectItem_(t),this.shouldSelectItem_(t,e)&&e!==null&&this.selectItem_(t,e),this.updateFlyout_(t,e),this.fireSelectEvent(t,e))}shouldDeselectItem_(e,t){return e!==null&&(!e.isCollapsible()||e!==t)}shouldSelectItem_(e,t){return t!==null&&t!==e}deselectItem_(e){this.selectedItem_=null,this.previouslySelectedItem_=e,e.setSelected(!1),hn(this.contentsDiv_,Gt.ACTIVEDESCENDANT,"")}selectItem_(e,t){this.selectedItem_=t,this.previouslySelectedItem_=e,t.setSelected(!0),hn(this.contentsDiv_,Gt.ACTIVEDESCENDANT,t.getId())}selectItemByPosition(e){-1<e&&e<this.contents_.length&&(e=this.contents_[e],e.isSelectable()&&this.setSelectedItem(e))}updateFlyout_(e,t){t&&(e!==t||t.isCollapsible())&&t.getContents().length?(this.flyout.show(t.getContents()),this.flyout.scrollToStart()):this.flyout.hide()}fireSelectEvent(e,t){const n=e&&e.getName();let o=t&&t.getName();e===t&&(o=null),e=new(X(z.TOOLBOX_ITEM_SELECT))(n,o,this.workspace_.id),ce(e)}selectParent(){return this.selectedItem_?this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.toggleExpanded(),!0):this.selectedItem_.getParent()&&this.selectedItem_.getParent().isSelectable()?(this.setSelectedItem(this.selectedItem_.getParent()),!0):!1:!1}selectChild(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;const e=this.selectedItem_;return e.isExpanded()?this.selectNext():e.toggleExpanded(),!0}selectNext(){if(!this.selectedItem_)return!1;let e=this.contents_.indexOf(this.selectedItem_)+1;if(-1<e&&e<this.contents_.length){let t=this.contents_[e];for(;t&&!t.isSelectable();)t=this.contents_[++e];if(t&&t.isSelectable())return this.setSelectedItem(t),!0}return!1}selectPrevious(){if(!this.selectedItem_)return!1;let e=this.contents_.indexOf(this.selectedItem_)-1;if(-1<e&&e<this.contents_.length){let t=this.contents_[e];for(;t&&!t.isSelectable();)t=this.contents_[--e];if(t&&t.isSelectable())return this.setSelectedItem(t),!0}return!1}dispose(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout.dispose();for(var e=0;e<this.contents_.length;e++)this.contents_[e].dispose();for(e=0;e<this.boundEvents_.length;e++)et(this.boundEvents_[e]);this.boundEvents_=[],this.contents_=[],this.HtmlDiv&&(this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),x(this.HtmlDiv))}};Rn(`
.blocklyToolboxDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyToolboxGrab {
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

/* Category tree in Toolbox. */
.blocklyToolboxDiv {
  background-color: #ddd;
  overflow-x: visible;
  overflow-y: auto;
  padding: 4px 0 4px 0;
  position: absolute;
  z-index: 70;  /* so blocks go under toolbox when dragging */
  -webkit-tap-highlight-color: transparent;  /* issue #1345 */
}

.blocklyToolboxContents {
  display: flex;
  flex-wrap: wrap;
  flex-direction: column;
}

.blocklyToolboxContents:focus {
  outline: none;
}
`),d(ne.TOOLBOX,hr,X_);var Fb="11.2.1",Ub=Ie.INPUT_VALUE,Hb=Ie.OUTPUT_VALUE,Gb=Ie.NEXT_STATEMENT,Vb=Ie.PREVIOUS_STATEMENT,Wb=Fe.TOP,zb=Fe.BOTTOM,jb=Fe.LEFT,Xb=Fe.RIGHT;Ya.prototype.newBlock=function(e,t){return new jl(this,e,t)},Ns.prototype.newBlock=function(e,t){return new xs(this,e,t)},Ya.prototype.newComment=function(e){return new en(this,e)},Ns.prototype.newComment=function(e){return new tt(this,e)},Ns.newTrashcan=function(e){return new Vm(e)},Xo.prototype.newWorkspaceSvg=function(e){return new Ns(e)},i.Names$$module$build$src$core$names.prototype.populateProcedures=function(e){e=Gn(e),e=e[0].concat(e[1]);for(let t=0;t<e.length;t++)this.getName(e[t][0],i.Names$$module$build$src$core$names.NameType.PROCEDURE)};var Y={};return Y.ASTNode=Z,Y.BasicCursor=sp,Y.Block=jl,Y.BlockSvg=xs,Y.Blocks=Wn,Y.COLLAPSED_FIELD_NAME=Bo,Y.COLLAPSED_INPUT_NAME=mr,Y.COLLAPSE_CHARS=Nm,Y.CodeGenerator=i.CodeGenerator$$module$build$src$core$generator,Y.CollapsibleToolboxCategory=ed,Y.ComponentManager=vt,Y.Connection=it,Y.ConnectionChecker=xm,Y.ConnectionDB=Wa,Y.ConnectionType=Ie,Y.ContextMenu=G,Y.ContextMenuItems=On,Y.ContextMenuRegistry=O,Y.Css=Fh,Y.Cursor=Hf,Y.DELETE_VARIABLE_ID=xf,Y.DeleteArea=vg,Y.DragTarget=Gm,Y.DropDownDiv=Pn,Y.Events=ye,Y.Extensions=di,Y.Field=g,Y.FieldCheckbox=_c,Y.FieldDropdown=Dr,Y.FieldImage=mc,Y.FieldLabel=fc,Y.FieldLabelSerializable=u_,Y.FieldNumber=Jf,Y.FieldTextInput=wg,Y.FieldVariable=op,Y.Flyout=Rg,Y.FlyoutButton=Ms,Y.FlyoutMetricsManager=o_,Y.Generator=i.CodeGenerator$$module$build$src$core$generator,Y.Gesture=jo,Y.Grid=bf,Y.HorizontalFlyout=l_,Y.INPUT_VALUE=Ub,Y.Input=Xa,Y.InsertionMarkerManager=hi,Y.InsertionMarkerPreviewer=r_,Y.Marker=Fm,Y.MarkerManager=Wo,Y.Menu=tc,Y.MenuItem=Pi,Y.MetricsManager=Xf,Y.Msg=i.Msg$$module$build$src$core$msg,Y.NEXT_STATEMENT=Gb,Y.Names=i.Names$$module$build$src$core$names,Y.OPPOSITE_TYPE=$c,Y.OUTPUT_VALUE=Hb,Y.Options=Ds,Y.PREVIOUS_STATEMENT=Vb,Y.PROCEDURE_CATEGORY_NAME=$g,Y.Procedures=Er,Y.RENAME_VARIABLE_ID=Nf,Y.RenderedConnection=Mr,Y.Scrollbar=Nt,Y.ScrollbarPair=jf,Y.ShortcutItems=ji,Y.ShortcutRegistry=dt,Y.TOOLBOX_AT_BOTTOM=zb,Y.TOOLBOX_AT_LEFT=jb,Y.TOOLBOX_AT_RIGHT=Xb,Y.TOOLBOX_AT_TOP=Wb,Y.TabNavigateCursor=Um,Y.Theme=gc,Y.ThemeManager=Mm,Y.Themes=Bb,Y.Toolbox=X_,Y.ToolboxCategory=gi,Y.ToolboxItem=d$,Y.ToolboxSeparator=cp,Y.Tooltip=Tr,Y.Touch=Mi,Y.Trashcan=Vm,Y.UnattachedFieldError=$,Y.VARIABLE_CATEGORY_NAME=oc,Y.VARIABLE_DYNAMIC_CATEGORY_NAME=Mf,Y.VERSION=Fb,Y.VariableMap=Ff,Y.VariableModel=Fl,Y.Variables=Jt,Y.VariablesDynamic=Ka,Y.VerticalFlyout=Yf,Y.WidgetDiv=Te,Y.Workspace=Ya,Y.WorkspaceAudio=Pm,Y.WorkspaceDragger=mm,Y.WorkspaceSvg=Ns,Y.Xml=Vt,Y.ZoomControls=ig,Y.blockAnimations=qh,Y.blockRendering=at,Y.browserEvents=ri,Y.bubbles=up,Y.bumpObjects=yg,Y.clipboard=ip,Y.comments=Lg,Y.common=nn,Y.config=i.config$$module$build$src$core$config,Y.constants=Bi,Y.defineBlocksWithJsonArray=ln,Y.dialog=Fi,Y.dragging=lp,Y.fieldRegistry=hg,Y.geras=Ki,Y.getMainWorkspace=Pe,Y.getSelected=Be,Y.hasBubble=vi,Y.hideChaff=yh,Y.icons=Wl,Y.inject=Ll,Y.inputs=Yl,Y.isCopyable=kl,Y.isDeletable=tr,Y.isDraggable=ar,Y.isIcon=ua,Y.isObservable=Hn,Y.isPaster=_h,Y.isRenderedElement=Th,Y.isSelectable=Eh,Y.isSerializable=bi,Y.isVariableBackedParameterModel=su,Y.layers=Ne,Y.procedures=Er,Y.registry=qr,Y.renderManagement=Uo,Y.serialization=Db,Y.setLocale=sc,Y.setParentContainer=Ke,Y.svgResize=qe,Y.thrasos=a$,Y.uiPosition=Ni,Y.utils=qt,Y.zelos=pi,Y.__namespace__=i,Y})}(zg)),zg.exports}var Lw=$m();const Aw=Y$(Lw),{ASTNode:Yw,BasicCursor:Jw,Block:qw,BlockSvg:Qw,Blocks:Zw,COLLAPSED_FIELD_NAME:eO,COLLAPSED_INPUT_NAME:tO,COLLAPSE_CHARS:nO,CodeGenerator:rO,CollapsibleToolboxCategory:sO,ComponentManager:iO,Connection:oO,ConnectionChecker:lO,ConnectionDB:uO,ConnectionType:cO,ContextMenu:aO,ContextMenuItems:dO,ContextMenuRegistry:hO,Css:pO,Cursor:gO,DELETE_VARIABLE_ID:fO,DeleteArea:$O,DragTarget:mO,DropDownDiv:_O,Events:TO,Extensions:EO,Field:bO,FieldCheckbox:yO,FieldDropdown:vO,FieldImage:SO,FieldLabel:CO,FieldLabelSerializable:IO,FieldNumber:kO,FieldTextInput:wO,FieldVariable:OO,Flyout:RO,FlyoutButton:LO,FlyoutMetricsManager:AO,Generator:DO,Gesture:MO,Grid:NO,HorizontalFlyout:xO,INPUT_VALUE:PO,Input:BO,InsertionMarkerManager:FO,InsertionMarkerPreviewer:UO,Marker:HO,MarkerManager:GO,Menu:VO,MenuItem:WO,MetricsManager:zO,Msg:jO,NEXT_STATEMENT:XO,Names:KO,OPPOSITE_TYPE:YO,OUTPUT_VALUE:JO,Options:qO,PREVIOUS_STATEMENT:QO,PROCEDURE_CATEGORY_NAME:ZO,Procedures:eR,RENAME_VARIABLE_ID:tR,RenderedConnection:nR,Scrollbar:rR,ScrollbarPair:sR,ShortcutItems:iR,ShortcutRegistry:oR,TOOLBOX_AT_BOTTOM:lR,TOOLBOX_AT_LEFT:uR,TOOLBOX_AT_RIGHT:cR,TOOLBOX_AT_TOP:aR,TabNavigateCursor:dR,Theme:hR,ThemeManager:pR,Themes:gR,Toolbox:fR,ToolboxCategory:$R,ToolboxItem:mR,ToolboxSeparator:_R,Tooltip:TR,Touch:ER,Trashcan:bR,UnattachedFieldError:yR,VARIABLE_CATEGORY_NAME:vR,VARIABLE_DYNAMIC_CATEGORY_NAME:SR,VERSION:CR,VariableMap:IR,VariableModel:kR,Variables:wR,VariablesDynamic:OR,VerticalFlyout:RR,WidgetDiv:LR,Workspace:AR,WorkspaceAudio:DR,WorkspaceDragger:MR,WorkspaceSvg:NR,Xml:mp,ZoomControls:xR,blockAnimations:PR,blockRendering:BR,browserEvents:FR,bubbles:UR,bumpObjects:HR,clipboard:GR,comments:VR,common:WR,config:zR,constants:jR,defineBlocksWithJsonArray:XR,dialog:KR,dragging:YR,fieldRegistry:JR,geras:qR,getMainWorkspace:QR,getSelected:ZR,hasBubble:eL,hideChaff:tL,icons:nL,inject:Dw,inputs:rL,isCopyable:sL,isDeletable:iL,isDraggable:oL,isIcon:lL,isObservable:uL,isPaster:cL,isRenderedElement:aL,isSelectable:dL,isSerializable:hL,isVariableBackedParameterModel:pL,layers:gL,procedures:fL,registry:$L,renderManagement:mL,serialization:cb,setLocale:_L,setParentContainer:TL,svgResize:EL,thrasos:bL,uiPosition:yL,utils:Mw,zelos:vL}=Aw;function Nw(l,u){var i=null,d=null,p=function(){for(var b=[],y=0;y<arguments.length;y++)b[y]=arguments[y];d=function(){i=null,l.apply(void 0,b)},i!=null&&clearTimeout(i),i=window.setTimeout(d,u)},m=function(){i!=null&&(clearTimeout(i),d&&d())};return[p,m]}var Qg=function(){return Qg=Object.assign||function(l){for(var u,i=1,d=arguments.length;i<d;i++){u=arguments[i];for(var p in u)Object.prototype.hasOwnProperty.call(u,p)&&(l[p]=u[p])}return l},Qg.apply(this,arguments)};function xw(l,u,i){try{return u.getAllBlocks(!1).length>0?void 0:(mp.domToWorkspace(Mw.xml.textToDom(l),u),!0)}catch(d){return i&&i(d),!1}}function Pw(l,u,i){try{return cb.workspaces.load(l,u),!0}catch(d){return i&&i(d),!1}}var Bw=function(l){var u=l.ref,i=l.initialXml,d=l.initialJson,p=l.toolboxConfiguration,m=l.workspaceConfiguration,b=l.onWorkspaceChange,y=l.onImportXmlError,S=l.onImportError,L=l.onInject,U=l.onDispose;S=S??y;var D=Dt.useState(null),R=D[0],V=D[1],B=Dt.useState(i||null),k=B[0],K=B[1],te=Dt.useState(d||null),ue=te[0],he=te[1],pe=Dt.useState(!1),ve=pe[0],be=pe[1],$e=Dt.useState(!1),ce=$e[0],ze=$e[1],C=Dt.useRef(m);Dt.useEffect(function(){C.current=m},[m]);var me=Dt.useRef(p);Dt.useEffect(function(){me.current=p,p&&R&&!(m!=null&&m.readOnly)&&R.updateToolbox(p)},[p,R,m]);var Ce=Dt.useRef(L),Me=Dt.useRef(U);Dt.useEffect(function(){Ce.current=L},[L]),Dt.useEffect(function(){Me.current=U},[U]);var Re=Dt.useCallback(function(Ge){b&&b(Ge)},[b]);return Dt.useEffect(function(){if(u.current){var Ge=Dw(u.current,Qg(Qg({},C.current),{toolbox:me.current}));V(Ge),be(!1),ze(!1),Ce.current&&Ce.current(Ge);var Xe=Me.current;return function(){Ge.dispose(),Xe&&Xe(Ge)}}},[u]),Dt.useEffect(function(){R&&!ce&&Re(R)},[Re,ce,R]),Dt.useEffect(function(){if(R!=null){var Ge=function(){Re(R)};return R.addChangeListener(Ge),function(){R.removeChangeListener(Ge)}}},[R,Re]),Dt.useEffect(function(){if(R!=null){var Ge=Nw(function(){var X=mp.domToText(mp.workspaceToDom(R));if(X!==k){var xe=cb.workspaces.save(R);he(xe),K(X)}},200),Xe=Ge[0],Ye=Ge[1];return R.addChangeListener(Xe),function(){R.removeChangeListener(Xe),Ye()}}},[R,k]),Dt.useEffect(function(){if(k&&R&&!ve){var Ge=xw(k,R,S);Ge||K(null),be(!0)}else if(ue&&R&&!ve){var Ge=Pw(ue,R,S);Ge||he(null);var Xe=mp.domToText(mp.workspaceToDom(R));K(Xe),be(!0)}},[ue,k,R,ve,S]),{workspace:R,xml:k,json:ue}},Fw={initialXml:Ps.string,initialJson:Ps.object,toolboxConfiguration:Ps.object,workspaceConfiguration:Ps.object,className:Ps.string,onWorkspaceChange:Ps.func,onImportXmlError:Ps.func,onImportError:Ps.func,onXmlChange:Ps.func,onJsonChange:Ps.func,onInject:Ps.func,onDispose:Ps.func};function ab(l){var u=l.initialXml,i=l.initialJson,d=l.toolboxConfiguration,p=l.workspaceConfiguration,m=l.className,b=l.onWorkspaceChange,y=l.onXmlChange,S=l.onJsonChange,L=l.onImportXmlError,U=l.onImportError,D=l.onInject,R=l.onDispose,V=Dt.useRef(null),B=Bw({ref:V,initialXml:u,initialJson:i,toolboxConfiguration:d,workspaceConfiguration:p,onWorkspaceChange:b,onImportXmlError:L,onImportError:U,onInject:D,onDispose:R}),k=B.xml,K=B.json,te=Dt.useRef(y);Dt.useEffect(function(){te.current=y},[y]);var ue=Dt.useRef(S);return Dt.useEffect(function(){ue.current=S},[S]),Dt.useEffect(function(){te.current&&k&&te.current(k),ue.current&&K&&ue.current(K)},[k,K]),F.jsx("div",{className:m,ref:V})}ab.propTypes=Fw;var jg={exports:{}},Xg={exports:{}},Uw=Xg.exports,sE;function Hw(){return sE||(sE=1,function(l,u){(function(i,d){l.exports=d()})(Uw,function(){var i=i||{Msg:Object.create(null)};return i.Msg.ADD_COMMENT="Add Comment",i.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",i.Msg.CHANGE_VALUE_TITLE="Change value:",i.Msg.CLEAN_UP="Clean up Blocks",i.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",i.Msg.COLLAPSE_ALL="Collapse Blocks",i.Msg.COLLAPSE_BLOCK="Collapse Block",i.Msg.COLOUR_BLEND_COLOUR1="colour 1",i.Msg.COLOUR_BLEND_COLOUR2="colour 2",i.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",i.Msg.COLOUR_BLEND_RATIO="ratio",i.Msg.COLOUR_BLEND_TITLE="blend",i.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",i.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",i.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",i.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",i.Msg.COLOUR_RANDOM_TITLE="random colour",i.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",i.Msg.COLOUR_RGB_BLUE="blue",i.Msg.COLOUR_RGB_GREEN="green",i.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",i.Msg.COLOUR_RGB_RED="red",i.Msg.COLOUR_RGB_TITLE="colour with",i.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",i.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",i.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",i.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",i.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",i.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",i.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",i.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",i.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",i.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",i.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",i.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",i.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",i.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",i.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",i.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",i.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",i.Msg.CONTROLS_IF_MSG_ELSE="else",i.Msg.CONTROLS_IF_MSG_ELSEIF="else if",i.Msg.CONTROLS_IF_MSG_IF="if",i.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",i.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",i.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",i.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",i.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",i.Msg.CONTROLS_REPEAT_INPUT_DO="do",i.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",i.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",i.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",i.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",i.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",i.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",i.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",i.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",i.Msg.DELETE_BLOCK="Delete Block",i.Msg.DELETE_VARIABLE="Delete the '%1' variable",i.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",i.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",i.Msg.DIALOG_CANCEL="Cancel",i.Msg.DIALOG_OK="OK",i.Msg.DISABLE_BLOCK="Disable Block",i.Msg.DUPLICATE_BLOCK="Duplicate",i.Msg.DUPLICATE_COMMENT="Duplicate Comment",i.Msg.ENABLE_BLOCK="Enable Block",i.Msg.EXPAND_ALL="Expand Blocks",i.Msg.EXPAND_BLOCK="Expand Block",i.Msg.EXTERNAL_INPUTS="External Inputs",i.Msg.HELP="Help",i.Msg.INLINE_INPUTS="Inline Inputs",i.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",i.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",i.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",i.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",i.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",i.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",i.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",i.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",i.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",i.Msg.LISTS_GET_INDEX_FIRST="first",i.Msg.LISTS_GET_INDEX_FROM_END="# from end",i.Msg.LISTS_GET_INDEX_FROM_START="#",i.Msg.LISTS_GET_INDEX_GET="get",i.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",i.Msg.LISTS_GET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",i.Msg.LISTS_GET_INDEX_LAST="last",i.Msg.LISTS_GET_INDEX_RANDOM="random",i.Msg.LISTS_GET_INDEX_REMOVE="remove",i.Msg.LISTS_GET_INDEX_TAIL="",i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",i.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",i.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",i.Msg.LISTS_GET_SUBLIST_END_LAST="to last",i.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",i.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",i.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",i.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",i.Msg.LISTS_GET_SUBLIST_TAIL="",i.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",i.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",i.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",i.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",i.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#finding-items-in-a-list",i.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",i.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",i.Msg.LISTS_INLIST="in list",i.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",i.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",i.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",i.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",i.Msg.LISTS_LENGTH_TITLE="length of %1",i.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",i.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",i.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",i.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",i.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",i.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",i.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",i.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",i.Msg.LISTS_SET_INDEX_INPUT_TO="as",i.Msg.LISTS_SET_INDEX_INSERT="insert at",i.Msg.LISTS_SET_INDEX_SET="set",i.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",i.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",i.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",i.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",i.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",i.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",i.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",i.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",i.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",i.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",i.Msg.LISTS_SORT_ORDER_DESCENDING="descending",i.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",i.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",i.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",i.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",i.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",i.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",i.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",i.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",i.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",i.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",i.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",i.Msg.LOGIC_BOOLEAN_FALSE="false",i.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",i.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",i.Msg.LOGIC_BOOLEAN_TRUE="true",i.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",i.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",i.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",i.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",i.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",i.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",i.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",i.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",i.Msg.LOGIC_NEGATE_TITLE="not %1",i.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",i.Msg.LOGIC_NULL="null",i.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",i.Msg.LOGIC_NULL_TOOLTIP="Returns null.",i.Msg.LOGIC_OPERATION_AND="and",i.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",i.Msg.LOGIC_OPERATION_OR="or",i.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",i.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",i.Msg.LOGIC_TERNARY_CONDITION="test",i.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",i.Msg.LOGIC_TERNARY_IF_FALSE="if false",i.Msg.LOGIC_TERNARY_IF_TRUE="if true",i.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",i.Msg.MATH_ADDITION_SYMBOL="+",i.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",i.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",i.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",i.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",i.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",i.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",i.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",i.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",i.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",i.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",i.Msg.MATH_CHANGE_TITLE="change %1 by %2",i.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",i.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",i.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: π (3.141…), e (2.718…), φ (1.618…), sqrt(2) (1.414…), sqrt(½) (0.707…), or ∞ (infinity).",i.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",i.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",i.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",i.Msg.MATH_DIVISION_SYMBOL="÷",i.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",i.Msg.MATH_IS_EVEN="is even",i.Msg.MATH_IS_NEGATIVE="is negative",i.Msg.MATH_IS_ODD="is odd",i.Msg.MATH_IS_POSITIVE="is positive",i.Msg.MATH_IS_PRIME="is prime",i.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",i.Msg.MATH_IS_WHOLE="is whole",i.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",i.Msg.MATH_MODULO_TITLE="remainder of %1 ÷ %2",i.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",i.Msg.MATH_MULTIPLICATION_SYMBOL="×",i.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",i.Msg.MATH_NUMBER_TOOLTIP="A number.",i.Msg.MATH_ONLIST_HELPURL="",i.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",i.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",i.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",i.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",i.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",i.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",i.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",i.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",i.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",i.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",i.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",i.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",i.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",i.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",i.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",i.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",i.Msg.MATH_POWER_SYMBOL="^",i.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",i.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",i.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",i.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",i.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",i.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",i.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",i.Msg.MATH_ROUND_OPERATOR_ROUND="round",i.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",i.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",i.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",i.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",i.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",i.Msg.MATH_SINGLE_OP_ROOT="square root",i.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",i.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",i.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",i.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",i.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",i.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",i.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",i.Msg.MATH_SUBTRACTION_SYMBOL="-",i.Msg.MATH_TRIG_ACOS="acos",i.Msg.MATH_TRIG_ASIN="asin",i.Msg.MATH_TRIG_ATAN="atan",i.Msg.MATH_TRIG_COS="cos",i.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",i.Msg.MATH_TRIG_SIN="sin",i.Msg.MATH_TRIG_TAN="tan",i.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",i.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",i.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",i.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",i.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",i.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",i.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",i.Msg.NEW_NUMBER_VARIABLE="Create number variable...",i.Msg.NEW_STRING_VARIABLE="Create string variable...",i.Msg.NEW_VARIABLE="Create variable...",i.Msg.NEW_VARIABLE_TITLE="New variable name:",i.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",i.Msg.ORDINAL_NUMBER_SUFFIX="",i.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",i.Msg.PROCEDURES_BEFORE_PARAMS="with:",i.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",i.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",i.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",i.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",i.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",i.Msg.PROCEDURES_CALL_DISABLED_DEF_WARNING="Can't run the user-defined function '%1' because the definition block is disabled.",i.Msg.PROCEDURES_CREATE_DO="Create '%1'",i.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",i.Msg.PROCEDURES_DEFNORETURN_DO="",i.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",i.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",i.Msg.PROCEDURES_DEFNORETURN_TITLE="to",i.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",i.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",i.Msg.PROCEDURES_DEFRETURN_RETURN="return",i.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",i.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",i.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",i.Msg.PROCEDURES_IFRETURN_HELPURL="https://c2.com/cgi/wiki?GuardClause",i.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",i.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",i.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",i.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",i.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",i.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",i.Msg.REDO="Redo",i.Msg.REMOVE_COMMENT="Remove Comment",i.Msg.RENAME_VARIABLE="Rename variable...",i.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",i.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",i.Msg.TEXT_APPEND_TITLE="to %1 append text %2",i.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",i.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",i.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",i.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",i.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",i.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",i.Msg.TEXT_CHARAT_FIRST="get first letter",i.Msg.TEXT_CHARAT_FROM_END="get letter # from end",i.Msg.TEXT_CHARAT_FROM_START="get letter #",i.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",i.Msg.TEXT_CHARAT_LAST="get last letter",i.Msg.TEXT_CHARAT_RANDOM="get random letter",i.Msg.TEXT_CHARAT_TAIL="",i.Msg.TEXT_CHARAT_TITLE="in text %1 %2",i.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",i.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",i.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",i.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",i.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",i.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",i.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",i.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",i.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",i.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",i.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",i.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",i.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",i.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",i.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",i.Msg.TEXT_GET_SUBSTRING_TAIL="",i.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",i.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",i.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",i.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",i.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",i.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",i.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",i.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",i.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",i.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",i.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",i.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",i.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",i.Msg.TEXT_LENGTH_TITLE="length of %1",i.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",i.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",i.Msg.TEXT_PRINT_TITLE="print %1",i.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",i.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",i.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",i.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",i.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",i.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",i.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",i.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",i.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",i.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",i.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",i.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",i.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",i.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",i.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",i.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",i.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",i.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",i.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",i.Msg.TODAY="Today",i.Msg.UNDO="Undo",i.Msg.UNNAMED_KEY="unnamed",i.Msg.VARIABLES_DEFAULT_NAME="item",i.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",i.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",i.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",i.Msg.VARIABLES_SET="set %1 to %2",i.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",i.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",i.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",i.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",i.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",i.Msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER="A variable named '%1' already exists as a parameter in the procedure '%2'.",i.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",i.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",i.Msg.CONTROLS_FOREACH_INPUT_DO=i.Msg.CONTROLS_REPEAT_INPUT_DO,i.Msg.CONTROLS_FOR_INPUT_DO=i.Msg.CONTROLS_REPEAT_INPUT_DO,i.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=i.Msg.CONTROLS_IF_MSG_ELSEIF,i.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=i.Msg.CONTROLS_IF_MSG_ELSE,i.Msg.CONTROLS_IF_IF_TITLE_IF=i.Msg.CONTROLS_IF_MSG_IF,i.Msg.CONTROLS_IF_MSG_THEN=i.Msg.CONTROLS_REPEAT_INPUT_DO,i.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=i.Msg.CONTROLS_REPEAT_INPUT_DO,i.Msg.LISTS_CREATE_WITH_ITEM_TITLE=i.Msg.VARIABLES_DEFAULT_NAME,i.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=i.Msg.LISTS_INLIST,i.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=i.Msg.LISTS_INLIST,i.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=i.Msg.LISTS_INLIST,i.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=i.Msg.LISTS_INLIST,i.Msg.MATH_CHANGE_TITLE_ITEM=i.Msg.VARIABLES_DEFAULT_NAME,i.Msg.PROCEDURES_DEFRETURN_COMMENT=i.Msg.PROCEDURES_DEFNORETURN_COMMENT,i.Msg.PROCEDURES_DEFRETURN_DO=i.Msg.PROCEDURES_DEFNORETURN_DO,i.Msg.PROCEDURES_DEFRETURN_PROCEDURE=i.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,i.Msg.PROCEDURES_DEFRETURN_TITLE=i.Msg.PROCEDURES_DEFNORETURN_TITLE,i.Msg.TEXT_APPEND_VARIABLE=i.Msg.VARIABLES_DEFAULT_NAME,i.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=i.Msg.VARIABLES_DEFAULT_NAME,i.Msg.COLOUR_HUE="20",i.Msg.LISTS_HUE="260",i.Msg.LOGIC_HUE="210",i.Msg.LOOPS_HUE="120",i.Msg.MATH_HUE="230",i.Msg.PROCEDURES_HUE="290",i.Msg.TEXTS_HUE="160",i.Msg.VARIABLES_DYNAMIC_HUE="310",i.Msg.VARIABLES_HUE="330",i.Msg})}(Xg)),Xg.exports}var Kg={exports:{}},Gw=Kg.exports,iE;function Vw(){return iE||(iE=1,function(l,u){(function(i,d){l.exports=d($m())})(Gw,function(i){var d=i.__namespace__,p=d.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),m={customContextMenu:function(_){if(this.isInFlyout)(this.type==="variables_get_dynamic"||this.type==="variables_get_reporter_dynamic")&&(N={text:d.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:b(this)},x=this.getField("VAR").getText(),x={text:d.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",x),enabled:!0,callback:y(this)},_.unshift(N),_.unshift(x));else{if(this.type==="variables_get_dynamic")var v="variables_set_dynamic",N=d.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else v="variables_get_dynamic",N=d.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var x=this.getField("VAR");v={type:v,fields:{VAR:x.saveState(!0)}},_.push({enabled:0<this.workspace.remainingCapacity(),text:N.replace("%1",x.getText()),callback:d.callbackFactory$$module$build$src$core$contextmenu(this,v)})}},onchange:function(_){_=this.getFieldValue("VAR"),_=d.getVariable$$module$build$src$core$variables(this.workspace,_),this.type==="variables_get_dynamic"?this.outputConnection.setCheck(_.type):this.getInput("VALUE").connection.setCheck(_.type)}},b=function(_){return function(){const v=_.workspace,N=_.getField("VAR").getVariable();d.renameVariable$$module$build$src$core$variables(v,N)}},y=function(_){return function(){const v=_.workspace,N=_.getField("VAR").getVariable();v.deleteVariableById(N.getId()),v.refreshToolboxSelection()}};d.registerMixin$$module$build$src$core$extensions("contextMenu_variableDynamicSetterGetter",m),d.defineBlocks$$module$build$src$core$common(p);var S={blocks:p},L=d.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),U={customContextMenu:function(_){if(this.isInFlyout)(this.type==="variables_get"||this.type==="variables_get_reporter")&&(N={text:d.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:D(this)},x=this.getField("VAR").getText(),x={text:d.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",x),enabled:!0,callback:R(this)},_.unshift(N),_.unshift(x));else{if(this.type==="variables_get")var v="variables_set",N=d.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else v="variables_get",N=d.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var x=this.getField("VAR");v={type:v,fields:{VAR:x.saveState(!0)}},_.push({enabled:0<this.workspace.remainingCapacity(),text:N.replace("%1",x.getText()),callback:d.callbackFactory$$module$build$src$core$contextmenu(this,v)})}}},D=function(_){return function(){const v=_.workspace,N=_.getField("VAR").getVariable();d.renameVariable$$module$build$src$core$variables(v,N)}},R=function(_){return function(){const v=_.workspace,N=_.getField("VAR").getVariable();v.deleteVariableById(N.getId()),v.refreshToolboxSelection()}};d.registerMixin$$module$build$src$core$extensions("contextMenu_variableSetterGetter",U),d.defineBlocks$$module$build$src$core$common(L);var V={blocks:L},B=d.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),k={init:function(){this.WHERE_OPTIONS_1=[[d.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[d.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[d.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[d.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[d.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[d.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(d.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(d.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT);const _=v=>{const N=d.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+v]});return N.setValidator(function(x){const fe=this.getValue();x=x==="FROM_START"||x==="FROM_END",x!==(fe==="FROM_START"||fe==="FROM_END")&&this.getSourceBlock().updateAt_(v,x)}),N};this.appendDummyInput("WHERE1_INPUT").appendField(_(1),"WHERE1"),this.appendDummyInput("AT1"),this.appendDummyInput("WHERE2_INPUT").appendField(_(2),"WHERE2"),this.appendDummyInput("AT2"),d.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(d.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(d.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){const _=d.createElement$$module$build$src$core$utils$xml("mutation");var v=this.getInput("AT1")instanceof d.ValueInput$$module$build$src$core$inputs$value_input;return _.setAttribute("at1",`${v}`),v=this.getInput("AT2")instanceof d.ValueInput$$module$build$src$core$inputs$value_input,_.setAttribute("at2",`${v}`),_},domToMutation:function(_){const v=_.getAttribute("at1")==="true";_=_.getAttribute("at2")==="true",this.updateAt_(1,v),this.updateAt_(2,_)},updateAt_:function(_,v){this.removeInput("AT"+_),this.removeInput("ORDINAL"+_,!0),v?(this.appendValueInput("AT"+_).setCheck("Number"),d.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+_).appendField(d.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+_),_===2&&d.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(d.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL)),_===1&&(this.moveInputBefore("AT1","WHERE2_INPUT"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","WHERE2_INPUT"))}};B.text_getSubstring=k,B.text_changeCase={init:function(){const _=[[d.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[d.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[d.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(d.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(d.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:_}),"CASE"),this.setOutput(!0,"String"),this.setTooltip(d.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_TOOLTIP)}},B.text_trim={init:function(){const _=[[d.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[d.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[d.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(d.Msg$$module$build$src$core$msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(d.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:_}),"MODE"),this.setOutput(!0,"String"),this.setTooltip(d.Msg$$module$build$src$core$msg.TEXT_TRIM_TOOLTIP)}},B.text_print={init:function(){this.jsonInit({message0:d.Msg$$module$build$src$core$msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:d.Msg$$module$build$src$core$msg.TEXT_PRINT_TOOLTIP,helpUrl:d.Msg$$module$build$src$core$msg.TEXT_PRINT_HELPURL})}};var K={updateType_:function(_){this.outputConnection.setCheck(_==="NUMBER"?"Number":"String")},mutationToDom:function(){const _=d.createElement$$module$build$src$core$utils$xml("mutation");return _.setAttribute("type",this.getFieldValue("TYPE")),_},domToMutation:function(_){this.updateType_(_.getAttribute("type"))}};B.text_prompt_ext=Object.assign({},K,{init:function(){var _=[[d.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[d.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(d.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),_=d.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:_}),_.setValidator(v=>{this.updateType_(v)}),this.appendValueInput("TEXT").appendField(_,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(()=>this.getFieldValue("TYPE")==="TEXT"?d.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:d.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}}),B.text_prompt=Object.assign({},K,{init:function(){this.mixin(te);var _=[[d.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[d.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(d.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),_=d.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:_}),_.setValidator(v=>{this.updateType_(v)}),this.appendDummyInput().appendField(_,"TYPE").appendField(this.newQuote_(!0)).appendField(d.fromJson$$module$build$src$core$field_registry({type:"field_input",text:""}),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(()=>this.getFieldValue("TYPE")==="TEXT"?d.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:d.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}}),B.text_count={init:function(){this.jsonInit({message0:d.Msg$$module$build$src$core$msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:d.Msg$$module$build$src$core$msg.TEXT_COUNT_TOOLTIP,helpUrl:d.Msg$$module$build$src$core$msg.TEXT_COUNT_HELPURL})}},B.text_replace={init:function(){this.jsonInit({message0:d.Msg$$module$build$src$core$msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:d.Msg$$module$build$src$core$msg.TEXT_REPLACE_TOOLTIP,helpUrl:d.Msg$$module$build$src$core$msg.TEXT_REPLACE_HELPURL})}},B.text_reverse={init:function(){this.jsonInit({message0:d.Msg$$module$build$src$core$msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:d.Msg$$module$build$src$core$msg.TEXT_REVERSE_TOOLTIP,helpUrl:d.Msg$$module$build$src$core$msg.TEXT_REVERSE_HELPURL})}};var te={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(_){for(let v=0,N;N=this.inputList[v];v++)for(let x=0,fe;fe=N.fieldRow[x];x++)if(_===fe.name){N.insertFieldAt(x,this.newQuote_(!0)),N.insertFieldAt(x+2,this.newQuote_(!1));return}console.warn('field named "'+_+'" not found in '+this.toDevString())},newQuote_:function(_){return _=this.RTL?!_:_,d.fromJson$$module$build$src$core$field_registry({type:"field_image",src:_?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,width:this.QUOTE_IMAGE_WIDTH,height:this.QUOTE_IMAGE_HEIGHT,alt:_?"“":"”"})}},ue=function(){this.mixin(te),this.quoteField_("TEXT")},he={itemCount_:0,mutationToDom:function(){const _=d.createElement$$module$build$src$core$utils$xml("mutation");return _.setAttribute("items",`${this.itemCount_}`),_},domToMutation:function(_){this.itemCount_=parseInt(_.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(_){this.itemCount_=_.itemCount,this.updateShape_()},decompose:function(_){const v=_.newBlock("text_create_join_container");v.initSvg();let N=v.getInput("STACK").connection;for(let x=0;x<this.itemCount_;x++){const fe=_.newBlock("text_create_join_item");fe.initSvg(),N.connect(fe.previousConnection),N=fe.nextConnection}return v},compose:function(_){var v=_.getInputTargetBlock("STACK");for(_=[];v;)v.isInsertionMarker()||_.push(v.valueConnection_),v=v.getNextBlock();for(v=0;v<this.itemCount_;v++){const N=this.getInput("ADD"+v).connection.targetConnection;N&&!_.includes(N)&&N.disconnect()}for(this.itemCount_=_.length,this.updateShape_(),v=0;v<this.itemCount_;v++){let N;(N=_[v])==null||N.reconnect(this,"ADD"+v)}},saveConnections:function(_){_=_.getInputTargetBlock("STACK");let v=0;for(;_;){if(_.isInsertionMarker()){_=_.getNextBlock();continue}const N=this.getInput("ADD"+v);_.valueConnection_=N&&N.connection.targetConnection,_=_.getNextBlock(),v++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var _=0;_<this.itemCount_;_++)if(!this.getInput("ADD"+_)){const v=this.appendValueInput("ADD"+_).setAlign(d.Align$$module$build$src$core$inputs$align.RIGHT);_===0&&v.appendField(d.Msg$$module$build$src$core$msg.TEXT_JOIN_TITLE_CREATEWITH)}for(_=this.itemCount_;this.getInput("ADD"+_);_++)this.removeInput("ADD"+_)}},pe=function(){this.mixin(te),this.itemCount_=2,this.updateShape_(),this.setMutator(new d.MutatorIcon$$module$build$src$core$icons$mutator_icon(["text_create_join_item"],this))};d.register$$module$build$src$core$extensions("text_append_tooltip",d.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_TEXT_APPEND_TOOLTIP}","VAR"));var ve=function(){this.setTooltip(()=>d.Msg$$module$build$src$core$msg.TEXT_INDEXOF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))},be={isAt_:!1,mutationToDom:function(){const _=d.createElement$$module$build$src$core$utils$xml("mutation");return _.setAttribute("at",`${this.isAt_}`),_},domToMutation:function(_){_=_.getAttribute("at")!=="false",this.updateAt_(_)},updateAt_:function(_){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),_&&(this.appendValueInput("AT").setCheck("Number"),d.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(d.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)),d.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(d.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL)),this.isAt_=_}},$e=function(){this.getField("WHERE").setValidator(function(_){_=_==="FROM_START"||_==="FROM_END";const v=this.getSourceBlock();_!==v.isAt_&&v.updateAt_(_)}),this.updateAt_(!0),this.setTooltip(()=>{var _=this.getFieldValue("WHERE");let v=d.Msg$$module$build$src$core$msg.TEXT_CHARAT_TOOLTIP;return(_==="FROM_START"||_==="FROM_END")&&(_=_==="FROM_START"?d.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:d.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(v+="  "+_.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),v})};d.register$$module$build$src$core$extensions("text_indexOf_tooltip",ve),d.register$$module$build$src$core$extensions("text_quotes",ue),d.registerMixin$$module$build$src$core$extensions("quote_image_mixin",te),d.registerMutator$$module$build$src$core$extensions("text_join_mutator",he,pe),d.registerMutator$$module$build$src$core$extensions("text_charAt_mutator",be,$e),d.defineBlocks$$module$build$src$core$common(B);var ce={blocks:B},ze={},C={setStatements_:function(_){this.hasStatements_!==_&&(_?(this.appendStatementInput("STACK").appendField(d.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=_)},updateParams_:function(){let _="";this.arguments_.length&&(_=d.Msg$$module$build$src$core$msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),d.disable$$module$build$src$core$events$utils();try{this.setFieldValue(_,"PARAMS")}finally{d.enable$$module$build$src$core$events$utils()}},mutationToDom:function(_){const v=d.createElement$$module$build$src$core$utils$xml("mutation");_&&v.setAttribute("name",this.getFieldValue("NAME"));for(let N=0;N<this.argumentVarModels_.length;N++){const x=d.createElement$$module$build$src$core$utils$xml("arg"),fe=this.argumentVarModels_[N];x.setAttribute("name",fe.name),x.setAttribute("varid",fe.getId()),_&&this.paramIds_&&x.setAttribute("paramId",this.paramIds_[N]),v.appendChild(x)}return this.hasStatements_||v.setAttribute("statements","false"),v},domToMutation:function(_){this.arguments_=[],this.argumentVarModels_=[];for(let N=0,x;x=_.childNodes[N];N++)if(x.nodeName.toLowerCase()==="arg"){var v=x;const fe=v.getAttribute("name");v=v.getAttribute("varid")||v.getAttribute("varId"),this.arguments_.push(fe),v=d.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,v,fe,""),v!==null?this.argumentVarModels_.push(v):console.log(`Failed to create a variable named "${fe}", ignoring.`)}this.updateParams_(),d.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_(_.getAttribute("statements")!=="false")},saveExtraState:function(){if(!this.argumentVarModels_.length&&this.hasStatements_)return null;const _=Object.create(null);if(this.argumentVarModels_.length){_.params=[];for(let v=0;v<this.argumentVarModels_.length;v++)_.params.push({name:this.argumentVarModels_[v].name,id:this.argumentVarModels_[v].getId()})}return this.hasStatements_||(_.hasStatements=!1),_},loadExtraState:function(_){if(this.arguments_=[],this.argumentVarModels_=[],_.params)for(let N=0;N<_.params.length;N++){var v=_.params[N];v=d.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,v.id,v.name,""),this.arguments_.push(v.name),this.argumentVarModels_.push(v)}this.updateParams_(),d.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_(_.hasStatements!==!1)},decompose:function(_){const v=d.createElement$$module$build$src$core$utils$xml("block");v.setAttribute("type","procedures_mutatorcontainer");var N=d.createElement$$module$build$src$core$utils$xml("statement");N.setAttribute("name","STACK"),v.appendChild(N);for(let fe=0;fe<this.arguments_.length;fe++){const ht=d.createElement$$module$build$src$core$utils$xml("block");ht.setAttribute("type","procedures_mutatorarg");var x=d.createElement$$module$build$src$core$utils$xml("field");x.setAttribute("name","NAME");const Ln=d.createTextNode$$module$build$src$core$utils$xml(this.arguments_[fe]);x.appendChild(Ln),ht.appendChild(x),x=d.createElement$$module$build$src$core$utils$xml("next"),ht.appendChild(x),N.appendChild(ht),N=x}return _=d.domToBlock$$module$build$src$core$xml(v,_),this.type==="procedures_defreturn"?_.setFieldValue(this.hasStatements_,"STATEMENTS"):_.removeInput("STATEMENT_INPUT"),d.mutateCallers$$module$build$src$core$procedures(this),_},compose:function(_){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];let v=_.getInputTargetBlock("STACK");for(;v&&!v.isInsertionMarker();){var N=v.getFieldValue("NAME");this.arguments_.push(N),N=this.workspace.getVariable(N,""),this.argumentVarModels_.push(N),this.paramIds_.push(v.id),v=v.nextConnection&&v.nextConnection.targetBlock()}if(this.updateParams_(),d.mutateCallers$$module$build$src$core$procedures(this),_=_.getFieldValue("STATEMENTS"),_!==null&&(_=_==="TRUE",this.hasStatements_!==_))if(_){this.setStatements_(!0);var x;(x=this.statementConnection_)==null||x.reconnect(this,"STACK"),this.statementConnection_=null}else x=this.getInput("STACK").connection,(this.statementConnection_=x.targetConnection)&&(x=x.targetBlock(),x.unplug(),x.bumpNeighbours()),this.setStatements_(!1)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(_,v){var N=this.workspace.getVariableById(_);if(N.type===""){N=N.name,v=this.workspace.getVariableById(v);var x=!1;for(let fe=0;fe<this.argumentVarModels_.length;fe++)this.argumentVarModels_[fe].getId()===_&&(this.arguments_[fe]=v.name,this.argumentVarModels_[fe]=v,x=!0);x&&(this.displayRenamedVar_(N,v.name),d.mutateCallers$$module$build$src$core$procedures(this))}},updateVarName:function(_){const v=_.name;let N=!1,x;for(let fe=0;fe<this.argumentVarModels_.length;fe++)this.argumentVarModels_[fe].getId()===_.getId()&&(x=this.arguments_[fe],this.arguments_[fe]=v,N=!0);N&&(this.displayRenamedVar_(x,v),d.mutateCallers$$module$build$src$core$procedures(this))},displayRenamedVar_:function(_,v){this.updateParams_();var N=this.getIcon(d.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE);if(N&&N.bubbleIsVisible()){N=N.getWorkspace().getAllBlocks(!1);for(let x=0,fe;fe=N[x];x++)fe.type==="procedures_mutatorarg"&&d.Names$$module$build$src$core$names.equals(_,fe.getFieldValue("NAME"))&&fe.setFieldValue(v,"NAME")}},customContextMenu:function(_){if(!this.isInFlyout){var v=this.getFieldValue("NAME"),N={type:this.callType_,extraState:{name:v,params:this.arguments_}};if(_.push({enabled:!0,text:d.Msg$$module$build$src$core$msg.PROCEDURES_CREATE_DO.replace("%1",v),callback:d.callbackFactory$$module$build$src$core$contextmenu(this,N)}),!this.isCollapsed())for(v=0;v<this.argumentVarModels_.length;v++){N=this.argumentVarModels_[v];const x={type:"variables_get",fields:{VAR:{name:N.name,id:N.getId(),type:N.type}}};_.push({enabled:!0,text:d.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",N.name),callback:d.callbackFactory$$module$build$src$core$contextmenu(this,x)})}}}};ze.procedures_defnoreturn=Object.assign({},C,{init:function(){var _=d.findLegalName$$module$build$src$core$procedures("",this);_=d.fromJson$$module$build$src$core$field_registry({type:"field_input",text:_}),_.setValidator(d.rename$$module$build$src$core$procedures),_.setSpellcheck(!1),this.appendDummyInput().appendField(d.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TITLE).appendField(_,"NAME").appendField("","PARAMS"),this.setMutator(new d.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&d.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(d.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(d.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(d.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},callType_:"procedures_callnoreturn"}),ze.procedures_defreturn=Object.assign({},C,{init:function(){var _=d.findLegalName$$module$build$src$core$procedures("",this);_=d.fromJson$$module$build$src$core$field_registry({type:"field_input",text:_}),_.setValidator(d.rename$$module$build$src$core$procedures),_.setSpellcheck(!1),this.appendDummyInput().appendField(d.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TITLE).appendField(_,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(d.Align$$module$build$src$core$inputs$align.RIGHT).appendField(d.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new d.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&d.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(d.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(d.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(d.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},callType_:"procedures_callreturn"});var me={init:function(){this.appendDummyInput().appendField(d.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(d.Msg$$module$build$src$core$msg.PROCEDURES_ALLOW_STATEMENTS).appendField(d.fromJson$$module$build$src$core$field_registry({type:"field_checkbox",checked:!0}),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(d.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}};ze.procedures_mutatorcontainer=me;var Ce={init:function(){const _=d.fromJson$$module$build$src$core$field_registry({type:"field_input",text:d.DEFAULT_ARG$$module$build$src$core$procedures});_.setValidator(this.validator_),_.oldShowEditorFn_=_.showEditor_,_.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(d.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TITLE).appendField(_,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(d.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,_.onFinishEditing_=this.deleteIntermediateVars_,_.createdVariables_=[],_.onFinishEditing_("x")},validator_:function(_){var v=this.getSourceBlock();const N=v.workspace.getRootWorkspace();if(_=_.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,""),!_)return null;const x=(v.workspace.targetWorkspace||v.workspace).getAllBlocks(!1),fe=_.toLowerCase();for(let ht=0;ht<x.length;ht++){if(x[ht].id===this.getSourceBlock().id)continue;const Ln=x[ht].getFieldValue("NAME");if(Ln&&Ln.toLowerCase()===fe)return null}return v.isInFlyout||((v=N.getVariable(_,""))&&v.name!==_&&N.renameVariableById(v.getId(),_),v||(v=N.createVariable(_,""))&&this.createdVariables_&&this.createdVariables_.push(v)),_},deleteIntermediateVars_:function(_){const v=this.getSourceBlock().workspace.getRootWorkspace();if(v)for(let N=0;N<this.createdVariables_.length;N++){const x=this.createdVariables_[N];x.name!==_&&v.deleteVariableById(x.getId())}}};ze.procedures_mutatorarg=Ce;var Me="DISABLED_PROCEDURE_DEFINITION",Re={getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(_,v){d.Names$$module$build$src$core$names.equals(_,this.getProcedureCall())&&(this.setFieldValue(v,"NAME"),this.setTooltip((this.outputConnection?d.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_TOOLTIP:d.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",v)))},setProcedureParameters_:function(_,v){var N=d.getDefinition$$module$build$src$core$procedures(this.getProcedureCall(),this.workspace);if((N=(N=N&&N.getIcon(d.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE))&&N.bubbleIsVisible())?this.setCollapsed(!1):(this.quarkConnections_={},this.quarkIds_=null),_.join(`
`)===this.arguments_.join(`
`))this.quarkIds_=v;else{if(v.length!==_.length)throw RangeError("paramNames and paramIds must be the same length.");this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]);for(let fe=0;fe<this.arguments_.length;fe++){var x=this.getInput("ARG"+fe);x&&(x=x.connection.targetConnection,this.quarkConnections_[this.quarkIds_[fe]]=x,N&&x&&!v.includes(this.quarkIds_[fe])&&(x.disconnect(),x.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(_),this.argumentVarModels_=[],_=0;_<this.arguments_.length;_++)N=d.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,null,this.arguments_[_],""),this.argumentVarModels_.push(N);if(this.updateShape_(),this.quarkIds_=v){for(v=0;v<this.arguments_.length;v++)if(_=this.quarkIds_[v],_ in this.quarkConnections_){let fe;(fe=this.quarkConnections_[_])!=null&&fe.reconnect(this,"ARG"+v)||delete this.quarkConnections_[_]}}}},updateShape_:function(){for(var _=0;_<this.arguments_.length;_++){var v=this.getField("ARGNAME"+_);if(v){d.disable$$module$build$src$core$events$utils();try{v.setValue(this.arguments_[_])}finally{d.enable$$module$build$src$core$events$utils()}}else v=d.fromJson$$module$build$src$core$field_registry({type:"field_label",text:this.arguments_[_]}),this.appendValueInput("ARG"+_).setAlign(d.Align$$module$build$src$core$inputs$align.RIGHT).appendField(v,"ARGNAME"+_)}for(_=this.arguments_.length;this.getInput("ARG"+_);_++)this.removeInput("ARG"+_);(_=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||_.appendField(d.Msg$$module$build$src$core$msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"):this.getField("WITH")&&_.removeField("WITH"))},mutationToDom:function(){const _=d.createElement$$module$build$src$core$utils$xml("mutation");_.setAttribute("name",this.getProcedureCall());for(let v=0;v<this.arguments_.length;v++){const N=d.createElement$$module$build$src$core$utils$xml("arg");N.setAttribute("name",this.arguments_[v]),_.appendChild(N)}return _},domToMutation:function(_){var v=_.getAttribute("name");this.renameProcedure(this.getProcedureCall(),v),v=[];const N=[];for(let x=0,fe;fe=_.childNodes[x];x++)fe.nodeName.toLowerCase()==="arg"&&(v.push(fe.getAttribute("name")),N.push(fe.getAttribute("paramId")));this.setProcedureParameters_(v,N)},saveExtraState:function(){const _=Object.create(null);return _.name=this.getProcedureCall(),this.arguments_.length&&(_.params=this.arguments_),_},loadExtraState:function(_){if(this.renameProcedure(this.getProcedureCall(),_.name),_=_.params){const v=[];v.length=_.length,v.fill(null),this.setProcedureParameters_(_,v)}},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(_){if(this.workspace&&!this.workspace.isFlyout&&_.recordUndo)if(_.type===d.BLOCK_CREATE$$module$build$src$core$events$events&&_.ids.includes(this.id)){var v=this.getProcedureCall(),N=d.getDefinition$$module$build$src$core$procedures(v,this.workspace);if(!N||N.type===this.defType_&&JSON.stringify(N.getVars())===JSON.stringify(this.arguments_)||(N=null),N)N.isEnabled()||(this.setDisabledReason(!0,Me),this.setWarningText(d.Msg$$module$build$src$core$msg.PROCEDURES_CALL_DISABLED_DEF_WARNING.replace("%1",v)));else{d.setGroup$$module$build$src$core$events$utils(_.group),_=d.createElement$$module$build$src$core$utils$xml("xml"),v=d.createElement$$module$build$src$core$utils$xml("block"),v.setAttribute("type",this.defType_),N=this.getRelativeToSurfaceXY();var x=N.y+2*d.config$$module$build$src$core$config.snapRadius;v.setAttribute("x",`${N.x+d.config$$module$build$src$core$config.snapRadius*(this.RTL?-1:1)}`),v.setAttribute("y",`${x}`),N=this.mutationToDom(),v.appendChild(N),N=d.createElement$$module$build$src$core$utils$xml("field"),N.setAttribute("name","NAME"),x=this.getProcedureCall();const fe=d.findLegalName$$module$build$src$core$procedures(x,this);x!==fe&&this.renameProcedure(x,fe),N.appendChild(d.createTextNode$$module$build$src$core$utils$xml(x)),v.appendChild(N),_.appendChild(v),d.domToWorkspace$$module$build$src$core$xml(_,this.workspace),d.setGroup$$module$build$src$core$events$utils(!1)}}else _.type===d.BLOCK_DELETE$$module$build$src$core$events$events?(v=this.getProcedureCall(),d.getDefinition$$module$build$src$core$procedures(v,this.workspace)||(d.setGroup$$module$build$src$core$events$utils(_.group),this.dispose(!0),d.setGroup$$module$build$src$core$events$utils(!1))):_.type===d.BLOCK_CHANGE$$module$build$src$core$events$events&&_.element==="disabled"&&(v=this.getProcedureCall(),(x=d.getDefinition$$module$build$src$core$procedures(v,this.workspace))&&x.id===_.blockId&&((N=d.getGroup$$module$build$src$core$events$utils())&&console.log("Saw an existing group while responding to a definition change"),d.setGroup$$module$build$src$core$events$utils(_.group),_=x.isEnabled(),this.setDisabledReason(!_,Me),this.setWarningText(_?null:d.Msg$$module$build$src$core$msg.PROCEDURES_CALL_DISABLED_DEF_WARNING.replace("%1",v)),d.setGroup$$module$build$src$core$events$utils(N)))},customContextMenu:function(_){if(this.workspace.isMovable()){var v=this.getProcedureCall(),N=this.workspace;_.push({enabled:!0,text:d.Msg$$module$build$src$core$msg.PROCEDURES_HIGHLIGHT_DEF,callback:function(){const x=d.getDefinition$$module$build$src$core$procedures(v,N);x&&(N.centerOnBlock(x.id),d.setSelected$$module$build$src$core$common(x))}})}}};ze.procedures_callnoreturn=Object.assign({},Re,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(d.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null},defType_:"procedures_defnoreturn"}),ze.procedures_callreturn=Object.assign({},Re,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(d.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null},defType_:"procedures_defreturn"});var Ge="UNPARENTED_IFRETURN",Xe={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(d.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(d.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(d.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(d.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){const _=d.createElement$$module$build$src$core$utils$xml("mutation");return _.setAttribute("value",String(Number(this.hasReturnValue_))),_},domToMutation:function(_){this.hasReturnValue_=_.getAttribute("value")==="1",this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(d.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(_){if(!(this.workspace.isDragging&&this.workspace.isDragging()||_.type!==d.BLOCK_MOVE$$module$build$src$core$events$events&&_.type!==d.BLOCK_CREATE$$module$build$src$core$events$events)){_=!1;var v=this;do{if(this.FUNCTION_TYPES.includes(v.type)){_=!0;break}v=v.getSurroundParent()}while(v);if(_?(v.type==="procedures_defnoreturn"&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(d.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):v.type!=="procedures_defreturn"||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(d.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null)):this.setWarningText(d.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_WARNING),!this.isInFlyout)try{d.setRecordUndo$$module$build$src$core$events$utils(!1),this.setDisabledReason(!_,Ge)}finally{d.setRecordUndo$$module$build$src$core$events$utils(!0)}}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]};ze.procedures_ifreturn=Xe,d.defineBlocks$$module$build$src$core$common(ze);var Ye={blocks:ze},X=d.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["π","PI"],["e","E"],["φ","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(½)","SQRT1_2"],["∞","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),xe={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"};d.register$$module$build$src$core$extensions("math_op_tooltip",d.buildTooltipForDropdown$$module$build$src$core$extensions("OP",xe));var Ee={mutationToDom:function(){const _=d.createElement$$module$build$src$core$utils$xml("mutation"),v=this.getFieldValue("PROPERTY")==="DIVISIBLE_BY";return _.setAttribute("divisor_input",String(v)),_},domToMutation:function(_){_=_.getAttribute("divisor_input")==="true",this.updateShape_(_)},updateShape_:function(_){const v=this.getInput("DIVISOR");_?v||this.appendValueInput("DIVISOR").setCheck("Number"):v&&this.removeInput("DIVISOR")}},H=function(){this.getField("PROPERTY").setValidator(function(_){_=_==="DIVISIBLE_BY",this.getSourceBlock().updateShape_(_)})};d.registerMutator$$module$build$src$core$extensions("math_is_divisibleby_mutator",Ee,H),d.register$$module$build$src$core$extensions("math_change_tooltip",d.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_MATH_CHANGE_TOOLTIP}","VAR"));var se={updateType_:function(_){_==="MODE"?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){const _=d.createElement$$module$build$src$core$utils$xml("mutation");return _.setAttribute("op",this.getFieldValue("OP")),_},domToMutation:function(_){if(_=_.getAttribute("op"),_===null)throw new TypeError("xmlElement had no op attribute");this.updateType_(_)}},We=function(){this.getField("OP").setValidator((function(_){this.updateType_(_)}).bind(this))};d.registerMutator$$module$build$src$core$extensions("math_modes_of_list_mutator",se,We),d.defineBlocks$$module$build$src$core$common(X);var Pe={blocks:X},je=d.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),Be={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"};d.register$$module$build$src$core$extensions("controls_whileUntil_tooltip",d.buildTooltipForDropdown$$module$build$src$core$extensions("MODE",Be));var we={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"};d.register$$module$build$src$core$extensions("controls_flow_tooltip",d.buildTooltipForDropdown$$module$build$src$core$extensions("FLOW",we));var Ke={customContextMenu:function(_){if(!this.isInFlyout){var v=this.getField("VAR"),N=v.getVariable().name;this.isCollapsed()||N===null||(v={type:"variables_get",fields:{VAR:v.saveState(!0)}},_.push({enabled:!0,text:d.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",N),callback:d.callbackFactory$$module$build$src$core$contextmenu(this,v)}))}}};d.registerMixin$$module$build$src$core$extensions("contextMenu_newGetVariableBlock",Ke),d.register$$module$build$src$core$extensions("controls_for_tooltip",d.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),d.register$$module$build$src$core$extensions("controls_forEach_tooltip",d.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR"));var qe=new Set(["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"]),kt="CONTROL_FLOW_NOT_IN_LOOP",Wt={getSurroundLoop:function(){let _=this;do{if(qe.has(_.type))return _;_=_.getSurroundParent()}while(_);return null},onchange:function(_){const v=this.workspace;if(v.isDragging&&!v.isDragging()&&(_.type===d.BLOCK_MOVE$$module$build$src$core$events$events||_.type===d.BLOCK_CREATE$$module$build$src$core$events$events)&&(_=!!this.getSurroundLoop(),this.setWarningText(_?null:d.Msg$$module$build$src$core$msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout))try{d.setRecordUndo$$module$build$src$core$events$utils(!1),this.setDisabledReason(!_,kt)}finally{d.setRecordUndo$$module$build$src$core$events$utils(!0)}}};d.registerMixin$$module$build$src$core$extensions("controls_flow_in_loop_check",Wt),d.defineBlocks$$module$build$src$core$common(je);var ln={blocks:je,loopTypes:qe},Yn=d.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["≠","NEQ"],["‏<","LT"],["‏≤","LTE"],["‏>","GT"],["‏≥","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]},{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),Gs={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"};d.register$$module$build$src$core$extensions("logic_op_tooltip",d.buildTooltipForDropdown$$module$build$src$core$extensions("OP",Gs));var En={elseifCount_:0,elseCount_:0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const _=d.createElement$$module$build$src$core$utils$xml("mutation");return this.elseifCount_&&_.setAttribute("elseif",String(this.elseifCount_)),this.elseCount_&&_.setAttribute("else","1"),_},domToMutation:function(_){this.elseifCount_=parseInt(_.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(_.getAttribute("else"),10)||0,this.rebuildShape_()},saveExtraState:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const _=Object.create(null);return this.elseifCount_&&(_.elseIfCount=this.elseifCount_),this.elseCount_&&(_.hasElse=!0),_},loadExtraState:function(_){this.elseifCount_=_.elseIfCount||0,this.elseCount_=_.hasElse?1:0,this.updateShape_()},decompose:function(_){const v=_.newBlock("controls_if_if");v.initSvg();let N=v.nextConnection;for(let x=1;x<=this.elseifCount_;x++){const fe=_.newBlock("controls_if_elseif");fe.initSvg(),N.connect(fe.previousConnection),N=fe.nextConnection}return this.elseCount_&&(_=_.newBlock("controls_if_else"),_.initSvg(),N.connect(_.previousConnection)),v},compose:function(_){_=_.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;const v=[null],N=[null];let x=null;for(;_;){if(!_.isInsertionMarker())switch(_.type){case"controls_if_elseif":this.elseifCount_++,v.push(_.valueConnection_),N.push(_.statementConnection_);break;case"controls_if_else":this.elseCount_++,x=_.statementConnection_;break;default:throw TypeError("Unknown block type: "+_.type)}_=_.getNextBlock()}this.updateShape_(),this.reconnectChildBlocks_(v,N,x)},saveConnections:function(_){_=_.nextConnection.targetBlock();let v=1;for(;_;){if(!_.isInsertionMarker())switch(_.type){case"controls_if_elseif":var N=this.getInput("IF"+v);const x=this.getInput("DO"+v);_.valueConnection_=N&&N.connection.targetConnection,_.statementConnection_=x&&x.connection.targetConnection,v++;break;case"controls_if_else":N=this.getInput("ELSE"),_.statementConnection_=N&&N.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+_.type)}_=_.getNextBlock()}},rebuildShape_:function(){const _=[null],v=[null];let N=null;this.getInput("ELSE")&&(N=this.getInput("ELSE").connection.targetConnection);for(let x=1;this.getInput("IF"+x);x++){const fe=this.getInput("IF"+x),ht=this.getInput("DO"+x);_.push(fe.connection.targetConnection),v.push(ht.connection.targetConnection)}this.updateShape_(),this.reconnectChildBlocks_(_,v,N)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var _=1;this.getInput("IF"+_);_++)this.removeInput("IF"+_),this.removeInput("DO"+_);for(_=1;_<=this.elseifCount_;_++)this.appendValueInput("IF"+_).setCheck("Boolean").appendField(d.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+_).appendField(d.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(d.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(_,v,N){for(let x=1;x<=this.elseifCount_;x++){let fe;(fe=_[x])==null||fe.reconnect(this,"IF"+x);let ht;(ht=v[x])==null||ht.reconnect(this,"DO"+x)}N==null||N.reconnect(this,"ELSE")}};d.registerMutator$$module$build$src$core$extensions("controls_if_mutator",En,null,["controls_if_elseif","controls_if_else"]);var zt=function(){this.setTooltip((function(){if(this.elseifCount_||this.elseCount_){if(!this.elseifCount_&&this.elseCount_)return d.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_2;if(this.elseifCount_&&!this.elseCount_)return d.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_3;if(this.elseifCount_&&this.elseCount_)return d.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_4}else return d.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_1;return""}).bind(this))};d.register$$module$build$src$core$extensions("controls_if_tooltip",zt);var Br={onchange:function(_){this.prevBlocks_||(this.prevBlocks_=[null,null]);var v=this.getInputTargetBlock("A");const N=this.getInputTargetBlock("B");v&&N&&!this.workspace.connectionChecker.doTypeChecks(v.outputConnection,N.outputConnection)&&(d.setGroup$$module$build$src$core$events$utils(_.group),_=this.prevBlocks_[0],_!==v&&(v.unplug(),!_||_.isDisposed()||_.isShadow()||this.getInput("A").connection.connect(_.outputConnection)),v=this.prevBlocks_[1],v!==N&&(N.unplug(),!v||v.isDisposed()||v.isShadow()||this.getInput("B").connection.connect(v.outputConnection)),this.bumpNeighbours(),d.setGroup$$module$build$src$core$events$utils(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},ir=function(){this.mixin(Br)};d.register$$module$build$src$core$extensions("logic_compare",ir);var Vs={prevParentConnection_:null,onchange:function(_){const v=this.getInputTargetBlock("THEN"),N=this.getInputTargetBlock("ELSE"),x=this.outputConnection.targetConnection;if((v||N)&&x)for(let fe=0;2>fe;fe++){const ht=fe===1?v:N;ht&&!ht.workspace.connectionChecker.doTypeChecks(ht.outputConnection,x)&&(d.setGroup$$module$build$src$core$events$utils(_.group),x===this.prevParentConnection_?(this.unplug(),x.getSourceBlock().bumpNeighbours()):(ht.unplug(),ht.bumpNeighbours()),d.setGroup$$module$build$src$core$events$utils(!1))}this.prevParentConnection_=x}};d.registerMixin$$module$build$src$core$extensions("logic_ternary",Vs),d.defineBlocks$$module$build$src$core$common(Yn);var Le={blocks:Yn},nt=d.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),et={init:function(){this.setHelpUrl(d.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new d.MutatorIcon$$module$build$src$core$icons$mutator_icon(["lists_create_with_item"],this)),this.setTooltip(d.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){const _=d.createElement$$module$build$src$core$utils$xml("mutation");return _.setAttribute("items",String(this.itemCount_)),_},domToMutation:function(_){if(_=_.getAttribute("items"),!_)throw new TypeError("element did not have items");this.itemCount_=parseInt(_,10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(_){this.itemCount_=_.itemCount,this.updateShape_()},decompose:function(_){const v=_.newBlock("lists_create_with_container");v.initSvg();let N=v.getInput("STACK").connection;for(let x=0;x<this.itemCount_;x++){const fe=_.newBlock("lists_create_with_item");if(fe.initSvg(),!fe.previousConnection)throw Error("itemBlock has no previousConnection");N.connect(fe.previousConnection),N=fe.nextConnection}return v},compose:function(_){var v=_.getInputTargetBlock("STACK");for(_=[];v;)v.isInsertionMarker()||_.push(v.valueConnection_),v=v.getNextBlock();for(v=0;v<this.itemCount_;v++){const N=this.getInput("ADD"+v).connection.targetConnection;N&&!_.includes(N)&&N.disconnect()}for(this.itemCount_=_.length,this.updateShape_(),v=0;v<this.itemCount_;v++){let N;(N=_[v])==null||N.reconnect(this,"ADD"+v)}},saveConnections:function(_){_=_.getInputTargetBlock("STACK");let v=0;for(;_;){if(_.isInsertionMarker()){_=_.getNextBlock();continue}const N=this.getInput("ADD"+v);let x;_.valueConnection_=(x=N)==null?void 0:x.connection.targetConnection,_=_.getNextBlock(),v++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(d.Msg$$module$build$src$core$msg.LISTS_CREATE_EMPTY_TITLE);for(var _=0;_<this.itemCount_;_++)if(!this.getInput("ADD"+_)){const v=this.appendValueInput("ADD"+_).setAlign(d.Align$$module$build$src$core$inputs$align.RIGHT);_===0&&v.appendField(d.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_INPUT_WITH)}for(_=this.itemCount_;this.getInput("ADD"+_);_++)this.removeInput("ADD"+_)}};nt.lists_create_with=et;var Fr={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(d.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(d.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}};nt.lists_create_with_container=Fr;var bn={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(d.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}};nt.lists_create_with_item=bn;var dn={init:function(){var _=[[d.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_FIRST,"FIRST"],[d.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_LAST,"LAST"]];if(this.setHelpUrl(d.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(d.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_INPUT_IN_LIST),_=d.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:_}),!_)throw Error("field_dropdown not found");this.appendValueInput("FIND").appendField(_,"END"),this.setInputsInline(!0),this.setTooltip(()=>d.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))}};nt.lists_indexOf=dn;var br={init:function(){var _=[[d.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET,"GET"],[d.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[d.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[d.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[d.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[d.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[d.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[d.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(d.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),_=d.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:_}),_.setValidator(function(v){v=v==="REMOVE",this.getSourceBlock().updateStatement_(v)}),this.appendValueInput("VALUE").setCheck("Array").appendField(d.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(_,"MODE").appendField("","SPACE"),_=d.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS}),_.setValidator(function(v){const N=this.getValue();v=v==="FROM_START"||v==="FROM_END",v!==(N==="FROM_START"||N==="FROM_END")&&this.getSourceBlock().updateAt_(v)}),this.appendDummyInput().appendField(_,"WHERE"),this.appendDummyInput("AT"),d.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(d.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0),this.setTooltip(()=>{const v=this.getFieldValue("MODE"),N=this.getFieldValue("WHERE");let x="";switch(v+" "+N){case"GET FROM_START":case"GET FROM_END":x=d.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":x=d.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":x=d.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":x=d.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":x=d.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":x=d.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":x=d.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":x=d.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":x=d.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":x=d.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":x=d.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":x=d.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return(N==="FROM_START"||N==="FROM_END")&&(x+="  "+(N==="FROM_START"?d.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:d.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),x})},mutationToDom:function(){const _=d.createElement$$module$build$src$core$utils$xml("mutation");_.setAttribute("statement",String(!this.outputConnection));const v=this.getInput("AT")instanceof d.ValueInput$$module$build$src$core$inputs$value_input;return _.setAttribute("at",String(v)),_},domToMutation:function(_){const v=_.getAttribute("statement")==="true";this.updateStatement_(v),_=_.getAttribute("at")!=="false",this.updateAt_(_)},saveExtraState:function(){return this.outputConnection?null:{isStatement:!0}},loadExtraState:function(_){_.isStatement?this.updateStatement_(!0):typeof _=="string"&&this.domToMutation(d.textToDom$$module$build$src$core$utils$xml(_))},updateStatement_:function(_){_!==!this.outputConnection&&(this.unplug(!0,!0),_?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(_){this.removeInput("AT"),this.removeInput("ORDINAL",!0),_?(this.appendValueInput("AT").setCheck("Number"),d.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(d.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"),d.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}};nt.lists_getIndex=br;var Bt={init:function(){var _=[[d.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_SET,"SET"],[d.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[d.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[d.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[d.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[d.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[d.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(d.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(d.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_IN_LIST),_=d.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:_}),this.appendDummyInput().appendField(_,"MODE").appendField("","SPACE"),_=d.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS}),_.setValidator(function(v){const N=this.getValue();v=v==="FROM_START"||v==="FROM_END",v!==(N==="FROM_START"||N==="FROM_END")&&this.getSourceBlock().updateAt_(v)}),this.appendDummyInput().appendField(_,"WHERE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(d.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0),this.setTooltip(()=>{const v=this.getFieldValue("MODE"),N=this.getFieldValue("WHERE");let x="";switch(v+" "+N){case"SET FROM_START":case"SET FROM_END":x=d.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":x=d.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":x=d.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":x=d.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":x=d.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":x=d.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":x=d.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":x=d.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return(N==="FROM_START"||N==="FROM_END")&&(x+="  "+d.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),x})},mutationToDom:function(){const _=d.createElement$$module$build$src$core$utils$xml("mutation"),v=this.getInput("AT")instanceof d.ValueInput$$module$build$src$core$inputs$value_input;return _.setAttribute("at",String(v)),_},domToMutation:function(_){_=_.getAttribute("at")!=="false",this.updateAt_(_)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(_){this.removeInput("AT"),this.removeInput("ORDINAL",!0),_?(this.appendValueInput("AT").setCheck("Number"),d.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(d.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"),this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO")}};nt.lists_setIndex=Bt;var Rn={init:function(){this.WHERE_OPTIONS_1=[[d.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[d.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[d.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[d.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[d.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[d.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(d.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(d.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_INPUT_IN_LIST);const _=v=>{const N=d.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+v]});return N.setValidator(function(x){const fe=this.getValue();x=x==="FROM_START"||x==="FROM_END",x!==(fe==="FROM_START"||fe==="FROM_END")&&this.getSourceBlock().updateAt_(v,x)}),N};this.appendDummyInput("WHERE1_INPUT").appendField(_(1),"WHERE1"),this.appendDummyInput("AT1"),this.appendDummyInput("WHERE2_INPUT").appendField(_(2),"WHERE2"),this.appendDummyInput("AT2"),d.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(d.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(d.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){const _=d.createElement$$module$build$src$core$utils$xml("mutation");var v=this.getInput("AT1")instanceof d.ValueInput$$module$build$src$core$inputs$value_input;return _.setAttribute("at1",String(v)),v=this.getInput("AT2")instanceof d.ValueInput$$module$build$src$core$inputs$value_input,_.setAttribute("at2",String(v)),_},domToMutation:function(_){const v=_.getAttribute("at1")==="true";_=_.getAttribute("at2")==="true",this.updateAt_(1,v),this.updateAt_(2,_)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(_,v){this.removeInput("AT"+_),this.removeInput("ORDINAL"+_,!0),v?(this.appendValueInput("AT"+_).setCheck("Number"),d.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+_).appendField(d.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+_),_===1&&(this.moveInputBefore("AT1","WHERE2_INPUT"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","WHERE2_INPUT")),d.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}};nt.lists_getSublist=Rn,nt.lists_sort={init:function(){this.jsonInit({message0:"%{BKY_LISTS_SORT_TITLE}",args0:[{type:"field_dropdown",name:"TYPE",options:[["%{BKY_LISTS_SORT_TYPE_NUMERIC}","NUMERIC"],["%{BKY_LISTS_SORT_TYPE_TEXT}","TEXT"],["%{BKY_LISTS_SORT_TYPE_IGNORECASE}","IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[["%{BKY_LISTS_SORT_ORDER_ASCENDING}","1"],["%{BKY_LISTS_SORT_ORDER_DESCENDING}","-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_SORT_TOOLTIP}",helpUrl:"%{BKY_LISTS_SORT_HELPURL}"})}},nt.lists_split={init:function(){const _=d.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:[[d.Msg$$module$build$src$core$msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[d.Msg$$module$build$src$core$msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]]});if(!_)throw Error("field_dropdown not found");_.setValidator(v=>{this.updateType_(v)}),this.setHelpUrl(d.Msg$$module$build$src$core$msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(_,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(d.Msg$$module$build$src$core$msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(()=>{const v=this.getFieldValue("MODE");if(v==="SPLIT")return d.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_SPLIT;if(v==="JOIN")return d.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+v)})},updateType_:function(_){if(this.getFieldValue("MODE")!==_){const v=this.getInput("INPUT").connection;v.setShadowDom(null);const N=v.targetBlock();N&&(v.disconnect(),N.isShadow()?N.dispose(!1):this.bumpNeighbours())}_==="SPLIT"?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){const _=d.createElement$$module$build$src$core$utils$xml("mutation");return _.setAttribute("mode",this.getFieldValue("MODE")),_},domToMutation:function(_){this.updateType_(_.getAttribute("mode"))},saveExtraState:function(){return null},loadExtraState:function(){}},d.defineBlocks$$module$build$src$core$common(nt);var fi={blocks:nt},J=Object.assign({},nt,Yn,je,X,ze,B,L,p),ke={blocks:J,lists:fi,logic:Le,loops:ln,math:Pe,procedures:Ye,texts:ce,variables:V,variablesDynamic:S};return ke.__namespace__=d,ke})}(Kg)),Kg.exports}var Ww=jg.exports,oE;function zw(){return oE||(oE=1,function(l,u){(function(i,d){l.exports=d($m(),Hw(),Vw())})(Ww,function(i,d,p){return i.setLocale(d),i})}(jg)),jg.exports}zw();const jw=`<xml id="toolbox" style="display: none">
  <block type="controls_if"></block>
  <block type="controls_whileUntil"></block>
</xml>`;function Xw(){const[l,u]=Dt.useState();return F.jsxs(wC,{display:"flex",flexDirection:"column",alignItems:"center",p:2,children:[F.jsx("h1",{children:"My Blog"}),F.jsxs(lE,{title:"Playing around with react",date:"2025-01-22",children:[F.jsx("p",{children:"Today I started playing around with react. It's pretty cool!  I made a chessboard:"}),F.jsx(Ow,{id:"BasicBoard"}),F.jsx("p",{children:"Also, a blockly coding interface:"}),F.jsx(ab,{className:"width-100",style:{height:400},toolboxConfiguration:jw,initialXml:l,onXmlChange:u})]}),F.jsxs(lE,{title:"Hello, World!",date:"2025-01-21",children:[F.jsx("p",{children:"Made links to other blogs:"}),F.jsx(oy,{})]})]})}function lE({title:l,date:u,children:i}){return F.jsx(AC,{variant:"outlined",style:{marginBottom:"16px",width:"80%"},children:F.jsxs(xC,{children:[F.jsx(I$,{variant:"h5",component:"h2",children:l}),F.jsx(I$,{color:"textSecondary",children:u}),F.jsx(I$,{variant:"body2",component:"div",children:i})]})})}iy.createRoot(document.getElementById("root")).render(F.jsx(le.StrictMode,{children:F.jsx(Xw,{})}));
